webpackJsonp([0],[,,,,,,,,,,function(t,e){function feature(t,e){return{type:"Feature",properties:e||{},geometry:t}}t.exports.feature=feature,t.exports.point=function(t,e){if(!Array.isArray(t))throw new Error("Coordinates must be an array");if(t.length<2)throw new Error("Coordinates must be at least 2 numbers long");return feature({type:"Point",coordinates:t.slice()},e)},t.exports.polygon=function(t,e){if(!t)throw new Error("No coordinates passed");for(var n=0;n<t.length;n++){var i=t[n];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var r=0;r<i[i.length-1].length;r++)if(i[i.length-1][r]!==i[0][r])throw new Error("First and last Position are not equivalent.")}return feature({type:"Polygon",coordinates:t},e)},t.exports.lineString=function(t,e){if(!t)throw new Error("No coordinates passed");return feature({type:"LineString",coordinates:t},e)},t.exports.featureCollection=function(t){return{type:"FeatureCollection",features:t}},t.exports.multiLineString=function(t,e){if(!t)throw new Error("No coordinates passed");return feature({type:"MultiLineString",coordinates:t},e)},t.exports.multiPoint=function(t,e){if(!t)throw new Error("No coordinates passed");return feature({type:"MultiPoint",coordinates:t},e)},t.exports.multiPolygon=function(t,e){if(!t)throw new Error("No coordinates passed");return feature({type:"MultiPolygon",coordinates:t},e)},t.exports.geometryCollection=function(t,e){return feature({type:"GeometryCollection",geometries:t},e)};var n={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,kilometers:6373,kilometres:6373};t.exports.radiansToDistance=function(t,e){var i=n[e||"kilometers"];if(void 0===i)throw new Error("Invalid unit");return t*i},t.exports.distanceToRadians=function(t,e){var i=n[e||"kilometers"];if(void 0===i)throw new Error("Invalid unit");return t/i},t.exports.distanceToDegrees=function(t,e){var i=n[e||"kilometers"];if(void 0===i)throw new Error("Invalid unit");return t/i*57.2958}},,,,,,,,,,function(t,e){"use strict";!function(t){t[t.Property="Property"]="Property",t[t.Building="Building"]="Building",t[t.Plant="Plant"]="Plant",t[t.Area="Area"]="Area",t[t.Activity="Activity_V2"]="Activity",t[t.BusStop="BusStop"]="BusStop",t[t.Departure="Departure"]="Departure",t[t.Event="Event"]="Event",t[t.Stairwell="Stairwell"]="Stairwell",t[t.Function="Function"]="Function",t[t.Entrance="Entrance"]="Entrance",t[t.FunctionType="FunctionType"]="FunctionType"}(e.ModelType||(e.ModelType={}));e.ModelType},,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(143),r=n(144);e.async=new r.AsyncScheduler(i.AsyncAction)},,,,function(t,e,n){var i=n(212).getCoord,r=n(10).radiansToDistance;t.exports=function(t,e,n){var o=Math.PI/180,s=i(t),a=i(e),c=o*(a[1]-s[1]),u=o*(a[0]-s[0]),l=o*s[1],h=o*a[1],p=Math.pow(Math.sin(c/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(l)*Math.cos(h);return r(2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p)),n)}},function(t,e){"use strict";e.MAX_INT_VALUE=2147483647,e.MIN_INT_VALUE=-2147483647,e.ONE_MINUTE_IN_MS=6e4,e.ONE_HOUR_IN_MS=36e5,e.TEN_SECONDS_IN_MS=1e4,e.MJARDEVI_POINT=[15.545915,58.39635],e.NORRKOPING_POINT=[16.192421,58.587745],e.TOTAL_AMOUNT_OF_LOADED_ITEMS=2,e.TRANSPORTATION_TYPES=192,e.PRECIPITATION_TYPE={no:0,snow:1,"snow and rain":2,rain:3,drizzle:4,"freezing rain":5,"freezing drizzle":6}},,,,,function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}__export(n(220)),__export(n(708))},,,,,,,,,,,,function(t,e){"use strict";var n=function(){function BaseSubModel(){this.tags=new Array}return BaseSubModel.prototype.indexOfTag=function(t){for(var e=-1,n=0;n<this.tags.length;n++)this.tags[n].type===t.type&&this.tags[n].id===t.id&&(e=n);return e},BaseSubModel.prototype.containTag=function(t){return this.indexOfTag(t)!==-1},BaseSubModel.prototype.setTag=function(t){var e=this.indexOfTag(t),n=-1;return e>-1?(this.tags[e]=t,n=e):n=this.tags.push(t),n},BaseSubModel.prototype.removeTag=function(t){t>-1&&this.tags.splice(t,1)},BaseSubModel.prototype.clearTags=function(t){for(var e=[],n=t.toString(),i=0;i<this.tags.length;i++){var r=this.tags[i].type.toString();r===n&&e.push(i)}for(;0!==e.length;){var o=e.pop();this.removeTag(o)}},BaseSubModel}();e.BaseSubModel=n;var i=function(t){function CMSBase(){t.apply(this,arguments)}return __extends(CMSBase,t),CMSBase}(n);e.CMSBase=i;var r=function(t){function GeoBase(){t.apply(this,arguments)}return __extends(GeoBase,t),GeoBase}(n);e.GeoBase=r;var o=function(){function BaseModel(){this.geo=new r,this.cms=new i}return BaseModel.prototype.rebuild=function(){this.cms=_.create(i.prototype,this.cms),this.geo=_.create(r.prototype,this.geo)},Object.defineProperty(BaseModel.prototype,"isValid",{get:function(){return!0},enumerable:!0,configurable:!0}),BaseModel.prototype.hasTag=function(t){var e=this.combineTags(),n=t.toLowerCase(),i=_.find(e,function(t){return t.id.toLowerCase()===n});return!_.isUndefined(i)},BaseModel.prototype.getFirstOrDefaultTagName=function(t){var e=this.combineTags(),n=_.find(e,function(e){return e.type===t});return n?n.name:void 0},BaseModel.prototype.getFirstOrDefaultTagId=function(t){var e=this.combineTags(),n=_.find(e,function(e){return e.type===t});return n?n.id:null},BaseModel.prototype.getFirstOrDefaultTag=function(t){var e=this.combineTags();return _.find(e,function(e){return e.type===t})},BaseModel.prototype.getFirstOrDefaultTagById=function(t){var e=this.combineTags();return _.find(e,function(e){return e.id===t})},BaseModel.prototype.clearTags=function(t){this.cms.clearTags(t),this.geo.clearTags(t)},BaseModel.prototype.setTag=function(t){this.cms.setTag(t),this.geo.setTag(t)},BaseModel.prototype.toTag=function(){return{id:this.id,type:this.type,primary:!1,name:this.name}},BaseModel.prototype.setPosition=function(t){this.geo.location=t,this.geo.geometry=t},BaseModel.prototype.setId=function(t){this.id=t,this.cms.id=t,this.cms.geoId=t,this.geo.id=t},BaseModel.prototype.setType=function(t){this.type=t,this.cms.type=t,this.geo.type=t},BaseModel.prototype.setName=function(t){this.name=t,this.cms.name=t},BaseModel.prototype.combineTags=function(){return this.cms.tags.concat(this.geo.tags)},BaseModel}();e.BaseModel=o},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){"use strict";!function(t){t[t.Polygon="Polygon"]="Polygon",t[t.Point="Point"]="Point",t[t.LineString="LineString"]="LineString"}(e.GeometryType||(e.GeometryType={}));e.GeometryType},,,,,,,,,,,function(t,e,n){"use strict";var i=n(74),r=n(1),o=n(153),s=n(436),a=n(20),c=function(){function LayerService(t,e){this._layerFactory=t,this._serviceProvider=e,this._baseStore=[],this._onNewBaseContent=new r.EventEmitter}return Object.defineProperty(LayerService.prototype,"onNewBaseContent",{get:function(){return this._onNewBaseContent},enumerable:!0,configurable:!0}),Object.defineProperty(LayerService.prototype,"baseModels",{get:function(){return this._baseStore},enumerable:!0,configurable:!0}),LayerService.prototype.getListFromAllServices=function(t){return Promise.all(this._serviceProvider.get().map(function(e){return e.get(t)}))},LayerService.prototype.get=function(t,e){return void 0===e&&(e=!0),i.filter(this._baseStore,function(e){return e.type===t})},LayerService.prototype.getOne=function(t,e,n){return void 0===n&&(n=!0),i.find(this._baseStore,function(n){return n.type===t&&n.id===e})},LayerService.prototype.add=function(t){},LayerService.prototype.update=function(t){},LayerService.prototype.remove=function(t){},LayerService.prototype.clear=function(){for(var t=this._baseStore.length;0!==t--;)this._baseStore.splice(0,1)},LayerService.prototype.getComplementBuildingLayer=function(){var t=i.filter(this._baseStore,function(t){if(t.type===a.ModelType.Building){var e=t.cms;return e.detaljtyp&&"HUSÖVR"===e.detaljtyp}return!1});return this._layerFactory.createComplementBuildingLayer(t)},LayerService.prototype.getBuildingLayer=function(){var t=i.filter(this._baseStore,function(t){if(t.type===a.ModelType.Building){var e=t.cms;return!e.detaljtyp||e.detaljtyp&&"HUSÖVR"!==e.detaljtyp}return!1});return this._layerFactory.createBuildingLayer(t)},LayerService.prototype.getBusStopLayer=function(){var t=i.filter(this._baseStore,function(t){return t.type===a.ModelType.BusStop});return this._layerFactory.createBusStopLayer(t)},LayerService.prototype.getActivityLayer=function(){var t=i.filter(this._baseStore,function(t){return t.type===a.ModelType.Activity});return t=i.filter(t,function(t){return t.cms.visibility}),this._layerFactory.createActivityLayer(t)},LayerService.prototype.getFunctionLayer=function(){var t=i.filter(this.baseModels,function(t){return t.type===a.ModelType.Function});return t=i.filter(t,function(t){return"Intressepunkt"===t.cms.functionType.name}),this._layerFactory.createFunctionLayer(t)},LayerService.prototype.getParkingLayer=function(){var t=i.filter(this.baseModels,function(t){return t.type===a.ModelType.Function});return t=i.filter(t,function(t){return"Parkering"===t.cms.functionType.name}),this._layerFactory.createParkingLayer(t)},LayerService.prototype.getRestaurantLayer=function(){var t=i.filter(this._baseStore,function(t){return t.type===a.ModelType.Activity}),e=i.filter(t,function(t){return"Food"===t.cms.category});return this._layerFactory.createRestaurantLayer(e)},LayerService.prototype.getBikePumpLayer=function(){var t=i.filter(this.baseModels,function(t){return t.type===a.ModelType.Function});return t=i.filter(t,function(t){return"Pumpstation"===t.cms.functionType.name}),this._layerFactory.createBikePumpLayer(t)},LayerService.prototype.getEntranceLayer=function(){var t=i.filter(this._baseStore,function(t){return t.type===a.ModelType.Entrance});return this._layerFactory.createEntranceLayer(t)},LayerService.prototype.getMockPronovaInterior=function(){return this._layerFactory.createMockPronovaInteriorLayer([])},LayerService.prototype.addRange=function(t){i.isUndefined(t)||0===t.length||(this._baseStore=this._baseStore.concat(t),this.publishOnNewBaseContent(t[0].type,t))},LayerService.prototype.publishOnNewBaseContent=function(t,e){this._onNewBaseContent.next({type:t,baseModels:e})},LayerService=__decorate([r.Injectable(),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.LayerFactory&&s.LayerFactory)&&t||Object,"function"==typeof(e="undefined"!=typeof o.ServiceProvider&&o.ServiceProvider)&&e||Object])],LayerService);var t,e}();e.LayerService=c},function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}__export(n(687)),__export(n(683)),__export(n(437)),__export(n(439)),__export(n(684)),__export(n(441)),__export(n(440)),__export(n(438)),__export(n(688)),__export(n(442)),__export(n(447)),__export(n(20)),__export(n(59)),__export(n(682))},function(t,e,n){"use strict";var i=n(1),r=n(72),o=n(147),s=n(693),a=function(){function RepositoryFactory(t){this._http=t,this._service=WapCom.ServiceProvider.GetService(o.AppConfiguration.apiServiceName,o.AppConfiguration.apiContractKey,o.AppConfiguration.apiBaseAdress)}return RepositoryFactory.prototype.createPropertyRepository=function(){return new s.PropertyRepository(this._service,this._http)},RepositoryFactory.prototype.createBuildingRepository=function(){return new s.BuildingRepository(this._service,this._http)},RepositoryFactory.prototype.createActivityRepository=function(){return new s.ActivityRepository(this._service,this._http)},RepositoryFactory.prototype.createFunctionRepository=function(){return new s.FunctionRepository(this._service,this._http)},RepositoryFactory.prototype.createEntranceRepository=function(){return new s.EntranceRepository(this._service,this._http)},RepositoryFactory.prototype.createStairwellRepository=function(){return new s.StairwellRepository(this._service,this._http)},RepositoryFactory=__decorate([i.Injectable(),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof r.Http&&r.Http)&&t||Object])],RepositoryFactory);var t}();e.RepositoryFactory=a},function(t,e,n){"use strict";var i=n(42),r=function(){function Repository(t,e,n){this.type=t,this.service=e,this.http=n}return Repository.prototype.get=function(t,e,n,r){var o=this;return void 0===t&&(t=i.MAX_INT_VALUE),void 0===e&&(e=0),void 0===n&&(n=""),void 0===r&&(r=""),new Promise(function(i,s){return o.service.Get(o.type,t,e,n,r).then(function(t){return i(JSON.parse(t))},function(t){return s(t)})})},Repository.prototype.getOne=function(t){var e=this;return new Promise(function(n,i){return e.service.GetOne(e.type,t).then(function(t){return n(JSON.parse(t))},function(t){return i(t)})})},Repository.prototype.post=function(t){var e=this,n=JSON.stringify(t);return new Promise(function(t,i){return e.service.Post(e.type,n).then(function(e){return t(JSON.parse(e))},function(t){return i(t)})})},Repository.prototype.put=function(t){var e=this,n=JSON.stringify(t);return new Promise(function(i,r){return e.service.Put(e.type,t.id,n).then(function(t){return i(JSON.parse(t))},function(t){return r(t)})})},Repository.prototype.delete=function(t){var e=this;return new Promise(function(n,i){return e.service.Delete(e.type,t).then(function(t){return n(JSON.parse(t))},function(t){return i(t)})})},Repository.prototype.mapModel=function(t){var e=t.json();return e},Repository.prototype.mapModels=function(t){var e=t.json();return e},Repository}();e.Repository=r},function(t,e,n){"use strict";var i=n(1),r=n(47),o=function(){function SelectedObjectService(t){var e=this;this._mapManagerService=t,this._selectedObjectType=[],this._mapManagerService.onNewEvent.filter(function(t){return t.state===r.MapState.Normal}).filter(function(t){return t.type===r.MapEventType.mapUnSelect||t.type===r.MapEventType.mapSelect}).subscribe(function(t){if(t.type===r.MapEventType.mapUnSelect){var n=_.findIndex(e._selectedObjectType,function(e){return e===t.data.type});n>-1&&e._selectedObjectType.splice(n,1)}else t.type===r.MapEventType.mapSelect&&e._selectedObjectType.push(t.data.type)})}return Object.defineProperty(SelectedObjectService.prototype,"selectedObjectType",{get:function(){return this._selectedObjectType},set:function(t){this._selectedObjectType=t},enumerable:!0,configurable:!0}),SelectedObjectService.prototype.addSelectedObject=function(t){this._selectedObjectType.push(t)},SelectedObjectService.prototype.clearAllSelectedObjects=function(){for(var t=this._selectedObjectType.length,e=0;e<t;e++)void 0!==this._selectedObjectType[0]&&this._mapManagerService.unSelectLayer(this._selectedObjectType[0]);this._selectedObjectType=[]},SelectedObjectService=__decorate([i.Injectable(),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof r.MapManagerService&&r.MapManagerService)&&t||Object])],SelectedObjectService);var t}();e.SelectedObjectService=o},,,,,,,,,,,,function(t,e,n){"use strict";function multicast(t,e){var n;return n="function"==typeof t?t:function(){return t},e?new i.MulticastObservable(this,n,e):new r.ConnectableObservable(this,n)}var i=n(579),r=n(405);e.multicast=multicast},function(t,e,n){function inRing(t,e){for(var n=!1,i=0,r=e.length-1;i<e.length;r=i++){var o=e[i][0],s=e[i][1],a=e[r][0],c=e[r][1],u=s>t[1]!=c>t[1]&&t[0]<(a-o)*(t[1]-s)/(c-s)+o;u&&(n=!n)}return n}var i=n(212);t.exports=function(t,e){var n=i.getCoord(t),r=e.geometry.coordinates;"Polygon"===e.geometry.type&&(r=[r]);for(var o=0,s=!1;o<r.length&&!s;o++)if(inRing(n,r[o][0])){for(var a=!1,c=1;c<r[o].length&&!a;)inRing(n,r[o][c])&&(a=!0),c++;a||(s=!0)}return s}},function(t,e){function coordEach(t,e,n){var i,r,o,s,a,c,u,l,h,p,f=0,d="FeatureCollection"===t.type,g="Feature"===t.type,y=d?t.features.length:1;for(i=0;i<y;i++)for(h=d?t.features[i].geometry:g?t.geometry:t,p="GeometryCollection"===h.type,u=p?h.geometries.length:1,s=0;s<u;s++)if(c=p?h.geometries[s]:h,l=c.coordinates,f=!n||"Polygon"!==c.type&&"MultiPolygon"!==c.type?0:1,"Point"===c.type)e(l);else if("LineString"===c.type||"MultiPoint"===c.type)for(r=0;r<l.length;r++)e(l[r]);else if("Polygon"===c.type||"MultiLineString"===c.type)for(r=0;r<l.length;r++)for(o=0;o<l[r].length-f;o++)e(l[r][o]);else{if("MultiPolygon"!==c.type)throw new Error("Unknown Geometry Type");for(r=0;r<l.length;r++)for(o=0;o<l[r].length;o++)for(a=0;a<l[r][o].length-f;a++)e(l[r][o][a])}}function coordReduce(t,e,n,i){return coordEach(t,function(t){n=e(n,t)},i),n}function propEach(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties);break;case"Feature":e(t.properties)}}function propReduce(t,e,n){return propEach(t,function(t){n=e(n,t)}),n}function featureEach(t,e){if("Feature"===t.type)e(t);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n])}function coordAll(t){var e=[];return coordEach(t,function(t){e.push(t)}),e}t.exports.coordEach=coordEach,t.exports.coordReduce=coordReduce,t.exports.propEach=propEach,t.exports.propReduce=propReduce,t.exports.featureEach=featureEach,t.exports.coordAll=coordAll},,function(t,e,n){"use strict";var i=n(1),r=function(){function GeoProfileService(){this._onNewProfile=new i.EventEmitter}return Object.defineProperty(GeoProfileService.prototype,"onNewProfile",{get:function(){return this._onNewProfile},enumerable:!0,configurable:!0}),Object.defineProperty(GeoProfileService.prototype,"geoProfile",{get:function(){return this._geoProfile},set:function(t){this._geoProfile=t,this._onNewProfile.next(t)},enumerable:!0,configurable:!0}),Object.defineProperty(GeoProfileService.prototype,"isGeoProfileSet",{get:function(){return!_.isUndefined(this._geoProfile)},enumerable:!0,configurable:!0}),GeoProfileService=__decorate([i.Injectable(),__metadata("design:paramtypes",[])],GeoProfileService)}();e.GeoProfileService=r},function(t,e,n){"use strict";var i=n(1),r=n(2),o=1e3,s=function(){function TimeService(){this._everyHalfHour=new i.EventEmitter,this._everyHour=new i.EventEmitter,this._everyMinute=new i.EventEmitter,this._sheduleStarted=!1,this.startSchedule()}return Object.defineProperty(TimeService.prototype,"everyHalfHour",{get:function(){return this._everyHalfHour},enumerable:!0,configurable:!0}),Object.defineProperty(TimeService.prototype,"everyHour",{get:function(){return this._everyHour},enumerable:!0,configurable:!0}),Object.defineProperty(TimeService.prototype,"everyMinute",{get:function(){return this._everyHour},enumerable:!0,configurable:!0}),TimeService.prototype.now=function(){return this.getDate()},TimeService.prototype.time=function(){return this.hour+":"+this.min},TimeService.prototype.day=function(){return this.dayString+" "+this.dateNumber+":e"},TimeService.prototype.dateOnFormat=function(t,e){return r(t).format(e)},TimeService.prototype.toFormat=function(t,e){return r(t,e)},TimeService.prototype.getDate=function(){return new Date},Object.defineProperty(TimeService.prototype,"hour",{get:function(){var t=this.getDate().getHours();return t<10?"0"+t:t},enumerable:!0,configurable:!0}),Object.defineProperty(TimeService.prototype,"min",{get:function(){var t=this.getDate().getMinutes();return t<10?"0"+t:t},enumerable:!0,configurable:!0}),TimeService.prototype.startSchedule=function(){var t=this;this._sheduleStarted||(this._sheduleStarted=!0,this._secondInterval=setInterval(function(){t.update()},o))},TimeService.prototype.stopSchedule=function(){this._sheduleStarted&&(this._sheduleStarted=!1,clearInterval(this._secondInterval))},TimeService.prototype.update=function(){var t=this.now(),e=(t.getHours(),t.getMinutes()),n=t.getSeconds(),i=n%60===0,r=e%30===0&&0===n,o=e%60===0&&0===n;i&&this._everyMinute.next(t),r&&this._everyHalfHour.next(t),o&&this._everyHour.next(t)},Object.defineProperty(TimeService.prototype,"dayString",{get:function(){var t=this.getDate().getDay();switch(t){case 0:return"Söndag";case 1:return"Måndag";case 2:return"Tisdag";case 3:return"Onsdag";case 4:return"Torsdag";case 5:return"Fredag";case 6:return"Lördag"}return""},enumerable:!0,configurable:!0}),Object.defineProperty(TimeService.prototype,"dateNumber",{get:function(){return this.getDate().getDate()},enumerable:!0,configurable:!0}),TimeService=__decorate([i.Injectable(),__metadata("design:paramtypes",[])],TimeService)}();e.TimeService=s},function(t,e){"use strict";!function(t){t[t.panstart="panstart"]="panstart",t[t.panmove="panmove"]="panmove",t[t.panend="panend"]="panend",t[t.pinchstart="pinchstart"]="pinchstart",t[t.pinchmove="pinchmove"]="pinchmove",t[t.pinchend="pinchend"]="pinchend",t[t.tap="tap"]="tap",t[t.mousewheel="mousewheel"]="mousewheel"}(e.HammerJsType||(e.HammerJsType={}));e.HammerJsType},function(t,e){"use strict";var n=function(){function Navigator(){this._isEnabled=!1}return Object.defineProperty(Navigator.prototype,"isEnabled",{get:function(){return this._isEnabled},enumerable:!0,configurable:!0}),Navigator.prototype.addTo=function(t){this.isEnabled||(this._map=t,this._el=t.getCanvasContainer(),this._isEnabled=!0)},Navigator.prototype.remove=function(){this._el=void 0,this._map=void 0,this._isEnabled=!1},Navigator}();e.Navigator=n;var i=function(t){function NavigatorComponent(e){void 0===e&&(e=[]),t.call(this),this._mapEvents=e}return __extends(NavigatorComponent,t),Object.defineProperty(NavigatorComponent.prototype,"controllEvents",{get:function(){return this._mapEvents},enumerable:!0,configurable:!0}),NavigatorComponent.prototype.execute=function(t){},NavigatorComponent}(n);e.NavigatorComponent=i},function(t,e,n){"use strict";var i=n(1),r=n(456),o=n(705),s=n(224),a=n(154),c=n(120),u=function(t){function LocalService(e,n){t.call(this,e),this._zone=n,this._ready=!1,this._coreContract=void 0,this._loadingContract=void 0,this._tooltipContract=void 0,this._zoomTooltipContract=void 0,this._bridgeService.localService=this}return __extends(LocalService,t),Object.defineProperty(LocalService.prototype,"ready",{get:function(){return void 0!==this._renderElement},enumerable:!0,configurable:!0}),LocalService.prototype.setMapConfig=function(t){var e=this;return this.setState(a.MapState.Loading),this.mapConfiguration=t,this.setMapCore(t),new Promise(function(t,n){if(e._ready=!1,e._coreContract)var i=setInterval(function(){e._coreContract.isLoaded&&(clearInterval(i),e._ready=!0,t(e._coreContract),e.setState(a.MapState.Normal))},50);else n()})},Object.defineProperty(LocalService.prototype,"renderElement",{get:function(){return this._renderElement},set:function(t){this._renderElement=t},enumerable:!0,configurable:!0}),Object.defineProperty(LocalService.prototype,"loadingContract",{get:function(){return this._loadingContract},set:function(t){this._loadingContract=t,this._configuration&&this._loadingContract.onConfig(this._configuration)},enumerable:!0,configurable:!0}),Object.defineProperty(LocalService.prototype,"tooltipContract",{get:function(){return this._tooltipContract},set:function(t){this._tooltipContract=t,this._configuration&&this._tooltipContract.onConfig(this._configuration)},enumerable:!0,configurable:!0}),Object.defineProperty(LocalService.prototype,"zoomTooltipContract",{get:function(){return this._zoomTooltipContract},set:function(t){this._zoomTooltipContract=t,this._configuration&&this._zoomTooltipContract.onConfig(this._configuration)},enumerable:!0,configurable:!0}),LocalService.prototype.addLayer=function(t){this.ready&&this._coreContract.addLayer(t)},LocalService.prototype.clearLayers=function(){this.ready&&this._coreContract.clearLayers()},LocalService.prototype.addVectorLayer=function(t,e){this.ready&&this._coreContract.addVectorLayer(t,e)},LocalService.prototype.select=function(t,e){this.ready&&this._coreContract.select(t,e)},LocalService.prototype.unSelect=function(t,e){this.ready&&this._coreContract.unSelect(t,e)},LocalService.prototype.selectLayer=function(t){this.ready&&this._coreContract.selectLayer(t)},LocalService.prototype.unSelectLayer=function(t){this.ready&&this._coreContract.unSelectLayer(t)},LocalService.prototype.centerPosition=function(t,e){this.ready&&this._coreContract.centerPosition(t,e)},LocalService.prototype.getCenterPosition=function(){if(this.ready)return this._coreContract.getCenterPosition()},LocalService.prototype.resetPosition=function(){this.ready&&this._coreContract.resetPosition()},LocalService.prototype.zoomIn=function(){this.ready&&this._coreContract.zoomIn()},LocalService.prototype.zoomOut=function(){this.ready&&this._coreContract.zoomOut()},LocalService.prototype.getZoom=function(){if(this.ready)return this._coreContract.getZoom()},LocalService.prototype.animateSelection=function(t,e){this.ready&&this._coreContract.animateSelection(t,e)},LocalService.prototype.setLayerVisibility=function(t,e){this.ready&&this._coreContract.setLayerVisibility(t,e)},LocalService.prototype.createFeature=function(t){if(this.ready)return this._coreContract.createFeature(t)},LocalService.prototype.editFeature=function(t,e,n){if(this.ready)return this._coreContract.editFeature(t,e,n)},LocalService.prototype.stopEditFeature=function(t,e){if(this.ready)return this._coreContract.stopEditFeature(t,e)},LocalService.prototype.replaceSourceLayer=function(t,e){this.ready&&this._coreContract.replaceSourceLayer(t,e)},LocalService.prototype.setTooltipVisibility=function(t){this.ready&&this._tooltipContract&&this._tooltipContract.visible(t)},LocalService.prototype.setTooltipFixedPosition=function(t,e,n){this.ready&&this._tooltipContract&&this._tooltipContract.setFixedPosition(t,e,n)},LocalService.prototype.setTooltipModel=function(t){this.ready&&this._tooltipContract&&this._tooltipContract.setModel(t)},LocalService.prototype.setTooltip=function(t){if(this.ready&&this._tooltipContract)return this._tooltipContract.setToolTip(t)},LocalService.prototype.clearToolTip=function(){if(this.ready&&this._tooltipContract)return this._tooltipContract.clearToolTip()},LocalService.prototype.setLoadingText=function(t){this.ready&&this._loadingContract&&this._loadingContract.setLoadingText(t)},LocalService.prototype.sendTouchEvent=function(t,e){var n=this;this._zone.runOutsideAngular(function(){var i={type:t,data:e};switch(t){case c.HammerJsType.panend:case c.HammerJsType.panmove:case c.HammerJsType.panstart:n.onPan(i);break;case c.HammerJsType.pinchend:case c.HammerJsType.pinchmove:case c.HammerJsType.pinchstart:n.onPinch(i);break;case c.HammerJsType.mousewheel:n.onMouseWheel(i);break;case c.HammerJsType.tap:n.onTap(i)}})},LocalService.prototype.onPan=function(t){this.ready&&this._coreContract.onPan(t)},LocalService.prototype.onPinch=function(t){this.ready&&this._coreContract.onPinch(t)},LocalService.prototype.onTap=function(t){this.ready&&this._coreContract.onTap(t)},LocalService.prototype.onMouseWheel=function(t){this.ready&&this._coreContract.onMouseWheel(t)},Object.defineProperty(LocalService.prototype,"mapConfiguration",{set:function(t){this._configuration=t,this.publishConfigurationToLayers()},enumerable:!0,configurable:!0}),LocalService.prototype.publishConfigurationToLayers=function(){this._configuration&&(this._configuration&&this._loadingContract&&this._loadingContract.onConfig(this._configuration),this._configuration&&this._tooltipContract&&this._tooltipContract.onConfig(this._configuration),this._configuration&&this._zoomTooltipContract&&this._zoomTooltipContract.onConfig(this._configuration))},LocalService.prototype.setMapCore=function(t){var e=this;this._coreContract&&(this._coreContract.dispose(),this._coreContract=void 0),this._zone.runOutsideAngular(function(){e._coreContract=o.CoreFactory.createCore(t,e._renderElement,e)})},LocalService=__decorate([i.Injectable(),__metadata("design:paramtypes",["function"==typeof(e="undefined"!=typeof s.BridgeService&&s.BridgeService)&&e||Object,"function"==typeof(n="undefined"!=typeof i.NgZone&&i.NgZone)&&n||Object])],LocalService);var e,n}(r.BridgeMediator);e.LocalService=u},,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(32),o=n(1289),s=function(t){function AsyncAction(e,n){t.call(this,e,n),this.scheduler=e,this.work=n,this.pending=!1}return i(AsyncAction,t),AsyncAction.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,e)),this.delay=e,this.id=this.id||this.requestAsyncId(i,this.id,e),this},AsyncAction.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),r.root.setInterval(t.flush.bind(t,this),n)},AsyncAction.prototype.recycleAsyncId=function(t,e,n){return void 0===n&&(n=0),null!==n&&this.delay===n?e:r.root.clearInterval(e)&&void 0||void 0},AsyncAction.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);return n?n:void(this.pending===!1&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null)))},AsyncAction.prototype._execute=function(t,e){var n=!1,i=void 0;try{this.work(t)}catch(r){n=!0,i=!!r&&r||new Error(r)}if(n)return this.unsubscribe(),i},AsyncAction.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,i=n.indexOf(this);this.work=null,this.delay=null,this.state=null,this.pending=!1,this.scheduler=null,i!==-1&&n.splice(i,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null))},AsyncAction}(o.Action);e.AsyncAction=s},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(1043),o=function(t){function AsyncScheduler(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return i(AsyncScheduler,t),AsyncScheduler.prototype.flush=function(t){var e=this.actions;if(this.active)return void e.push(t);var n;this.active=!0;do if(n=t.execute(t.state,t.delay))break;while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}},AsyncScheduler}(r.Scheduler);e.AsyncScheduler=o},,,function(t,e,n){"use strict";var i=n(47),r=1e4,o=1e4,s="",a="Norrköping Science Park",c={accessToken:"pk.eyJ1IjoiYmpvcm5nb3Rlc3RyYW5kIiwiYSI6ImNpaW9oZjQ3MDAxaTd0cGtwb3I0dTh2MDcifQ.AHYuiPHS1JdK4ja3s4Zaeg",type:i.MapCoreObjectType.MapBoxGL,tooltipEnabled:!1,mapStyle:"mapbox://styles/bjorngotestrand/cil9k4t40004rc4lxto5k0apb",center:[16.176088,58.588813],showLocationIcon:!1,zoom:16,style:{property:[{type:"Point",color:{background:"#4BEB5E",opacity:.6},selected:{color:{background:"#4BEB5E",opacity:.9}}},{type:"Polygon",color:{background:"rgba(75,235,94, 0.15)",border:"#4BEB5E",opacity:1},selected:{color:{background:"rgba(75,235,94, 0.8)",border:"#4BEB5E",opacity:1}}}],building:[{type:"Point",color:{background:"#F74D40",opacity:.6},selected:{color:{background:"#F74D40",opacity:.9}}},{type:"Polygon",color:{background:"rgba(84,172,210, 0.15)",border:"#54ACD2",opacity:1},selected:{color:{background:"rgba(84,172,210, 0.8)",border:"#54ACD2",opacity:1}},borderThickness:2,zIndex:0}],activity:[{type:"Point",iconType:[{type:"Health",title:""},{type:"Education",title:""},{type:"Food",title:""},{type:"Beauty",title:""},{type:"Institute",title:""},{type:"Transport",title:""},{type:"Family",title:""}],textFont:"FontAwesome Regular",color:{background:"rgba(84,172,210, 1.0)",opacity:1,text:"#FFFFFF"},offset:[0,.18],selected:{color:{background:"rgba(84,172,210, 1.0)",opacity:1,border:"#FFFFFF"},borderRadius:3},radius:{base:1.75,stops:[[12,12],[15,19],[17,24],[19,27],[22,32]]},zIndex:10,cluster:{value:!0,maxZoom:20,color:"rgba(84,172,210, 1.0)",textFont:"Raleway Bold",styleRadius:{property:"point_count",stops:[[{zoom:12,value:2},13],[{zoom:12,value:4},15],[{zoom:12,value:8},19],[{zoom:22,value:2},27],[{zoom:22,value:4},29],[{zoom:22,value:8},32]]},clusterRadius:40}},{type:"Polygon",color:{background:"#DB5153",border:"#DB5153",opacity:.2},selected:{color:{background:"#DB5153",border:"#DB5153",opacity:.5}}}],busstop:[{type:"Point",textFont:"FontAwesome Regular",color:{background:"#FF6161",
opacity:1,text:"#FFFFFF"},selected:{color:{background:"#FF6161",border:"#FFFFFF"},borderRadius:2},offset:[0,.18],radius:{base:1.75,stops:[[12,8],[15,11],[17,24],[19,29],[22,33]]},zIndex:4}],complementbuilding:[{type:"Polygon",color:{background:"rgba(120,120,120, 0.3)",border:"rgba(120,120,120, 0.3)",opacity:1},borderThickness:1,zIndex:0}],event:[{type:"Point",textFont:"FontAwesome Regular",color:{background:"#BE4DFF",opacity:1,text:"#FFFFFF"},selected:{color:{background:"#BE4DFF",border:"#FFFFFF"},borderRadius:3},offset:[0,.18],radius:{base:1.75,stops:[[12,6],[15,9],[17,22],[19,27],[22,31]]},zIndex:1}]}},u=function(){function AppConfiguration(){}return Object.defineProperty(AppConfiguration,"defaultBoundingWidth",{get:function(){return r},enumerable:!0,configurable:!0}),Object.defineProperty(AppConfiguration,"defaultBoundingHeight",{get:function(){return o},enumerable:!0,configurable:!0}),Object.defineProperty(AppConfiguration,"defaultIcon",{get:function(){return s},enumerable:!0,configurable:!0}),Object.defineProperty(AppConfiguration,"defaultTitleConfiguration",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(AppConfiguration,"mapConfiguration",{get:function(){return c},enumerable:!0,configurable:!0}),AppConfiguration.getMapStyle=function(t,e){var n,i=c.style[t];if(i){var r=_.find(i,function(t){return t.type==e});r&&(n=r)}return n},Object.defineProperty(AppConfiguration,"apiBaseAdress",{get:function(){return{apiContractKey:"BD1C6983-F8C7-47D4-9020-0299D7131B9F",apiBaseAdress:"http://routergp1apiqa.azurewebsites.net",apiServiceName:"dataappbizservice",trafficApiPlannerKey:"dcd1784e-619f-4b5b-9f99-527f00711f36",trafficApiTimeSchedule:"9c9b570e-77dc-430c-9ddf-6f4c298d8aeb"}.apiBaseAdress},enumerable:!0,configurable:!0}),Object.defineProperty(AppConfiguration,"apiContractKey",{get:function(){return{apiContractKey:"BD1C6983-F8C7-47D4-9020-0299D7131B9F",apiBaseAdress:"http://routergp1apiqa.azurewebsites.net",apiServiceName:"dataappbizservice",trafficApiPlannerKey:"dcd1784e-619f-4b5b-9f99-527f00711f36",trafficApiTimeSchedule:"9c9b570e-77dc-430c-9ddf-6f4c298d8aeb"}.apiContractKey},enumerable:!0,configurable:!0}),Object.defineProperty(AppConfiguration,"apiServiceName",{get:function(){return{apiContractKey:"BD1C6983-F8C7-47D4-9020-0299D7131B9F",apiBaseAdress:"http://routergp1apiqa.azurewebsites.net",apiServiceName:"dataappbizservice",trafficApiPlannerKey:"dcd1784e-619f-4b5b-9f99-527f00711f36",trafficApiTimeSchedule:"9c9b570e-77dc-430c-9ddf-6f4c298d8aeb"}.apiServiceName},enumerable:!0,configurable:!0}),Object.defineProperty(AppConfiguration,"trafficApiPlannerKey",{get:function(){return{apiContractKey:"BD1C6983-F8C7-47D4-9020-0299D7131B9F",apiBaseAdress:"http://routergp1apiqa.azurewebsites.net",apiServiceName:"dataappbizservice",trafficApiPlannerKey:"dcd1784e-619f-4b5b-9f99-527f00711f36",trafficApiTimeSchedule:"9c9b570e-77dc-430c-9ddf-6f4c298d8aeb"}.trafficApiPlannerKey},enumerable:!0,configurable:!0}),Object.defineProperty(AppConfiguration,"trafficApiTimeSchedule",{get:function(){return{apiContractKey:"BD1C6983-F8C7-47D4-9020-0299D7131B9F",apiBaseAdress:"http://routergp1apiqa.azurewebsites.net",apiServiceName:"dataappbizservice",trafficApiPlannerKey:"dcd1784e-619f-4b5b-9f99-527f00711f36",trafficApiTimeSchedule:"9c9b570e-77dc-430c-9ddf-6f4c298d8aeb"}.trafficApiTimeSchedule},enumerable:!0,configurable:!0}),AppConfiguration}();e.AppConfiguration=u},function(t,e,n){"use strict";var i=n(1),r=n(404),o=n(100),s=n(98),a=n(436),c=n(670),u=n(698),l=n(47),h=n(102),p=n(435),f=n(218),d=n(118),g=n(147);!function(t){t[t.Init=0]="Init",t[t.Normal=1]="Normal"}(e.State||(e.State={}));var y=e.State,v=function(){function AppState(t,e,n,i,o){this._mapManagerService=t,this._selectedObjectService=e,this._loadingProgress=n,this._layerService=i,this._geoProfileService=o,this._stateSubject=new r.Subject,this._state=y.Init,this._hasMovedLastMinute=!1,this._lastUpdateHour=-1,this.stateObservable=this._stateSubject.asObservable()}return AppState.prototype.resetMap=function(){this._mapManagerService.resetPosition(),this._mapManagerService.setTooltipVisibility(!1),this._selectedObjectService.clearAllSelectedObjects()},AppState.prototype.updateData=function(){var t=this,e=function(e){return t._layerService.getListFromAllServices(e)},n="models",i=this._geoProfileService.geoProfile;return this.createPromiseRetry(n,e,i).execute().then(function(e){t._layerService.clear(),e.forEach(function(e){t._layerService.addRange(e)})})},AppState.prototype.redrawLayers=function(){var t=this._getGeoJSONLayers();this._updateLayers(t)},Object.defineProperty(AppState.prototype,"state",{get:function(){return this._state},set:function(t){this._state!==t&&(this._state=t,this._stateSubject.next(this._state))},enumerable:!0,configurable:!0}),Object.defineProperty(AppState.prototype,"hasMovedLastMinute",{get:function(){return this._hasMovedLastMinute},set:function(t){this._hasMovedLastMinute!==t&&(this._hasMovedLastMinute=t)},enumerable:!0,configurable:!0}),Object.defineProperty(AppState.prototype,"lastUpdateHour",{get:function(){return this._lastUpdateHour},set:function(t){this._lastUpdateHour!==t&&(this._lastUpdateHour=t)},enumerable:!0,configurable:!0}),AppState.prototype._updateLayers=function(t){var e=this;this.state===y.Init?this._initMap(t):(this._mapManagerService.clearLayers(),t.forEach(function(t){e._mapManagerService.addLayer(t)}))},AppState.prototype._getGeoJSONLayers=function(){var t=this._layerService.getComplementBuildingLayer(),e=this._layerService.getBuildingLayer(),n=(this._layerService.getActivityLayer(),this._layerService.getBusStopLayer()),i=this._layerService.getFunctionLayer(),r=this._layerService.getParkingLayer(),o=this._layerService.getRestaurantLayer(),s=this._layerService.getBikePumpLayer(),a=this._layerService.getEntranceLayer(),c=this._layerService.getMockPronovaInterior();return[t.geoJson,e.geoJson,n.geoJson,i.geoJson,r.geoJson,o.geoJson,s.geoJson,a.geoJson,c.geoJson]},AppState.prototype._initMap=function(t){var e=this;this._loadingProgress.progress("Loading map");var n=g.AppConfiguration.mapConfiguration,i=this._geoProfileService.geoProfile,r=(i.boundingBox.geometry.coordinates[0],i.lng),o=i.lat;n.center=[r,o],this._mapManagerService.setMapConfig(n).then(function(n){t.forEach(function(t){e._mapManagerService.addLayer(t)}),e.state=y.Normal})},AppState.prototype.createPromiseRetry=function(t,e,n){return void 0===n&&(n=null),new p.PromiseRetry(this._loadingProgress,t,e,n)},AppState.prototype.createWinPromiseRetry=function(t,e){return new p.WinPromiseRetry(this._loadingProgress,t,e)},AppState=__decorate([i.Injectable(),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof l.MapManagerService&&l.MapManagerService)&&t||Object,"function"==typeof(e="undefined"!=typeof h.SelectedObjectService&&h.SelectedObjectService)&&e||Object,"function"==typeof(n="undefined"!=typeof f.LoadingProgress&&f.LoadingProgress)&&n||Object,"function"==typeof(o="undefined"!=typeof s.LayerService&&s.LayerService)&&o||Object,"function"==typeof(a="undefined"!=typeof d.GeoProfileService&&d.GeoProfileService)&&a||Object])],AppState);var t,e,n,o,a}();e.AppState=v,e.APP_PROVIDERS=[v,o.RepositoryFactory,s.LayerService,a.LayerFactory,u.APP_SERVICES,c.APP_CONVERTERS]},function(t,e){"use strict";var n=function(){function Geometry(t,e){this.type=t,e&&(this.coordinates=e)}return Geometry}();e.Geometry=n},function(t,e,n){"use strict";var i=n(1),r=n(100),o=n(42),s=n(20),a=n(428),c=function(){function ActivityService(t,e){this._converter=e,this.type=s.ModelType.Activity,this._activityRepository=t.createActivityRepository()}return ActivityService.prototype.get=function(t){var e=this,n=btoa(encodeURIComponent(JSON.stringify(t.filter)));return this._activityRepository.get(o.MAX_INT_VALUE,0,"",n).then(function(t){return e._converter.convertToBase(t)})},ActivityService.prototype.getOne=function(t){},ActivityService.prototype.add=function(t){var e=this;return this._activityRepository.post(t).then(function(t){return e._converter.convertToBase([t])},function(t){return e.logError(t)})},ActivityService.prototype.update=function(t){var e=this;return this._activityRepository.put(t).then(function(t){return e._converter.convertToBase([t])},function(t){return e.logError(t)})},ActivityService.prototype.remove=function(t){var e=this;return this._activityRepository.delete(t.id).then(function(t){return t},function(t){return e.logError(t)})},ActivityService.prototype.logError=function(t){console.log("building.service::Error :",t)},ActivityService=__decorate([i.Injectable(),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof r.RepositoryFactory&&r.RepositoryFactory)&&t||Object,"function"==typeof(e="undefined"!=typeof a.ActivityConverter&&a.ActivityConverter)&&e||Object])],ActivityService);var t,e}();e.ActivityService=c},function(t,e,n){"use strict";var i=n(1),r=n(100),o=n(42),s=n(20),a=n(429),c=function(){function BuildingService(t,e){this._converter=e,this.type=s.ModelType.Building,this._buildingRepository=t.createBuildingRepository()}return BuildingService.prototype.get=function(t){var e=this,n=btoa(encodeURIComponent(JSON.stringify(t.filter)));return this._buildingRepository.get(o.MAX_INT_VALUE,0,"",n).then(function(t){return e._converter.convertToBase(t)})},BuildingService.prototype.getOne=function(t){},BuildingService.prototype.add=function(t){var e=this;return this._buildingRepository.post(t).then(function(t){return e._converter.convertToBase([t])},function(t){return e.logError(t)})},BuildingService.prototype.update=function(t){var e=this;return this._buildingRepository.put(t).then(function(t){return e._converter.convertToBase([t])},function(t){return e.logError(t)})},BuildingService.prototype.remove=function(t){var e=this;return this._buildingRepository.delete(t.id).then(function(t){return t},function(t){return e.logError(t)})},BuildingService.prototype.logError=function(t){console.log("building.service::Error :",t)},BuildingService=__decorate([i.Injectable(),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof r.RepositoryFactory&&r.RepositoryFactory)&&t||Object,"function"==typeof(e="undefined"!=typeof a.BuildingConverter&&a.BuildingConverter)&&e||Object])],BuildingService);var t,e}();e.BuildingService=c},function(t,e,n){"use strict";var i=n(1),r=n(72),o=n(20),s=n(430),a=n(42),c=n(147),u=function(){function BusStopService(t,e){this._jsonp=t,this._converter=e,this.type=o.ModelType.BusStop,this._apiCallNearby="https://api.resrobot.se/v2/location.nearbystops.json?key="+c.AppConfiguration.trafficApiPlannerKey}return BusStopService.prototype.get=function(t){var e=this,n="100",i=t.getBoundingRadius()||"800",r="sv",o=this._apiCallNearby+"&originCoordLat="+t.lat+"&originCoordLong="+t.lng+"&maxNo="+n+"&r="+i+"&lang="+r+"&jsonpCallback=JSONP_CALLBACK";return this._jsonp.get(o).map(this.extractData).map(function(t){return t.StopLocation}).map(function(t){return e._converter.convertToBase(t)}).toPromise()},BusStopService.prototype.getOne=function(t){},BusStopService.prototype.add=function(t){},BusStopService.prototype.update=function(t){},BusStopService.prototype.remove=function(t){},BusStopService.prototype.extractData=function(t){var e=t.json();return e||{}},BusStopService=__decorate([i.Injectable(),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof r.Jsonp&&r.Jsonp)&&t||Object,"function"==typeof(e="undefined"!=typeof s.BusStopConverter&&s.BusStopConverter)&&e||Object])],BusStopService);var t,e}();e.BusStopService=u;var l=function(){function DepartureService(t,e){this._jsonp=t,this._converter=e,this.type=o.ModelType.Departure,this._apiCallDeparture="https://api.resrobot.se/v2/departureBoard.json?key="+c.AppConfiguration.trafficApiTimeSchedule}return DepartureService.prototype.get=function(t){var e=this;if("string"==typeof t){var n=5,i=a.TRANSPORTATION_TYPES,r=0,o=this._apiCallDeparture+"&id="+t+"&maxJourneys="+n+"&products="+i+"&passlist="+r+"&jsonpCallback=JSONP_CALLBACK";return this._jsonp.get(o).map(this.extractData).map(function(t){return t.Departure}).map(function(t){return e._converter.convertToBase(t)}).toPromise()}},DepartureService.prototype.getOne=function(t){},DepartureService.prototype.add=function(t){},DepartureService.prototype.update=function(t){},DepartureService.prototype.remove=function(t){},DepartureService.prototype.extractData=function(t){var e=t.json();return e||{}},DepartureService=__decorate([i.Injectable(),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof r.Jsonp&&r.Jsonp)&&t||Object,"function"==typeof(e="undefined"!=typeof s.DepartureConverter&&s.DepartureConverter)&&e||Object])],DepartureService);var t,e}();e.DepartureService=l},function(t,e,n){"use strict";var i=n(74),r=n(1),o=function(){function ServiceProvider(){this._services=[]}return ServiceProvider.prototype.registerService=function(t){this._services.push(t)},ServiceProvider.prototype.removeService=function(t){var e=i.findIndex(this._services,function(e){return e.type===t.type});return e>-1&&(this._services.splice(e,1),!0)},ServiceProvider.prototype.get=function(){return this._services},ServiceProvider.prototype.getOne=function(t){return i.find(this._services,function(e){return e.type===t})},ServiceProvider=__decorate([r.Injectable(),__metadata("design:paramtypes",[])],ServiceProvider)}();e.ServiceProvider=o},function(t,e){"use strict";!function(t){t[t.Normal="Normal"]="Normal",t[t.Select="Select"]="Select",t[t.Edit="Edit"]="Edit",t[t.Loading="Loading"]="Loading"}(e.MapState||(e.MapState={}));e.MapState},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){!function(t,n){n(e)}(this,function(t){"use strict";function e(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function n(){}function i(){}function r(){}function s(){}function o(){}function a(){}function u(){}function l(t){this.message=t}function h(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}function c(){if(0===arguments.length)l.call(this);else if(1===arguments.length){var t=arguments[0];l.call(this,t)}}function f(){}function g(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)g.call(this,0,0);else if(1===arguments.length){var t=arguments[0];g.call(this,t.x,t.y,t.z)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];g.call(this,e,n,g.NULL_ORDINATE)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this.x=i,this.y=r,this.z=o}}function d(){if(this.dimensionsToTest=2,0===arguments.length)d.call(this,2);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new i("only 2 or 3 dimensions may be specified");this.dimensionsToTest=t}}function p(){}function v(){}function m(t){this.message=t||""}function y(){}function x(t){this.message=t||""}function E(t){this.message=t||""}function I(){this.array_=[],arguments[0]instanceof v&&this.addAll(arguments[0])}function N(){if(I.apply(this),0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}function C(){if(this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof g){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof C){var e=arguments[0];this.init(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.init(r,o,s,a)}}function S(){}function w(){S.call(this,"Projective point not representable on the Cartesian plane.")}function L(){}function R(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1}function T(){}function P(t){this.str=t}function b(t){this.value=t}function O(){}function _(){if(this.hi=0,this.lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof _){var e=arguments[0];this.init(e)}else if("string"==typeof arguments[0]){var n=arguments[0];_.call(this,_.parse(n))}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i,r)}}function M(){}function D(){}function A(){}function F(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];this.x=e,this.y=n,this.w=1}else if(arguments[0]instanceof F&&arguments[1]instanceof F){var i=arguments[0],r=arguments[1];this.x=i.y*r.w-r.y*i.w,this.y=r.x*i.w-i.x*r.w,this.w=i.x*r.y-r.x*i.y}else if(arguments[0]instanceof g&&arguments[1]instanceof g){var o=arguments[0],s=arguments[1];this.x=o.y-s.y,this.y=s.x-o.x,this.w=o.x*s.y-s.x*o.y}}else if(3===arguments.length){var a=arguments[0],c=arguments[1],u=arguments[2];this.x=a,this.y=c,this.w=u}else if(4===arguments.length){var l=arguments[0],h=arguments[1],p=arguments[2],f=arguments[3],d=l.y-h.y,y=h.x-l.x,v=l.x*h.y-h.x*l.y,m=p.y-f.y,b=f.x-p.x,x=p.x*f.y-f.x*p.y;this.x=y*x-b*v,this.y=m*v-d*x,this.w=d*b-m*y}}function G(){}function q(){}function B(){this.envelope=null,this.factory=null,this.SRID=null,this.userData=null;var t=arguments[0];this.factory=t,this.SRID=t.getSRID()}function z(){}function V(){}function k(){}function Y(){}function U(){}function X(){}function H(){}function W(){}function j(){}function K(){}function Z(){}function Q(){}function J(){this.array_=[],arguments[0]instanceof v&&this.addAll(arguments[0])}function $(t){return null==t?no:t.color}function tt(t){return null==t?null:t.parent}function et(t,e){null!==t&&(t.color=e)}function nt(t){return null==t?null:t.left}function it(t){return null==t?null:t.right}function rt(){this.root_=null,this.size_=0}function st(){}function ot(){}function at(){this.array_=[],arguments[0]instanceof v&&this.addAll(arguments[0])}function ut(){}function lt(){}function ht(){}function ct(){}function ft(){this.geometries=null;var t=arguments[0],e=arguments[1];if(B.call(this,e),null===t&&(t=[]),B.hasNullElements(t))throw new i("geometries must not contain null elements");this.geometries=t}function gt(){var t=arguments[0],e=arguments[1];ft.call(this,t,e)}function dt(){if(this.geom=null,this.geomFact=null,this.bnRule=null,this.endpointMap=null,1===arguments.length){var t=arguments[0];dt.call(this,t,V.MOD2_BOUNDARY_RULE)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.geom=e,this.geomFact=e.getFactory(),this.bnRule=n}}function pt(){this.count=null}function vt(){}function mt(){}function yt(){}function xt(){}function Et(){}function It(){}function Nt(){}function Ct(){}function St(){this.points=null;var t=arguments[0],e=arguments[1];B.call(this,e),this.init(t)}function wt(){}function Lt(){this.coordinates=null;var t=arguments[0],e=arguments[1];B.call(this,e),this.init(t)}function Rt(){}function Tt(){this.shell=null,this.holes=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(B.call(this,n),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),B.hasNullElements(e))throw new i("holes must not contain null elements");if(t.isEmpty()&&B.hasNonEmptyElements(e))throw new i("shell is empty but holes are not");this.shell=t,this.holes=e}function Pt(){var t=arguments[0],e=arguments[1];ft.call(this,t,e)}function bt(){if(arguments[0]instanceof g&&arguments[1]instanceof ie){var t=arguments[0],e=arguments[1];bt.call(this,e.getCoordinateSequenceFactory().create(t),e)}else if(R(arguments[0],D)&&arguments[1]instanceof ie){var n=arguments[0],i=arguments[1];St.call(this,n,i),this.validateConstruction()}}function Ot(){var t=arguments[0],e=arguments[1];ft.call(this,t,e)}function _t(){if(this.factory=null,this.isUserDataCopied=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.factory=t}}function Mt(){}function Dt(){}function At(){}function Ft(){}function Gt(){if(this.dimension=3,this.coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];Gt.call(this,t,3)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.coordinates=new Array(e).fill(null);for(var n=0;e>n;n++)this.coordinates[n]=new g}else if(R(arguments[0],D)){var i=arguments[0];if(null===i)return this.coordinates=new Array(0).fill(null),null;this.dimension=i.getDimension(),this.coordinates=new Array(i.size()).fill(null);for(var n=0;n<this.coordinates.length;n++)this.coordinates[n]=i.getCoordinateCopy(n)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],o=arguments[1];this.coordinates=r,this.dimension=o,null===r&&(this.coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this.coordinates=new Array(s).fill(null),this.dimension=a;for(var n=0;s>n;n++)this.coordinates[n]=new g}}function qt(){}function Bt(t,e){return t===e||t!==t&&e!==e}function zt(t,e){function n(t){return this&&this.constructor===n?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,void(t&&Vt.call(this,t))):new n(t)}return e||so(t,"size",{get:Jt}),t.constructor=n,n.prototype=t,n}function Vt(t){this.add?t.forEach(this.add,this):t.forEach(function(t){this.set(t[0],t[1])},this)}function kt(t){return this.has(t)&&(this._keys.splice(oo,1),this._values.splice(oo,1),this._itp.forEach(function(t){oo<t[0]&&t[0]--})),oo>-1}function Yt(t){return this.has(t)?this._values[oo]:void 0}function Ut(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!==e||0===e)for(oo=t.length;oo--&&!Bt(t[oo],e););else oo=t.indexOf(e);return oo>-1}function Xt(t){return Ut.call(this,this._keys,t)}function Ht(t,e){return this.has(t)?this._values[oo]=e:this._values[this._keys.push(t)-1]=e,this}function Wt(){(this._keys||0).length=this._values.length=0}function jt(){return Qt(this._itp,this._keys)}function Kt(){return Qt(this._itp,this._values)}function Zt(){return Qt(this._itp,this._keys,this._values)}function Qt(t,e,n){var i=[0],r=!1;return t.push(i),{next:function(){var o,s=i[0];return!r&&s<e.length?(o=n?[e[s],n[s]]:e[s],i[0]++):(r=!0,t.splice(t.indexOf(i),1)),{done:r,value:o}}}}function Jt(){return this._values.length}function $t(t,e){for(var n=this.entries();;){var i=n.next();if(i.done)break;t.call(e,i.value[1],i.value[0],this)}}function te(){this.map_=new co}function ee(){if(this.modelType=null,this.scale=null,0===arguments.length)this.modelType=ee.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ne){var t=arguments[0];this.modelType=t,t===ee.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var e=arguments[0];this.modelType=ee.FIXED,this.setScale(e)}else if(arguments[0]instanceof ee){var n=arguments[0];this.modelType=n.modelType,this.scale=n.scale}}function ne(){this.name=null;var t=arguments[0];this.name=t,ne.nameToTypeMap.put(t,this)}function ie(){if(this.precisionModel=null,this.coordinateSequenceFactory=null,this.SRID=null,0===arguments.length)ie.call(this,new ee,0);else if(1===arguments.length){if(R(arguments[0],G)){var t=arguments[0];ie.call(this,new ee,0,t)}else if(arguments[0]instanceof ee){var e=arguments[0];ie.call(this,e,0,ie.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];ie.call(this,n,i,ie.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.precisionModel=r,this.coordinateSequenceFactory=s,this.SRID=o}}function re(t){this.geometryFactory=t||new ie}function se(t){this.parser=new re(t)}function oe(){this.result=null,this.inputLines=Array(2).fill().map(function(){return Array(2)}),this.intPt=new Array(2).fill(null),this.intLineIndex=null,this._isProper=null,this.pa=null,this.pb=null,this.precisionModel=null,this.intPt[0]=new g,this.intPt[1]=new g,this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=0}function ae(){oe.apply(this)}function ue(){}function le(){this.p=null,this.crossingCount=0,this.isPointOnSegment=!1;var t=arguments[0];this.p=t}function he(){}function ce(){if(this.p0=null,this.p1=null,0===arguments.length)ce.call(this,new g,new g);else if(1===arguments.length){var t=arguments[0];ce.call(this,t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0=e,this.p1=n}else if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3];ce.call(this,new g(i,r),new g(o,s))}}function fe(){if(this.matrix=null,0===arguments.length)this.matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(lt.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){var t=arguments[0];fe.call(this),this.set(t)}else if(arguments[0]instanceof fe){var e=arguments[0];fe.call(this),this.matrix[L.INTERIOR][L.INTERIOR]=e.matrix[L.INTERIOR][L.INTERIOR],this.matrix[L.INTERIOR][L.BOUNDARY]=e.matrix[L.INTERIOR][L.BOUNDARY],this.matrix[L.INTERIOR][L.EXTERIOR]=e.matrix[L.INTERIOR][L.EXTERIOR],this.matrix[L.BOUNDARY][L.INTERIOR]=e.matrix[L.BOUNDARY][L.INTERIOR],this.matrix[L.BOUNDARY][L.BOUNDARY]=e.matrix[L.BOUNDARY][L.BOUNDARY],this.matrix[L.BOUNDARY][L.EXTERIOR]=e.matrix[L.BOUNDARY][L.EXTERIOR],this.matrix[L.EXTERIOR][L.INTERIOR]=e.matrix[L.EXTERIOR][L.INTERIOR],this.matrix[L.EXTERIOR][L.BOUNDARY]=e.matrix[L.EXTERIOR][L.BOUNDARY],this.matrix[L.EXTERIOR][L.EXTERIOR]=e.matrix[L.EXTERIOR][L.EXTERIOR]}}function ge(){this.areaBasePt=null,this.triangleCent3=new g,this.areasum2=0,this.cg3=new g,this.lineCentSum=new g,this.totalLength=0,this.ptCount=0,this.ptCentSum=new g;var t=arguments[0];this.areaBasePt=null,this.add(t)}function de(t){this.message=t||""}function pe(){this.array_=[]}function ve(){this.treeSet=new at,this.list=new I}function me(){if(this.geomFactory=null,this.inputPts=null,1===arguments.length){var t=arguments[0];me.call(this,me.extractCoordinates(t),t.getFactory())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputPts=ve.filterCoordinates(e),this.geomFactory=n}}function ye(){this.origin=null;var t=arguments[0];this.origin=t}function xe(){this.inputGeom=null,this.factory=null,this.pruneEmptyGeometry=!0,this.preserveGeometryCollectionType=!0,this.preserveCollections=!1,this.preserveType=!1}function Ee(){if(this.snapTolerance=0,this.srcPts=null,this.seg=new ce,this.allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof St&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];Ee.call(this,t.getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.srcPts=n,this._isClosed=Ee.isClosed(n),this.snapTolerance=i}}function Ie(){this.srcGeom=null;var t=arguments[0];this.srcGeom=t}function Ne(){if(xe.apply(this),this.snapTolerance=null,this.snapPts=null,this.isSelfSnap=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this.snapTolerance=t,this.snapPts=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.snapTolerance=n,this.snapPts=i,this.isSelfSnap=r}}function Ce(){this.isFirst=!0,this.commonMantissaBitsCount=53,this.commonBits=0,this.commonSignExp=null}function Se(){this.commonCoord=null,this.ccFilter=new we}function we(){this.commonBitsX=new Ce,this.commonBitsY=new Ce}function Le(){this.trans=null;var t=arguments[0];this.trans=t}function Re(){this.parent=null,this.atStart=null,this.max=null,this.index=null,this.subcollectionIterator=null;var t=arguments[0];this.parent=t,this.atStart=!0,this.index=0,this.max=t.getNumGeometries()}function Te(){if(this.boundaryRule=V.OGC_SFS_BOUNDARY_RULE,this.isIn=null,this.numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new i("Rule must be non-null");this.boundaryRule=t}}function Pe(){}function be(){}function Oe(){this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function _e(){}function Me(){this.bounds=null,this.item=null;var t=arguments[0],e=arguments[1];this.bounds=t,this.item=e}function De(){this._size=null,this.items=null,this._size=0,this.items=new I,this.items.add(null)}function Ae(){}function Fe(){}function Ge(){if(this.childBoundables=new I,this.bounds=null,this.level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.level=t}}function qe(){this.boundable1=null,this.boundable2=null,this._distance=null,this.itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.boundable1=t,this.boundable2=e,this.itemDistance=n,this._distance=this.distance()}function Be(){if(this.root=null,this.built=!1,this.itemBoundables=new I,this.nodeCapacity=null,0===arguments.length)Be.call(this,Be.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];f.isTrue(t>1,"Node capacity must be greater than 1"),this.nodeCapacity=t}}function ze(){}function Ve(){}function ke(){if(0===arguments.length)ke.call(this,ke.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];Be.call(this,t)}}function Ye(){var t=arguments[0];Ge.call(this,t)}function Ue(){}function Xe(){this.segString=null,this.coord=null,this.segmentIndex=null,this.segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.segString=t,this.coord=new g(e),this.segmentIndex=n,this.segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))}function He(){this.nodeMap=new rt,this.edge=null;var t=arguments[0];this.edge=t}function We(){this.nodeList=null,this.edge=null,this.nodeIt=null,this.currNode=null,this.nextNode=null,this.currSegIndex=0;var t=arguments[0];this.nodeList=t,this.edge=t.getEdge(),this.nodeIt=t.iterator(),this.readNextNode()}function je(){}function Ke(){this.nodeList=new He(this),this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function Ze(){this.tempEnv1=new C,this.tempEnv2=new C,this.overlapSeg1=new ce,this.overlapSeg2=new ce}function Qe(){this.pts=null,this.start=null,this.end=null,this.env=null,this.context=null,this.id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.pts=t,this.start=e,this.end=n,this.context=i}function Je(){}function $e(){}function tn(){}function en(){if(this.segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}}function nn(){if(this.monoChains=new I,this.index=new ke,this.idCounter=0,this.nodedSegStrings=null,this.nOverlaps=0,0===arguments.length);else if(1===arguments.length){var t=arguments[0];en.call(this,t)}}function rn(){Ze.apply(this),this.si=null;var t=arguments[0];this.si=t}function sn(){if(this.pt=null,1===arguments.length){var t=arguments[0];l.call(this,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];l.call(this,sn.msgWithCoord(e,n)),this.pt=new g(n)}}function on(){}function an(){this.findAllIntersections=!1,this.isCheckEndSegmentsOnly=!1,this.li=null,this.interiorIntersection=null,this.intSegments=null,this.intersections=new I,this.intersectionCount=0,this.keepIntersections=!0;var t=arguments[0];this.li=t,this.interiorIntersection=null}function un(){this.li=new ae,this.segStrings=null,this.findAllIntersections=!1,this.segInt=null,this._isValid=!0;var t=arguments[0];this.segStrings=t}function ln(){this.nv=null;var t=arguments[0];this.nv=new un(ln.toSegmentStrings(t))}function hn(){this.mapOp=null;var t=arguments[0];this.mapOp=t}function cn(){}function fn(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[cn.ON]=e}else if(arguments[0]instanceof fn){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var i=0;i<this.location.length;i++)this.location[i]=n.location[i]}}else if(3===arguments.length){
var r=arguments[0],o=arguments[1],s=arguments[2];this.init(3),this.location[cn.ON]=r,this.location[cn.LEFT]=o,this.location[cn.RIGHT]=s}}function gn(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new fn(t),this.elt[1]=new fn(t)}else if(arguments[0]instanceof gn){var e=arguments[0];this.elt[0]=new fn(e.elt[0]),this.elt[1]=new fn(e.elt[1])}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.elt[0]=new fn(L.NONE),this.elt[1]=new fn(L.NONE),this.elt[n].setLocation(i)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.elt[0]=new fn(r,o,s),this.elt[1]=new fn(r,o,s)}else if(4===arguments.length){var a=arguments[0],c=arguments[1],u=arguments[2],l=arguments[3];this.elt[0]=new fn(L.NONE,L.NONE,L.NONE),this.elt[1]=new fn(L.NONE,L.NONE,L.NONE),this.elt[a].setLocations(c,u,l)}}function dn(){this.startDe=null,this.maxNodeDegree=-1,this.edges=new I,this.pts=new I,this.label=new gn(L.NONE),this.ring=null,this._isHole=null,this.shell=null,this.holes=new I,this.geometryFactory=null;var t=arguments[0],e=arguments[1];this.geometryFactory=e,this.computePoints(t),this.computeRing()}function pn(){var t=arguments[0],e=arguments[1];dn.call(this,t,e)}function vn(){var t=arguments[0],e=arguments[1];dn.call(this,t,e)}function mn(){if(this.label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.label=t}}function yn(){mn.apply(this),this.coord=null,this.edges=null;var t=arguments[0],e=arguments[1];this.coord=t,this.edges=e,this.label=new gn(0,L.NONE)}function xn(){this.nodeMap=new rt,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}function En(){if(this.edge=null,this.label=null,this.node=null,this.p0=null,this.p1=null,this.dx=null,this.dy=null,this.quadrant=null,1===arguments.length){var t=arguments[0];this.edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];En.call(this,e,n,i,null)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];En.call(this,r),this.init(o,s),this.label=a}}function In(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this.sym=null,this.next=null,this.nextMin=null,this.edgeRing=null,this.minEdgeRing=null,this.depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(En.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}function Nn(){}function Cn(){if(this.edges=new I,this.nodes=null,this.edgeEndList=new I,0===arguments.length)this.nodes=new xn(new Nn);else if(1===arguments.length){var t=arguments[0];this.nodes=new xn(t)}}function Sn(){this.geometryFactory=null,this.shellList=new I;var t=arguments[0];this.geometryFactory=t}function wn(){this.op=null,this.geometryFactory=null,this.ptLocator=null,this.lineEdgesList=new I,this.resultLineList=new I;var t=arguments[0],e=arguments[1],n=arguments[2];this.op=t,this.geometryFactory=e,this.ptLocator=n}function Ln(){this.op=null,this.geometryFactory=null,this.resultPointList=new I;var t=arguments[0],e=arguments[1];arguments[2],this.op=t,this.geometryFactory=e}function Rn(){}function Tn(){this.geom=null;var t=arguments[0];this.geom=t}function Pn(){this.edgeMap=new rt,this.edgeList=null,this.ptInAreaLocation=[L.NONE,L.NONE]}function bn(){Pn.apply(this),this.resultAreaEdgeList=null,this.label=null,this.SCANNING_FOR_INCOMING=1,this.LINKING_TO_OUTGOING=2}function On(){Nn.apply(this)}function _n(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}function Mn(){if(this.label=null,this.xValue=null,this.eventType=null,this.insertEvent=null,this.deleteEventIndex=null,this.obj=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.eventType=Mn.DELETE,this.xValue=t,this.insertEvent=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.eventType=Mn.INSERT,this.label=n,this.xValue=i,this.obj=r}}function Dn(){}function An(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.properIntersectionPoint=null,this.li=null,this.includeProper=null,this.recordIsolated=null,this.isSelfIntersection=null,this.numIntersections=0,this.numTests=0,this.bdyNodes=null,this._isDone=!1,this.isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.li=t,this.includeProper=e,this.recordIsolated=n}function Fn(){Dn.apply(this),this.events=new I,this.nOverlaps=null}function Gn(){this.min=r.POSITIVE_INFINITY,this.max=r.NEGATIVE_INFINITY}function qn(){}function Bn(){Gn.apply(this),this.item=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.min=t,this.max=e,this.item=n}function zn(){Gn.apply(this),this.node1=null,this.node2=null;var t=arguments[0],e=arguments[1];this.node1=t,this.node2=e,this.buildExtent(this.node1,this.node2)}function Vn(){this.leaves=new I,this.root=null,this.level=0}function kn(){if(this.lines=null,this.isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this.lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.lines=e,this.isForcedToLineString=n}}function Yn(){this.items=new I}function Un(){this.index=null;var t=arguments[0];if(!R(t,Rt))throw new i("Argument must be Polygonal");this.index=new Hn(t)}function Xn(){this.counter=null;var t=arguments[0];this.counter=t}function Hn(){this.index=new Vn;var t=arguments[0];this.init(t)}function Wn(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new g(t),this.segmentIndex=e,this.dist=n}function jn(){this.nodeMap=new rt,this.edge=null;var t=arguments[0];this.edge=t}function Kn(){}function Zn(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new C,this.env2=new C;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Kn;this.startIndex=e.getChainStartIndices(this.pts)}function Qn(){this.depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;2>t;t++)for(var e=0;3>e;e++)this.depth[t][e]=Qn.NULL_VALUE}function Jn(){if(mn.apply(this),this.pts=null,this.env=null,this.eiList=new jn(this),this.name=null,this.mce=null,this._isIsolated=!0,this.depth=new Qn,this.depthDelta=0,1===arguments.length){var t=arguments[0];Jn.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pts=e,this.label=n}}function $n(){if(Cn.apply(this),this.parentGeom=null,this.lineEdgeMap=new te,this.boundaryNodeRule=null,this.useBoundaryDeterminationRule=!0,this.argIndex=null,this.boundaryNodes=null,this._hasTooFewPoints=!1,this.invalidPoint=null,this.areaPtLocator=null,this.ptLocator=new Te,2===arguments.length){var t=arguments[0],e=arguments[1];$n.call(this,t,e,V.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.argIndex=n,this.parentGeom=i,this.boundaryNodeRule=r,null!==i&&this.add(i)}}function ti(){if(this.li=new ae,this.resultPrecisionModel=null,this.arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this.arg=new Array(1).fill(null),this.arg[0]=new $n(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];ti.call(this,e,n,V.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];i.getPrecisionModel().compareTo(r.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(r.getPrecisionModel()),this.arg=new Array(2).fill(null),this.arg[0]=new $n(0,i,o),this.arg[1]=new $n(1,r,o)}}function ei(){this.pts=null,this._orientation=null;var t=arguments[0];this.pts=t,this._orientation=ei.orientation(t)}function ni(){this.edges=new I,this.ocaMap=new rt}function ii(){this.ptLocator=new Te,this.geomFact=null,this.resultGeom=null,this.graph=null,this.edgeList=new ni,this.resultPolyList=new I,this.resultLineList=new I,this.resultPointList=new I;var t=arguments[0],e=arguments[1];ti.call(this,t,e),this.graph=new Cn(new On),this.geomFact=t.getFactory()}function ri(){this.geom=new Array(2).fill(null),this.snapTolerance=null,this.cbr=null;var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e,this.computeSnapTolerance()}function si(){this.geom=new Array(2).fill(null);var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e}function oi(){this.factory=null,this.interiorPoint=null,this.maxWidth=0;var t=arguments[0];this.factory=t.getFactory(),this.add(t)}function ai(){this.poly=null,this.centreY=null,this.hiY=r.MAX_VALUE,this.loY=-r.MAX_VALUE;var t=arguments[0];this.poly=t,this.hiY=t.getEnvelopeInternal().getMaxY(),this.loY=t.getEnvelopeInternal().getMinY(),this.centreY=oi.avg(this.loY,this.hiY)}function ui(){this.centroid=null,this.minDistance=r.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.addInterior(t),null===this.interiorPoint&&this.addEndpoints(t)}function li(){this.centroid=null,this.minDistance=r.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.add(t)}function hi(){}function ci(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}function fi(){this.input=null,this.extremalPts=null,this.centre=null,this.radius=0;var t=arguments[0];this.input=t}function gi(){if(this.inputGeom=null,this.isConvex=null,this.convexHullPts=null,this.minBaseSeg=new ce,this.minWidthPt=null,this.minPtIndex=null,this.minWidth=0,1===arguments.length){var t=arguments[0];gi.call(this,t,!1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isConvex=n}}function di(){this.inputGeom=null,this.distanceTolerance=null;var t=arguments[0];this.inputGeom=t}function pi(){xe.apply(this),this.distanceTolerance=null;var t=arguments[0];this.distanceTolerance=t}function vi(){this._orig=null,this._sym=null,this._next=null;var t=arguments[0];this._orig=t}function mi(){this._isMarked=!1;var t=arguments[0];vi.call(this,t)}function yi(){this.vertexMap=new te}function xi(){this._isStart=!1;var t=arguments[0];mi.call(this,t)}function Ei(){yi.apply(this)}function Ii(){this.result=null,this.factory=null,this.graph=null,this.lines=new I,this.nodeEdgeStack=new pe,this.ringStartEdge=null,this.graph=new Ei}function Ni(){this.items=new I,this.subnode=new Array(4).fill(null)}function Ci(){}function Si(t,e){var n,i,r,o,s={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}},a={32:8,64:11}[t];if(o||(n=0>e||0>1/e,isFinite(e)||(o=s[t],n&&(o.d+=1<<t/4-1),i=Math.pow(2,a)-1,r=0)),!o){for(i={32:127,64:1023}[t],r=Math.abs(e);r>=2;)i++,r/=2;for(;1>r&&i>0;)i--,r*=2;0>=i&&(r/=2),32===t&&i>254&&(o={d:n?255:127,c:128,b:0,a:0},i=Math.pow(2,a)-1,r=0)}return i}function wi(){this.pt=new g,this.level=0,this.env=null;var t=arguments[0];this.computeKey(t)}function Li(){Ni.apply(this),this.env=null,this.centrex=null,this.centrey=null,this.level=null;var t=arguments[0],e=arguments[1];this.env=t,this.level=e,this.centrex=(t.getMinX()+t.getMaxX())/2,this.centrey=(t.getMinY()+t.getMaxY())/2}function Ri(){}function Ti(){Ni.apply(this)}function Pi(){this.root=null,this.minExtent=1,this.root=new Ti}function bi(t){this.geometryFactory=t||new ie}function Oi(t){this.geometryFactory=t||new ie,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new bi(this.geometryFactory)}function _i(){this.parser=new bi(this.geometryFactory)}function Mi(t){this.geometryFactory=t||new ie,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new re(this.geometryFactory)}function Di(t){return[t.x,t.y]}function Ai(t){this.geometryFactory=t||new ie}function Fi(){if(this.noder=null,this.scaleFactor=null,this.offsetX=null,this.offsetY=null,this.isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];Fi.call(this,t,e,0,0)}else if(4===arguments.length){var n=arguments[0],i=arguments[1];arguments[2],arguments[3],this.noder=n,this.scaleFactor=i,this.isScaled=!this.isIntegerPrecision()}}function Gi(){if(this.inputGeom=null,this.isClosedEndpointsInInterior=!0,this.nonSimpleLocation=null,1===arguments.length){var t=arguments[0];this.inputGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isClosedEndpointsInInterior=!n.isInBoundary(2)}}function qi(){this.pt=null,this.isClosed=null,this.degree=null;var t=arguments[0];this.pt=t,this.isClosed=!1,this.degree=0}function Bi(){if(this.quadrantSegments=Bi.DEFAULT_QUADRANT_SEGMENTS,this.endCapStyle=Bi.CAP_ROUND,this.joinStyle=Bi.JOIN_ROUND,this.mitreLimit=Bi.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this.simplifyFactor=Bi.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(n)}else if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(r),this.setJoinStyle(o),this.setMitreLimit(s)}}function zi(){this.minIndex=-1,this.minCoord=null,this.minDe=null,this.orientedDe=null}function Vi(){this.array_=[]}function ki(){this.finder=null,this.dirEdgeList=new I,this.nodes=new I,this.rightMostCoord=null,this.env=null,this.finder=new zi}function Yi(){this.inputLine=null,this.distanceTol=null,this.isDeleted=null,this.angleOrientation=he.COUNTERCLOCKWISE;var t=arguments[0];this.inputLine=t}function Ui(){this.ptList=null,this.precisionModel=null,this.minimimVertexDistance=0,this.ptList=new I}function Xi(){this.maxCurveSegmentError=0,this.filletAngleQuantum=null,this.closingSegLengthFactor=1,this.segList=null,this.distance=0,this.precisionModel=null,this.bufParams=null,this.li=null,this.s0=null,this.s1=null,this.s2=null,this.seg0=new ce,this.seg1=new ce,this.offset0=new ce,this.offset1=new ce,this.side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.precisionModel=t,this.bufParams=e,this.li=new ae,this.filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===Bi.JOIN_ROUND&&(this.closingSegLengthFactor=Xi.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}function Hi(){this.distance=0,this.precisionModel=null,this.bufParams=null;var t=arguments[0],e=arguments[1];this.precisionModel=t,this.bufParams=e}function Wi(){this.subgraphs=null,this.seg=new ce,this.cga=new he;var t=arguments[0];this.subgraphs=t}function ji(){this.upwardSeg=null,this.leftDepth=null;var t=arguments[0],e=arguments[1];this.upwardSeg=new ce(t),this.leftDepth=e}function Ki(){this.inputGeom=null,this.distance=null,this.curveBuilder=null,this.curveList=new I;var t=arguments[0],e=arguments[1],n=arguments[2];this.inputGeom=t,this.distance=e,this.curveBuilder=n}function Zi(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.hasInterior=!1,this.properIntersectionPoint=null,this.li=null,this.isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this.li=t}function Qi(){this.bufParams=null,this.workingPrecisionModel=null,this.workingNoder=null,this.geomFact=null,this.graph=null,this.edgeList=new ni;var t=arguments[0];this.bufParams=t}function Ji(){this.li=new ae,this.segStrings=null;var t=arguments[0];this.segStrings=t}function $i(){this.li=null,this.pt=null,this.originalPt=null,this.ptScaled=null,this.p0Scaled=null,this.p1Scaled=null,this.scaleFactor=null,this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,this.corner=new Array(4).fill(null),this.safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this.originalPt=t,this.pt=t,this.scaleFactor=e,this.li=n,0>=e)throw new i("Scale factor must be non-zero");1!==e&&(this.pt=new g(this.scale(t.x),this.scale(t.y)),this.p0Scaled=new g,this.p1Scaled=new g),this.initCorners(this.pt)}function tr(){this.tempEnv1=new C,this.selectedSegment=new ce}function er(){this.index=null;var t=arguments[0];this.index=t}function nr(){tr.apply(this),this.hotPixel=null,this.parentEdge=null,this.hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.hotPixel=t,this.parentEdge=e,this.hotPixelVertexIndex=n}function ir(){this.li=null,this.interiorIntersections=null;var t=arguments[0];this.li=t,this.interiorIntersections=new I}function rr(){this.pm=null,this.li=null,this.scaleFactor=null,this.noder=null,this.pointSnapper=null,this.nodedSegStrings=null;var t=arguments[0];this.pm=t,this.li=new ae,this.li.setPrecisionModel(t),this.scaleFactor=t.getScale()}function sr(){if(this.argGeom=null,this.distance=null,this.bufParams=new Bi,this.resultGeometry=null,this.saveException=null,1===arguments.length){var t=arguments[0];this.argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.argGeom=e,this.bufParams=n}}function or(){this.comps=null;var t=arguments[0];this.comps=t}function ar(){if(this.component=null,this.segIndex=null,this.pt=null,2===arguments.length){var t=arguments[0],e=arguments[1];ar.call(this,t,ar.INSIDE_AREA,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.component=n,this.segIndex=i,this.pt=r}}function ur(){this.pts=null;var t=arguments[0];this.pts=t}function lr(){this.locations=null;var t=arguments[0];this.locations=t}function hr(){if(this.geom=null,this.terminateDistance=0,this.ptLocator=new Te,this.minDistanceLocation=null,this.minDistance=r.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];hr.call(this,t,e,0)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this.geom=new Array(2).fill(null),this.geom[0]=n,this.geom[1]=i,this.terminateDistance=o}}function cr(){this.factory=null,this.directedEdges=new I,this.coordinates=null;var t=arguments[0];this.factory=t}function fr(){this._isMarked=!1,this._isVisited=!1,this.data=null}function gr(){fr.apply(this),this.parentEdge=null,this.from=null,this.to=null,this.p0=null,this.p1=null,this.sym=null,this.edgeDirection=null,this.quadrant=null,this.angle=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.from=t,this.to=e,this.edgeDirection=i,this.p0=t.getCoordinate(),this.p1=n;var r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y;this.quadrant=Je.quadrant(r,o),this.angle=Math.atan2(o,r)}function dr(){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];gr.call(this,t,e,n,i)}function pr(){if(fr.apply(this),this.dirEdge=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];this.setDirectedEdges(t,e)}}function vr(){this.outEdges=new I,this.sorted=!1}function mr(){if(fr.apply(this),this.pt=null,this.deStar=null,1===arguments.length){var t=arguments[0];mr.call(this,t,new vr)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pt=e,this.deStar=n}}function yr(){pr.apply(this),this.line=null;var t=arguments[0];this.line=t}function xr(){this.nodeMap=new rt}function Er(){this.edges=new J,this.dirEdges=new J,this.nodeMap=new xr}function Ir(){Er.apply(this)}function Nr(){this.graph=new Ir,this.mergedLineStrings=null,this.factory=null,this.edgeStrings=null}function Cr(){this.edgeRing=null,this.next=null,this.label=-1;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];gr.call(this,t,e,n,i)}function Sr(){pr.apply(this),this.line=null;var t=arguments[0];this.line=t}function wr(){this.factory=null,this.deList=new I,this.lowestEdge=null,this.ring=null,this.ringPts=null,this.holes=null,this.shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;var t=arguments[0];this.factory=t}function Lr(){}function Rr(){Er.apply(this),this.factory=null;var t=arguments[0];this.factory=t}function Tr(){if(this.lineStringAdder=new Pr(this),this.graph=null,this.dangles=new I,this.cutEdges=new I,this.invalidRingLines=new I,this.holeList=null,this.shellList=null,this.polyList=null,this.isCheckingRingsValid=!0,this.extractOnlyPolygonal=null,this.geomFactory=null,0===arguments.length)Tr.call(this,!1);else if(1===arguments.length){var t=arguments[0];this.extractOnlyPolygonal=t}}function Pr(){this.p=null;var t=arguments[0];this.p=t}function br(){}function Or(){if(this.edgeEnds=new I,1===arguments.length){var t=arguments[0];Or.call(this,null,t)}else if(2===arguments.length){var e=(arguments[0],arguments[1]);En.call(this,e.getEdge(),e.getCoordinate(),e.getDirectedCoordinate(),new gn(e.getLabel())),this.insert(e)}}function _r(){Pn.apply(this)}function Mr(){var t=arguments[0],e=arguments[1];yn.call(this,t,e)}function Dr(){Nn.apply(this)}function Ar(){this.li=new ae,this.ptLocator=new Te,this.arg=null,this.nodes=new xn(new Dr),this.im=null,this.isolatedEdges=new I,this.invalidPoint=null;var t=arguments[0];this.arg=t}function Fr(){this.rectEnv=null;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal()}function Gr(){this.li=new ae,this.rectEnv=null,this.diagUp0=null,this.diagUp1=null,this.diagDown0=null,this.diagDown1=null;var t=arguments[0];this.rectEnv=t,this.diagUp0=new g(t.getMinX(),t.getMinY()),this.diagUp1=new g(t.getMaxX(),t.getMaxY()),this.diagDown0=new g(t.getMinX(),t.getMaxY()),this.diagDown1=new g(t.getMaxX(),t.getMinY())}function qr(){this._isDone=!1}function Br(){this.rectangle=null,this.rectEnv=null;var t=arguments[0];this.rectangle=t,this.rectEnv=t.getEnvelopeInternal()}function zr(){qr.apply(this),this.rectEnv=null,this._intersects=!1;var t=arguments[0];this.rectEnv=t}function Vr(){qr.apply(this),this.rectSeq=null,this.rectEnv=null,this._containsPoint=!1;var t=arguments[0];this.rectSeq=t.getExteriorRing().getCoordinateSequence(),this.rectEnv=t.getEnvelopeInternal()}function kr(){qr.apply(this),this.rectEnv=null,this.rectIntersector=null,this.hasIntersection=!1,this.p0=new g,this.p1=new g;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal(),this.rectIntersector=new Gr(this.rectEnv)}function Yr(){if(this._relate=null,2===arguments.length){var t=arguments[0],e=arguments[1];ti.call(this,t,e),this._relate=new Ar(this.arg)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];ti.call(this,n,i,r),this._relate=new Ar(this.arg)}}function Ur(){this.geomFactory=null,this.skipEmpty=!1,this.inputGeoms=null;var t=arguments[0];this.geomFactory=Ur.extractFactory(t),this.inputGeoms=t}function Xr(){this.pointGeom=null,this.otherGeom=null,this.geomFact=null;var t=arguments[0],e=arguments[1];this.pointGeom=t,this.otherGeom=e,this.geomFact=e.getFactory()}function Hr(){this.sortIndex=-1,this.comps=null;var t=arguments[0],e=arguments[1];this.sortIndex=t,this.comps=e}function Wr(){this.inputPolys=null,this.geomFactory=null;var t=arguments[0];this.inputPolys=t,null===this.inputPolys&&(this.inputPolys=new I)}function jr(){if(this.polygons=new I,this.lines=new I,this.points=new I,this.geomFact=null,1===arguments.length){if(R(arguments[0],v)){var t=arguments[0];this.extract(t)}else if(arguments[0]instanceof B){var e=arguments[0];this.extract(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.geomFact=i,this.extract(n)}}function Kr(){this.geometryFactory=new ie,this.geomGraph=null,this.disconnectedRingcoord=null;var t=arguments[0];this.geomGraph=t}function Zr(){this.items=new I,this.subnode=[null,null]}function Qr(){if(this.min=null,this.max=null,0===arguments.length)this.min=0,this.max=0;else if(1===arguments.length){var t=arguments[0];this.init(t.min,t.max)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.init(e,n)}}function Jr(){this.pt=0,this.level=0,this.interval=null;var t=arguments[0];this.computeKey(t)}function $r(){Zr.apply(this),this.interval=null,this.centre=null,this.level=null;var t=arguments[0],e=arguments[1];this.interval=t,this.level=e,this.centre=(t.getMin()+t.getMax())/2}function ts(){Zr.apply(this)}function es(){this.root=null,this.minExtent=1,this.root=new ts}function ns(){}function is(){this.ring=null,this.tree=null,this.crossings=0,this.interval=new Qr;var t=arguments[0];this.ring=t,this.buildIndex()}function rs(){tr.apply(this),this.mcp=null,this.p=null;var t=arguments[0],e=arguments[1];this.mcp=t,this.p=e}function ss(){this.nodes=new xn(new Dr)}function os(){this.li=new ae,this.geomGraph=null,this.nodeGraph=new ss,this.invalidPoint=null;var t=arguments[0];this.geomGraph=t}function as(){this.graph=null,this.rings=new I,this.totalEnv=new C,this.index=null,this.nestedPt=null;var t=arguments[0];this.graph=t}function us(){if(this.errorType=null,this.pt=null,1===arguments.length){var t=arguments[0];us.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.errorType=e,null!==n&&(this.pt=n.copy())}}function ls(){this.parentGeometry=null,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null;var t=arguments[0];this.parentGeometry=t}function hs(){_t.CoordinateOperation.apply(this),this.targetPM=null,this.removeCollapsed=!0;var t=arguments[0],e=arguments[1];this.targetPM=t,this.removeCollapsed=e}function cs(){this.targetPM=null,this.removeCollapsed=!0,this.changePrecisionModel=!1,this.isPointwise=!1;var t=arguments[0];this.targetPM=t}function fs(){this.pts=null,this.usePt=null,this.distanceTolerance=null,this.seg=new ce;var t=arguments[0];this.pts=t}function gs(){this.inputGeom=null,this.distanceTolerance=null,this.isEnsureValidTopology=!0;var t=arguments[0];this.inputGeom=t}function ds(){xe.apply(this),this.isEnsureValidTopology=!0,this.distanceTolerance=null;var t=arguments[0],e=arguments[1];this.isEnsureValidTopology=t,this.distanceTolerance=e}function ps(){if(this.parent=null,this.index=null,2===arguments.length){var t=arguments[0],e=arguments[1];ps.call(this,t,e,null,-1)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=arguments[3];ce.call(this,n,i),this.parent=r,this.index=o}}function vs(){if(this.parentLine=null,this.segs=null,this.resultSegs=new I,this.minimumSize=null,1===arguments.length){var t=arguments[0];vs.call(this,t,2)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.parentLine=e,this.minimumSize=n,this.init()}}function ms(){this.index=new Pi}function ys(){this.querySeg=null,this.items=new I;var t=arguments[0];this.querySeg=t}function xs(){this.li=new ae,this.inputIndex=new ms,this.outputIndex=new ms,this.line=null,this.linePts=null,this.distanceTolerance=0;var t=arguments[0],e=arguments[1];this.inputIndex=t,this.outputIndex=e}function Es(){this.inputIndex=new ms,this.outputIndex=new ms,this.distanceTolerance=0}function Is(){this.inputGeom=null,this.lineSimplifier=new Es,this.linestringMap=null;var t=arguments[0];this.inputGeom=t}function Ns(){xe.apply(this),this.linestringMap=null;var t=arguments[0];this.linestringMap=t}function Cs(){this.tps=null;var t=arguments[0];this.tps=t}function Ss(){this.seg=null,this.segLen=null,this.splitPt=null,this.minimumLen=0;var t=arguments[0];this.seg=t,this.segLen=t.getLength()}function ws(){}function Ls(){}function Rs(){}function Ts(){if(this.p=null,1===arguments.length){var t=arguments[0];this.p=new g(t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p=new g(e,n)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this.p=new g(i,r,o)}}function Ps(){this._isOnConstraint=null,this.constraint=null;var t=arguments[0];Ts.call(this,t)}function bs(){this._rot=null,this.vertex=null,this.next=null,this.data=null}function Os(){this.subdiv=null,this.isUsingTolerance=!1;var t=arguments[0];this.subdiv=t,this.isUsingTolerance=t.getTolerance()>0}function _s(){}function Ms(){this.subdiv=null,this.lastEdge=null;var t=arguments[0];this.subdiv=t,this.init()}function Ds(){if(this.seg=null,1===arguments.length){if("string"==typeof arguments[0]){var t=arguments[0];l.call(this,t)}else if(arguments[0]instanceof ce){var e=arguments[0];l.call(this,"Locate failed to converge (at edge: "+e+").  Possible causes include invalid Subdivision topology or very close sites"),this.seg=new ce(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];l.call(this,Ds.msgWithSpatial(n,i)),this.seg=new ce(i)}}function As(){}function Fs(){this.visitedKey=0,this.quadEdges=new I,this.startingEdge=null,this.tolerance=null,this.edgeCoincidenceTolerance=null,this.frameVertex=new Array(3).fill(null),this.frameEnv=null,this.locator=null,this.seg=new ce,this.triEdges=new Array(3).fill(null);var t=arguments[0],e=arguments[1];this.tolerance=e,this.edgeCoincidenceTolerance=e/Fs.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(t),this.startingEdge=this.initSubdiv(),this.locator=new Ms(this)}function Gs(){}function qs(){this.triList=new I}function Bs(){this.triList=new I}function zs(){this.coordList=new N,this.triCoords=new I}function Vs(){if(this.ls=null,this.data=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.ls=new ce(t,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.ls=new ce(n,i),this.data=r}else if(6===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],c=arguments[3],u=arguments[4],l=arguments[5];Vs.call(this,new g(o,s,a),new g(c,u,l))}else if(7===arguments.length){var h=arguments[0],p=arguments[1],f=arguments[2],d=arguments[3],y=arguments[4],v=arguments[5],m=arguments[6];Vs.call(this,new g(h,p,f),new g(d,y,v),m)}}function ks(){}function Ys(){if(this.p=null,this.data=null,this.left=null,this.right=null,this.count=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.p=new g(t),this.left=null,this.right=null,this.count=1,this.data=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.p=new g(n,i),this.left=null,this.right=null,this.count=1,this.data=r}}function Us(){if(this.root=null,this.numberOfNodes=null,this.tolerance=null,0===arguments.length)Us.call(this,0);else if(1===arguments.length){var t=arguments[0];this.tolerance=t}}function Xs(){this.tolerance=null,this.matchNode=null,this.matchDist=0,this.p=null;var t=arguments[0],e=arguments[1];this.p=t,this.tolerance=e}function Hs(){this.initialVertices=null,this.segVertices=null,this.segments=new I,this.subdiv=null,this.incDel=null,this.convexHull=null,this.splitFinder=new Ls,this.kdt=null,this.vertexFactory=null,this.computeAreaEnv=null,this.splitPt=null,this.tolerance=null;var t=arguments[0],e=arguments[1];this.initialVertices=new I(t),this.tolerance=e,this.kdt=new Us(e)}function Ws(){this.siteCoords=null,this.tolerance=0,this.subdiv=null}function js(){this.siteCoords=null,this.constraintLines=null,this.tolerance=0,this.subdiv=null,this.constraintVertexMap=new rt}function Ks(){this.siteCoords=null,this.tolerance=0,this.subdiv=null,this.clipEnv=null,this.diagramEnv=null}function Zs(){}Array.prototype.fill||(Array.prototype.fill=function(t){for(var e=Object(this),n=parseInt(e.length,10),i=arguments[1],r=parseInt(i,10)||0,o=0>r?Math.max(n+r,0):Math.min(r,n),s=arguments[2],a=void 0===s?n:parseInt(s,10)||0,c=0>a?Math.max(n+a,0):Math.min(a,n);c>o;o++)e[o]=t;return e}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!==t},Math.trunc=Math.trunc||function(t){return 0>t?Math.ceil(t):Math.floor(t)},e(n.prototype,{interfaces_:function(){return[]},getClass:function(){return n}}),n.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n},r.isNaN=function(t){return Number.isNaN(t)},r.doubleToLongBits=function(t){return t},r.longBitsToDouble=function(t){return t},r.isInfinite=function(t){return!Number.isFinite(t)},r.MAX_VALUE=Number.MAX_VALUE,h(c,l),e(c.prototype,{interfaces_:function(){return[]},getClass:function(){return c}}),e(f.prototype,{interfaces_:function(){return[]},getClass:function(){return f}}),f.shouldNeverReachHere=function(){if(0===arguments.length)f.shouldNeverReachHere(null);else if(1===arguments.length){
var t=arguments[0];throw new c("Should never reach here"+(null!==t?": "+t:""))}},f.isTrue=function(){if(1===arguments.length){var t=arguments[0];f.isTrue(t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!e)throw null===n?new c:new c(n)}},f.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];f.equals(t,e,null)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(!i.equals(n))throw new c("Expected "+n+" but encountered "+i+(null!==r?": "+r:""))}},e(g.prototype,{setOrdinate:function(t,e){switch(t){case g.X:this.x=e;break;case g.Y:this.y=e;break;case g.Z:this.z=e;break;default:throw new i("Invalid ordinate index: "+t)}},equals2D:function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],i=arguments[1];return!!n.equalsWithTolerance(this.x,e.x,i)&&!!n.equalsWithTolerance(this.y,e.y,i)}},getOrdinate:function(t){switch(t){case g.X:return this.x;case g.Y:return this.y;case g.Z:return this.z}throw new i("Invalid ordinate index: "+t)},equals3D:function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||r.isNaN(this.z)&&r.isNaN(t.z))},equals:function(t){return t instanceof g&&this.equals2D(t)},equalInZ:function(t,e){return n.equalsWithTolerance(this.z,t.z,e)},compareTo:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},clone:function(){try{var t=null;return t}catch(t){if(t instanceof CloneNotSupportedException)return f.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}finally{}},copy:function(){return new g(this)},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"},distance3D:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+n*n+i*i)},distance:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return t=37*t+g.hashCode(this.x),t=37*t+g.hashCode(this.y)},setCoordinate:function(t){this.x=t.x,this.y=t.y,this.z=t.z},interfaces_:function(){return[s,o,u]},getClass:function(){return g}}),g.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=r.doubleToLongBits(t);return Math.trunc(e^e>>>32)}},e(d.prototype,{compare:function(t,e){var n=t,i=e,r=d.compare(n.x,i.x);if(0!==r)return r;var o=d.compare(n.y,i.y);if(0!==o)return o;if(this.dimensionsToTest<=2)return 0;var s=d.compare(n.z,i.z);return s},interfaces_:function(){return[a]},getClass:function(){return d}}),d.compare=function(t,e){return e>t?-1:t>e?1:r.isNaN(t)?r.isNaN(e)?0:-1:r.isNaN(e)?1:0},g.DimensionalComparator=d,g.serialVersionUID=0x5cbf2c235c7e5800,g.NULL_ORDINATE=r.NaN,g.X=0,g.Y=1,g.Z=2,p.prototype.hasNext=function(){},p.prototype.next=function(){},p.prototype.remove=function(){},v.prototype.add=function(){},v.prototype.addAll=function(){},v.prototype.isEmpty=function(){},v.prototype.iterator=function(){},v.prototype.size=function(){},v.prototype.toArray=function(){},v.prototype.remove=function(){},m.prototype=new Error,m.prototype.name="IndexOutOfBoundsException",y.prototype=Object.create(v.prototype),y.prototype.constructor=y,y.prototype.get=function(){},y.prototype.set=function(){},y.prototype.isEmpty=function(){},x.prototype=new Error,x.prototype.name="NoSuchElementException",E.prototype=new Error,E.prototype.name="OperationNotSupported",I.prototype=Object.create(y.prototype),I.prototype.constructor=I,I.prototype.ensureCapacity=function(){},I.prototype.interfaces_=function(){return[y,v]},I.prototype.add=function(t){return this.array_.push(t),!0},I.prototype.clear=function(){this.array_=[]},I.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},I.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},I.prototype.iterator=function(){return new to(this)},I.prototype.get=function(t){if(0>t||t>=this.size())throw new m;return this.array_[t]},I.prototype.isEmpty=function(){return 0===this.array_.length},I.prototype.size=function(){return this.array_.length},I.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},I.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;i>n;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e};var to=function(t){this.arrayList_=t,this.position_=0};to.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new x;return this.arrayList_.get(this.position_++)},to.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},to.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},to.prototype.remove=function(){throw new E},h(N,I),e(N.prototype,{getCoordinate:function(t){return this.get(t)},addAll:function(){if(2===arguments.length){for(var t=arguments[0],e=arguments[1],n=!1,i=t.iterator();i.hasNext();)this.add(i.next(),e),n=!0;return n}return I.prototype.addAll.apply(this,arguments)},clone:function t(){for(var t=I.prototype.clone.call(this),e=0;e<this.size();e++)t.add(e,this.get(e).copy());return t},toCoordinateArray:function(){return this.toArray(N.coordArrayType)},add:function(){if(1===arguments.length){var t=arguments[0];I.prototype.add.call(this,t)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof g&&"boolean"==typeof arguments[1]){var i=arguments[0],r=arguments[1];if(!r&&this.size()>=1){var o=this.get(this.size()-1);if(o.equals2D(i))return null}I.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var s=arguments[0],a=arguments[1];return this.add(s,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var c=arguments[0],u=arguments[1],l=arguments[2];if(l)for(var h=0;h<c.length;h++)this.add(c[h],u);else for(var h=c.length-1;h>=0;h--)this.add(c[h],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof g){var p=arguments[0],f=arguments[1],d=arguments[2];if(!d){var y=this.size();if(y>0){if(p>0){var v=this.get(p-1);if(v.equals2D(f))return null}if(y>p){var m=this.get(p);if(m.equals2D(f))return null}}}I.prototype.add.call(this,p,f)}}else if(4===arguments.length){var b=arguments[0],x=arguments[1],S=arguments[2],_=arguments[3],w=1;S>_&&(w=-1);for(var h=S;h!==_;h+=w)this.add(b[h],x);return!0}},closeRing:function(){this.size()>0&&this.add(new g(this.get(0)),!1)},interfaces_:function(){return[]},getClass:function(){return N}}),N.coordArrayType=new Array(0).fill(null),e(C.prototype,{getArea:function(){return this.getWidth()*this.getHeight()},equals:function(t){if(!(t instanceof C))return!1;var e=t;return this.isNull()?e.isNull():this.maxx===e.getMaxX()&&this.maxy===e.getMaxY()&&this.minx===e.getMinX()&&this.miny===e.getMinY()},intersection:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new C;var e=this.minx>t.minx?this.minx:t.minx,n=this.miny>t.miny?this.miny:t.miny,i=this.maxx<t.maxx?this.maxx:t.maxx,r=this.maxy<t.maxy?this.maxy:t.maxy;return new C(e,i,n,r)},isNull:function(){return this.maxx<this.minx},getMaxX:function(){return this.maxx},covers:function(){if(1===arguments.length){if(arguments[0]instanceof g){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof C){var e=arguments[0];return!this.isNull()&&!e.isNull()&&(e.getMinX()>=this.minx&&e.getMaxX()<=this.maxx&&e.getMinY()>=this.miny&&e.getMaxY()<=this.maxy)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&(n>=this.minx&&n<=this.maxx&&i>=this.miny&&i<=this.maxy)}},intersects:function(){if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t.minx>this.maxx||t.maxx<this.minx||t.miny>this.maxy||t.maxy<this.miny)}if(arguments[0]instanceof g){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&!(n>this.maxx||n<this.minx||i>this.maxy||i<this.miny)}},getMinY:function(){return this.miny},getMinX:function(){return this.minx},expandToInclude:function(){if(1===arguments.length){if(arguments[0]instanceof g){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof C){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this.minx=e.getMinX(),this.maxx=e.getMaxX(),this.miny=e.getMinY(),this.maxy=e.getMaxY()):(e.minx<this.minx&&(this.minx=e.minx),e.maxx>this.maxx&&(this.maxx=e.maxx),e.miny<this.miny&&(this.miny=e.miny),e.maxy>this.maxy&&(this.maxy=e.maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this.minx=n,this.maxx=n,this.miny=i,this.maxy=i):(n<this.minx&&(this.minx=n),n>this.maxx&&(this.maxx=n),i<this.miny&&(this.miny=i),i>this.maxy&&(this.maxy=i))}},minExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return e>t?t:e},getWidth:function(){return this.isNull()?0:this.maxx-this.minx},compareTo:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this.minx<e.minx?-1:this.minx>e.minx?1:this.miny<e.miny?-1:this.miny>e.miny?1:this.maxx<e.maxx?-1:this.maxx>e.maxx?1:this.maxy<e.maxy?-1:this.maxy>e.maxy?1:0},translate:function(t,e){return this.isNull()?null:void this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},toString:function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"},setToNull:function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1},getHeight:function(){return this.isNull()?0:this.maxy-this.miny},maxExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},expandBy:function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this.minx-=e,this.maxx+=e,this.miny-=n,this.maxy+=n,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull()}},contains:function(){if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof g){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.covers(n,i)}},centre:function(){return this.isNull()?null:new g((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},init:function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof g){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof C){var e=arguments[0];this.minx=e.minx,this.maxx=e.maxx,this.miny=e.miny,this.maxy=e.maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];o>r?(this.minx=r,this.maxx=o):(this.minx=o,this.maxx=r),a>s?(this.miny=s,this.maxy=a):(this.miny=a,this.maxy=s)}},getMaxY:function(){return this.maxy},distance:function(t){if(this.intersects(t))return 0;var e=0;this.maxx<t.minx?e=t.minx-this.maxx:this.minx>t.maxx&&(e=this.minx-t.maxx);var n=0;return this.maxy<t.miny?n=t.miny-this.maxy:this.miny>t.maxy&&(n=this.miny-t.maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return t=37*t+g.hashCode(this.minx),t=37*t+g.hashCode(this.maxx),t=37*t+g.hashCode(this.miny),t=37*t+g.hashCode(this.maxy)},interfaces_:function(){return[s,u]},getClass:function(){return C}}),C.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),c=Math.max(o.x,s.x),u=Math.min(i.x,r.x),l=Math.max(i.x,r.x);return!(u>c)&&(!(a>l)&&(a=Math.min(o.y,s.y),c=Math.max(o.y,s.y),u=Math.min(i.y,r.y),l=Math.max(i.y,r.y),!(u>c)&&!(a>l)))}},C.serialVersionUID=0x51845cd552189800,h(w,S),e(w.prototype,{interfaces_:function(){return[]},getClass:function(){return w}}),e(L.prototype,{interfaces_:function(){return[]},getClass:function(){return L}}),L.toLocationSymbol=function(t){switch(t){case L.EXTERIOR:return"e";case L.BOUNDARY:return"b";case L.INTERIOR:return"i";case L.NONE:return"-"}throw new i("Unknown location value: "+t)},L.INTERIOR=0,L.BOUNDARY=1,L.EXTERIOR=2,L.NONE=-1,e(T.prototype,{interfaces_:function(){return[]},getClass:function(){return T}}),T.log10=function(t){var e=Math.log(t);return r.isInfinite(e)?e:r.isNaN(e)?e:e/T.LOG_10},T.min=function(t,e,n,i){var r=t;return r>e&&(r=e),r>n&&(r=n),r>i&&(r=i),r},T.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return e>t?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return r>i?r:i>o?o:i}},T.wrap=function(t,e){return 0>t?e- -t%e:t%e},T.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=t;return e>i&&(i=e),n>i&&(i=n),i}if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],i=r;return o>i&&(i=o),s>i&&(i=s),a>i&&(i=a),i}},T.average=function(t,e){return(t+e)/2},T.LOG_10=Math.log(10),P.prototype.append=function(t){this.str+=t},P.prototype.setCharAt=function(t,e){return this.str.substr(0,t)+e+this.str.substr(t+1)},P.prototype.toString=function(t){return this.str},b.prototype.intValue=function(){return this.value},b.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},b.isNaN=function(t){return Number.isNaN(t)},O.isWhitespace=function(t){return 32>=t&&t>=0||127==t},O.toUpperCase=function(t){return t.toUpperCase()},e(_.prototype,{le:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<=t.lo},extractSignificantDigits:function(t,e){var n=this.abs(),i=_.magnitude(n.hi),r=_.TEN.pow(i);n=n.divide(r),n.gt(_.TEN)?(n=n.divide(_.TEN),i+=1):n.lt(_.ONE)&&(n=n.multiply(_.TEN),i-=1);for(var o=i+1,s=new P,a=_.MAX_PRINT_DIGITS-1,c=0;a>=c;c++){t&&c===o&&s.append(".");var u=Math.trunc(n.hi);if(0>u)break;var l=!1,h=0;u>9?(l=!0,h="9"):h="0"+u,s.append(h),n=n.subtract(_.valueOf(u)).multiply(_.TEN),l&&n.selfAdd(_.TEN);var p=!0,f=_.magnitude(n.hi);if(0>f&&Math.abs(f)>=a-c&&(p=!1),!p)break}return e[0]=i,s.toString()},sqr:function(){return this.multiply(this)},doubleValue:function(){return this.hi+this.lo},subtract:function(){if(arguments[0]instanceof _){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},equals:function(){if(1===arguments.length){var t=arguments[0];return this.hi===t.hi&&this.lo===t.lo}},isZero:function(){return 0===this.hi&&0===this.lo},selfSubtract:function(){if(arguments[0]instanceof _){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t.hi,-t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},getSpecialNumberString:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},min:function(t){return this.le(t)?this:t},selfDivide:function(){if(1===arguments.length){if(arguments[0]instanceof _){var t=arguments[0];return this.selfDivide(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,s=null,a=null,c=null,u=null,l=null,h=null;return c=this.hi/n,u=_.SPLIT*c,r=u-c,h=_.SPLIT*n,r=u-r,o=c-r,s=h-n,l=c*n,s=h-s,a=n-s,h=r*s-l+r*a+o*s+o*a,u=(this.hi-l-h+this.lo-c*i)/n,h=c+u,this.hi=h,this.lo=c-h+u,this}},dump:function(){return"DD<"+this.hi+", "+this.lo+">"},divide:function(){if(arguments[0]instanceof _){var t=arguments[0],e=null,n=null,i=null,o=null,s=null,a=null,c=null,u=null;s=this.hi/t.hi,a=_.SPLIT*s,e=a-s,u=_.SPLIT*t.hi,e=a-e,n=s-e,i=u-t.hi,c=s*t.hi,i=u-i,o=t.hi-i,u=e*i-c+e*o+n*i+n*o,a=(this.hi-c-u+this.lo-s*t.lo)/t.hi,u=s+a;var l=u,h=s-u+a;return new _(l,h)}if("number"==typeof arguments[0]){var p=arguments[0];return r.isNaN(p)?_.createNaN():_.copy(this).selfDivide(p,0)}},ge:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>=t.lo},pow:function(t){if(0===t)return _.valueOf(1);var e=new _(this),n=_.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2===1&&n.selfMultiply(e),i/=2,i>0&&(e=e.sqr());else n=e;return 0>t?n.reciprocal():n},ceil:function(){if(this.isNaN())return _.NaN;var t=Math.ceil(this.hi),e=0;return t===this.hi&&(e=Math.ceil(this.lo)),new _(t,e)},compareTo:function(t){var e=t;return this.hi<e.hi?-1:this.hi>e.hi?1:this.lo<e.lo?-1:this.lo>e.lo?1:0},rint:function(){if(this.isNaN())return this;var t=this.add(.5);return t.floor()},setValue:function(){if(arguments[0]instanceof _){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},max:function(t){return this.ge(t)?this:t},sqrt:function(){if(this.isZero())return _.valueOf(0);if(this.isNegative())return _.NaN;var t=1/Math.sqrt(this.hi),e=this.hi*t,n=_.valueOf(e),i=this.subtract(n.sqr()),r=i.hi*(.5*t);return n.add(r)},selfAdd:function(){if(1===arguments.length){if(arguments[0]instanceof _){var t=arguments[0];return this.selfAdd(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,i=null,r=null,o=null,s=null,a=null;return r=this.hi+e,s=r-this.hi,o=r-s,o=e-s+(this.hi-o),a=o+this.lo,n=r+a,i=a+(r-n),this.hi=n+i,this.lo=i+(n-this.hi),this}}else if(2===arguments.length){var c=arguments[0],u=arguments[1],n=null,i=null,l=null,h=null,r=null,o=null,s=null,a=null;r=this.hi+c,l=this.lo+u,s=r-this.hi,a=l-this.lo,o=r-s,h=l-a,o=c-s+(this.hi-o),h=u-a+(this.lo-h),s=o+l,n=r+s,i=s+(r-n),s=h+i;var p=n+s,f=s+(n-p);return this.hi=p,this.lo=f,this}},selfMultiply:function(){if(1===arguments.length){if(arguments[0]instanceof _){var t=arguments[0];return this.selfMultiply(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,s=null,a=null,c=null,u=null;c=_.SPLIT*this.hi,r=c-this.hi,u=_.SPLIT*n,r=c-r,o=this.hi-r,s=u-n,c=this.hi*n,s=u-s,a=n-s,u=r*s-c+r*a+o*s+o*a+(this.hi*i+this.lo*n);var l=c+u;r=c-l;var h=u+r;return this.hi=l,this.lo=h,this}},selfSqr:function(){return this.selfMultiply(this)},floor:function(){if(this.isNaN())return _.NaN;var t=Math.floor(this.hi),e=0;return t===this.hi&&(e=Math.floor(this.lo)),new _(t,e)},negate:function(){return this.isNaN()?this:new _((-this.hi),(-this.lo))},clone:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}finally{}},multiply:function(){if(arguments[0]instanceof _){var t=arguments[0];return t.isNaN()?_.createNaN():_.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return r.isNaN(e)?_.createNaN():_.copy(this).selfMultiply(e,0)}},isNaN:function(){return r.isNaN(this.hi)},intValue:function(){return Math.trunc(this.hi)},toString:function(){var t=_.magnitude(this.hi);return t>=-3&&20>=t?this.toStandardNotation():this.toSciNotation()},toStandardNotation:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,r=n;if("."===n.charAt(0))r="0"+n;else if(0>i)r="0."+_.stringOfChar("0",-i)+n;else if(-1===n.indexOf(".")){var o=i-n.length,s=_.stringOfChar("0",o);r=n+s+".0"}return this.isNegative()?"-"+r:r},reciprocal:function(){var t=null,e=null,n=null,i=null,r=null,o=null,s=null,a=null;r=1/this.hi,o=_.SPLIT*r,t=o-r,a=_.SPLIT*this.hi,t=o-t,e=r-t,n=a-this.hi,s=r*this.hi,n=a-n,i=this.hi-n,a=t*n-s+t*i+e*n+e*i,o=(1-s-a-r*this.lo)/this.hi;var c=r+o,u=r-c+o;return new _(c,u)},toSciNotation:function(){if(this.isZero())return _.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=_.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new IllegalStateException("Found leading zero: "+n);var r="";n.length>1&&(r=n.substring(1));var o=n.charAt(0)+"."+r;return this.isNegative()?"-"+o+i:o+i},abs:function(){return this.isNaN()?_.NaN:this.isNegative()?this.negate():new _(this)},isPositive:function(){return this.hi>0||0===this.hi&&this.lo>0},lt:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<t.lo},add:function(){if(arguments[0]instanceof _){var t=arguments[0];return _.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return _.copy(this).selfAdd(e)}},init:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.hi=t,this.lo=0}else if(arguments[0]instanceof _){var e=arguments[0];this.hi=e.hi,this.lo=e.lo}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.hi=n,this.lo=i}},gt:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>t.lo},isNegative:function(){return this.hi<0||0===this.hi&&this.lo<0},trunc:function(){return this.isNaN()?_.NaN:this.isPositive()?this.floor():this.ceil()},signum:function(){return this.hi>0?1:this.hi<0?-1:this.lo>0?1:this.lo<0?-1:0},interfaces_:function(){return[u,s,o]},getClass:function(){return _}}),_.sqr=function(t){return _.valueOf(t).selfMultiply(t)},_.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return _.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new _(e)}},_.sqrt=function(t){return _.valueOf(t).sqrt()},_.parse=function(t){for(var e=0,n=t.length;O.isWhitespace(t.charAt(e));)e++;var i=!1;if(n>e){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(i=!0))}for(var o=new _,s=0,a=0,c=0;!(e>=n);){var u=t.charAt(e);if(e++,O.isDigit(u)){var l=u-"0";o.selfMultiply(_.TEN),o.selfAdd(l),s++}else{if("."!==u){if("e"===u||"E"===u){var h=t.substring(e);try{c=b.parseInt(h)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+h+" in string "+t):e}finally{}break}throw new NumberFormatException("Unexpected character '"+u+"' at position "+e+" in string "+t)}a=s}}var p=o,f=s-a-c;if(0===f)p=o;else if(f>0){var d=_.TEN.pow(f);p=o.divide(d)}else if(0>f){var d=_.TEN.pow(-f);p=o.multiply(d)}return i?p.negate():p},_.createNaN=function(){return new _(r.NaN,r.NaN)},_.copy=function(t){return new _(t)},_.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n)),r=Math.pow(10,i);return e>=10*r&&(i+=1),i},_.stringOfChar=function(t,e){for(var n=new P,i=0;e>i;i++)n.append(t);return n.toString()},_.PI=new _(3.141592653589793,1.2246467991473532e-16),_.TWO_PI=new _(6.283185307179586,2.4492935982947064e-16),_.PI_2=new _(1.5707963267948966,6.123233995736766e-17),_.E=new _(2.718281828459045,1.4456468917292502e-16),_.NaN=new _(r.NaN,r.NaN),_.EPS=1.23259516440783e-32,_.SPLIT=134217729,_.MAX_PRINT_DIGITS=32,_.TEN=_.valueOf(10),_.ONE=_.valueOf(1),_.SCI_NOT_EXPONENT_CHAR="E",_.SCI_NOT_ZERO="0.0E0",e(M.prototype,{interfaces_:function(){return[]},getClass:function(){return M}}),M.orientationIndex=function(t,e,n){var i=M.orientationIndexFilter(t,e,n);if(1>=i)return i;var r=_.valueOf(e.x).selfAdd(-t.x),o=_.valueOf(e.y).selfAdd(-t.y),s=_.valueOf(n.x).selfAdd(-e.x),a=_.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},M.signOfDet2x2=function(t,e,n,i){var r=t.multiply(i).selfSubtract(e.multiply(n));return r.signum()},M.intersection=function(t,e,n,i){var r=_.valueOf(i.y).selfSubtract(n.y).selfMultiply(_.valueOf(e.x).selfSubtract(t.x)),o=_.valueOf(i.x).selfSubtract(n.x).selfMultiply(_.valueOf(e.y).selfSubtract(t.y)),s=r.subtract(o),a=_.valueOf(i.x).selfSubtract(n.x).selfMultiply(_.valueOf(t.y).selfSubtract(n.y)),c=_.valueOf(i.y).selfSubtract(n.y).selfMultiply(_.valueOf(t.x).selfSubtract(n.x)),u=a.subtract(c),l=u.selfDivide(s).doubleValue(),h=_.valueOf(t.x).selfAdd(_.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),p=_.valueOf(e.x).selfSubtract(t.x).selfMultiply(_.valueOf(t.y).selfSubtract(n.y)),f=_.valueOf(e.y).selfSubtract(t.y).selfMultiply(_.valueOf(t.x).selfSubtract(n.x)),d=p.subtract(f),y=d.selfDivide(s).doubleValue(),v=_.valueOf(n.y).selfAdd(_.valueOf(i.y).selfSubtract(n.y).selfMultiply(y)).doubleValue();return new g(h,v)},M.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=r-o;if(r>0){if(0>=o)return M.signum(s);i=r+o}else{if(!(0>r))return M.signum(s);if(o>=0)return M.signum(s);i=-r-o}var a=M.DP_SAFE_EPSILON*i;return s>=a||-s>=a?M.signum(s):2},M.signum=function(t){return t>0?1:0>t?-1:0},M.DP_SAFE_EPSILON=1e-15,e(D.prototype,{setOrdinate:function(t,e,n){},size:function(){},getOrdinate:function(t,e){},getCoordinate:function(){1===arguments.length?arguments[0]:2===arguments.length&&(arguments[0],arguments[1])},getCoordinateCopy:function(t){},getDimension:function(){},getX:function(t){},clone:function(){},expandEnvelope:function(t){},copy:function(){},getY:function(t){},toCoordinateArray:function(){},interfaces_:function(){return[o]},getClass:function(){return D}}),D.X=0,D.Y=1,D.Z=2,D.M=3,A.arraycopy=function(t,e,n,i,r){for(var o=0,s=e;e+r>s;s++)n[i+o]=t[s],o++},A.getProperty=function(t){return{"line.separator":"\n"}[t]},e(F.prototype,{getY:function(){var t=this.y/this.w;if(r.isNaN(t)||r.isInfinite(t))throw new w;return t},getX:function(){var t=this.x/this.w;if(r.isNaN(t)||r.isInfinite(t))throw new w;return t},getCoordinate:function(){var t=new g;return t.x=this.getX(),t.y=this.getY(),t},interfaces_:function(){return[]},getClass:function(){return F}}),F.intersection=function(t,e,n,i){var o=t.y-e.y,s=e.x-t.x,a=t.x*e.y-e.x*t.y,c=n.y-i.y,u=i.x-n.x,l=n.x*i.y-i.x*n.y,h=s*l-u*a,p=c*a-o*l,f=o*u-c*s,d=h/f,y=p/f;if(r.isNaN(d)||r.isInfinite(d)||r.isNaN(y)||r.isInfinite(y))throw new w;return new g(d,y)},e(G.prototype,{create:function(){1===arguments.length?arguments[0]instanceof Array?arguments[0]:R(arguments[0],D)&&arguments[0]:2===arguments.length&&(arguments[0],arguments[1])},interfaces_:function(){return[]},getClass:function(){return G}}),e(q.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return q}}),e(B.prototype,{isGeometryCollection:function(){return this.getSortIndex()===B.SORTINDEX_GEOMETRYCOLLECTION},getFactory:function(){return this.factory},getGeometryN:function(t){return this},getArea:function(){return 0},isRectangle:function(){return!1},equals:function(){if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof B))return!1;var n=e;return this.equalsExact(n)}}},equalsExact:function(t){return this===t||this.equalsExact(t,0)},geometryChanged:function(){this.apply(B.geometryChangedFilter)},geometryChangedAction:function(){this.envelope=null},equalsNorm:function(t){return null!==t&&this.norm().equalsExact(t.norm())},getLength:function(){return 0},getNumGeometries:function(){return 1},compareTo:function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=n;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(n,i)}},getUserData:function(){return this.userData},getSRID:function(){return this.SRID},getEnvelope:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},checkNotGeometryCollection:function(t){if(t.getSortIndex()===B.SORTINDEX_GEOMETRYCOLLECTION)throw new i("This method does not support GeometryCollection arguments")},equal:function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},norm:function(){var t=this.copy();return t.normalize(),t},getPrecisionModel:function(){return this.factory.getPrecisionModel()},getEnvelopeInternal:function(){return null===this.envelope&&(this.envelope=this.computeEnvelopeInternal()),new C(this.envelope)},setSRID:function(t){this.SRID=t},setUserData:function(t){this.userData=t},compare:function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),s=r.compareTo(o);if(0!==s)return s}return n.hasNext()?1:i.hasNext()?-1:0},hashCode:function(){return this.getEnvelopeInternal().hashCode()},isGeometryCollectionOrDerived:function(){return this.getSortIndex()===B.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===B.SORTINDEX_MULTIPOINT||this.getSortIndex()===B.SORTINDEX_MULTILINESTRING||this.getSortIndex()===B.SORTINDEX_MULTIPOLYGON},interfaces_:function(){return[o,s,u]},getClass:function(){return B}}),B.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},B.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},B.serialVersionUID=0x799ea46522854c00,B.SORTINDEX_POINT=0,B.SORTINDEX_MULTIPOINT=1,B.SORTINDEX_LINESTRING=2,B.SORTINDEX_LINEARRING=3,B.SORTINDEX_MULTILINESTRING=4,B.SORTINDEX_POLYGON=5,B.SORTINDEX_MULTIPOLYGON=6,B.SORTINDEX_GEOMETRYCOLLECTION=7,B.geometryChangedFilter={interfaces_:function(){return[q]},filter:function(t){t.geometryChangedAction()}},e(z.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return z}}),e(V.prototype,{isInBoundary:function(t){},interfaces_:function(){return[]},getClass:function(){return V}}),e(k.prototype,{isInBoundary:function(t){return t%2===1},interfaces_:function(){return[V]},getClass:function(){return k}}),e(Y.prototype,{isInBoundary:function(t){return t>0},interfaces_:function(){return[V]},getClass:function(){return Y}}),e(U.prototype,{isInBoundary:function(t){return t>1},interfaces_:function(){return[V]},getClass:function(){return U}}),e(X.prototype,{isInBoundary:function(t){return 1===t},interfaces_:function(){return[V]},getClass:function(){return X}}),V.Mod2BoundaryNodeRule=k,V.EndPointBoundaryNodeRule=Y,V.MultiValentEndPointBoundaryNodeRule=U,V.MonoValentEndPointBoundaryNodeRule=X,V.MOD2_BOUNDARY_RULE=new k,V.ENDPOINT_BOUNDARY_RULE=new Y,V.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new U,V.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new X,V.OGC_SFS_BOUNDARY_RULE=V.MOD2_BOUNDARY_RULE,e(H.prototype,{interfaces_:function(){return[]},getClass:function(){return H}}),H.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},H.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(H.indexOf(i,e)<0)return i}return null},H.scroll=function(t,e){var n=H.indexOf(e,t);if(0>n)return null;var i=new Array(t.length).fill(null);A.arraycopy(t,n,i,0,t.length-n),A.arraycopy(t,0,i,t.length-n,n),A.arraycopy(i,0,t,0,t.length)},H.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var n=0;n<i.length;n++)if(0!==o.compare(i[n],r[n]))return!1;return!0}},H.intersection=function(t,e){for(var n=new N,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()},H.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},H.removeRepeatedPoints=function(t){if(!H.hasRepeatedPoints(t))return t;var e=new N(t,(!1));return e.toCoordinateArray()},H.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;n>=i;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}},H.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,n=0;n<t.length;n++)null!==t[n]&&(i[r++]=t[n]);return i},H.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new g(t[n]);
return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],n=0;a>n;n++)o[s+n]=new g(i[r+n])},H.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1}return!0},H.envelope=function(t){for(var e=new C,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},H.toCoordinateArray=function(t){return t.toArray(H.coordArrayType)},H.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},H.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},H.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,i=t[e].compareTo(t[n]);if(0!==i)return i}return 1},H.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0},H.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},H.extract=function(t,e,n){e=T.clamp(e,0,t.length),n=T.clamp(n,-1,t.length);var i=n-e+1;0>n&&(i=0),e>=t.length&&(i=0),e>n&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var o=0,s=e;n>=s;s++)r[o++]=t[s];return r},e(W.prototype,{compare:function(t,e){var n=t,i=e;return H.compare(n,i)},interfaces_:function(){return[a]},getClass:function(){return W}}),e(j.prototype,{compare:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=H.compare(n,i),o=H.isEqualReversed(n,i);return o?0:r},OLDcompare:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=H.increasingDirection(n),o=H.increasingDirection(i),s=r>0?0:n.length-1,a=o>0?0:n.length-1,c=0;c<n.length;c++){var u=n[s].compareTo(i[a]);if(0!==u)return u;s+=r,a+=o}return 0},interfaces_:function(){return[a]},getClass:function(){return j}}),H.ForwardComparator=W,H.BidirectionalComparator=j,H.coordArrayType=new Array(0).fill(null),K.prototype.get=function(){},K.prototype.put=function(){},K.prototype.size=function(){},K.prototype.values=function(){},K.prototype.entrySet=function(){},Z.prototype=new K,Q.prototype=new v,Q.prototype.contains=function(){},J.prototype=new Q,J.prototype.contains=function(t){for(var e=0,n=this.array_.length;n>e;e++){var i=this.array_[e];if(i===t)return!0}return!1},J.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},J.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},J.prototype.remove=function(t){throw new javascript.util.OperationNotSupported},J.prototype.size=function(){return this.array_.length},J.prototype.isEmpty=function(){return 0===this.array_.length},J.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},J.prototype.iterator=function(){return new eo(this)};var eo=function(t){this.hashSet_=t,this.position_=0};eo.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new x;return this.hashSet_.array_[this.position_++]},eo.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},eo.prototype.remove=function(){throw new E};var no=0,io=1;rt.prototype=new Z,rt.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(0>n)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},rt.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:no,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do if(n=r,i=t.compareTo(r.key),0>i)r=r.left;else{if(!(i>0)){var o=r.value;return r.value=e,o}r=r.right}while(null!==r);var s={key:t,left:null,right:null,value:e,parent:n,color:no,getValue:function(){return this.value},getKey:function(){return this.key}};return 0>i?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},rt.prototype.fixAfterInsertion=function(t){for(t.color=io;null!=t&&t!=this.root_&&t.parent.color==io;)if(tt(t)==nt(tt(tt(t)))){var e=it(tt(tt(t)));$(e)==io?(et(tt(t),no),et(e,no),et(tt(tt(t)),io),t=tt(tt(t))):(t==it(tt(t))&&(t=tt(t),this.rotateLeft(t)),et(tt(t),no),et(tt(tt(t)),io),this.rotateRight(tt(tt(t))))}else{var e=nt(tt(tt(t)));$(e)==io?(et(tt(t),no),et(e,no),et(tt(tt(t)),io),t=tt(tt(t))):(t==nt(tt(t))&&(t=tt(t),this.rotateRight(t)),et(tt(t),no),et(tt(tt(t)),io),this.rotateLeft(tt(tt(t))))}this.root_.color=no},rt.prototype.values=function(){var t=new I,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=rt.successor(e));)t.add(e.value);return t},rt.prototype.entrySet=function(){var t=new J,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=rt.successor(e));)t.add(e);return t},rt.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left==t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},rt.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right==t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},rt.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},rt.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var e=t.parent,n=t;null!==e&&n===e.right;)n=e,e=e.parent;return e},rt.prototype.size=function(){return this.size_},e(st.prototype,{interfaces_:function(){return[]},getClass:function(){return st}}),ot.prototype=new Q,at.prototype=new ot,at.prototype.contains=function(t){for(var e=0,n=this.array_.length;n>e;e++){var i=this.array_[e];if(0===i.compareTo(t))return!0}return!1},at.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;n>e;e++){var i=this.array_[e];if(1===i.compareTo(t))return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},at.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},at.prototype.remove=function(t){throw new E},at.prototype.size=function(){return this.array_.length},at.prototype.isEmpty=function(){return 0===this.array_.length},at.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},at.prototype.iterator=function(){return new ro(this)};var ro=function(t){this.treeSet_=t,this.position_=0};ro.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new x;return this.treeSet_.array_[this.position_++]},ro.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},ro.prototype.remove=function(){throw new E},ut.sort=function(){var t,e,n,i,r=arguments[0];if(1===arguments.length)return i=function(t,e){return t.compareTo(e)},void r.sort(i);if(2===arguments.length)n=arguments[1],i=function(t,e){return n.compare(t,e)},r.sort(i);else{if(3===arguments.length){e=r.slice(arguments[1],arguments[2]),e.sort();var o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t]);return}if(4===arguments.length){for(e=r.slice(arguments[1],arguments[2]),n=arguments[3],i=function(t,e){return n.compare(t,e)},e.sort(i),o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t]);return}}},ut.asList=function(t){for(var e=new I,n=0,i=t.length;i>n;n++)e.add(t[n]);return e},e(lt.prototype,{interfaces_:function(){return[]},getClass:function(){return lt}}),lt.toDimensionSymbol=function(t){switch(t){case lt.FALSE:return lt.SYM_FALSE;case lt.TRUE:return lt.SYM_TRUE;case lt.DONTCARE:return lt.SYM_DONTCARE;case lt.P:return lt.SYM_P;case lt.L:return lt.SYM_L;case lt.A:return lt.SYM_A}throw new i("Unknown dimension value: "+t)},lt.toDimensionValue=function(t){switch(O.toUpperCase(t)){case lt.SYM_FALSE:return lt.FALSE;case lt.SYM_TRUE:return lt.TRUE;case lt.SYM_DONTCARE:return lt.DONTCARE;case lt.SYM_P:return lt.P;case lt.SYM_L:return lt.L;case lt.SYM_A:return lt.A}throw new i("Unknown dimension symbol: "+t)},lt.P=0,lt.L=1,lt.A=2,lt.FALSE=-1,lt.TRUE=-2,lt.DONTCARE=-3,lt.SYM_FALSE="F",lt.SYM_TRUE="T",lt.SYM_DONTCARE="*",lt.SYM_P="0",lt.SYM_L="1",lt.SYM_A="2",e(ht.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return ht}}),e(ct.prototype,{filter:function(t,e){},isDone:function(){},isGeometryChanged:function(){},interfaces_:function(){return[]},getClass:function(){return ct}}),h(ft,B),e(ft.prototype,{computeEnvelopeInternal:function(){for(var t=new C,e=0;e<this.geometries.length;e++)t.expandToInclude(this.geometries[e].getEnvelopeInternal());return t},getGeometryN:function(t){return this.geometries[t]},getSortIndex:function(){return B.SORTINDEX_GEOMETRYCOLLECTION},getCoordinates:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this.geometries.length;n++)for(var i=this.geometries[n].getCoordinates(),r=0;r<i.length;r++)e++,t[e]=i[r];return t},getArea:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getArea();return t},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.geometries.length!==n.geometries.length)return!1;for(var i=0;i<this.geometries.length;i++)if(!this.geometries[i].equalsExact(n.geometries[i],e))return!1;return!0}return B.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<this.geometries.length;t++)this.geometries[t].normalize();ut.sort(this.geometries)},getCoordinate:function(){return this.isEmpty()?null:this.geometries[0].getCoordinate()},getBoundaryDimension:function(){for(var t=lt.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getBoundaryDimension());return t},getDimension:function(){for(var t=lt.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getDimension());return t},getLength:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getLength();return t},getNumPoints:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getNumPoints();return t},getNumGeometries:function(){return this.geometries.length},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=new at(ut.asList(this.geometries)),n=new at(ut.asList(t.geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o=i,s=this.getNumGeometries(),a=o.getNumGeometries(),c=0;s>c&&a>c;){var u=this.getGeometryN(c),l=o.getGeometryN(c),h=u.compareToSameClass(l,r);if(0!==h)return h;c++}return s>c?1:a>c?-1:0}},apply:function(){if(R(arguments[0],z))for(var t=arguments[0],e=0;e<this.geometries.length;e++)this.geometries[e].apply(t);else if(R(arguments[0],ct)){var n=arguments[0];if(0===this.geometries.length)return null;for(var e=0;e<this.geometries.length&&(this.geometries[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(R(arguments[0],ht)){var i=arguments[0];i.filter(this);for(var e=0;e<this.geometries.length;e++)this.geometries[e].apply(i)}else if(R(arguments[0],q)){var r=arguments[0];r.filter(this);for(var e=0;e<this.geometries.length;e++)this.geometries[e].apply(r)}},getBoundary:function(){return this.checkNotGeometryCollection(this),f.shouldNeverReachHere(),null},clone:function(){var t=B.prototype.clone.call(this);t.geometries=new Array(this.geometries.length).fill(null);for(var e=0;e<this.geometries.length;e++)t.geometries[e]=this.geometries[e].clone();return t},getGeometryType:function(){return"GeometryCollection"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new ft(t,this.factory)},isEmpty:function(){for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isEmpty())return!1;return!0},interfaces_:function(){return[]},getClass:function(){return ft}}),ft.serialVersionUID=-0x4f07bcb1f857d800,h(gt,ft),e(gt.prototype,{getSortIndex:function(){return B.SORTINDEX_MULTILINESTRING},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&ft.prototype.equalsExact.call(this,t,e)}return ft.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return this.isClosed()?lt.FALSE:0},isClosed:function(){if(this.isEmpty())return!1;for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isClosed())return!1;return!0},getDimension:function(){return 1},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[t-1-n]=this.geometries[n].reverse();return this.getFactory().createMultiLineString(e)},getBoundary:function(){return new dt(this).getBoundary()},getGeometryType:function(){return"MultiLineString"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new gt(t,this.factory)},interfaces_:function(){return[st]},getClass:function(){return gt}}),gt.serialVersionUID=0x7155d2ab4afa8000,e(dt.prototype,{boundaryMultiLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this.geomFact.createPoint(e[0]):this.geomFact.createMultiPointFromCoords(e)},getBoundary:function(){return this.geom instanceof St?this.boundaryLineString(this.geom):this.geom instanceof gt?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()},boundaryLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();if(t.isClosed()){var e=this.bnRule.isInBoundary(2);return e?t.getStartPoint():this.geomFact.createMultiPoint()}return this.geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},getEmptyMultiPoint:function(){return this.geomFact.createMultiPoint()},computeBoundaryCoordinates:function(t){var e=new I;this.endpointMap=new rt;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);0!==i.getNumPoints()&&(this.addEndpoint(i.getCoordinateN(0)),this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var r=this.endpointMap.entrySet().iterator();r.hasNext();){var o=r.next(),s=o.getValue(),a=s.count;this.bnRule.isInBoundary(a)&&e.add(o.getKey())}return H.toCoordinateArray(e)},addEndpoint:function(t){var e=this.endpointMap.get(t);null===e&&(e=new pt,this.endpointMap.put(t,e)),e.count++},interfaces_:function(){return[]},getClass:function(){return dt}}),dt.getBoundary=function(){if(1===arguments.length){var t=arguments[0],e=new dt(t);return e.getBoundary()}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=new dt(n,i);return e.getBoundary()}},e(pt.prototype,{interfaces_:function(){return[]},getClass:function(){return pt}}),e(Nt.prototype,{interfaces_:function(){return[]},getClass:function(){return Nt}}),Nt.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;e>i;i++)n[i]=t;return new String(n)},Nt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new xt,n=new vt(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o="",s=new mt(Nt.getStackTrace(i)),a=new It(s),c=0;r>c;c++)try{o+=a.readLine()+Nt.NEWLINE}catch(t){if(!(t instanceof Et))throw t;f.shouldNeverReachHere()}finally{}return o}},Nt.split=function(t,e){for(var n=e.length,i=new I,r=""+t,o=r.indexOf(e);o>=0;){var s=r.substring(0,o);i.add(s),r=r.substring(o+n),o=r.indexOf(e)}r.length>0&&i.add(r);for(var a=new Array(i.size()).fill(null),c=0;c<a.length;c++)a[c]=i.get(c);return a},Nt.toString=function(){if(1===arguments.length){var t=arguments[0];return Nt.SIMPLE_ORDINATE_FORMAT.format(t)}},Nt.spaces=function(t){return Nt.chars(" ",t)},Nt.NEWLINE=A.getProperty("line.separator"),Nt.SIMPLE_ORDINATE_FORMAT=new yt("0.#"),e(Ct.prototype,{interfaces_:function(){return[]},getClass:function(){return Ct}}),Ct.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),o=0;r>o;o++)n.setOrdinate(i,o,t.getOrdinate(e,o))},Ct.isRing=function(t){var e=t.size();return 0===e||!(3>=e)&&(t.getOrdinate(0,D.X)===t.getOrdinate(e-1,D.X)&&t.getOrdinate(0,D.Y)===t.getOrdinate(e-1,D.Y))},Ct.isEqual=function(t,e){var n=t.size(),i=e.size();if(n!==i)return!1;for(var o=Math.min(t.getDimension(),e.getDimension()),s=0;n>s;s++)for(var a=0;o>a;a++){var c=t.getOrdinate(s,a),u=e.getOrdinate(s,a);if(!(t.getOrdinate(s,a)===e.getOrdinate(s,a)||r.isNaN(c)&&r.isNaN(u)))return!1}return!0},Ct.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();if(Ct.copy(e,0,i,0,r),r>0)for(var o=r;n>o;o++)Ct.copy(e,r-1,i,o,1);return i},Ct.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;n>=i;i++)Ct.swap(t,i,e-i)},Ct.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}},Ct.copy=function(t,e,n,i,r){for(var o=0;r>o;o++)Ct.copyCoord(t,e+o,n,i+o)},Ct.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),i=new P;i.append("(");for(var r=0;e>r;r++){r>0&&i.append(" ");for(var o=0;n>o;o++)o>0&&i.append(","),i.append(Nt.toString(t.getOrdinate(r,o)))}return i.append(")"),i.toString()}},Ct.ensureValidRing=function(t,e){var n=e.size();if(0===n)return e;if(3>=n)return Ct.createClosedRing(t,e,4);var i=e.getOrdinate(0,D.X)===e.getOrdinate(n-1,D.X)&&e.getOrdinate(0,D.Y)===e.getOrdinate(n-1,D.Y);return i?e:Ct.createClosedRing(t,e,n+1)},Ct.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();Ct.copy(e,0,i,0,r);for(var o=r;n>o;o++)Ct.copy(e,0,i,o,1);return i},h(St,B),e(St.prototype,{computeEnvelopeInternal:function(){return this.isEmpty()?new C:this.points.expandEnvelope(new C)},isRing:function(){return this.isClosed()&&this.isSimple()},getSortIndex:function(){return B.SORTINDEX_LINESTRING},getCoordinates:function(){return this.points.toCoordinateArray()},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.points.size()!==n.points.size())return!1;for(var i=0;i<this.points.size();i++)if(!this.equal(this.points.getCoordinate(i),n.points.getCoordinate(i),e))return!1;return!0}return B.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<Math.trunc(this.points.size()/2);t++){var e=this.points.size()-1-t;if(!this.points.getCoordinate(t).equals(this.points.getCoordinate(e)))return this.points.getCoordinate(t).compareTo(this.points.getCoordinate(e))>0&&Ct.reverse(this.points),null}},getCoordinate:function(){return this.isEmpty()?null:this.points.getCoordinate(0)},getBoundaryDimension:function(){return this.isClosed()?lt.FALSE:0},isClosed:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},getEndPoint:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},getDimension:function(){return 1},getLength:function(){return he.computeLength(this.points)},getNumPoints:function(){return this.points.size()},reverse:function(){var t=this.points.copy();Ct.reverse(t);var e=this.getFactory().createLineString(t);return e},compareToSameClass:function(){if(1===arguments.length){for(var t=arguments[0],e=t,n=0,i=0;n<this.points.size()&&i<e.points.size();){var r=this.points.getCoordinate(n).compareTo(e.points.getCoordinate(i));if(0!==r)return r;n++,i++}return n<this.points.size()?1:i<e.points.size()?-1:0}if(2===arguments.length){var o=arguments[0],s=arguments[1],e=o;return s.compare(this.points,e.points)}},apply:function(){if(R(arguments[0],z))for(var t=arguments[0],e=0;e<this.points.size();e++)t.filter(this.points.getCoordinate(e));else if(R(arguments[0],ct)){var n=arguments[0];if(0===this.points.size())return null;for(var e=0;e<this.points.size()&&(n.filter(this.points,e),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(R(arguments[0],ht)){var i=arguments[0];i.filter(this)}else if(R(arguments[0],q)){var r=arguments[0];r.filter(this)}},getBoundary:function(){return new dt(this).getBoundary()},isEquivalentClass:function(t){return t instanceof St},clone:function(){var t=B.prototype.clone.call(this);return t.points=this.points.clone(),t},getCoordinateN:function(t){return this.points.getCoordinate(t)},getGeometryType:function(){return"LineString"},copy:function(){return new St(this.points.copy(),this.factory)},getCoordinateSequence:function(){return this.points},isEmpty:function(){return 0===this.points.size()},init:function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new i("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this.points=t},isCoordinate:function(t){for(var e=0;e<this.points.size();e++)if(this.points.getCoordinate(e).equals(t))return!0;return!1},getStartPoint:function(){return this.isEmpty()?null:this.getPointN(0)},getPointN:function(t){return this.getFactory().createPoint(this.points.getCoordinate(t))},interfaces_:function(){return[st]},getClass:function(){return St}}),St.serialVersionUID=0x2b2b51ba435c8e00,e(wt.prototype,{interfaces_:function(){return[]},getClass:function(){return wt}}),h(Lt,B),e(Lt.prototype,{computeEnvelopeInternal:function(){if(this.isEmpty())return new C;var t=new C;return t.expandToInclude(this.coordinates.getX(0),this.coordinates.getY(0)),t},getSortIndex:function(){return B.SORTINDEX_POINT},getCoordinates:function(){return this.isEmpty()?[]:[this.getCoordinate()]},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return B.prototype.equalsExact.apply(this,arguments)},normalize:function(){},getCoordinate:function(){return 0!==this.coordinates.size()?this.coordinates.getCoordinate(0):null},getBoundaryDimension:function(){return lt.FALSE},getDimension:function(){return 0},getNumPoints:function(){return this.isEmpty()?0:1},reverse:function(){return this.copy()},getX:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=n;return i.compare(this.coordinates,e.coordinates)}},apply:function(){if(R(arguments[0],z)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(R(arguments[0],ct)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(R(arguments[0],ht)){var n=arguments[0];n.filter(this)}else if(R(arguments[0],q)){var i=arguments[0];i.filter(this)}},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},clone:function(){var t=B.prototype.clone.call(this);return t.coordinates=this.coordinates.clone(),t},getGeometryType:function(){return"Point"},copy:function(){return new Lt(this.coordinates.copy(),this.factory)},getCoordinateSequence:function(){return this.coordinates},getY:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y},isEmpty:function(){return 0===this.coordinates.size()},init:function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),f.isTrue(t.size()<=1),this.coordinates=t},isSimple:function(){return!0},interfaces_:function(){return[wt]},getClass:function(){return Lt}}),Lt.serialVersionUID=0x44077bad161cbc00,e(Rt.prototype,{interfaces_:function(){return[]},getClass:function(){return Rt}}),h(Tt,B),e(Tt.prototype,{computeEnvelopeInternal:function(){return this.shell.getEnvelopeInternal()},getSortIndex:function(){return B.SORTINDEX_POLYGON},getCoordinates:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this.shell.getCoordinates(),i=0;i<n.length;i++)e++,t[e]=n[i];for(var r=0;r<this.holes.length;r++)for(var o=this.holes[r].getCoordinates(),s=0;s<o.length;s++)e++,t[e]=o[s];return t},getArea:function(){var t=0;t+=Math.abs(he.signedArea(this.shell.getCoordinateSequence()));for(var e=0;e<this.holes.length;e++)t-=Math.abs(he.signedArea(this.holes[e].getCoordinateSequence()));return t},isRectangle:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this.shell)return!1;if(5!==this.shell.getNumPoints())return!1;for(var t=this.shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;5>n;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),n=1;4>=n;n++){var i=t.getX(n),r=t.getY(n),a=i!==o,c=r!==s;if(a===c)return!1;o=i,s=r}return!0},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,i=this.shell,r=n.shell;if(!i.equalsExact(r,e))return!1;if(this.holes.length!==n.holes.length)return!1;for(var o=0;o<this.holes.length;o++)if(!this.holes[o].equalsExact(n.holes[o],e))return!1;return!0}return B.prototype.equalsExact.apply(this,arguments)},normalize:function(){if(0===arguments.length){this.normalize(this.shell,!0);for(var t=0;t<this.holes.length;t++)this.normalize(this.holes[t],!1);ut.sort(this.holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=new Array(e.getCoordinates().length-1).fill(null);A.arraycopy(e.getCoordinates(),0,i,0,i.length);var r=H.minCoordinate(e.getCoordinates());H.scroll(i,r),A.arraycopy(i,0,e.getCoordinates(),0,i.length),e.getCoordinates()[i.length]=i[0],he.isCCW(e.getCoordinates())===n&&H.reverse(e.getCoordinates())}},getCoordinate:function(){return this.shell.getCoordinate()},getNumInteriorRing:function(){return this.holes.length},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},getLength:function(){var t=0;t+=this.shell.getLength();for(var e=0;e<this.holes.length;e++)t+=this.holes[e].getLength();return t},getNumPoints:function(){for(var t=this.shell.getNumPoints(),e=0;e<this.holes.length;e++)t+=this.holes[e].getNumPoints();return t},reverse:function(){var t=this.copy();t.shell=this.shell.copy().reverse(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].copy().reverse();return t},convexHull:function(){return this.getExteriorRing().convexHull()},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=this.shell,n=t.shell;return e.compareToSameClass(n)}if(2===arguments.length){var i=arguments[0],r=arguments[1],o=i,e=this.shell,n=o.shell,s=e.compareToSameClass(n,r);if(0!==s)return s;for(var a=this.getNumInteriorRing(),c=o.getNumInteriorRing(),u=0;a>u&&c>u;){var l=this.getInteriorRingN(u),h=o.getInteriorRingN(u),p=l.compareToSameClass(h,r);if(0!==p)return p;u++}return a>u?1:c>u?-1:0}},apply:function(){if(R(arguments[0],z)){var t=arguments[0];this.shell.apply(t);for(var e=0;e<this.holes.length;e++)this.holes[e].apply(t)}else if(R(arguments[0],ct)){var n=arguments[0];if(this.shell.apply(n),!n.isDone())for(var e=0;e<this.holes.length&&(this.holes[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(R(arguments[0],ht)){var i=arguments[0];i.filter(this)}else if(R(arguments[0],q)){var r=arguments[0];r.filter(this),this.shell.apply(r);for(var e=0;e<this.holes.length;e++)this.holes[e].apply(r)}},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this.holes.length+1).fill(null);t[0]=this.shell;for(var e=0;e<this.holes.length;e++)t[e+1]=this.holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},clone:function(){var t=B.prototype.clone.call(this);t.shell=this.shell.clone(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].clone();return t},getGeometryType:function(){return"Polygon"},copy:function(){for(var t=this.shell.copy(),e=new Array(this.holes.length).fill(null),n=0;n<e.length;n++)e[n]=this.holes[n].copy();return new Tt(t,e,this.factory)},getExteriorRing:function(){return this.shell},isEmpty:function(){return this.shell.isEmpty()},getInteriorRingN:function(t){return this.holes[t]},interfaces_:function(){return[Rt]},getClass:function(){return Tt}}),Tt.serialVersionUID=-0x307ffefd8dc97200,h(Pt,ft),e(Pt.prototype,{getSortIndex:function(){return B.SORTINDEX_MULTIPOINT},isValid:function(){return!0},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&ft.prototype.equalsExact.call(this,t,e)}return ft.prototype.equalsExact.apply(this,arguments)},getCoordinate:function(){if(1===arguments.length){var t=arguments[0];return this.geometries[t].getCoordinate()}return ft.prototype.getCoordinate.apply(this,arguments)},getBoundaryDimension:function(){return lt.FALSE},getDimension:function(){return 0},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},getGeometryType:function(){return"MultiPoint"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new Pt(t,this.factory)},interfaces_:function(){return[wt]},getClass:function(){return Pt}}),Pt.serialVersionUID=-0x6fb1ed4162e0fc00,h(bt,St),e(bt.prototype,{getSortIndex:function(){return B.SORTINDEX_LINEARRING},getBoundaryDimension:function(){return lt.FALSE},isClosed:function(){return!!this.isEmpty()||St.prototype.isClosed.call(this)},reverse:function(){var t=this.points.copy();Ct.reverse(t);var e=this.getFactory().createLinearRing(t);return e},validateConstruction:function(){if(!this.isEmpty()&&!St.prototype.isClosed.call(this))throw new i("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<bt.MINIMUM_VALID_SIZE)throw new i("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},getGeometryType:function(){return"LinearRing"},copy:function(){return new bt(this.points.copy(),this.factory)},interfaces_:function(){return[]},getClass:function(){return bt}}),bt.MINIMUM_VALID_SIZE=4,bt.serialVersionUID=-0x3b229e262367a600,h(Ot,ft),e(Ot.prototype,{getSortIndex:function(){return B.SORTINDEX_MULTIPOLYGON},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&ft.prototype.equalsExact.call(this,t,e)}return ft.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new I,e=0;e<this.geometries.length;e++)for(var n=this.geometries[e],i=n.getBoundary(),r=0;r<i.getNumGeometries();r++)t.add(i.getGeometryN(r));var o=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(o))},getGeometryType:function(){return"MultiPolygon"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new Ot(t,this.factory)},interfaces_:function(){return[Rt]},getClass:function(){return Ot}}),Ot.serialVersionUID=-0x7a5aa1369171980,
e(_t.prototype,{setCopyUserData:function(t){this.isUserDataCopied=t},edit:function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this.isUserDataCopied&&n.setUserData(t.getUserData()),n},editInternal:function(t,e){return null===this.factory&&(this.factory=t.getFactory()),t instanceof ft?this.editGeometryCollection(t,e):t instanceof Tt?this.editPolygon(t,e):t instanceof Lt?e.edit(t,this.factory):t instanceof St?e.edit(t,this.factory):(f.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},editGeometryCollection:function(t,e){for(var n=e.edit(t,this.factory),i=new I,r=0;r<n.getNumGeometries();r++){var o=this.edit(n.getGeometryN(r),e);null===o||o.isEmpty()||i.add(o)}return n.getClass()===Pt?this.factory.createMultiPoint(i.toArray([])):n.getClass()===gt?this.factory.createMultiLineString(i.toArray([])):n.getClass()===Ot?this.factory.createMultiPolygon(i.toArray([])):this.factory.createGeometryCollection(i.toArray([]))},editPolygon:function(t,e){var n=e.edit(t,this.factory);if(null===n&&(n=this.factory.createPolygon(null)),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),e);if(null===i||i.isEmpty())return this.factory.createPolygon();for(var r=new I,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||r.add(s)}return this.factory.createPolygon(i,r.toArray([]))},interfaces_:function(){return[]},getClass:function(){return _t}}),_t.GeometryEditorOperation=Mt,e(Dt.prototype,{edit:function(t,e){return t},interfaces_:function(){return[Mt]},getClass:function(){return Dt}}),e(At.prototype,{edit:function(t,e){if(t instanceof bt)return e.createLinearRing(this.editCoordinates(t.getCoordinates(),t));if(t instanceof St)return e.createLineString(this.editCoordinates(t.getCoordinates(),t));if(t instanceof Lt){var n=this.editCoordinates(t.getCoordinates(),t);return n.length>0?e.createPoint(n[0]):e.createPoint()}return t},interfaces_:function(){return[Mt]},getClass:function(){return At}}),e(Ft.prototype,{edit:function(t,e){return t instanceof bt?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof St?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Lt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},interfaces_:function(){return[Mt]},getClass:function(){return Ft}}),_t.NoOpGeometryOperation=Dt,_t.CoordinateOperation=At,_t.CoordinateSequenceOperation=Ft,e(Gt.prototype,{setOrdinate:function(t,e,n){switch(e){case D.X:this.coordinates[t].x=n;break;case D.Y:this.coordinates[t].y=n;break;case D.Z:this.coordinates[t].z=n;break;default:throw new i("invalid ordinateIndex")}},size:function(){return this.coordinates.length},getOrdinate:function(t,e){switch(e){case D.X:return this.coordinates[t].x;case D.Y:return this.coordinates[t].y;case D.Z:return this.coordinates[t].z}return r.NaN},getCoordinate:function(){if(1===arguments.length){var t=arguments[0];return this.coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this.coordinates[e].x,n.y=this.coordinates[e].y,n.z=this.coordinates[e].z}},getCoordinateCopy:function(t){return new g(this.coordinates[t])},getDimension:function(){return this.dimension},getX:function(t){return this.coordinates[t].x},clone:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].clone();return new Gt(t,this.dimension)},expandEnvelope:function(t){for(var e=0;e<this.coordinates.length;e++)t.expandToInclude(this.coordinates[e]);return t},copy:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].copy();return new Gt(t,this.dimension)},toString:function(){if(this.coordinates.length>0){var t=new P(17*this.coordinates.length);t.append("("),t.append(this.coordinates[0]);for(var e=1;e<this.coordinates.length;e++)t.append(", "),t.append(this.coordinates[e]);return t.append(")"),t.toString()}return"()"},getY:function(t){return this.coordinates[t].y},toCoordinateArray:function(){return this.coordinates},interfaces_:function(){return[D,u]},getClass:function(){return Gt}}),Gt.serialVersionUID=-0xcb44a778db18e00,e(qt.prototype,{readResolve:function(){return qt.instance()},create:function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new Gt(t)}if(R(arguments[0],D)){var e=arguments[0];return new Gt(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return i>3&&(i=3),2>i?new Gt(n):new Gt(n,i)}},interfaces_:function(){return[G,u]},getClass:function(){return qt}}),qt.instance=function(){return qt.instanceObject},qt.serialVersionUID=-0x38e49fa6cf6f2e00,qt.instanceObject=new qt;var oo,so=Object.defineProperty,ao=zt({"delete":kt,has:Xt,get:Yt,set:Ht,keys:jt,values:Kt,entries:Zt,forEach:$t,clear:Wt}),co="undefined"!=typeof Map&&Map.prototype.values?Map:ao;te.prototype=new K,te.prototype.get=function(t){return this.map_.get(t)||null},te.prototype.put=function(t,e){return this.map_.set(t,e),e},te.prototype.values=function(){for(var t=new I,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},te.prototype.entrySet=function(){var t=new J;return this.map_.entries().forEach(function(e){return t.add(e)}),t},te.prototype.size=function(){return this.map_.size()},e(ee.prototype,{equals:function(t){if(!(t instanceof ee))return!1;var e=t;return this.modelType===e.modelType&&this.scale===e.scale},compareTo:function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new b(n).compareTo(new b(i))},getScale:function(){return this.scale},isFloating:function(){return this.modelType===ee.FLOATING||this.modelType===ee.FLOATING_SINGLE},getType:function(){return this.modelType},toString:function(){var t="UNKNOWN";return this.modelType===ee.FLOATING?t="Floating":this.modelType===ee.FLOATING_SINGLE?t="Floating-Single":this.modelType===ee.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},makePrecise:function(){if("number"==typeof arguments[0]){var t=arguments[0];if(r.isNaN(t))return t;if(this.modelType===ee.FLOATING_SINGLE){var e=t;return e}return this.modelType===ee.FIXED?Math.round(t*this.scale)/this.scale:t}if(arguments[0]instanceof g){var n=arguments[0];if(this.modelType===ee.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}},getMaximumSignificantDigits:function(){var t=16;return this.modelType===ee.FLOATING?t=16:this.modelType===ee.FLOATING_SINGLE?t=6:this.modelType===ee.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},setScale:function(t){this.scale=Math.abs(t)},interfaces_:function(){return[u,s]},getClass:function(){return ee}}),ee.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},e(ne.prototype,{readResolve:function(){return ne.nameToTypeMap.get(this.name)},toString:function(){return this.name},interfaces_:function(){return[u]},getClass:function(){return ne}}),ne.serialVersionUID=-552860263173159e4,ne.nameToTypeMap=new te,ee.Type=ne,ee.serialVersionUID=0x6bee6404e9a25c00,ee.FIXED=new ne("FIXED"),ee.FLOATING=new ne("FLOATING"),ee.FLOATING_SINGLE=new ne("FLOATING SINGLE"),ee.maximumPreciseValue=9007199254740992,e(ie.prototype,{toGeometry:function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new g(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new g(t.getMinX(),t.getMinY()),new g(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new g(t.getMinX(),t.getMinY()),new g(t.getMinX(),t.getMaxY()),new g(t.getMaxX(),t.getMaxY()),new g(t.getMaxX(),t.getMinY()),new g(t.getMinX(),t.getMinY())]),null)},createLineString:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(R(arguments[0],D)){var e=arguments[0];return new St(e,this)}}},createMultiLineString:function(){if(0===arguments.length)return new gt(null,this);if(1===arguments.length){var t=arguments[0];return new gt(t,this)}},buildGeometry:function(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var o=r.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(ie.toGeometryArray(t));var a=t.iterator().next(),c=t.size()>1;if(c){if(a instanceof Tt)return this.createMultiPolygon(ie.toPolygonArray(t));if(a instanceof St)return this.createMultiLineString(ie.toLineStringArray(t));if(a instanceof Lt)return this.createMultiPoint(ie.toPointArray(t));f.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},createMultiPointFromCoords:function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},createPoint:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof g){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(R(arguments[0],D)){var e=arguments[0];return new Lt(e,this)}}},getCoordinateSequenceFactory:function(){return this.coordinateSequenceFactory},createPolygon:function(){if(0===arguments.length)return new Tt(null,null,this);if(1===arguments.length){if(R(arguments[0],D)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof bt){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return new Tt(i,r,this)}},getSRID:function(){return this.SRID},createGeometryCollection:function(){if(0===arguments.length)return new ft(null,this);if(1===arguments.length){var t=arguments[0];return new ft(t,this)}},createGeometry:function(t){var e=new _t(this);return e.edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return arguments[1],this.coordinateSequenceFactory.create(t)}}})},getPrecisionModel:function(){return this.precisionModel},createLinearRing:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(R(arguments[0],D)){var e=arguments[0];return new bt(e,this)}}},createMultiPolygon:function(){if(0===arguments.length)return new Ot(null,this);if(1===arguments.length){var t=arguments[0];return new Ot(t,this)}},createMultiPoint:function(){if(0===arguments.length)return new Pt(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new Pt(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(R(arguments[0],D)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(n.size()).fill(null),r=0;r<n.size();r++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());Ct.copy(n,r,o,0,1),i[r]=this.createPoint(o)}return this.createMultiPoint(i)}}},interfaces_:function(){return[u]},getClass:function(){return ie}}),ie.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ie.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},ie.getDefaultCoordinateSequenceFactory=function(){return qt.instance()},ie.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ie.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ie.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ie.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ie.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ie.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ie.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},ie.serialVersionUID=-0x5ea75f2051eeb400;var uo={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};e(re.prototype,{read:function(t){var e,n,i;t=t.replace(/[\n\r]/g," ");var r=uo.typeStr.exec(t);if(-1!==t.search("EMPTY")&&(r=uo.emptyTypeStr.exec(t),r[2]=void 0),r&&(n=r[1].toLowerCase(),i=r[2],ho[n]&&(e=ho[n].apply(this,[i]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},write:function(t){return this.extractGeometry(t)},extractGeometry:function(t){var e=t.getGeometryType().toLowerCase();if(!lo[e])return null;var n,i=e.toUpperCase();return n=t.isEmpty()?i+" EMPTY":i+"("+lo[e].apply(this,[t])+")"}});var lo={coordinate:function(t){return t.x+" "+t.y},point:function(t){return lo.coordinate.call(this,t.coordinates.coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t.geometries.length;i>n;++n)e.push("("+lo.point.apply(this,[t.geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,i=t.points.coordinates.length;i>n;++n)e.push(lo.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,i=t.points.coordinates.length;i>n;++n)e.push(lo.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,i=t.geometries.length;i>n;++n)e.push("("+lo.linestring.apply(this,[t.geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+lo.linestring.apply(this,[t.shell])+")");for(var n=0,i=t.holes.length;i>n;++n)e.push("("+lo.linestring.apply(this,[t.holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,i=t.geometries.length;i>n;++n)e.push("("+lo.polygon.apply(this,[t.geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,i=t.geometries.length;i>n;++n)e.push(this.extractGeometry(t.geometries[n]));return e.join(",")}},ho={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(uo.spaces);return this.geometryFactory.createPoint(new g(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;o>r;++r)e=n[r].replace(uo.trimParens,"$1"),i.push(ho.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;o>r;++r)e=n[r].trim().split(uo.spaces),i.push(new g(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;o>r;++r)e=n[r].trim().split(uo.spaces),i.push(new g(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(uo.parenComma),i=[],r=0,o=n.length;o>r;++r)e=n[r].replace(uo.trimParens,"$1"),i.push(ho.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,i,r,o=t.trim().split(uo.parenComma),s=[],a=0,c=o.length;c>a;++a)e=o[a].replace(uo.trimParens,"$1"),n=ho.linestring.apply(this,[e]),i=this.geometryFactory.createLinearRing(n.points),0===a?r=i:s.push(i);return this.geometryFactory.createPolygon(r,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(uo.doubleParenComma),i=[],r=0,o=n.length;o>r;++r)e=n[r].replace(uo.trimParens,"$1"),i.push(ho.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var e=t.trim().split("|"),n=[],i=0,r=e.length;r>i;++i)n.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(n)}};e(se.prototype,{write:function(t){return this.parser.write(t)}}),e(se,{toLineString:function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}),e(oe.prototype,{getIndexAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intLineIndex[t][e]},getTopologySummary:function(){var t=new P;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},computeIntersection:function(t,e,n,i){this.inputLines[0][0]=t,this.inputLines[0][1]=e,this.inputLines[1][0]=n,this.inputLines[1][1]=i,this.result=this.computeIntersect(t,e,n,i)},getIntersectionNum:function(){return this.result},computeIntLineIndex:function(){if(0===arguments.length)null===this.intLineIndex&&(this.intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0],e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);e>n?(this.intLineIndex[t][0]=0,this.intLineIndex[t][1]=1):(this.intLineIndex[t][0]=1,this.intLineIndex[t][1]=0)}},isProper:function(){return this.hasIntersection()&&this._isProper},setPrecisionModel:function(t){this.precisionModel=t},isInteriorIntersection:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this.result;e++)if(!this.intPt[e].equals2D(this.inputLines[t][0])&&!this.intPt[e].equals2D(this.inputLines[t][1]))return!0;return!1}},getIntersection:function(t){return this.intPt[t]},isEndPoint:function(){return this.hasIntersection()&&!this._isProper},hasIntersection:function(){return this.result!==oe.NO_INTERSECTION},getEdgeDistance:function(t,e){var n=oe.computeEdgeDistance(this.intPt[e],this.inputLines[t][0],this.inputLines[t][1]);return n},isCollinear:function(){return this.result===oe.COLLINEAR_INTERSECTION},toString:function(){return se.toLineString(this.inputLines[0][0],this.inputLines[0][1])+" - "+se.toLineString(this.inputLines[1][0],this.inputLines[1][1])+this.getTopologySummary()},getEndpoint:function(t,e){return this.inputLines[t][e]},isIntersection:function(t){for(var e=0;e<this.result;e++)if(this.intPt[e].equals2D(t))return!0;return!1},getIntersectionAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intPt[this.intLineIndex[t][e]]},interfaces_:function(){return[]},getClass:function(){return oe}}),oe.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i>r?i:r;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);o=i>r?s:a,0!==o||t.equals(e)||(o=Math.max(s,a))}return f.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},oe.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);return f.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},oe.DONT_INTERSECT=0,oe.DO_INTERSECT=1,oe.COLLINEAR=2,oe.NO_INTERSECTION=0,oe.POINT_INTERSECTION=1,oe.COLLINEAR_INTERSECTION=2,h(ae,oe),e(ae.prototype,{isInSegmentEnvelopes:function(t){var e=new C(this.inputLines[0][0],this.inputLines[0][1]),n=new C(this.inputLines[1][0],this.inputLines[1][1]);return e.contains(t)&&n.contains(t)},computeIntersection:function(){if(3!==arguments.length)return oe.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];return this._isProper=!1,C.intersects(e,n,t)&&0===he.orientationIndex(e,n,t)&&0===he.orientationIndex(n,e,t)?(this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this.result=oe.POINT_INTERSECTION,null):void(this.result=oe.NO_INTERSECTION)},normalizeToMinimum:function(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},safeHCoordinateIntersection:function(t,e,n,i){var r=null;try{r=F.intersection(t,e,n,i)}catch(o){if(!(o instanceof w))throw o;r=ae.nearestEndpoint(t,e,n,i)}finally{}return r},intersection:function(t,e,n,i){var r=this.intersectionWithNormalization(t,e,n,i);return this.isInSegmentEnvelopes(r)||(r=new g(ae.nearestEndpoint(t,e,n,i))),null!==this.precisionModel&&this.precisionModel.makePrecise(r),r},smallestInAbsValue:function(t,e,n,i){var r=t,o=Math.abs(r);return Math.abs(e)<o&&(r=e,o=Math.abs(e)),Math.abs(n)<o&&(r=n,o=Math.abs(n)),Math.abs(i)<o&&(r=i),r},checkDD:function(t,e,n,i,r){var o=M.intersection(t,e,n,i),s=this.isInSegmentEnvelopes(o);A.out.println("DD in env = "+s+"  --------------------- "+o),r.distance(o)>1e-4&&A.out.println("Distance = "+r.distance(o))},intersectionWithNormalization:function(t,e,n,i){var r=new g(t),o=new g(e),s=new g(n),a=new g(i),c=new g;this.normalizeToEnvCentre(r,o,s,a,c);var u=this.safeHCoordinateIntersection(r,o,s,a);return u.x+=c.x,u.y+=c.y,u},computeCollinearIntersection:function(t,e,n,i){var r=C.intersects(t,e,n),o=C.intersects(t,e,i),s=C.intersects(n,i,t),a=C.intersects(n,i,e);return r&&o?(this.intPt[0]=n,this.intPt[1]=i,oe.COLLINEAR_INTERSECTION):s&&a?(this.intPt[0]=t,this.intPt[1]=e,oe.COLLINEAR_INTERSECTION):r&&s?(this.intPt[0]=n,this.intPt[1]=t,!n.equals(t)||o||a?oe.COLLINEAR_INTERSECTION:oe.POINT_INTERSECTION):r&&a?(this.intPt[0]=n,this.intPt[1]=e,!n.equals(e)||o||s?oe.COLLINEAR_INTERSECTION:oe.POINT_INTERSECTION):o&&s?(this.intPt[0]=i,this.intPt[1]=t,!i.equals(t)||r||a?oe.COLLINEAR_INTERSECTION:oe.POINT_INTERSECTION):o&&a?(this.intPt[0]=i,this.intPt[1]=e,!i.equals(e)||r||s?oe.COLLINEAR_INTERSECTION:oe.POINT_INTERSECTION):oe.NO_INTERSECTION},normalizeToEnvCentre:function(t,e,n,i,r){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,c=t.y>e.y?t.y:e.y,u=n.x<i.x?n.x:i.x,l=n.y<i.y?n.y:i.y,h=n.x>i.x?n.x:i.x,p=n.y>i.y?n.y:i.y,f=o>u?o:u,d=h>a?a:h,g=s>l?s:l,y=p>c?c:p,v=(f+d)/2,m=(g+y)/2;r.x=v,r.y=m,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},computeIntersect:function(t,e,n,i){if(this._isProper=!1,!C.intersects(t,e,n,i))return oe.NO_INTERSECTION;var r=he.orientationIndex(t,e,n),o=he.orientationIndex(t,e,i);if(r>0&&o>0||0>r&&0>o)return oe.NO_INTERSECTION;var s=he.orientationIndex(n,i,t),a=he.orientationIndex(n,i,e);if(s>0&&a>0||0>s&&0>a)return oe.NO_INTERSECTION;var c=0===r&&0===o&&0===s&&0===a;return c?this.computeCollinearIntersection(t,e,n,i):(0===r||0===o||0===s||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(i)?this.intPt[0]=t:e.equals2D(n)||e.equals2D(i)?this.intPt[0]=e:0===r?this.intPt[0]=new g(n):0===o?this.intPt[0]=new g(i):0===s?this.intPt[0]=new g(t):0===a&&(this.intPt[0]=new g(e))):(this._isProper=!0,this.intPt[0]=this.intersection(t,e,n,i)),oe.POINT_INTERSECTION)},interfaces_:function(){return[]},getClass:function(){return ae}}),ae.nearestEndpoint=function(t,e,n,i){var r=t,o=he.distancePointLine(t,n,i),s=he.distancePointLine(e,n,i);return o>s&&(o=s,r=e),s=he.distancePointLine(n,t,e),o>s&&(o=s,r=n),s=he.distancePointLine(i,t,e),o>s&&(o=s,r=i),r},e(ue.prototype,{interfaces_:function(){return[]},getClass:function(){return ue}}),ue.orientationIndex=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return ue.signOfDet2x2(i,r,o,s)},ue.signOfDet2x2=function(t,e,n,i){var r=null,o=null,s=null,a=0;if(r=1,0===t||0===i)return 0===e||0===n?0:e>0?n>0?-r:r:n>0?r:-r;if(0===e||0===n)return i>0?t>0?r:-r:t>0?-r:r;if(e>0?i>0?i>=e||(r=-r,o=t,t=n,n=o,o=e,e=i,i=o):-i>=e?(r=-r,n=-n,i=-i):(o=t,t=-n,n=o,o=e,e=-i,i=o):i>0?i>=-e?(r=-r,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=i,i=o):e>=i?(t=-t,e=-e,n=-n,i=-i):(r=-r,o=-t,t=-n,n=o,o=-e,e=-i,i=o),t>0){if(!(n>0))return r;if(!(n>=t))return r}else{if(n>0)return-r;if(!(t>=n))return-r;r=-r,t=-t,n=-n}for(;;){if(a+=1,s=Math.floor(n/t),n-=s*t,i-=s*e,0>i)return-r;if(i>e)return r;if(t>n+n){if(i+i>e)return r}else{if(e>i+i)return-r;n=t-n,i=e-i,r=-r}if(0===i)return 0===n?0:-r;if(0===n)return r;if(s=Math.floor(t/n),t-=s*n,e-=s*i,0>e)return r;if(e>i)return-r;if(n>t+t){if(e+e>i)return-r}else{if(i>e+e)return r;t=n-t,e=i-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}},e(le.prototype,{countSegment:function(t,e){if(t.x<this.p.x&&e.x<this.p.x)return null;if(this.p.x===e.x&&this.p.y===e.y)return this.isPointOnSegment=!0,null;if(t.y===this.p.y&&e.y===this.p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this.p.x>=n&&this.p.x<=i&&(this.isPointOnSegment=!0),null}if(t.y>this.p.y&&e.y<=this.p.y||e.y>this.p.y&&t.y<=this.p.y){var r=t.x-this.p.x,o=t.y-this.p.y,s=e.x-this.p.x,a=e.y-this.p.y,c=ue.signOfDet2x2(r,o,s,a);if(0===c)return this.isPointOnSegment=!0,null;o>a&&(c=-c),c>0&&this.crossingCount++}},isPointInPolygon:function(){return this.getLocation()!==L.EXTERIOR},getLocation:function(){return this.isPointOnSegment?L.BOUNDARY:this.crossingCount%2===1?L.INTERIOR:L.EXTERIOR},isOnSegment:function(){return this.isPointOnSegment},interfaces_:function(){return[]},getClass:function(){return le}}),le.locatePointInRing=function(){if(arguments[0]instanceof g&&R(arguments[1],D)){for(var t=arguments[0],e=arguments[1],n=new le(t),i=new g,r=new g,o=1;o<e.size();o++)if(e.getCoordinate(o,i),e.getCoordinate(o-1,r),n.countSegment(i,r),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof g&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],n=new le(s),o=1;o<a.length;o++){var i=a[o],r=a[o-1];if(n.countSegment(i,r),n.isOnSegment())return n.getLocation()}return n.getLocation()}},e(he.prototype,{interfaces_:function(){return[]},getClass:function(){return he}}),he.orientationIndex=function(t,e,n){return M.orientationIndex(t,e,n)},he.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,o=t[i+1].y,s=t[i-1].y;e+=r*(s-o)}return e/2}if(R(arguments[0],D)){var a=arguments[0],c=a.size();if(3>c)return 0;var u=new g,l=new g,h=new g;a.getCoordinate(0,l),a.getCoordinate(1,h);var n=l.x;h.x-=n;for(var e=0,i=1;c-1>i;i++)u.y=l.y,l.x=h.x,l.y=h.y,a.getCoordinate(i+1,h),h.x-=n,e+=l.x*(u.y-h.y);return e/2}},he.distanceLineLine=function(t,e,n,i){if(t.equals(e))return he.distancePointLine(t,n,i);if(n.equals(i))return he.distancePointLine(i,t,e);var r=!1;if(C.intersects(t,e,n,i)){var o=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===o)r=!0;else{var s=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y),a=(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y),c=a/o,u=s/o;(0>u||u>1||0>c||c>1)&&(r=!0)}}else r=!0;return r?T.min(he.distancePointLine(t,n,i),he.distancePointLine(e,n,i),he.distancePointLine(n,t,e),he.distancePointLine(i,t,e)):0},he.isPointInRing=function(t,e){return he.locatePointInRing(t,e)!==L.EXTERIOR},he.computeLength=function(t){var e=t.size();if(1>=e)return 0;var n=0,i=new g;t.getCoordinate(0,i);for(var r=i.x,o=i.y,s=1;e>s;s++){t.getCoordinate(s,i);var a=i.x,c=i.y,u=a-r,l=c-o;n+=Math.sqrt(u*u+l*l),r=a,o=c}return n},he.isCCW=function(t){var e=t.length-1;if(3>e)throw new i("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,o=1;e>=o;o++){var s=t[o];s.y>n.y&&(n=s,r=o)}var a=r;do a-=1,0>a&&(a=e);while(t[a].equals2D(n)&&a!==r);var c=r;do c=(c+1)%e;while(t[c].equals2D(n)&&c!==r);var u=t[a],l=t[c];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var h=he.computeOrientation(u,n,l),p=!1;return p=0===h?u.x>l.x:h>0},he.locatePointInRing=function(t,e){return le.locatePointInRing(t,e)},he.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i)},he.computeOrientation=function(t,e,n){return he.orientationIndex(t,e,n)},he.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new i("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var o=he.distancePointLine(t,e[r],e[r+1]);n>o&&(n=o)}return n}if(3===arguments.length){var s=arguments[0],a=arguments[1],c=arguments[2];if(a.x===c.x&&a.y===c.y)return s.distance(a);var u=(c.x-a.x)*(c.x-a.x)+(c.y-a.y)*(c.y-a.y),l=((s.x-a.x)*(c.x-a.x)+(s.y-a.y)*(c.y-a.y))/u;if(0>=l)return s.distance(a);if(l>=1)return s.distance(c);var h=((a.y-s.y)*(c.x-a.x)-(a.x-s.x)*(c.y-a.y))/u;return Math.abs(h)*Math.sqrt(u)}},he.isOnLine=function(t,e){for(var n=new ae,i=1;i<e.length;i++){var r=e[i-1],o=e[i];if(n.computeIntersection(t,r,o),n.hasIntersection())return!0}return!1},he.CLOCKWISE=-1,he.RIGHT=he.CLOCKWISE,he.COUNTERCLOCKWISE=1,he.LEFT=he.COUNTERCLOCKWISE,he.COLLINEAR=0,he.STRAIGHT=he.COLLINEAR,e(ce.prototype,{minX:function(){return Math.min(this.p0.x,this.p1.x)},orientationIndex:function(){if(arguments[0]instanceof ce){var t=arguments[0],e=he.orientationIndex(this.p0,this.p1,t.p0),n=he.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0?Math.max(e,n):0>=e&&0>=n?Math.max(e,n):0}if(arguments[0]instanceof g){var i=arguments[0];return he.orientationIndex(this.p0,this.p1,i)}},toGeometry:function(t){return t.createLineString([this.p0,this.p1])},isVertical:function(){return this.p0.x===this.p1.x},equals:function(t){if(!(t instanceof ce))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},intersection:function(t){var e=new ae;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},project:function(){if(arguments[0]instanceof g){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new g(t);var e=this.projectionFactor(t),n=new g;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof ce){var i=arguments[0],r=this.projectionFactor(i.p0),o=this.projectionFactor(i.p1);if(r>=1&&o>=1)return null;if(0>=r&&0>=o)return null;var s=this.project(i.p0);0>r&&(s=this.p0),r>1&&(s=this.p1);var a=this.project(i.p1);return 0>o&&(a=this.p0),o>1&&(a=this.p1),new ce(s,a)}},normalize:function(){this.p1.compareTo(this.p0)<0&&this.reverse()},angle:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},getCoordinate:function(t){return 0===t?this.p0:this.p1},distancePerpendicular:function(t){return he.distancePointLinePerpendicular(t,this.p0,this.p1)},minY:function(){return Math.min(this.p0.y,this.p1.y)},midPoint:function(){return ce.midPoint(this.p0,this.p1)},projectionFactor:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;if(0>=i)return r.NaN;var o=((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i;return o},closestPoints:function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=r.MAX_VALUE,o=null,s=this.closestPoint(t.p0);i=s.distance(t.p0),n[0]=s,n[1]=t.p0;var a=this.closestPoint(t.p1);o=a.distance(t.p1),i>o&&(i=o,n[0]=a,n[1]=t.p1);var c=t.closestPoint(this.p0);o=c.distance(this.p0),i>o&&(i=o,n[0]=this.p0,n[1]=c);var u=t.closestPoint(this.p1);return o=u.distance(this.p1),i>o&&(i=o,n[0]=this.p1,n[1]=u),n},closestPoint:function(t){var e=this.projectionFactor(t);if(e>0&&1>e)return this.project(t);var n=this.p0.distance(t),i=this.p1.distance(t);return i>n?this.p0:this.p1},maxX:function(){return Math.max(this.p0.x,this.p1.x)},getLength:function(){return this.p0.distance(this.p1)},compareTo:function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},reverse:function(){var t=this.p0;this.p0=this.p1,
this.p1=t},equalsTopo:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)},lineIntersection:function(t){try{var e=F.intersection(this.p0,this.p1,t.p0,t.p1);return e}catch(t){if(!(t instanceof w))throw t}finally{}return null},maxY:function(){return Math.max(this.p0.y,this.p1.y)},pointAlongOffset:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(r*r+o*o),a=0,c=0;if(0!==e){if(0>=s)throw new IllegalStateException("Cannot compute offset from zero-length line segment");a=e*r/s,c=e*o/s}var u=n-c,l=i+a,h=new g(u,l);return h},setCoordinates:function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},segmentFraction:function(t){var e=this.projectionFactor(t);return 0>e?e=0:(e>1||r.isNaN(e))&&(e=1),e},toString:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},isHorizontal:function(){return this.p0.y===this.p1.y},distance:function(){if(arguments[0]instanceof ce){var t=arguments[0];return he.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof g){var e=arguments[0];return he.distancePointLine(e,this.p0,this.p1)}},pointAlong:function(t){var e=new g;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},hashCode:function(){var t=java.lang.Double.doubleToLongBits(this.p0.x);t^=31*java.lang.Double.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=java.lang.Double.doubleToLongBits(this.p1.x);n^=31*java.lang.Double.doubleToLongBits(this.p1.y);var i=Math.trunc(n)^Math.trunc(n>>32);return e^i},interfaces_:function(){return[s,u]},getClass:function(){return ce}}),ce.midPoint=function(t,e){return new g((t.x+e.x)/2,(t.y+e.y)/2)},ce.serialVersionUID=0x2d2172135f411c00,e(fe.prototype,{isIntersects:function(){return!this.isDisjoint()},isCovers:function(){var t=fe.isTrue(this.matrix[L.INTERIOR][L.INTERIOR])||fe.isTrue(this.matrix[L.INTERIOR][L.BOUNDARY])||fe.isTrue(this.matrix[L.BOUNDARY][L.INTERIOR])||fe.isTrue(this.matrix[L.BOUNDARY][L.BOUNDARY]);return t&&this.matrix[L.EXTERIOR][L.INTERIOR]===lt.FALSE&&this.matrix[L.EXTERIOR][L.BOUNDARY]===lt.FALSE},isCoveredBy:function(){var t=fe.isTrue(this.matrix[L.INTERIOR][L.INTERIOR])||fe.isTrue(this.matrix[L.INTERIOR][L.BOUNDARY])||fe.isTrue(this.matrix[L.BOUNDARY][L.INTERIOR])||fe.isTrue(this.matrix[L.BOUNDARY][L.BOUNDARY]);return t&&this.matrix[L.INTERIOR][L.EXTERIOR]===lt.FALSE&&this.matrix[L.BOUNDARY][L.EXTERIOR]===lt.FALSE},set:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this.matrix[n][i]=lt.toDimensionValue(t.charAt(e))}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.matrix[r][o]=s}},isContains:function(){return fe.isTrue(this.matrix[L.INTERIOR][L.INTERIOR])&&this.matrix[L.EXTERIOR][L.INTERIOR]===lt.FALSE&&this.matrix[L.EXTERIOR][L.BOUNDARY]===lt.FALSE},setAtLeast:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this.setAtLeast(n,i,lt.toDimensionValue(t.charAt(e)))}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.matrix[r][o]<s&&(this.matrix[r][o]=s)}},setAtLeastIfValid:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)},isWithin:function(){return fe.isTrue(this.matrix[L.INTERIOR][L.INTERIOR])&&this.matrix[L.INTERIOR][L.EXTERIOR]===lt.FALSE&&this.matrix[L.BOUNDARY][L.EXTERIOR]===lt.FALSE},isTouches:function(t,e){return t>e?this.isTouches(e,t):(t===lt.A&&e===lt.A||t===lt.L&&e===lt.L||t===lt.L&&e===lt.A||t===lt.P&&e===lt.A||t===lt.P&&e===lt.L)&&(this.matrix[L.INTERIOR][L.INTERIOR]===lt.FALSE&&(fe.isTrue(this.matrix[L.INTERIOR][L.BOUNDARY])||fe.isTrue(this.matrix[L.BOUNDARY][L.INTERIOR])||fe.isTrue(this.matrix[L.BOUNDARY][L.BOUNDARY])))},isOverlaps:function(t,e){return t===lt.P&&e===lt.P||t===lt.A&&e===lt.A?fe.isTrue(this.matrix[L.INTERIOR][L.INTERIOR])&&fe.isTrue(this.matrix[L.INTERIOR][L.EXTERIOR])&&fe.isTrue(this.matrix[L.EXTERIOR][L.INTERIOR]):t===lt.L&&e===lt.L&&(1===this.matrix[L.INTERIOR][L.INTERIOR]&&fe.isTrue(this.matrix[L.INTERIOR][L.EXTERIOR])&&fe.isTrue(this.matrix[L.EXTERIOR][L.INTERIOR]))},isEquals:function(t,e){return t===e&&(fe.isTrue(this.matrix[L.INTERIOR][L.INTERIOR])&&this.matrix[L.INTERIOR][L.EXTERIOR]===lt.FALSE&&this.matrix[L.BOUNDARY][L.EXTERIOR]===lt.FALSE&&this.matrix[L.EXTERIOR][L.INTERIOR]===lt.FALSE&&this.matrix[L.EXTERIOR][L.BOUNDARY]===lt.FALSE)},toString:function(){for(var t=new P("123456789"),e=0;3>e;e++)for(var n=0;3>n;n++)t.setCharAt(3*e+n,lt.toDimensionSymbol(this.matrix[e][n]));return t.toString()},setAll:function(t){for(var e=0;3>e;e++)for(var n=0;3>n;n++)this.matrix[e][n]=t},get:function(t,e){return this.matrix[t][e]},transpose:function(){var t=this.matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=t,t=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=t,t=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=t,this},matches:function(t){if(9!==t.length)throw new i("Should be length 9: "+t);for(var e=0;3>e;e++)for(var n=0;3>n;n++)if(!fe.matches(this.matrix[e][n],t.charAt(3*e+n)))return!1;return!0},add:function(t){for(var e=0;3>e;e++)for(var n=0;3>n;n++)this.setAtLeast(e,n,t.get(e,n))},isDisjoint:function(){return this.matrix[L.INTERIOR][L.INTERIOR]===lt.FALSE&&this.matrix[L.INTERIOR][L.BOUNDARY]===lt.FALSE&&this.matrix[L.BOUNDARY][L.INTERIOR]===lt.FALSE&&this.matrix[L.BOUNDARY][L.BOUNDARY]===lt.FALSE},isCrosses:function(t,e){return t===lt.P&&e===lt.L||t===lt.P&&e===lt.A||t===lt.L&&e===lt.A?fe.isTrue(this.matrix[L.INTERIOR][L.INTERIOR])&&fe.isTrue(this.matrix[L.INTERIOR][L.EXTERIOR]):t===lt.L&&e===lt.P||t===lt.A&&e===lt.P||t===lt.A&&e===lt.L?fe.isTrue(this.matrix[L.INTERIOR][L.INTERIOR])&&fe.isTrue(this.matrix[L.EXTERIOR][L.INTERIOR]):t===lt.L&&e===lt.L&&0===this.matrix[L.INTERIOR][L.INTERIOR]},interfaces_:function(){return[o]},getClass:function(){return fe}}),fe.matches=function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var t=arguments[0],e=arguments[1];return e===lt.SYM_DONTCARE||(e===lt.SYM_TRUE&&(t>=0||t===lt.TRUE)||(e===lt.SYM_FALSE&&t===lt.FALSE||(e===lt.SYM_P&&t===lt.P||(e===lt.SYM_L&&t===lt.L||e===lt.SYM_A&&t===lt.A))))}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var n=arguments[0],i=arguments[1],r=new fe(n);return r.matches(i)}},fe.isTrue=function(t){return t>=0||t===lt.TRUE};var po=Object.freeze({Coordinate:g,CoordinateList:N,Envelope:C,LineSegment:ce,GeometryFactory:ie,Geometry:B,Point:Lt,LineString:St,LinearRing:bt,Polygon:Tt,GeometryCollection:ft,MultiPoint:Pt,MultiLineString:gt,MultiPolygon:Ot,Dimension:lt,IntersectionMatrix:fe});e(ge.prototype,{addPoint:function(t){this.ptCount+=1,this.ptCentSum.x+=t.x,this.ptCentSum.y+=t.y},setBasePoint:function(t){null===this.areaBasePt&&(this.areaBasePt=t)},addLineSegments:function(t){for(var e=0,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);if(0!==i){e+=i;var r=(t[n].x+t[n+1].x)/2;this.lineCentSum.x+=i*r;var o=(t[n].y+t[n+1].y)/2;this.lineCentSum.y+=i*o}}this.totalLength+=e,0===e&&t.length>0&&this.addPoint(t[0])},addHole:function(t){for(var e=he.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},getCentroid:function(){var t=new g;if(Math.abs(this.areasum2)>0)t.x=this.cg3.x/3/this.areasum2,t.y=this.cg3.y/3/this.areasum2;else if(this.totalLength>0)t.x=this.lineCentSum.x/this.totalLength,t.y=this.lineCentSum.y/this.totalLength;else{if(!(this.ptCount>0))return null;t.x=this.ptCentSum.x/this.ptCount,t.y=this.ptCentSum.y/this.ptCount}return t},addShell:function(t){t.length>0&&this.setBasePoint(t[0]);for(var e=!he.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},addTriangle:function(t,e,n,i){var r=i?1:-1;ge.centroid3(t,e,n,this.triangleCent3);var o=ge.area2(t,e,n);this.cg3.x+=r*o*this.triangleCent3.x,this.cg3.y+=r*o*this.triangleCent3.y,this.areasum2+=r*o},add:function(){if(arguments[0]instanceof Tt){var t=arguments[0];this.addShell(t.getExteriorRing().getCoordinates());for(var e=0;e<t.getNumInteriorRing();e++)this.addHole(t.getInteriorRingN(e).getCoordinates())}else if(arguments[0]instanceof B){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof Lt)this.addPoint(n.getCoordinate());else if(n instanceof St)this.addLineSegments(n.getCoordinates());else if(n instanceof Tt){var i=n;this.add(i)}else if(n instanceof ft)for(var r=n,e=0;e<r.getNumGeometries();e++)this.add(r.getGeometryN(e))}},interfaces_:function(){return[]},getClass:function(){return ge}}),ge.area2=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)},ge.centroid3=function(t,e,n,i){return i.x=t.x+e.x+n.x,i.y=t.y+e.y+n.y,null},ge.getCentroid=function(t){var e=new ge(t);return e.getCentroid()},de.prototype=new Error,de.prototype.name="EmptyStackException",pe.prototype=new y,pe.prototype.add=function(t){return this.array_.push(t),!0},pe.prototype.get=function(t){if(0>t||t>=this.size())throw new IndexOutOfBoundsException;return this.array_[t]},pe.prototype.push=function(t){return this.array_.push(t),t},pe.prototype.pop=function(t){if(0===this.array_.length)throw new de;return this.array_.pop()},pe.prototype.peek=function(){if(0===this.array_.length)throw new de;return this.array_[this.array_.length-1]},pe.prototype.empty=function(){return 0===this.array_.length},pe.prototype.isEmpty=function(){return this.empty()},pe.prototype.search=function(t){return this.array_.indexOf(t)},pe.prototype.size=function(){return this.array_.length},pe.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},e(ve.prototype,{filter:function(t){this.treeSet.contains(t)||(this.list.add(t),this.treeSet.add(t))},getCoordinates:function(){var t=new Array(this.list.size()).fill(null);return this.list.toArray(t)},interfaces_:function(){return[z]},getClass:function(){return ve}}),ve.filterCoordinates=function(t){for(var e=new ve,n=0;n<t.length;n++)e.filter(t[n]);return e.getCoordinates()},e(me.prototype,{preSort:function(t){for(var e=null,n=1;n<t.length;n++)(t[n].y<t[0].y||t[n].y===t[0].y&&t[n].x<t[0].x)&&(e=t[0],t[0]=t[n],t[n]=e);return ut.sort(t,1,t.length,new ye(t[0])),t},computeOctRing:function(t){var e=this.computeOctPts(t),n=new N;return n.add(e,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray())},lineOrPolygon:function(t){if(t=this.cleanRing(t),3===t.length)return this.geomFactory.createLineString([t[0],t[1]]);var e=this.geomFactory.createLinearRing(t);return this.geomFactory.createPolygon(e,null)},cleanRing:function(t){f.equals(t[0],t[t.length-1]);for(var e=new I,n=null,i=0;i<=t.length-2;i++){var r=t[i],o=t[i+1];r.equals(o)||null!==n&&this.isBetween(n,r,o)||(e.add(r),n=r)}e.add(t[t.length-1]);var s=new Array(e.size()).fill(null);return e.toArray(s)},isBetween:function(t,e,n){if(0!==he.computeOrientation(t,e,n))return!1;if(t.x!==n.x){if(t.x<=e.x&&e.x<=n.x)return!0;if(n.x<=e.x&&e.x<=t.x)return!0}if(t.y!==n.y){if(t.y<=e.y&&e.y<=n.y)return!0;if(n.y<=e.y&&e.y<=t.y)return!0}return!1},reduce:function(t){var e=this.computeOctRing(t);if(null===e)return t;for(var n=new at,i=0;i<e.length;i++)n.add(e[i]);for(var i=0;i<t.length;i++)he.isPointInRing(t[i],e)||n.add(t[i]);var r=H.toCoordinateArray(n);return r.length<3?this.padArray3(r):r},getConvexHull:function(){if(0===this.inputPts.length)return this.geomFactory.createGeometryCollection(null);if(1===this.inputPts.length)return this.geomFactory.createPoint(this.inputPts[0]);if(2===this.inputPts.length)return this.geomFactory.createLineString(this.inputPts);var t=this.inputPts;this.inputPts.length>50&&(t=this.reduce(this.inputPts));var e=this.preSort(t),n=this.grahamScan(e),i=this.toCoordinateArray(n);return this.lineOrPolygon(i)},padArray3:function(t){for(var e=new Array(3).fill(null),n=0;n<e.length;n++)n<t.length?e[n]=t[n]:e[n]=t[0];return e},computeOctPts:function(t){for(var e=new Array(8).fill(null),n=0;n<e.length;n++)e[n]=t[0];for(var i=1;i<t.length;i++)t[i].x<e[0].x&&(e[0]=t[i]),t[i].x-t[i].y<e[1].x-e[1].y&&(e[1]=t[i]),t[i].y>e[2].y&&(e[2]=t[i]),t[i].x+t[i].y>e[3].x+e[3].y&&(e[3]=t[i]),t[i].x>e[4].x&&(e[4]=t[i]),t[i].x-t[i].y>e[5].x-e[5].y&&(e[5]=t[i]),t[i].y<e[6].y&&(e[6]=t[i]),t[i].x+t[i].y<e[7].x+e[7].y&&(e[7]=t[i]);return e},toCoordinateArray:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var i=t.get(n);e[n]=i}return e},grahamScan:function(t){var e=null,n=new pe;e=n.push(t[0]),e=n.push(t[1]),e=n.push(t[2]);for(var i=3;i<t.length;i++){for(e=n.pop();!n.empty()&&he.computeOrientation(n.peek(),e,t[i])>0;)e=n.pop();e=n.push(e),e=n.push(t[i])}return e=n.push(t[0]),n},interfaces_:function(){return[]},getClass:function(){return me}}),me.extractCoordinates=function(t){var e=new ve;return t.apply(e),e.getCoordinates()},e(ye.prototype,{compare:function(t,e){var n=t,i=e;return ye.polarCompare(this.origin,n,i)},interfaces_:function(){return[a]},getClass:function(){return ye}}),ye.polarCompare=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=n.x-t.x,s=n.y-t.y,a=he.computeOrientation(t,e,n);if(a===he.COUNTERCLOCKWISE)return 1;if(a===he.CLOCKWISE)return-1;var c=i*i+r*r,u=o*o+s*s;return u>c?-1:c>u?1:0},me.RadialComparator=ye,e(xe.prototype,{transformPoint:function(t,e){return this.factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},transformPolygon:function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof bt&&!i.isEmpty()||(n=!1);for(var r=new I,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof bt||(n=!1),r.add(s))}if(n)return this.factory.createPolygon(i,r.toArray([]));var a=new I;return null!==i&&a.add(i),a.addAll(r),this.factory.buildGeometry(a)},createCoordinateSequence:function(t){return this.factory.getCoordinateSequenceFactory().create(t)},getInputGeometry:function(){return this.inputGeom},transformMultiLineString:function(t,e){for(var n=new I,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this.factory.buildGeometry(n)},transformCoordinates:function(t,e){return this.copy(t)},transformLineString:function(t,e){return this.factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},transformMultiPoint:function(t,e){for(var n=new I,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this.factory.buildGeometry(n)},transformMultiPolygon:function(t,e){for(var n=new I,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this.factory.buildGeometry(n)},copy:function(t){return t.copy()},transformGeometryCollection:function(t,e){for(var n=new I,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this.pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(ie.toGeometryArray(n)):this.factory.buildGeometry(n)},transform:function(t){if(this.inputGeom=t,this.factory=t.getFactory(),t instanceof Lt)return this.transformPoint(t,null);if(t instanceof Pt)return this.transformMultiPoint(t,null);if(t instanceof bt)return this.transformLinearRing(t,null);if(t instanceof St)return this.transformLineString(t,null);if(t instanceof gt)return this.transformMultiLineString(t,null);if(t instanceof Tt)return this.transformPolygon(t,null);if(t instanceof Ot)return this.transformMultiPolygon(t,null);if(t instanceof ft)return this.transformGeometryCollection(t,null);throw new i("Unknown Geometry subtype: "+t.getClass().getName())},transformLinearRing:function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this.factory.createLinearRing(null);var i=n.size();return i>0&&4>i&&!this.preserveType?this.factory.createLineString(n):this.factory.createLinearRing(n)},interfaces_:function(){return[]},getClass:function(){return xe}}),e(Ee.prototype,{snapVertices:function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;n>i;i++){var r=t.get(i),o=this.findSnapForVertex(r,e);null!==o&&(t.set(i,new g(o)),0===i&&this._isClosed&&t.set(t.size()-1,new g(o)))}},findSnapForVertex:function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this.snapTolerance)return e[n]}return null},snapTo:function(t){var e=new N(this.srcPts);this.snapVertices(e,t),this.snapSegments(e,t);var n=e.toCoordinateArray();return n},snapSegments:function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;n>i;i++){var r=e[i],o=this.findSegmentIndexToSnap(r,t);o>=0&&t.add(o+1,new g(r),!1)}},findSegmentIndexToSnap:function(t,e){for(var n=r.MAX_VALUE,i=-1,o=0;o<e.size()-1;o++){if(this.seg.p0=e.get(o),this.seg.p1=e.get(o+1),this.seg.p0.equals2D(t)||this.seg.p1.equals2D(t)){if(this.allowSnappingToSourceVertices)continue;return-1}var s=this.seg.distance(t);s<this.snapTolerance&&n>s&&(n=s,i=o)}return i},setAllowSnappingToSourceVertices:function(t){this.allowSnappingToSourceVertices=t},interfaces_:function(){return[]},getClass:function(){return Ee}}),Ee.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])},e(Ie.prototype,{snapTo:function(t,e){var n=this.extractTargetCoordinates(t),i=new Ne(e,n);return i.transform(this.srcGeom)},snapToSelf:function(t,e){var n=this.extractTargetCoordinates(this.srcGeom),i=new Ne(t,n,(!0)),r=i.transform(this.srcGeom),o=r;return e&&R(o,Rt)&&(o=r.buffer(0)),o},computeSnapTolerance:function(t){var e=this.computeMinimumSegmentLength(t),n=e/10;return n},extractTargetCoordinates:function(t){for(var e=new at,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i]);return e.toArray(new Array(0).fill(null))},computeMinimumSegmentLength:function(t){for(var e=r.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);e>i&&(e=i)}return e},interfaces_:function(){return[]},getClass:function(){return Ie}}),Ie.snap=function(t,e,n){var i=new Array(2).fill(null),r=new Ie(t);i[0]=r.snapTo(e,n);var o=new Ie(e);return i[1]=o.snapTo(i[0],n),i},Ie.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Ie.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===ee.FIXED){var i=1/n.getScale()*2/1.415;i>e&&(e=i)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1];return Math.min(Ie.computeOverlaySnapTolerance(r),Ie.computeOverlaySnapTolerance(o))}},Ie.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal(),n=Math.min(e.getHeight(),e.getWidth()),i=n*Ie.SNAP_PRECISION_FACTOR;return i},Ie.snapToSelf=function(t,e,n){var i=new Ie(t);return i.snapToSelf(e,n)},Ie.SNAP_PRECISION_FACTOR=1e-9,h(Ne,xe),e(Ne.prototype,{snapLine:function(t,e){var n=new Ee(t,this.snapTolerance);return n.setAllowSnappingToSourceVertices(this.isSelfSnap),n.snapTo(e)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),i=this.snapLine(n,this.snapPts);return this.factory.getCoordinateSequenceFactory().create(i)},interfaces_:function(){return[]},getClass:function(){return Ne}}),e(Ce.prototype,{getCommon:function(){return r.longBitsToDouble(this.commonBits)},add:function(t){var e=r.doubleToLongBits(t);if(this.isFirst)return this.commonBits=e,this.commonSignExp=Ce.signExpBits(this.commonBits),this.isFirst=!1,null;var n=Ce.signExpBits(e);return n!==this.commonSignExp?(this.commonBits=0,null):(this.commonMantissaBitsCount=Ce.numCommonMostSigMantissaBits(this.commonBits,e),void(this.commonBits=Ce.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))))},toString:function(){if(1===arguments.length){var t=arguments[0],e=r.longBitsToDouble(t),n=Long.toBinaryString(t),i="0000000000000000000000000000000000000000000000000000000000000000"+n,o=i.substring(i.length-64),s=o.substring(0,1)+"  "+o.substring(1,12)+"(exp) "+o.substring(12)+" [ "+e+" ]";return s}},interfaces_:function(){return[]},getClass:function(){return Ce}}),Ce.getBit=function(t,e){var n=1<<e;return 0!==(t&n)?1:0},Ce.signExpBits=function(t){return t>>52},Ce.zeroLowerBits=function(t,e){var n=(1<<e)-1,i=~n,r=t&i;return r},Ce.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;i>=0;i--){if(Ce.getBit(t,i)!==Ce.getBit(e,i))return n;n++}return 52},e(Se.prototype,{addCommonBits:function(t){var e=new Le(this.commonCoord);t.apply(e),t.geometryChanged()},removeCommonBits:function(t){if(0===this.commonCoord.x&&0===this.commonCoord.y)return t;var e=new g(this.commonCoord);e.x=-e.x,e.y=-e.y;var n=new Le(e);return t.apply(n),t.geometryChanged(),t},getCommonCoordinate:function(){return this.commonCoord},add:function(t){t.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate()},interfaces_:function(){return[]},getClass:function(){return Se}}),e(we.prototype,{filter:function(t){this.commonBitsX.add(t.x),this.commonBitsY.add(t.y)},getCommonCoordinate:function(){return new g(this.commonBitsX.getCommon(),this.commonBitsY.getCommon())},interfaces_:function(){return[z]},getClass:function(){return we}}),e(Le.prototype,{filter:function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)},isDone:function(){return!1},isGeometryChanged:function(){return!0},interfaces_:function(){return[ct]},getClass:function(){return Le}}),Se.CommonCoordinateFilter=we,Se.Translater=Le,e(Re.prototype,{next:function(){if(this.atStart)return this.atStart=!1,Re.isAtomic(this.parent)&&this.index++,this.parent;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return this.subcollectionIterator.next();this.subcollectionIterator=null}if(this.index>=this.max)throw new x;var t=this.parent.getGeometryN(this.index++);return t instanceof ft?(this.subcollectionIterator=new Re(t),this.subcollectionIterator.next()):t},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){if(this.atStart)return!0;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return!0;this.subcollectionIterator=null}return!(this.index>=this.max)},interfaces_:function(){return[p]},getClass:function(){return Re}}),Re.isAtomic=function(t){return!(t instanceof ft)},e(Te.prototype,{locateInternal:function(){if(arguments[0]instanceof g&&arguments[1]instanceof Tt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return L.EXTERIOR;var n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===L.EXTERIOR)return L.EXTERIOR;if(i===L.BOUNDARY)return L.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r),s=this.locateInPolygonRing(t,o);if(s===L.INTERIOR)return L.EXTERIOR;if(s===L.BOUNDARY)return L.BOUNDARY}return L.INTERIOR}if(arguments[0]instanceof g&&arguments[1]instanceof St){var a=arguments[0],c=arguments[1];if(!c.getEnvelopeInternal().intersects(a))return L.EXTERIOR;var u=c.getCoordinates();return c.isClosed()||!a.equals(u[0])&&!a.equals(u[u.length-1])?he.isOnLine(a,u)?L.INTERIOR:L.EXTERIOR:L.BOUNDARY}if(arguments[0]instanceof g&&arguments[1]instanceof Lt){var l=arguments[0],h=arguments[1],p=h.getCoordinate();return p.equals2D(l)?L.INTERIOR:L.EXTERIOR}},locateInPolygonRing:function(t,e){return e.getEnvelopeInternal().intersects(t)?he.locatePointInRing(t,e.getCoordinates()):L.EXTERIOR},intersects:function(t,e){return this.locate(t,e)!==L.EXTERIOR},updateLocationInfo:function(t){t===L.INTERIOR&&(this.isIn=!0),t===L.BOUNDARY&&this.numBoundaries++},computeLocation:function(t,e){if(e instanceof Lt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof St)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Tt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof gt)for(var n=e,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,r))}else if(e instanceof Ot)for(var o=e,i=0;i<o.getNumGeometries();i++){var s=o.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof ft)for(var a=new Re(e);a.hasNext();){var c=a.next();c!==e&&this.computeLocation(t,c)}},locate:function(t,e){return e.isEmpty()?L.EXTERIOR:e instanceof St?this.locateInternal(t,e):e instanceof Tt?this.locateInternal(t,e):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(t,e),this.boundaryRule.isInBoundary(this.numBoundaries)?L.BOUNDARY:this.numBoundaries>0||this.isIn?L.INTERIOR:L.EXTERIOR)},interfaces_:function(){return[]},getClass:function(){return Te}}),e(Pe.prototype,{interfaces_:function(){return[]},getClass:function(){return Pe}}),Pe.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new i("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof g&&arguments[1]instanceof g){var o=arguments[0],s=arguments[1],a=s.x-o.x,c=s.y-o.y;if(0===a&&0===c)throw new i("Cannot compute the octant for two identical points "+o);return Pe.octant(a,c)}},e(be.prototype,{getCoordinates:function(){},size:function(){},getCoordinate:function(t){},isClosed:function(){},setData:function(t){},getData:function(){},interfaces_:function(){return[]},getClass:function(){return be}}),e(Oe.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:Pe.octant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},getData:function(){return this.data},toString:function(){return se.toLineString(new Gt(this.pts))},interfaces_:function(){return[be]},getClass:function(){return Oe}}),e(_e.prototype,{getBounds:function(){},interfaces_:function(){return[]},getClass:function(){return _e}}),e(Me.prototype,{getItem:function(){return this.item},getBounds:function(){return this.bounds},interfaces_:function(){return[_e,u]},getClass:function(){return Me}}),e(De.prototype,{poll:function(){if(this.isEmpty())return null;var t=this.items.get(1);return this.items.set(1,this.items.get(this._size)),this._size-=1,this.reorder(1),t},size:function(){return this._size},reorder:function(t){for(var e=null,n=this.items.get(t);2*t<=this._size&&(e=2*t,e!==this._size&&this.items.get(e+1).compareTo(this.items.get(e))<0&&e++,this.items.get(e).compareTo(n)<0);t=e)this.items.set(t,this.items.get(e));this.items.set(t,n)},clear:function(){this._size=0,this.items.clear()},isEmpty:function(){return 0===this._size},add:function(t){this.items.add(null),this._size+=1;var e=this._size;for(this.items.set(0,t);t.compareTo(this.items.get(Math.trunc(e/2)))<0;e/=2)this.items.set(e,this.items.get(Math.trunc(e/2)));this.items.set(e,t)},interfaces_:function(){return[]},getClass:function(){return De}}),e(Ae.prototype,{visitItem:function(t){},interfaces_:function(){return[]},getClass:function(){return Ae}}),e(Fe.prototype,{insert:function(t,e){},remove:function(t,e){},query:function(){1===arguments.length?arguments[0]:2===arguments.length&&(arguments[0],arguments[1])},interfaces_:function(){return[]},getClass:function(){return Fe}}),e(Ge.prototype,{getLevel:function(){return this.level},size:function(){return this.childBoundables.size()},getChildBoundables:function(){return this.childBoundables},addChildBoundable:function(t){f.isTrue(null===this.bounds),this.childBoundables.add(t)},isEmpty:function(){return this.childBoundables.isEmpty()},getBounds:function(){return null===this.bounds&&(this.bounds=this.computeBounds()),this.bounds},interfaces_:function(){return[_e,u]},getClass:function(){return Ge}}),Ge.serialVersionUID=0x5a1e55ec41369800;var fo={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return fo.sort(t),t.get(0)},sort:function(t,e){var n=t.toArray();e?ut.sort(n,e):ut.sort(n);for(var i=t.iterator(),r=0,o=n.length;o>r;r++)i.next(),i.set(n[r])},singletonList:function(t){var e=new I;return e.add(t),e}};e(qe.prototype,{expandToQueue:function(t,e){var n=qe.isComposite(this.boundable1),r=qe.isComposite(this.boundable2);if(n&&r)return qe.area(this.boundable1)>qe.area(this.boundable2)?(this.expand(this.boundable1,this.boundable2,t,e),null):(this.expand(this.boundable2,this.boundable1,t,e),null);if(n)return this.expand(this.boundable1,this.boundable2,t,e),null;if(r)return this.expand(this.boundable2,this.boundable1,t,e),null;throw new i("neither boundable is composite")},isLeaves:function(){return!(qe.isComposite(this.boundable1)||qe.isComposite(this.boundable2))},compareTo:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},expand:function(t,e,n,i){for(var r=t.getChildBoundables(),o=r.iterator();o.hasNext();){var s=o.next(),a=new qe(s,e,this.itemDistance);a.getDistance()<i&&n.add(a)}},getBoundable:function(t){return 0===t?this.boundable1:this.boundable2},getDistance:function(){return this._distance},distance:function(){return this.isLeaves()?this.itemDistance.distance(this.boundable1,this.boundable2):this.boundable1.getBounds().distance(this.boundable2.getBounds())},interfaces_:function(){return[s]},getClass:function(){return qe}}),qe.area=function(t){return t.getBounds().getArea()},qe.isComposite=function(t){return t instanceof Ge},e(Be.prototype,{getNodeCapacity:function(){return this.nodeCapacity},lastNode:function(t){return t.get(t.size()-1)},size:function t(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this.root));if(1===arguments.length){for(var e=arguments[0],t=0,n=e.getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof Ge?t+=this.size(i):i instanceof Me&&(t+=1)}return t}},removeItem:function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof Me&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)},itemsTree:function(){if(0===arguments.length){this.build();var t=this.itemsTree(this.root);return null===t?new I:t}if(1===arguments.length){for(var e=arguments[0],n=new I,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof Ge){var o=this.itemsTree(r);null!==o&&n.add(o)}else r instanceof Me?n.add(r.getItem()):f.shouldNeverReachHere()}return n.size()<=0?null:n}},insert:function(t,e){f.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.add(new Me(t,e))},boundablesAtLevel:function(){if(1===arguments.length){var t=arguments[0],e=new I;return this.boundablesAtLevel(t,this.root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(f.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var o=i.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof Ge?this.boundablesAtLevel(n,s,r):(f.isTrue(s instanceof Me),-1===n&&r.add(s))}return null}},query:function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new I;return this.isEmpty()?e:(this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.query(t,this.root,e),e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this.root.getBounds(),n)&&this.query(n,this.root,i)}else if(3===arguments.length)if(R(arguments[2],Ae)&&arguments[0]instanceof Object&&arguments[1]instanceof Ge)for(var r=arguments[0],o=arguments[1],s=arguments[2],a=o.getChildBoundables(),c=0;c<a.size();c++){var u=a.get(c);this.getIntersectsOp().intersects(u.getBounds(),r)&&(u instanceof Ge?this.query(r,u,s):u instanceof Me?s.visitItem(u.getItem()):f.shouldNeverReachHere())}else if(R(arguments[2],y)&&arguments[0]instanceof Object&&arguments[1]instanceof Ge)for(var l=arguments[0],h=arguments[1],p=arguments[2],a=h.getChildBoundables(),c=0;c<a.size();c++){
var u=a.get(c);this.getIntersectsOp().intersects(u.getBounds(),l)&&(u instanceof Ge?this.query(l,u,p):u instanceof Me?p.add(u.getItem()):f.shouldNeverReachHere())}},build:function(){return this.built?null:(this.root=this.itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.itemBoundables=null,void(this.built=!0))},getRoot:function(){return this.build(),this.root},remove:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.remove(t,this.root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=this.removeItem(i,r);if(o)return!0;for(var s=null,a=i.getChildBoundables().iterator();a.hasNext();){var c=a.next();if(this.getIntersectsOp().intersects(c.getBounds(),n)&&c instanceof Ge&&(o=this.remove(n,c,r))){s=c;break}}return null!==s&&s.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(s),o}},createHigherLevels:function(t,e){f.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},depth:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this.root));if(1===arguments.length){for(var t=arguments[0],e=0,n=t.getChildBoundables().iterator();n.hasNext();){var i=n.next();if(i instanceof Ge){var r=this.depth(i);r>e&&(e=r)}}return e+1}},createParentBoundables:function(t,e){f.isTrue(!t.isEmpty());var n=new I;n.add(this.createNode(e));var i=new I(t);fo.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var o=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},isEmpty:function(){return this.built?this.root.isEmpty():this.itemBoundables.isEmpty()},interfaces_:function(){return[u]},getClass:function(){return Be}}),Be.compareDoubles=function(t,e){return t>e?1:e>t?-1:0},Be.IntersectsOp=ze,Be.serialVersionUID=-0x35ef64c82d4c5400,Be.DEFAULT_NODE_CAPACITY=10,e(Ve.prototype,{distance:function(t,e){},interfaces_:function(){return[]},getClass:function(){return Ve}}),h(ke,Be),e(ke.prototype,{createParentBoundablesFromVerticalSlices:function(t,e){f.isTrue(t.length>0);for(var n=new I,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n},createNode:function(t){return new Ye(t)},size:function(){return 0===arguments.length?Be.prototype.size.call(this):Be.prototype.size.apply(this,arguments)},insert:function(){if(2!==arguments.length)return Be.prototype.insert.apply(this,arguments);var t=arguments[0],e=arguments[1];return t.isNull()?null:void Be.prototype.insert.call(this,t,e)},getIntersectsOp:function(){return ke.intersectsOp},verticalSlices:function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),o=0;e>o;o++){i[o]=new I;for(var s=0;r.hasNext()&&n>s;){var a=r.next();i[o].add(a),s++}}return i},query:function(){if(1===arguments.length){var t=arguments[0];return Be.prototype.query.call(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];Be.prototype.query.call(this,e,n)}else if(3===arguments.length)if(R(arguments[2],Ae)&&arguments[0]instanceof Object&&arguments[1]instanceof Ge){var i=arguments[0],r=arguments[1],o=arguments[2];Be.prototype.query.call(this,i,r,o)}else if(R(arguments[2],y)&&arguments[0]instanceof Object&&arguments[1]instanceof Ge){var s=arguments[0],a=arguments[1],c=arguments[2];Be.prototype.query.call(this,s,a,c)}},getComparator:function(){return ke.yComparator},createParentBoundablesFromVerticalSlice:function(t,e){return Be.prototype.createParentBoundables.call(this,t,e)},remove:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return Be.prototype.remove.call(this,t,e)}return Be.prototype.remove.apply(this,arguments)},depth:function(){return 0===arguments.length?Be.prototype.depth.call(this):Be.prototype.depth.apply(this,arguments)},createParentBoundables:function(t,e){f.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new I(t);fo.sort(i,ke.xComparator);var r=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(r,e)},nearestNeighbour:function(){if(1===arguments.length){if(R(arguments[0],Ve)){var t=arguments[0],e=new qe(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof qe){var n=arguments[0];return this.nearestNeighbour(n,r.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof ke&&R(arguments[1],Ve)){var i=arguments[0],o=arguments[1],e=new qe(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(e)}if(arguments[0]instanceof qe&&"number"==typeof arguments[1]){var s=arguments[0],a=arguments[1],c=a,u=null,l=new De;for(l.add(s);!l.isEmpty()&&c>0;){var h=l.poll(),p=h.getDistance();if(p>=c)break;h.isLeaves()?(c=p,u=h):h.expandToQueue(l,c)}return[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}}else if(3===arguments.length){var f=arguments[0],d=arguments[1],g=arguments[2],y=new Me(f,d),e=new qe(this.getRoot(),y,g);return this.nearestNeighbour(e)[0]}},interfaces_:function(){return[Fe,u]},getClass:function(){return ke}}),ke.centreX=function(t){return ke.avg(t.getMinX(),t.getMaxX())},ke.avg=function(t,e){return(t+e)/2},ke.centreY=function(t){return ke.avg(t.getMinY(),t.getMaxY())},h(Ye,Ge),e(Ye.prototype,{computeBounds:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new C(n.getBounds()):t.expandToInclude(n.getBounds())}return t},interfaces_:function(){return[]},getClass:function(){return Ye}}),ke.STRtreeNode=Ye,ke.serialVersionUID=0x39920f7d5f261e0,ke.xComparator={interfaces_:function(){return[a]},compare:function(t,e){return Be.compareDoubles(ke.centreX(t.getBounds()),ke.centreX(e.getBounds()))}},ke.yComparator={interfaces_:function(){return[a]},compare:function(t,e){return Be.compareDoubles(ke.centreY(t.getBounds()),ke.centreY(e.getBounds()))}},ke.intersectsOp={interfaces_:function(){return[IntersectsOp]},intersects:function(t,e){return t.intersects(e)}},ke.DEFAULT_NODE_CAPACITY=10,e(Ue.prototype,{interfaces_:function(){return[]},getClass:function(){return Ue}}),Ue.relativeSign=function(t,e){return e>t?-1:t>e?1:0},Ue.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=Ue.relativeSign(e.x,n.x),r=Ue.relativeSign(e.y,n.y);switch(t){case 0:return Ue.compareValue(i,r);case 1:return Ue.compareValue(r,i);case 2:return Ue.compareValue(r,-i);case 3:return Ue.compareValue(-i,r);case 4:return Ue.compareValue(-i,-r);case 5:return Ue.compareValue(-r,-i);case 6:return Ue.compareValue(-r,i);case 7:return Ue.compareValue(i,-r)}return f.shouldNeverReachHere("invalid octant value"),0},Ue.compareValue=function(t,e){return 0>t?-1:t>0?1:0>e?-1:e>0?1:0},e(Xe.prototype,{getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},compareTo:function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Ue.compare(this.segmentOctant,this.coord,e.coord)},isEndPoint:function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},isInterior:function(){return this._isInterior},interfaces_:function(){return[s]},getClass:function(){return Xe}}),e(He.prototype,{getSplitCoordinates:function(){var t=new N;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()},addCollapsedNodes:function(){var t=new I;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this.edge.getCoordinate(n),n)}},print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},findCollapsesFromExistingVertices:function(t){for(var e=0;e<this.edge.size()-2;e++){var n=this.edge.getCoordinate(e),i=(this.edge.getCoordinate(e+1),this.edge.getCoordinate(e+2));n.equals2D(i)&&t.add(new b(e+1))}},addEdgeCoordinates:function(t,e,n){var i=e.segmentIndex-t.segmentIndex+2,r=this.edge.getCoordinate(e.segmentIndex),o=e.isInterior()||!e.coord.equals2D(r);o||i--,n.add(new g(t.coord),!1);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)n.add(this.edge.getCoordinate(s));o&&n.add(new g(e.coord))},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},findCollapseIndex:function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)},findCollapsesFromInsertedNodes:function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next(),o=this.findCollapseIndex(i,r,e);o&&t.add(new b(e[0])),i=r}},getEdge:function(){return this.edge},addEndpoints:function(){var t=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(t),t)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new g(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.getCoordinate(a);return r&&(o[s]=new g(e.coord)),new Ke(o,this.edge.getData())},add:function(t,e){var n=new Xe(this.edge,t,e,this.edge.getSegmentOctant(e)),i=this.nodeMap.get(n);return null!==i?(f.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this.nodeMap.put(n,n),n)},checkSplitEdgesCorrectness:function(t){var e=this.edge.getCoordinates(),n=t.get(0),i=n.getCoordinate(0);if(!i.equals2D(e[0]))throw new l("bad split edge start point at "+i);var r=t.get(t.size()-1),o=r.getCoordinates(),s=o[o.length-1];if(!s.equals2D(e[e.length-1]))throw new l("bad split edge end point at "+s)},interfaces_:function(){return[]},getClass:function(){return He}}),e(We.prototype,{next:function(){return null===this.currNode?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):null===this.nextNode?null:this.nextNode.segmentIndex===this.currNode.segmentIndex?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):(this.nextNode.segmentIndex>this.currNode.segmentIndex,null)},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){return null!==this.nextNode},readNextNode:function(){this.nodeIt.hasNext()?this.nextNode=this.nodeIt.next():this.nextNode=null},interfaces_:function(){return[p]},getClass:function(){return We}}),e(je.prototype,{addIntersection:function(t,e){},interfaces_:function(){return[be]},getClass:function(){return je}}),e(Ke.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},safeOctant:function(t,e){return t.equals2D(e)?0:Pe.octant(t,e)},getData:function(){return this.data},addIntersection:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=(arguments[2],arguments[3]),o=new g(n.getIntersection(r));this.addIntersection(o,i)}},toString:function(){return se.toLineString(new Gt(this.pts))},getNodeList:function(){return this.nodeList},addIntersectionNode:function(t,e){var n=e,i=n+1;if(i<this.pts.length){var r=this.pts[i];t.equals2D(r)&&(n=i)}var o=this.nodeList.add(t,n);return o},addIntersections:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},interfaces_:function(){return[je]},getClass:function(){return Ke}}),Ke.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new I;return Ke.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();){var o=r.next();o.getNodeList().addSplitEdges(i)}},e(Ze.prototype,{overlap:function(){if(2===arguments.length)arguments[0],arguments[1];else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];t.getLineSegment(e,this.overlapSeg1),n.getLineSegment(i,this.overlapSeg2),this.overlap(this.overlapSeg1,this.overlapSeg2)}},interfaces_:function(){return[]},getClass:function(){return Ze}}),e(Qe.prototype,{getLineSegment:function(t,e){e.p0=this.pts[t],e.p1=this.pts[t+1]},computeSelect:function(t,e,n,i){var r=this.pts[e],o=this.pts[n];if(i.tempEnv1.init(r,o),n-e===1)return i.select(this,e),null;if(!t.intersects(i.tempEnv1))return null;var s=Math.trunc((e+n)/2);s>e&&this.computeSelect(t,e,s,i),n>s&&this.computeSelect(t,s,n,i)},getCoordinates:function(){for(var t=new Array(this.end-this.start+1).fill(null),e=0,n=this.start;n<=this.end;n++)t[e++]=this.pts[n];return t},computeOverlaps:function(t,e){this.computeOverlapsInternal(this.start,this.end,t,t.start,t.end,e)},setId:function(t){this.id=t},select:function(t,e){this.computeSelect(t,this.start,this.end,e)},getEnvelope:function(){if(null===this.env){var t=this.pts[this.start],e=this.pts[this.end];this.env=new C(t,e)}return this.env},getEndIndex:function(){return this.end},getStartIndex:function(){return this.start},getContext:function(){return this.context},getId:function(){return this.id},computeOverlapsInternal:function(t,e,n,i,r,o){var s=this.pts[t],a=this.pts[e],c=n.pts[i],u=n.pts[r];if(e-t===1&&r-i===1)return o.overlap(this,t,n,i),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(c,u),!o.tempEnv1.intersects(o.tempEnv2))return null;var l=Math.trunc((t+e)/2),h=Math.trunc((i+r)/2);l>t&&(h>i&&this.computeOverlapsInternal(t,l,n,i,h,o),r>h&&this.computeOverlapsInternal(t,l,n,h,r,o)),e>l&&(h>i&&this.computeOverlapsInternal(l,e,n,i,h,o),r>h&&this.computeOverlapsInternal(l,e,n,h,r,o))},interfaces_:function(){return[]},getClass:function(){return Qe}}),e(Je.prototype,{interfaces_:function(){return[]},getClass:function(){return Je}}),Je.isNorthern=function(t){return t===Je.NE||t===Je.NW},Je.isOpposite=function(t,e){if(t===e)return!1;var n=(t-e+4)%4;return 2===n},Je.commonHalfPlane=function(t,e){if(t===e)return t;var n=(t-e+4)%4;if(2===n)return-1;var i=e>t?t:e,r=t>e?t:e;return 0===i&&3===r?3:i},Je.isInHalfPlane=function(t,e){return e===Je.SE?t===Je.SE||t===Je.SW:t===e||t===e+1},Je.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new i("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Je.NE:Je.SE:e>=0?Je.NW:Je.SW}if(arguments[0]instanceof g&&arguments[1]instanceof g){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new i("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Je.NE:Je.SE:r.y>=n.y?Je.NW:Je.SW}},Je.NE=0,Je.NW=1,Je.SW=2,Je.SE=3,e($e.prototype,{interfaces_:function(){return[]},getClass:function(){return $e}}),$e.getChainStartIndices=function(t){var e=0,n=new I;n.add(new b(e));do{var i=$e.findChainEnd(t,e);n.add(new b(i)),e=i}while(e<t.length-1);var r=$e.toIntArray(n);return r},$e.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=Je.quadrant(t[n],t[n+1]),r=e+1;r<t.length;){if(!t[r-1].equals2D(t[r])){var o=Je.quadrant(t[r-1],t[r]);if(o!==i)break}r++}return r-1},$e.getChains=function(){if(1===arguments.length){var t=arguments[0];return $e.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new I,r=$e.getChainStartIndices(e),o=0;o<r.length-1;o++){var s=new Qe(e,r[o],r[o+1],n);i.add(s)}return i}},$e.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},e(tn.prototype,{computeNodes:function(t){},getNodedSubstrings:function(){},interfaces_:function(){return[]},getClass:function(){return tn}}),e(en.prototype,{setSegmentIntersector:function(t){this.segInt=t},interfaces_:function(){return[tn]},getClass:function(){return en}}),h(nn,en),e(nn.prototype,{getMonotoneChains:function(){return this.monoChains},getNodedSubstrings:function(){return Ke.getNodedSubstrings(this.nodedSegStrings)},getIndex:function(){return this.index},add:function(t){for(var e=$e.getChains(t.getCoordinates(),t),n=e.iterator();n.hasNext();){var i=n.next();i.setId(this.idCounter++),this.index.insert(i.getEnvelope(),i),this.monoChains.add(i)}},computeNodes:function(t){this.nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},intersectChains:function(){for(var t=new rn(this.segInt),e=this.monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this.index.query(n.getEnvelope()),r=i.iterator();r.hasNext();){var o=r.next();if(o.getId()>n.getId()&&(n.computeOverlaps(o,t),this.nOverlaps++),this.segInt.isDone())return null}},interfaces_:function(){return[]},getClass:function(){return nn}}),h(rn,Ze),e(rn.prototype,{overlap:function(){if(4!==arguments.length)return Ze.prototype.overlap.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3],r=t.getContext(),o=n.getContext();this.si.processIntersections(r,e,o,i)},interfaces_:function(){return[]},getClass:function(){return rn}}),nn.SegmentOverlapAction=rn,h(sn,l),e(sn.prototype,{getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return sn}}),sn.msgWithCoord=function(t,e){return null!==e?t+" [ "+e+" ]":t},e(on.prototype,{processIntersections:function(t,e,n,i){},isDone:function(){},interfaces_:function(){return[]},getClass:function(){return on}}),e(an.prototype,{getInteriorIntersection:function(){return this.interiorIntersection},setCheckEndSegmentsOnly:function(t){this.isCheckEndSegmentsOnly=t},getIntersectionSegments:function(){return this.intSegments},count:function(){return this.intersectionCount},getIntersections:function(){return this.intersections},setFindAllIntersections:function(t){this.findAllIntersections=t},setKeepIntersections:function(t){this.keepIntersections=t},processIntersections:function(t,e,n,i){if(!this.findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===i)return null;if(this.isCheckEndSegmentsOnly){var r=this.isEndSegment(t,e)||this.isEndSegment(n,i);if(!r)return null}var o=t.getCoordinates()[e],s=t.getCoordinates()[e+1],a=n.getCoordinates()[i],c=n.getCoordinates()[i+1];this.li.computeIntersection(o,s,a,c),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=new Array(4).fill(null),this.intSegments[0]=o,this.intSegments[1]=s,this.intSegments[2]=a,this.intSegments[3]=c,this.interiorIntersection=this.li.getIntersection(0),this.keepIntersections&&this.intersections.add(this.interiorIntersection),this.intersectionCount++)},isEndSegment:function(t,e){return 0===e||e>=t.size()-2},hasIntersection:function(){return null!==this.interiorIntersection},isDone:function(){return!this.findAllIntersections&&null!==this.interiorIntersection},interfaces_:function(){return[on]},getClass:function(){return an}}),an.createAllIntersectionsFinder=function(t){var e=new an(t);return e.setFindAllIntersections(!0),e},an.createAnyIntersectionFinder=function(t){return new an(t)},an.createIntersectionCounter=function(t){var e=new an(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e},e(un.prototype,{execute:function(){return null!==this.segInt?null:void this.checkInteriorIntersections()},getIntersections:function(){return this.segInt.getIntersections()},isValid:function(){return this.execute(),this._isValid},setFindAllIntersections:function(t){this.findAllIntersections=t},checkInteriorIntersections:function(){this._isValid=!0,this.segInt=new an(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var t=new nn;return t.setSegmentIntersector(this.segInt),t.computeNodes(this.segStrings),this.segInt.hasIntersection()?(this._isValid=!1,null):void 0},checkValid:function(){if(this.execute(),!this._isValid)throw new sn(this.getErrorMessage(),this.segInt.getInteriorIntersection())},getErrorMessage:function(){if(this._isValid)return"no intersections found";var t=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+se.toLineString(t[0],t[1])+" and "+se.toLineString(t[2],t[3])},interfaces_:function(){return[]},getClass:function(){return un}}),un.computeIntersections=function(t){var e=new un(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()},e(ln.prototype,{checkValid:function(){this.nv.checkValid()},interfaces_:function(){return[]},getClass:function(){return ln}}),ln.toSegmentStrings=function(t){for(var e=new I,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Oe(i.getCoordinates(),i))}return e},ln.checkValid=function(t){var e=new ln(t);e.checkValid()},e(hn.prototype,{map:function(t){for(var e=new I,n=0;n<t.getNumGeometries();n++){var i=this.mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(ie.toGeometryArray(e))},interfaces_:function(){return[]},getClass:function(){return hn}}),hn.map=function(t,e){var n=new hn(e);return n.map(t)},e(cn.prototype,{interfaces_:function(){return[]},getClass:function(){return cn}}),cn.opposite=function(t){return t===cn.LEFT?cn.RIGHT:t===cn.RIGHT?cn.LEFT:t},cn.ON=0,cn.LEFT=1,cn.RIGHT=2,e(fn.prototype,{setAllLocations:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},isNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==L.NONE)return!1;return!0},setAllLocationsIfNull:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===L.NONE&&(this.location[e]=t)},isLine:function(){return 1===this.location.length},merge:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[cn.ON]=this.location[cn.ON],e[cn.LEFT]=L.NONE,e[cn.RIGHT]=L.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===L.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},getLocations:function(){return this.location},flip:function(){if(this.location.length<=1)return null;var t=this.location[cn.LEFT];this.location[cn.LEFT]=this.location[cn.RIGHT],this.location[cn.RIGHT]=t},toString:function(){var t=new P;return this.location.length>1&&t.append(L.toLocationSymbol(this.location[cn.LEFT])),t.append(L.toLocationSymbol(this.location[cn.ON])),this.location.length>1&&t.append(L.toLocationSymbol(this.location[cn.RIGHT])),t.toString()},setLocations:function(t,e,n){this.location[cn.ON]=t,this.location[cn.LEFT]=e,this.location[cn.RIGHT]=n},get:function(t){return t<this.location.length?this.location[t]:L.NONE},isArea:function(){return this.location.length>1},isAnyNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===L.NONE)return!0;return!1},setLocation:function(){if(1===arguments.length){var t=arguments[0];this.setLocation(cn.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},init:function(t){this.location=new Array(t).fill(null),this.setAllLocations(L.NONE)},isEqualOnSide:function(t,e){return this.location[e]===t.location[e]},allPositionsEqual:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},interfaces_:function(){return[]},getClass:function(){return fn}}),e(gn.prototype,{getGeometryCount:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},setAllLocations:function(t,e){this.elt[t].setAllLocations(e)},isNull:function(t){return this.elt[t].isNull()},setAllLocationsIfNull:function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},isLine:function(t){return this.elt[t].isLine()},merge:function(t){for(var e=0;2>e;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new fn(t.elt[e]):this.elt[e].merge(t.elt[e])},flip:function(){this.elt[0].flip(),this.elt[1].flip()},getLocation:function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(cn.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},toString:function(){var t=new P;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},isArea:function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},isAnyNull:function(t){return this.elt[t].isAnyNull()},setLocation:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(cn.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}},isEqualOnSide:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},allPositionsEqual:function(t,e){return this.elt[t].allPositionsEqual(e)},toLine:function(t){this.elt[t].isArea()&&(this.elt[t]=new fn(this.elt[t].location[0]))},interfaces_:function(){return[]},getClass:function(){return gn}}),gn.toLineLabel=function(t){for(var e=new gn(L.NONE),n=0;2>n;n++)e.setLocation(n,t.getLocation(n));return e},e(dn.prototype,{computeRing:function(){if(null!==this.ring)return null;for(var t=new Array(this.pts.size()).fill(null),e=0;e<this.pts.size();e++)t[e]=this.pts.get(e);this.ring=this.geometryFactory.createLinearRing(t),this._isHole=he.isCCW(this.ring.getCoordinates())},isIsolated:function(){return 1===this.label.getGeometryCount()},computePoints:function(t){this.startDe=t;var e=t,n=!0;do{if(null===e)throw new sn("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new sn("Directed Edge visited twice during ring-building at "+e.getCoordinate());this.edges.add(e);var i=e.getLabel();f.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this.startDe)},getLinearRing:function(){return this.ring},getCoordinate:function(t){return this.pts.get(t)},computeMaxNodeDegree:function(){this.maxNodeDegree=0;var t=this.startDe;do{var e=t.getNode(),n=e.getEdges().getOutgoingDegree(this);n>this.maxNodeDegree&&(this.maxNodeDegree=n),t=this.getNext(t)}while(t!==this.startDe);this.maxNodeDegree*=2},addPoints:function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var o=r;o<i.length;o++)this.pts.add(i[o])}else{var r=i.length-2;n&&(r=i.length-1);for(var o=r;o>=0;o--)this.pts.add(i[o])}},isHole:function(){return this._isHole},setInResult:function(){var t=this.startDe;do t.getEdge().setInResult(!0),t=t.getNext();while(t!==this.startDe)},containsPoint:function(t){var e=this.getLinearRing(),n=e.getEnvelopeInternal();if(!n.contains(t))return!1;if(!he.isPointInRing(t,e.getCoordinates()))return!1;for(var i=this.holes.iterator();i.hasNext();){var r=i.next();if(r.containsPoint(t))return!1}return!0},addHole:function(t){this.holes.add(t)},isShell:function(){return null===this.shell},getLabel:function(){return this.label},getEdges:function(){return this.edges},getMaxNodeDegree:function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree},getShell:function(){return this.shell},mergeLabel:function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=e.getLocation(n,cn.RIGHT);if(i===L.NONE)return null;if(this.label.getLocation(n)===L.NONE)return this.label.setLocation(n,i),null}},setShell:function(t){this.shell=t,null!==t&&t.addHole(this)},toPolygon:function(t){for(var e=new Array(this.holes.size()).fill(null),n=0;n<this.holes.size();n++)e[n]=this.holes.get(n).getLinearRing();var i=t.createPolygon(this.getLinearRing(),e);return i},interfaces_:function(){return[]},getClass:function(){return dn}}),h(pn,dn),e(pn.prototype,{setEdgeRing:function(t,e){t.setMinEdgeRing(e)},getNext:function(t){return t.getNextMin()},interfaces_:function(){return[]},getClass:function(){return pn}}),h(vn,dn),e(vn.prototype,{buildMinimalRings:function(){var t=new I,e=this.startDe;do{if(null===e.getMinEdgeRing()){var n=new pn(e,this.geometryFactory);t.add(n)}e=e.getNext()}while(e!==this.startDe);return t},setEdgeRing:function(t,e){t.setEdgeRing(e)},linkDirectedEdgesForMinimalEdgeRings:function(){var t=this.startDe;do{var e=t.getNode();e.getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this.startDe)},getNext:function(t){return t.getNext()},interfaces_:function(){return[]},getClass:function(){return vn}}),e(mn.prototype,{setVisited:function(t){this._isVisited=t},setInResult:function(t){this._isInResult=t},isCovered:function(){return this._isCovered},isCoveredSet:function(){return this._isCoveredSet},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setCovered:function(t){this._isCovered=t,this._isCoveredSet=!0},updateIM:function(t){f.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},isInResult:function(){return this._isInResult},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return mn}}),h(yn,mn),e(yn.prototype,{isIncidentEdgeInResult:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){var e=t.next();if(e.getEdge().isInResult())return!0}return!1},isIsolated:function(){return 1===this.label.getGeometryCount()},getCoordinate:function(){return this.coord},print:function(t){t.println("node "+this.coord+" lbl: "+this.label)},computeIM:function(t){},computeMergedLocation:function(t,e){var n=L.NONE;if(n=this.label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==L.BOUNDARY&&(n=i)}return n},setLabel:function(){if(2!==arguments.length)return mn.prototype.setLabel.apply(this,arguments);var t=arguments[0],e=arguments[1];null===this.label?this.label=new gn(t,e):this.label.setLocation(t,e)},getEdges:function(){return this.edges},mergeLabel:function(){if(arguments[0]instanceof yn){var t=arguments[0];this.mergeLabel(t.label)}else if(arguments[0]instanceof gn)for(var e=arguments[0],n=0;2>n;n++){var i=this.computeMergedLocation(e,n),r=this.label.getLocation(n);r===L.NONE&&this.label.setLocation(n,i)}},add:function(t){this.edges.insert(t),t.setNode(this)},setLabelBoundary:function(t){if(null===this.label)return null;var e=L.NONE;null!==this.label&&(e=this.label.getLocation(t));var n=null;switch(e){case L.BOUNDARY:n=L.INTERIOR;break;case L.INTERIOR:n=L.BOUNDARY;break;default:n=L.BOUNDARY}this.label.setLocation(t,n)},interfaces_:function(){return[]},getClass:function(){return yn}}),e(xn.prototype,{find:function(t){return this.nodeMap.get(t)},addNode:function(){if(arguments[0]instanceof g){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof yn){var n=arguments[0],e=this.nodeMap.get(n.getCoordinate());return null===e?(this.nodeMap.put(n.getCoordinate(),n),n):(e.mergeLabel(n),e)}},print:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},iterator:function(){return this.nodeMap.values().iterator()},values:function(){return this.nodeMap.values()},getBoundaryNodes:function(t){for(var e=new I,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===L.BOUNDARY&&e.add(i)}return e},add:function(t){var e=t.getCoordinate(),n=this.addNode(e);n.add(t)},interfaces_:function(){return[]},getClass:function(){return xn}}),e(En.prototype,{compareDirection:function(t){
return this.dx===t.dx&&this.dy===t.dy?0:this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:he.computeOrientation(t.p0,t.p1,this.p1)},getDy:function(){return this.dy},getCoordinate:function(){return this.p0},setNode:function(t){this.node=t},print:function(t){var e=Math.atan2(this.dy,this.dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+e+"   "+this.label)},compareTo:function(t){var e=t;return this.compareDirection(e)},getDirectedCoordinate:function(){return this.p1},getDx:function(){return this.dx},getLabel:function(){return this.label},getEdge:function(){return this.edge},getQuadrant:function(){return this.quadrant},getNode:function(){return this.node},toString:function(){var t=Math.atan2(this.dy,this.dx),e=this.getClass().getName(),n=e.lastIndexOf("."),i=e.substring(n+1);return"  "+i+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+t+"   "+this.label},computeLabel:function(t){},init:function(t,e){this.p0=t,this.p1=e,this.dx=e.x-t.x,this.dy=e.y-t.y,this.quadrant=Je.quadrant(this.dx,this.dy),f.isTrue(!(0===this.dx&&0===this.dy),"EdgeEnd with identical endpoints found")},interfaces_:function(){return[s]},getClass:function(){return En}}),h(In,En),e(In.prototype,{getNextMin:function(){return this.nextMin},getDepth:function(t){return this.depth[t]},setVisited:function(t){this._isVisited=t},computeDirectedLabel:function(){this.label=new gn(this.edge.getLabel()),this._isForward||this.label.flip()},getNext:function(){return this.next},setDepth:function(t,e){if(-999!==this.depth[t]&&this.depth[t]!==e)throw new sn("assigned depths do not match",this.getCoordinate());this.depth[t]=e},isInteriorAreaEdge:function t(){for(var t=!0,e=0;2>e;e++)this.label.isArea(e)&&this.label.getLocation(e,cn.LEFT)===L.INTERIOR&&this.label.getLocation(e,cn.RIGHT)===L.INTERIOR||(t=!1);return t},setNextMin:function(t){this.nextMin=t},print:function(t){En.prototype.print.call(this,t),t.print(" "+this.depth[cn.LEFT]+"/"+this.depth[cn.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},setMinEdgeRing:function(t){this.minEdgeRing=t},isLineEdge:function(){var t=this.label.isLine(0)||this.label.isLine(1),e=!this.label.isArea(0)||this.label.allPositionsEqual(0,L.EXTERIOR),n=!this.label.isArea(1)||this.label.allPositionsEqual(1,L.EXTERIOR);return t&&e&&n},setEdgeRing:function(t){this.edgeRing=t},getMinEdgeRing:function(){return this.minEdgeRing},getDepthDelta:function(){var t=this.edge.getDepthDelta();return this._isForward||(t=-t),t},setInResult:function(t){this._isInResult=t},getSym:function(){return this.sym},isForward:function(){return this._isForward},getEdge:function(){return this.edge},printEdge:function(t){this.print(t),t.print(" "),this._isForward?this.edge.print(t):this.edge.printReverse(t)},setSym:function(t){this.sym=t},setVisitedEdge:function(t){this.setVisited(t),this.sym.setVisited(t)},setEdgeDepths:function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===cn.LEFT&&(i=-1);var r=cn.opposite(t),o=n*i,s=e+o;this.setDepth(t,e),this.setDepth(r,s)},getEdgeRing:function(){return this.edgeRing},isInResult:function(){return this._isInResult},setNext:function(t){this.next=t},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return In}}),In.depthFactor=function(t,e){return t===L.EXTERIOR&&e===L.INTERIOR?1:t===L.INTERIOR&&e===L.EXTERIOR?-1:0},e(Nn.prototype,{createNode:function(t){return new yn(t,null)},interfaces_:function(){return[]},getClass:function(){return Nn}}),e(Cn.prototype,{printEdges:function(t){t.println("Edges:");for(var e=0;e<this.edges.size();e++){t.println("edge "+e+":");var n=this.edges.get(e);n.print(t),n.eiList.print(t)}},find:function(t){return this.nodes.find(t)},addNode:function(){if(arguments[0]instanceof yn){var t=arguments[0];return this.nodes.addNode(t)}if(arguments[0]instanceof g){var e=arguments[0];return this.nodes.addNode(e)}},getNodeIterator:function(){return this.nodes.iterator()},linkResultDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkResultDirectedEdges()}},debugPrintln:function(t){A.out.println(t)},isBoundaryNode:function(t,e){var n=this.nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===L.BOUNDARY},linkAllDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkAllDirectedEdges()}},matchInSameDirection:function(t,e,n,i){return!!t.equals(n)&&(he.computeOrientation(t,e,i)===he.COLLINEAR&&Je.quadrant(t,e)===Je.quadrant(n,i))},getEdgeEnds:function(){return this.edgeEndList},debugPrint:function(t){A.out.print(t)},getEdgeIterator:function(){return this.edges.iterator()},findEdgeInSameDirection:function(t,e){for(var n=0;n<this.edges.size();n++){var i=this.edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null},insertEdge:function(t){this.edges.add(t)},findEdgeEnd:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},addEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.edges.add(n);var i=new In(n,(!0)),r=new In(n,(!1));i.setSym(r),r.setSym(i),this.add(i),this.add(r)}},add:function(t){this.nodes.add(t),this.edgeEndList.add(t)},getNodes:function(){return this.nodes.values()},findEdge:function(t,e){for(var n=0;n<this.edges.size();n++){var i=this.edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null},interfaces_:function(){return[]},getClass:function(){return Cn}}),Cn.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.getEdges().linkResultDirectedEdges()}},e(Sn.prototype,{sortShellsAndHoles:function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}},computePolygons:function(t){for(var e=new I,n=t.iterator();n.hasNext();){var i=n.next(),r=i.toPolygon(this.geometryFactory);e.add(r)}return e},placeFreeHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new sn("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}}},buildMinimalEdgeRings:function(t,e,n){for(var i=new I,r=t.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else i.add(o)}return i},containsPoint:function(t){for(var e=this.shellList.iterator();e.hasNext();){var n=e.next();if(n.containsPoint(t))return!0}return!1},buildMaximalEdgeRings:function(t){for(var e=new I,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new vn(i,this.geometryFactory);e.add(r),r.setInResult()}}return e},placePolygonHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}},getPolygons:function(){var t=this.computePolygons(this.shellList);return t},findEdgeRingContaining:function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var c=a.next(),u=c.getLinearRing(),l=u.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;l.contains(i)&&he.isPointInRing(r,u.getCoordinates())&&(h=!0),h&&(null===o||s.contains(l))&&(o=c)}return o},findShell:function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return f.isTrue(1>=e,"found two shells in MinimalEdgeRing list"),n},add:function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Cn.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new I,o=this.buildMinimalEdgeRings(i,this.shellList,r);this.sortShellsAndHoles(o,this.shellList,r),this.placeFreeHoles(this.shellList,r)}},interfaces_:function(){return[]},getClass:function(){return Sn}}),e(wn.prototype,{collectLines:function(t){for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this.lineEdgesList),this.collectBoundaryTouchEdge(n,t,this.lineEdgesList)}},labelIsolatedLine:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.op.getArgGeometry(e));t.getLabel().setLocation(e,n)},build:function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this.resultLineList},collectLineEdge:function(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!ii.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))},findCoveredLineEdges:function(){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().findCoveredLineEdges()}for(var n=this.op.getGraph().getEdgeEnds().iterator();n.hasNext();){var i=n.next(),r=i.getEdge();if(i.isLineEdge()&&!r.isCoveredSet()){var o=this.op.isCoveredByA(i.getCoordinate());r.setCovered(o)}}},labelIsolatedLines:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},buildLines:function(t){for(var e=this.lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=(n.getLabel(),this.geometryFactory.createLineString(n.getCoordinates()));this.resultLineList.add(i),n.setInResult(!0)}},collectBoundaryTouchEdge:function(t,e,n){var i=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(f.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(ii.isResultOfOp(i,e)&&e===ii.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},interfaces_:function(){return[]},getClass:function(){return wn}}),e(Ln.prototype,{filterCoveredNodeToPoint:function(t){var e=t.getCoordinate();if(!this.op.isCoveredByLA(e)){var n=this.geometryFactory.createPoint(e);this.resultPointList.add(n)}},extractNonCoveredResultNodes:function(t){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==ii.INTERSECTION)){var i=n.getLabel();ii.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}},build:function(t){return this.extractNonCoveredResultNodes(t),this.resultPointList},interfaces_:function(){return[]},getClass:function(){return Ln}}),e(Rn.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return Rn}}),e(Tn.prototype,{locate:function(t){return Tn.locate(t,this.geom)},interfaces_:function(){return[Rn]},getClass:function(){return Tn}}),Tn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&he.isPointInRing(t,e.getCoordinates())},Tn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Tn.isPointInRing(t,n))return!1;for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i);if(Tn.isPointInRing(t,r))return!1}return!0},Tn.containsPoint=function(t,e){if(e instanceof Tt)return Tn.containsPointInPolygon(t,e);if(e instanceof ft)for(var n=new Re(e);n.hasNext();){var i=n.next();if(i!==e&&Tn.containsPoint(t,i))return!0}return!1},Tn.locate=function(t,e){return e.isEmpty()?L.EXTERIOR:Tn.containsPoint(t,e)?L.INTERIOR:L.EXTERIOR},e(Pn.prototype,{getNextCW:function(t){this.getEdges();var e=this.edgeList.indexOf(t),n=e-1;return 0===e&&(n=this.edgeList.size()-1),this.edgeList.get(n)},propagateSideLabels:function(t){for(var e=L.NONE,n=this.iterator();n.hasNext();){var i=n.next(),r=i.getLabel();r.isArea(t)&&r.getLocation(t,cn.LEFT)!==L.NONE&&(e=r.getLocation(t,cn.LEFT))}if(e===L.NONE)return null;for(var o=e,n=this.iterator();n.hasNext();){var i=n.next(),r=i.getLabel();if(r.getLocation(t,cn.ON)===L.NONE&&r.setLocation(t,cn.ON,o),r.isArea(t)){var s=r.getLocation(t,cn.LEFT),a=r.getLocation(t,cn.RIGHT);if(a!==L.NONE){if(a!==o)throw new sn("side location conflict",i.getCoordinate());s===L.NONE&&f.shouldNeverReachHere("found single null side (at "+i.getCoordinate()+")"),o=s}else f.isTrue(r.getLocation(t,cn.LEFT)===L.NONE,"found single null side"),r.setLocation(t,cn.RIGHT,o),r.setLocation(t,cn.LEFT,o)}}},getCoordinate:function(){var t=this.iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},print:function(t){A.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},isAreaLabelsConsistent:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},checkAreaLabelsConsistent:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel(),r=i.getLocation(t,cn.LEFT);f.isTrue(r!==L.NONE,"Found unlabelled area edge");for(var o=r,s=this.iterator();s.hasNext();){var a=s.next(),c=a.getLabel();f.isTrue(c.isArea(t),"Found non-area edge");var u=c.getLocation(t,cn.LEFT),l=c.getLocation(t,cn.RIGHT);if(u===l)return!1;if(l!==o)return!1;o=u}return!0},findIndex:function(t){this.iterator();for(var e=0;e<this.edgeList.size();e++){var n=this.edgeList.get(e);if(n===t)return e}return-1},iterator:function(){return this.getEdges().iterator()},getEdges:function(){return null===this.edgeList&&(this.edgeList=new I(this.edgeMap.values())),this.edgeList},getLocation:function(t,e,n){return this.ptInAreaLocation[t]===L.NONE&&(this.ptInAreaLocation[t]=Tn.locate(e,n[t].getGeometry())),this.ptInAreaLocation[t]},toString:function(){var t=new P;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},computeEdgeEndLabels:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.computeLabel(t)}},computeLabelling:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next(),r=i.getLabel(),o=0;2>o;o++)r.isLine(o)&&r.getLocation(o)===L.BOUNDARY&&(e[o]=!0);for(var n=this.iterator();n.hasNext();)for(var i=n.next(),r=i.getLabel(),o=0;2>o;o++)if(r.isAnyNull(o)){var s=L.NONE;if(e[o])s=L.EXTERIOR;else{var a=i.getCoordinate();s=this.getLocation(o,a,t)}r.setAllLocationsIfNull(o,s)}},getDegree:function(){return this.edgeMap.size()},insertEdgeEnd:function(t,e){this.edgeMap.put(t,e),this.edgeList=null},interfaces_:function(){return[]},getClass:function(){return Pn}}),h(bn,Pn),e(bn.prototype,{linkResultDirectedEdges:function(){this.getResultAreaEdges();for(var t=null,e=null,n=this.SCANNING_FOR_INCOMING,i=0;i<this.resultAreaEdgeList.size();i++){var r=this.resultAreaEdgeList.get(i),o=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this.SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this.SCANNING_FOR_INCOMING}}if(n===this.LINKING_TO_OUTGOING){if(null===t)throw new sn("no outgoing dirEdge found",this.getCoordinate());f.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},insert:function(t){var e=t;this.insertEdgeEnd(e,e)},getRightmostEdge:function(){var t=this.getEdges(),e=t.size();if(1>e)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),o=i.getQuadrant();return Je.isNorthern(r)&&Je.isNorthern(o)?n:Je.isNorthern(r)||Je.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(f.shouldNeverReachHere("found two horizontal edges incident on node"),null):i},print:function(t){A.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},getResultAreaEdges:function(){if(null!==this.resultAreaEdgeList)return this.resultAreaEdgeList;this.resultAreaEdgeList=new I;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this.resultAreaEdgeList.add(e)}return this.resultAreaEdgeList},updateLabelling:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();i.setAllLocationsIfNull(0,t.getLocation(0)),i.setAllLocationsIfNull(1,t.getLocation(1))}},linkAllDirectedEdges:function(){this.getEdges();for(var t=null,e=null,n=this.edgeList.size()-1;n>=0;n--){var i=this.edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)},computeDepths:function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=(t.getLabel(),t.getDepth(cn.LEFT)),i=t.getDepth(cn.RIGHT),r=this.computeDepths(e+1,this.edgeList.size(),n),o=this.computeDepths(0,e,r);if(o!==i)throw new sn("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var s=arguments[0],a=arguments[1],c=arguments[2],u=c,l=s;a>l;l++){var h=this.edgeList.get(l);h.getLabel(),h.setEdgeDepths(cn.RIGHT,u),u=h.getDepth(cn.LEFT)}return u}},mergeSymLabels:function(){for(var t=this.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();n.merge(e.getSym().getLabel())}},linkMinimalDirectedEdges:function(t){for(var e=null,n=null,i=this.SCANNING_FOR_INCOMING,r=this.resultAreaEdgeList.size()-1;r>=0;r--){var o=this.resultAreaEdgeList.get(r),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),i){case this.SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,i=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),i=this.SCANNING_FOR_INCOMING}}i===this.LINKING_TO_OUTGOING&&(f.isTrue(null!==e,"found null for first outgoing dirEdge"),f.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},getOutgoingDegree:function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){var n=e.next();n.isInResult()&&t++}return t}if(1===arguments.length){for(var i=arguments[0],t=0,e=this.iterator();e.hasNext();){var n=e.next();n.getEdgeRing()===i&&t++}return t}},getLabel:function(){return this.label},findCoveredLineEdges:function(){for(var t=L.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=L.INTERIOR;break}if(i.isInResult()){t=L.EXTERIOR;break}}}if(t===L.NONE)return null;for(var r=t,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();n.isLineEdge()?n.getEdge().setCovered(r===L.INTERIOR):(n.isInResult()&&(r=L.EXTERIOR),i.isInResult()&&(r=L.INTERIOR))}},computeLabelling:function(t){Pn.prototype.computeLabelling.call(this,t),this.label=new gn(L.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next(),i=n.getEdge(),r=i.getLabel(),o=0;2>o;o++){var s=r.getLocation(o);s!==L.INTERIOR&&s!==L.BOUNDARY||this.label.setLocation(o,L.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return bn}}),h(On,Nn),e(On.prototype,{createNode:function(t){return new yn(t,new bn)},interfaces_:function(){return[]},getClass:function(){return On}}),e(_n.prototype,{computeIntersections:function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},interfaces_:function(){return[]},getClass:function(){return _n}}),e(Mn.prototype,{isDelete:function(){return this.eventType===Mn.DELETE},setDeleteEventIndex:function(t){this.deleteEventIndex=t},getObject:function(){return this.obj},compareTo:function(t){var e=t;return this.xValue<e.xValue?-1:this.xValue>e.xValue?1:this.eventType<e.eventType?-1:this.eventType>e.eventType?1:0},getInsertEvent:function(){return this.insertEvent},isInsert:function(){return this.eventType===Mn.INSERT},isSameLabel:function(t){return null!==this.label&&this.label===t.label},getDeleteEventIndex:function(){return this.deleteEventIndex},interfaces_:function(){return[s]},getClass:function(){return Mn}}),Mn.INSERT=1,Mn.DELETE=2,e(Dn.prototype,{interfaces_:function(){return[]},getClass:function(){return Dn}}),e(An.prototype,{isTrivialIntersection:function(t,e,n,i){if(t===n&&1===this.li.getIntersectionNum()){if(An.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},setIsDoneIfProperInt:function(t){this.isDoneWhenProperInt=t},hasProperInteriorIntersection:function(){return this.hasProperInterior},isBoundaryPointInternal:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next(),r=i.getCoordinate();if(t.isIntersection(r))return!0}return!1},hasProperIntersection:function(){return this.hasProper},hasIntersection:function(){return this._hasIntersection},isDone:function(){return this._isDone},isBoundaryPoint:function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},setBoundaryNodes:function(t,e){this.bdyNodes=new Array(2).fill(null),this.bdyNodes[0]=t,this.bdyNodes[1]=e},addIntersections:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this.li.computeIntersection(r,o,s,a),this.li.hasIntersection()&&(this.recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this.includeProper&&this.li.isProper()||(t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).copy(),this.hasProper=!0,this.isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))},interfaces_:function(){return[]},getClass:function(){return An}}),An.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},h(Fn,Dn),e(Fn.prototype,{prepareEvents:function(){fo.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},computeIntersections:function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof An&&R(arguments[0],y)&&R(arguments[1],y)){var i=arguments[0],r=arguments[1],o=arguments[2];this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&R(arguments[0],y)&&arguments[1]instanceof An){var s=arguments[0],a=arguments[1],c=arguments[2];c?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},addEdge:function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var o=new _n(n,r),s=new Mn(e,n.getMinX(r),o);this.events.add(s),this.events.add(new Mn(n.getMaxX(r),s))}},processOverlaps:function(t,e,n,i){for(var r=n.getObject(),o=t;e>o;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(r.computeIntersections(a,i),this.nOverlaps++)}}},addEdges:function(){if(1===arguments.length)for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.addEdge(n,n)}else if(2===arguments.length)for(var i=arguments[0],r=arguments[1],e=i.iterator();e.hasNext();){var n=e.next();this.addEdge(n,r)}},interfaces_:function(){return[]},getClass:function(){return Fn}}),e(Gn.prototype,{getMin:function(){return this.min},intersects:function(t,e){return!(this.min>e||this.max<t)},getMax:function(){return this.max},toString:function(){return se.toLineString(new g(this.min,0),new g(this.max,0))},interfaces_:function(){return[]},getClass:function(){return Gn}}),e(qn.prototype,{compare:function(t,e){var n=t,i=e,r=(n.min+n.max)/2,o=(i.min+i.max)/2;return o>r?-1:r>o?1:0},interfaces_:function(){return[a]},getClass:function(){return qn}}),Gn.NodeComparator=qn,h(Bn,Gn),e(Bn.prototype,{query:function(t,e,n){return this.intersects(t,e)?void n.visitItem(this.item):null},interfaces_:function(){return[]},getClass:function(){return Bn}}),h(zn,Gn),e(zn.prototype,{buildExtent:function(t,e){this.min=Math.min(t.min,e.min),this.max=Math.max(t.max,e.max)},query:function(t,e,n){return this.intersects(t,e)?(null!==this.node1&&this.node1.query(t,e,n),void(null!==this.node2&&this.node2.query(t,e,n))):null},interfaces_:function(){return[]},getClass:function(){return zn}}),e(Vn.prototype,{buildTree:function(){fo.sort(this.leaves,new IntervalRTreeNode.NodeComparator);for(var t=this.leaves,e=null,n=new I;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},insert:function(t,e,n){if(null!==this.root)throw new IllegalStateException("Index cannot be added to once it has been queried");this.leaves.add(new Bn(t,e,n))},query:function(t,e,n){this.init(),this.root.query(t,e,n)},buildRoot:function(){return null!==this.root?null:void(this.root=this.buildTree())},printNode:function(t){A.out.println(se.toLineString(new g(t.min,this.level),new g(t.max,this.level)))},init:function(){return null!==this.root?null:void this.buildRoot()},buildLevel:function(t,e){this.level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n),r=n+1<t.size()?t.get(n):null;if(null===r)e.add(i);else{var o=new zn(t.get(n),t.get(n+1));e.add(o)}}},interfaces_:function(){return[]},getClass:function(){return Vn}}),e(kn.prototype,{filter:function(t){if(this.isForcedToLineString&&t instanceof bt){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this.lines.add(e),null}t instanceof St&&this.lines.add(t)},setForceToLineString:function(t){this.isForcedToLineString=t},interfaces_:function(){return[q]},getClass:function(){return kn}}),kn.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(kn.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(kn.getLines(e,n))}},kn.getLines=function(){if(1===arguments.length){var t=arguments[0];return kn.getLines(t,!1)}if(2===arguments.length){if(R(arguments[0],v)&&R(arguments[1],v)){for(var e=arguments[0],n=arguments[1],i=e.iterator();i.hasNext();){var r=i.next();kn.getLines(r,n)}return n}if(arguments[0]instanceof B&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new I;return o.apply(new kn(a,s)),a}if(arguments[0]instanceof B&&R(arguments[1],v)){var c=arguments[0],u=arguments[1];return c instanceof St?u.add(c):c.apply(new kn(u)),u}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&R(arguments[0],v)&&R(arguments[1],v)){for(var l=arguments[0],h=arguments[1],p=arguments[2],i=l.iterator();i.hasNext();){var r=i.next();kn.getLines(r,h,p)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof B&&R(arguments[1],v)){var f=arguments[0],d=arguments[1],g=arguments[2];return f.apply(new kn(d,g)),d}}},e(Yn.prototype,{visitItem:function(t){this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[Ae]},getClass:function(){return Yn}}),e(Un.prototype,{locate:function(t){var e=new le(t),n=new Xn(e);return this.index.query(t.y,t.y,n),e.getLocation()},interfaces_:function(){return[Rn]},getClass:function(){return Un}}),e(Xn.prototype,{visitItem:function(t){var e=t;this.counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},interfaces_:function(){return[Ae]},getClass:function(){return Xn}}),e(Hn.prototype,{init:function(t){for(var e=kn.getLines(t),n=e.iterator();n.hasNext();){var i=n.next(),r=i.getCoordinates();this.addLine(r)}},addLine:function(t){for(var e=1;e<t.length;e++){var n=new ce(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this.index.insert(i,r,n)}},query:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Yn;return this.index.query(t,e,n),n.getItems()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this.index.query(i,r,o)}},interfaces_:function(){return[]},getClass:function(){return Hn}}),Un.SegmentVisitor=Xn,Un.IntervalIndexedGeometry=Hn,e(Wn.prototype,{getSegmentIndex:function(){return this.segmentIndex},getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},compareTo:function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},isEndPoint:function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},toString:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},getDistance:function(){return this.dist},compare:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},interfaces_:function(){return[s]},getClass:function(){return Wn}}),e(jn.prototype,{print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},addEndpoints:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new g(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return r&&(o[s]=e.coord),new Jn(o,new gn(this.edge.label))},add:function(t,e,n){var i=new Wn(t,e,n),r=this.nodeMap.get(i);return null!==r?r:(this.nodeMap.put(i,i),i)},isIntersection:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();if(n.coord.equals(t))return!0}return!1},interfaces_:function(){return[]},getClass:function(){return jn}}),e(Kn.prototype,{getChainStartIndices:function(t){var e=0,n=new I;n.add(new b(e));do{var i=this.findChainEnd(t,e);n.add(new b(i)),e=i}while(e<t.length-1);var r=Kn.toIntArray(n);return r},findChainEnd:function(t,e){for(var n=Je.quadrant(t[e],t[e+1]),i=e+1;i<t.length;){var r=Je.quadrant(t[i-1],t[i]);if(r!==n)break;i++}return i-1},interfaces_:function(){return[]},getClass:function(){return Kn}}),Kn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},e(Zn.prototype,{getCoordinates:function(){return this.pts},getMaxX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},getMinX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return n>e?e:n},computeIntersectsForChain:function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],c=arguments[4],u=arguments[5],l=this.pts[r],h=this.pts[o],p=s.pts[a],f=s.pts[c];if(o-r===1&&c-a===1)return u.addIntersections(this.e,r,s.e,a),null;if(this.env1.init(l,h),this.env2.init(p,f),!this.env1.intersects(this.env2))return null;var d=Math.trunc((r+o)/2),g=Math.trunc((a+c)/2);d>r&&(g>a&&this.computeIntersectsForChain(r,d,s,a,g,u),c>g&&this.computeIntersectsForChain(r,d,s,g,c,u)),o>d&&(g>a&&this.computeIntersectsForChain(d,o,s,a,g,u),c>g&&this.computeIntersectsForChain(d,o,s,g,c,u))}},getStartIndexes:function(){return this.startIndex},computeIntersects:function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)},interfaces_:function(){return[]},getClass:function(){return Zn}}),e(Qn.prototype,{getDepth:function(t,e){return this.depth[t][e]},setDepth:function(t,e,n){this.depth[t][e]=n},isNull:function(){if(0===arguments.length){for(var t=0;2>t;t++)for(var e=0;3>e;e++)if(this.depth[t][e]!==Qn.NULL_VALUE)return!1;
return!0}if(1===arguments.length){var n=arguments[0];return this.depth[n][1]===Qn.NULL_VALUE}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this.depth[i][r]===Qn.NULL_VALUE}},normalize:function(){for(var t=0;2>t;t++)if(!this.isNull(t)){var e=this.depth[t][1];this.depth[t][2]<e&&(e=this.depth[t][2]),0>e&&(e=0);for(var n=1;3>n;n++){var i=0;this.depth[t][n]>e&&(i=1),this.depth[t][n]=i}}},getDelta:function(t){return this.depth[t][cn.RIGHT]-this.depth[t][cn.LEFT]},getLocation:function(t,e){return this.depth[t][e]<=0?L.EXTERIOR:L.INTERIOR},toString:function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]},add:function(){if(1===arguments.length)for(var t=arguments[0],e=0;2>e;e++)for(var n=1;3>n;n++){var i=t.getLocation(e,n);i!==L.EXTERIOR&&i!==L.INTERIOR||(this.isNull(e,n)?this.depth[e][n]=Qn.depthAtLocation(i):this.depth[e][n]+=Qn.depthAtLocation(i))}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];s===L.INTERIOR&&this.depth[r][o]++}},interfaces_:function(){return[]},getClass:function(){return Qn}}),Qn.depthAtLocation=function(t){return t===L.EXTERIOR?0:t===L.INTERIOR?1:Qn.NULL_VALUE},Qn.NULL_VALUE=-1,h(Jn,mn),e(Jn.prototype,{getDepth:function(){return this.depth},getCollapsedEdge:function(){var t=new Array(2).fill(null);t[0]=this.pts[0],t[1]=this.pts[1];var e=new Jn(t,gn.toLineLabel(this.label));return e},isIsolated:function(){return this._isIsolated},getCoordinates:function(){return this.pts},setIsolated:function(t){this._isIsolated=t},setName:function(t){this.name=t},equals:function(t){if(!(t instanceof Jn))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,i=!0,r=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(n=!1),this.pts[o].equals2D(e.pts[--r])||(i=!1),!n&&!i)return!1;return!0},getCoordinate:function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},print:function(t){t.print("edge "+this.name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this.label+" "+this.depthDelta)},computeIM:function(t){Jn.updateIM(this.label,t)},isCollapsed:function(){return!!this.label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getMaximumSegmentIndex:function(){return this.pts.length-1},getDepthDelta:function(){return this.depthDelta},getNumPoints:function(){return this.pts.length},printReverse:function(t){t.print("edge "+this.name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},getMonotoneChainEdge:function(){return null===this.mce&&(this.mce=new Zn(this)),this.mce},getEnvelope:function(){if(null===this.env){this.env=new C;for(var t=0;t<this.pts.length;t++)this.env.expandToInclude(this.pts[t])}return this.env},addIntersection:function(t,e,n,i){var r=new g(t.getIntersection(i)),o=e,s=t.getEdgeDistance(n,i),a=o+1;if(a<this.pts.length){var c=this.pts[a];r.equals2D(c)&&(o=a,s=0)}this.eiList.add(r,o,s)},toString:function(){var t=new P;t.append("edge "+this.name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this.label+" "+this.depthDelta),t.toString()},isPointwiseEqual:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},setDepthDelta:function(t){this.depthDelta=t},getEdgeIntersectionList:function(){return this.eiList},addIntersections:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},interfaces_:function(){return[]},getClass:function(){return Jn}}),Jn.updateIM=function(){if(2!==arguments.length)return mn.prototype.updateIM.apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,cn.ON),t.getLocation(1,cn.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,cn.LEFT),t.getLocation(1,cn.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,cn.RIGHT),t.getLocation(1,cn.RIGHT),2))},h($n,Cn),e($n.prototype,{insertBoundaryPoint:function(t,e){var n=this.nodes.addNode(e),i=n.getLabel(),r=1,o=L.NONE;o=i.getLocation(t,cn.ON),o===L.BOUNDARY&&r++;var s=$n.determineBoundary(this.boundaryNodeRule,r);i.setLocation(t,s)},computeSelfNodes:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=new An(n,(!0),(!1));o.setIsDoneIfProperInt(r);var s=this.createEdgeSetIntersector(),a=this.parentGeom instanceof bt||this.parentGeom instanceof Tt||this.parentGeom instanceof Ot,c=i||!a;return s.computeIntersections(this.edges,o,c),this.addSelfIntersectionNodes(this.argIndex),o}},computeSplitEdges:function(t){for(var e=this.edges.iterator();e.hasNext();){var n=e.next();n.eiList.addSplitEdges(t)}},computeEdgeIntersections:function(t,e,n){var i=new An(e,n,(!0));i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes());var r=this.createEdgeSetIntersector();return r.computeIntersections(this.edges,t.edges,i),i},getGeometry:function(){return this.parentGeom},getBoundaryNodeRule:function(){return this.boundaryNodeRule},hasTooFewPoints:function(){return this._hasTooFewPoints},addPoint:function(){if(arguments[0]instanceof Lt){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this.argIndex,e,L.INTERIOR)}else if(arguments[0]instanceof g){var n=arguments[0];this.insertPoint(this.argIndex,n,L.INTERIOR)}},addPolygon:function(t){this.addPolygonRing(t.getExteriorRing(),L.EXTERIOR,L.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,L.INTERIOR,L.EXTERIOR)}},addEdge:function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this.argIndex,e[0],L.BOUNDARY),this.insertPoint(this.argIndex,e[e.length-1],L.BOUNDARY)},addLineString:function(t){var e=H.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this.invalidPoint=e[0],null;var n=new Jn(e,new gn(this.argIndex,L.INTERIOR));this.lineEdgeMap.put(t,n),this.insertEdge(n),f.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,e[0]),this.insertBoundaryPoint(this.argIndex,e[e.length-1])},getInvalidPoint:function(){return this.invalidPoint},getBoundaryPoints:function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy()}return e},getBoundaryNodes:function(){return null===this.boundaryNodes&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes},addSelfIntersectionNode:function(t,e,n){return this.isBoundaryNode(t,e)?null:void(n===L.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n))},addPolygonRing:function(t,e,n){if(t.isEmpty())return null;var i=H.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this.invalidPoint=i[0],null;var r=e,o=n;he.isCCW(i)&&(r=n,o=e);var s=new Jn(i,new gn(this.argIndex,L.BOUNDARY,r,o));this.lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this.argIndex,i[0],L.BOUNDARY)},insertPoint:function(t,e,n){var i=this.nodes.addNode(e),r=i.getLabel();null===r?i.label=new gn(t,n):r.setLocation(t,n)},createEdgeSetIntersector:function(){return new Fn},addSelfIntersectionNodes:function(t){for(var e=this.edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var o=r.next();this.addSelfIntersectionNode(t,o.coord,i)}},add:function(){if(1!==arguments.length)return Cn.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof Ot&&(this.useBoundaryDeterminationRule=!1),t instanceof Tt)this.addPolygon(t);else if(t instanceof St)this.addLineString(t);else if(t instanceof Lt)this.addPoint(t);else if(t instanceof Pt)this.addCollection(t);else if(t instanceof gt)this.addCollection(t);else if(t instanceof Ot)this.addCollection(t);else{if(!(t instanceof ft))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},locate:function(t){return R(this.parentGeom,Rt)&&this.parentGeom.getNumGeometries()>50?(null===this.areaPtLocator&&(this.areaPtLocator=new Un(this.parentGeom)),this.areaPtLocator.locate(t)):this.ptLocator.locate(t,this.parentGeom)},findEdge:function(){if(1===arguments.length){var t=arguments[0];return this.lineEdgeMap.get(t)}return Cn.prototype.findEdge.apply(this,arguments)},interfaces_:function(){return[]},getClass:function(){return $n}}),$n.determineBoundary=function(t,e){return t.isInBoundary(e)?L.BOUNDARY:L.INTERIOR},e(ti.prototype,{getArgGeometry:function(t){return this.arg[t].getGeometry()},setComputationPrecision:function(t){this.resultPrecisionModel=t,this.li.setPrecisionModel(this.resultPrecisionModel)},interfaces_:function(){return[]},getClass:function(){return ti}}),e(ei.prototype,{compareTo:function(t){var e=t,n=ei.compareOriented(this.pts,this._orientation,e.pts,e._orientation);return n},interfaces_:function(){return[s]},getClass:function(){return ei}}),ei.orientation=function(t){return 1===H.increasingDirection(t)},ei.compareOriented=function(t,e,n,i){for(var r=e?1:-1,o=i?1:-1,s=e?t.length:-1,a=i?n.length:-1,c=e?0:t.length-1,u=i?0:n.length-1;;){var l=t[c].compareTo(n[u]);if(0!==l)return l;c+=r,u+=o;var h=c===s,p=u===a;if(h&&!p)return-1;if(!h&&p)return 1;if(h&&p)return 0}},e(ni.prototype,{print:function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this.edges.size();e++){var n=this.edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")},addAll:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},findEdgeIndex:function(t){for(var e=0;e<this.edges.size();e++)if(this.edges.get(e).equals(t))return e;return-1},iterator:function(){return this.edges.iterator()},getEdges:function(){return this.edges},get:function(t){return this.edges.get(t)},findEqualEdge:function(t){var e=new ei(t.getCoordinates()),n=this.ocaMap.get(e);return n},add:function(t){this.edges.add(t);var e=new ei(t.getCoordinates());this.ocaMap.put(e,t)},interfaces_:function(){return[]},getClass:function(){return ni}}),h(ii,ti),e(ii.prototype,{insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new gn(t.getLabel()),i.flip());var r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this.edgeList.add(t)},getGraph:function(){return this.graph},cancelDuplicateResultEdges:function(){for(var t=this.graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},isCoveredByLA:function(t){return!!this.isCovered(t,this.resultLineList)||!!this.isCovered(t,this.resultPolyList)},computeGeometry:function(t,e,n,i){var r=new I;return r.addAll(t),r.addAll(e),r.addAll(n),r.isEmpty()?ii.createEmptyResult(i,this.arg[0].getGeometry(),this.arg[1].getGeometry(),this.geomFact):this.geomFact.buildGeometry(r)},mergeSymLabels:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().mergeSymLabels()}},isCovered:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next(),r=this.ptLocator.locate(t,i);if(r!==L.EXTERIOR)return!0}return!1},replaceCollapsedEdges:function(){for(var t=new I,e=this.edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this.edgeList.addAll(t)},updateNodeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},getResultGeometry:function(t){return this.computeOverlay(t),this.resultGeom},insertUniqueEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},computeOverlay:function(t){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var e=new I;this.arg[0].computeSplitEdges(e),this.arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),ln.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Sn(this.geomFact);n.add(this.graph),this.resultPolyList=n.getPolygons();var i=new wn(this,this.geomFact,this.ptLocator);this.resultLineList=i.build(t);var r=new Ln(this,this.geomFact,this.ptLocator);this.resultPointList=r.build(t),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,t)},labelIncompleteNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setLocation(e,n)},copyPoints:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next(),i=this.graph.addNode(n.getCoordinate());i.setLabel(t,n.getLabel().getLocation(t))}},findResultAreaEdges:function(t){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getLabel();i.isArea()&&!n.isInteriorAreaEdge()&&ii.isResultOfOp(i.getLocation(0,cn.RIGHT),i.getLocation(1,cn.RIGHT),t)&&n.setInResult(!0)}},computeLabelsFromDepths:function(){for(var t=this.edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var r=0;2>r;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(f.isTrue(!i.isNull(r,cn.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,cn.LEFT,i.getLocation(r,cn.LEFT)),f.isTrue(!i.isNull(r,cn.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,cn.RIGHT,i.getLocation(r,cn.RIGHT))))}}},computeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()},labelIncompleteNodes:function(){for(var t=0,e=this.graph.getNodes().iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(t++,i.isNull(0)?this.labelIncompleteNode(n,0):this.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(i)}},isCoveredByA:function(t){return!!this.isCovered(t,this.resultPolyList)},interfaces_:function(){return[]},getClass:function(){return ii}}),ii.overlayOp=function(t,e,n){var i=new ii(t,e),r=i.getResultGeometry(n);return r},ii.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return ii.createEmptyResult(ii.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return hn.map(t,{interfaces_:function(){return[MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),si.overlayOp(t,e,ii.INTERSECTION)},ii.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ii.createEmptyResult(ii.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),si.overlayOp(t,e,ii.SYMDIFFERENCE)},ii.resultDimension=function(t,e,n){var i=e.getDimension(),r=n.getDimension(),o=-1;switch(t){case ii.INTERSECTION:o=Math.min(i,r);break;case ii.UNION:o=Math.max(i,r);break;case ii.DIFFERENCE:o=i;break;case ii.SYMDIFFERENCE:o=Math.max(i,r)}return o},ii.createEmptyResult=function(t,e,n,i){var r=null;switch(ii.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null));break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon()}return r},ii.difference=function(t,e){return t.isEmpty()?ii.createEmptyResult(ii.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),si.overlayOp(t,e,ii.DIFFERENCE))},ii.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1);return ii.isResultOfOp(n,i,e)}if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];switch(r===L.BOUNDARY&&(r=L.INTERIOR),o===L.BOUNDARY&&(o=L.INTERIOR),s){case ii.INTERSECTION:return r===L.INTERIOR&&o===L.INTERIOR;case ii.UNION:return r===L.INTERIOR||o===L.INTERIOR;case ii.DIFFERENCE:return r===L.INTERIOR&&o!==L.INTERIOR;case ii.SYMDIFFERENCE:return r===L.INTERIOR&&o!==L.INTERIOR||r!==L.INTERIOR&&o===L.INTERIOR}return!1}},ii.INTERSECTION=1,ii.UNION=2,ii.DIFFERENCE=3,ii.SYMDIFFERENCE=4,e(ri.prototype,{selfSnap:function(t){var e=new Ie(t),n=e.snapTo(t,this.snapTolerance);return n},removeCommonBits:function(t){this.cbr=new Se,this.cbr.add(t[0]),this.cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this.cbr.removeCommonBits(t[0].copy()),e[1]=this.cbr.removeCommonBits(t[1].copy()),e},prepareResult:function(t){return this.cbr.addCommonBits(t),t},getResultGeometry:function(t){var e=this.snap(this.geom),n=ii.overlayOp(e[0],e[1],t);return this.prepareResult(n)},checkValid:function(t){t.isValid()||A.out.println("Snapped geometry is invalid")},computeSnapTolerance:function(){this.snapTolerance=Ie.computeOverlaySnapTolerance(this.geom[0],this.geom[1])},snap:function(t){var e=this.removeCommonBits(t),n=Ie.snap(e[0],e[1],this.snapTolerance);return n},interfaces_:function(){return[]},getClass:function(){return ri}}),ri.overlayOp=function(t,e,n){var i=new ri(t,e);return i.getResultGeometry(n)},ri.union=function(t,e){return ri.overlayOp(t,e,ii.UNION)},ri.intersection=function(t,e){return ri.overlayOp(t,e,ii.INTERSECTION)},ri.symDifference=function(t,e){return ri.overlayOp(t,e,ii.SYMDIFFERENCE)},ri.difference=function(t,e){return ri.overlayOp(t,e,ii.DIFFERENCE)},e(si.prototype,{getResultGeometry:function(t){var e=null,n=!1,i=null;try{e=ii.overlayOp(this.geom[0],this.geom[1],t);var r=!0;r&&(n=!0)}catch(t){if(!(t instanceof l))throw t;i=t}finally{}if(!n)try{e=ri.overlayOp(this.geom[0],this.geom[1],t)}catch(t){throw t instanceof l?i:t}finally{}return e},interfaces_:function(){return[]},getClass:function(){return si}}),si.overlayOp=function(t,e,n){var i=new si(t,e);return i.getResultGeometry(n)},si.union=function(t,e){return si.overlayOp(t,e,ii.UNION)},si.intersection=function(t,e){return si.overlayOp(t,e,ii.INTERSECTION)},si.symDifference=function(t,e){return si.overlayOp(t,e,ii.SYMDIFFERENCE)},si.difference=function(t,e){return si.overlayOp(t,e,ii.DIFFERENCE)},e(oi.prototype,{addPolygon:function(t){if(t.isEmpty())return null;var e=null,n=0,i=this.horizontalBisector(t);if(0===i.getLength())n=0,e=i.getCoordinate();else{var r=si.overlayOp(i,t,ii.INTERSECTION),o=this.widestGeometry(r);n=o.getEnvelopeInternal().getWidth(),e=oi.centre(o.getEnvelopeInternal())}(null===this.interiorPoint||n>this.maxWidth)&&(this.interiorPoint=e,this.maxWidth=n)},getInteriorPoint:function(){return this.interiorPoint},widestGeometry:function t(){if(arguments[0]instanceof ft){var e=arguments[0];if(e.isEmpty())return e;for(var t=e.getGeometryN(0),n=1;n<e.getNumGeometries();n++)e.getGeometryN(n).getEnvelopeInternal().getWidth()>t.getEnvelopeInternal().getWidth()&&(t=e.getGeometryN(n));return t}if(arguments[0]instanceof B){var i=arguments[0];return i instanceof ft?this.widestGeometry(i):i}},horizontalBisector:function(t){var e=t.getEnvelopeInternal(),n=ai.getBisectorY(t);return this.factory.createLineString([new g(e.getMinX(),n),new g(e.getMaxX(),n)])},add:function(t){if(t instanceof Tt)this.addPolygon(t);else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))},interfaces_:function(){return[]},getClass:function(){return oi}}),oi.centre=function(t){return new g(oi.avg(t.getMinX(),t.getMaxX()),oi.avg(t.getMinY(),t.getMaxY()))},oi.avg=function(t,e){return(t+e)/2},e(ai.prototype,{updateInterval:function(t){t<=this.centreY?t>this.loY&&(this.loY=t):t>this.centreY&&t<this.hiY&&(this.hiY=t)},getBisectorY:function(){this.process(this.poly.getExteriorRing());for(var t=0;t<this.poly.getNumInteriorRing();t++)this.process(this.poly.getInteriorRingN(t));var e=oi.avg(this.hiY,this.loY);return e},process:function(t){for(var e=t.getCoordinateSequence(),n=0;n<e.size();n++){var i=e.getY(n);this.updateInterval(i)}},interfaces_:function(){return[]},getClass:function(){return ai}}),ai.getBisectorY=function(t){var e=new ai(t);return e.getBisectorY()},oi.SafeBisectorFinder=ai,e(ui.prototype,{addEndpoints:function(){if(arguments[0]instanceof B){var t=arguments[0];if(t instanceof St)this.addEndpoints(t.getCoordinates());else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addEndpoints(e.getGeometryN(n))}else if(arguments[0]instanceof Array){var i=arguments[0];this.add(i[0]),this.add(i[i.length-1])}},getInteriorPoint:function(){return this.interiorPoint},addInterior:function(){if(arguments[0]instanceof B){var t=arguments[0];if(t instanceof St)this.addInterior(t.getCoordinates());else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addInterior(e.getGeometryN(n))}else if(arguments[0]instanceof Array)for(var i=arguments[0],n=1;n<i.length-1;n++)this.add(i[n])},add:function(t){var e=t.distance(this.centroid);e<this.minDistance&&(this.interiorPoint=new g(t),this.minDistance=e)},interfaces_:function(){return[]},getClass:function(){return ui}}),e(li.prototype,{getInteriorPoint:function(){return this.interiorPoint},add:function(){if(arguments[0]instanceof B){var t=arguments[0];if(t instanceof Lt)this.add(t.getCoordinate());else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))}else if(arguments[0]instanceof g){var i=arguments[0],r=i.distance(this.centroid);r<this.minDistance&&(this.interiorPoint=new g(i),this.minDistance=r)}},interfaces_:function(){return[]},getClass:function(){return li}}),e(hi.prototype,{interfaces_:function(){return[]},getClass:function(){return hi}}),hi.toDegrees=function(t){return 180*t/Math.PI},hi.normalize=function(t){for(;t>Math.PI;)t-=hi.PI_TIMES_2;for(;t<=-Math.PI;)t+=hi.PI_TIMES_2;return t},hi.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i)}},hi.isAcute=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=n.x-e.x,s=n.y-e.y,a=i*o+r*s;return a>0},hi.isObtuse=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=n.x-e.x,s=n.y-e.y,a=i*o+r*s;return 0>a},hi.interiorAngle=function(t,e,n){var i=hi.angle(e,t),r=hi.angle(e,n);return Math.abs(r-i)},hi.normalizePositive=function(t){if(0>t){for(;0>t;)t+=hi.PI_TIMES_2;t>=hi.PI_TIMES_2&&(t=0)}else{for(;t>=hi.PI_TIMES_2;)t-=hi.PI_TIMES_2;0>t&&(t=0)}return t},hi.angleBetween=function(t,e,n){var i=hi.angle(e,t),r=hi.angle(e,n);return hi.diff(i,r)},hi.diff=function(t,e){var n=null;return n=e>t?e-t:t-e,n>Math.PI&&(n=2*Math.PI-n),n},hi.toRadians=function(t){return t*Math.PI/180},hi.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?hi.COUNTERCLOCKWISE:0>n?hi.CLOCKWISE:hi.NONE},hi.angleBetweenOriented=function(t,e,n){var i=hi.angle(e,t),r=hi.angle(e,n),o=r-i;return o<=-Math.PI?o+hi.PI_TIMES_2:o>Math.PI?o-hi.PI_TIMES_2:o},hi.PI_TIMES_2=2*Math.PI,hi.PI_OVER_2=Math.PI/2,hi.PI_OVER_4=Math.PI/4,hi.COUNTERCLOCKWISE=he.COUNTERCLOCKWISE,hi.CLOCKWISE=he.CLOCKWISE,hi.NONE=he.COLLINEAR,e(ci.prototype,{area:function(){return ci.area(this.p0,this.p1,this.p2)},signedArea:function(){return ci.signedArea(this.p0,this.p1,this.p2)},interpolateZ:function(t){if(null===t)throw new i("Supplied point is null.");return ci.interpolateZ(t,this.p0,this.p1,this.p2)},longestSideLength:function(){return ci.longestSideLength(this.p0,this.p1,this.p2)},isAcute:function(){return ci.isAcute(this.p0,this.p1,this.p2)},circumcentre:function(){return ci.circumcentre(this.p0,this.p1,this.p2)},area3D:function(){return ci.area3D(this.p0,this.p1,this.p2)},centroid:function(){return ci.centroid(this.p0,this.p1,this.p2)},inCentre:function(){return ci.inCentre(this.p0,this.p1,this.p2)},interfaces_:function(){return[]},getClass:function(){return ci}}),ci.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},ci.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},ci.det=function(t,e,n,i){return t*i-e*n},ci.interpolateZ=function(t,e,n,i){var r=e.x,o=e.y,s=n.x-r,a=i.x-r,c=n.y-o,u=i.y-o,l=s*u-a*c,h=t.x-r,p=t.y-o,f=(u*h-a*p)/l,d=(-c*h+s*p)/l,g=e.z+f*(n.z-e.z)+d*(i.z-e.z);return g},ci.longestSideLength=function(t,e,n){var i=t.distance(e),r=e.distance(n),o=n.distance(t),s=i;return r>s&&(s=r),o>s&&(s=o),s},ci.isAcute=function(t,e,n){return!(!hi.isAcute(t,e,n)||!hi.isAcute(e,n,t))&&!!hi.isAcute(n,t,e)},ci.circumcentre=function(t,e,n){var i=n.x,r=n.y,o=t.x-i,s=t.y-r,a=e.x-i,c=e.y-r,u=2*ci.det(o,s,a,c),l=ci.det(s,o*o+s*s,c,a*a+c*c),h=ci.det(o,o*o+s*s,a,a*a+c*c),p=i-l/u,f=r+h/u;return new g(p,f)},ci.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new F(t.x+n/2,t.y+i/2,1),o=new F(t.x-i+n/2,t.y+n+i/2,1);return new F(r,o)},ci.angleBisector=function(t,e,n){var i=e.distance(t),r=e.distance(n),o=i/(i+r),s=n.x-t.x,a=n.y-t.y,c=new g(t.x+o*s,t.y+o*a);return c},ci.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,c=n.z-t.z,u=r*c-o*a,l=o*s-i*c,h=i*a-r*s,p=u*u+l*l+h*h,f=Math.sqrt(p)/2;return f},ci.centroid=function(t,e,n){var i=(t.x+e.x+n.x)/3,r=(t.y+e.y+n.y)/3;return new g(i,r)},ci.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),o=t.distance(e),s=i+r+o,a=(i*t.x+r*e.x+o*n.x)/s,c=(i*t.y+r*e.y+o*n.y)/s;return new g(a,c)},e(fi.prototype,{getRadius:function(){return this.compute(),this.radius},getDiameter:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[1];return this.input.getFactory().createLineString([t,e])},getExtremalPoints:function(){return this.compute(),this.extremalPts},computeCirclePoints:function(){if(this.input.isEmpty())return this.extremalPts=new Array(0).fill(null),null;if(1===this.input.getNumPoints()){var t=this.input.getCoordinates();return this.extremalPts=[new g(t[0])],null}var e=this.input.convexHull(),n=e.getCoordinates(),t=n;if(n[0].equals2D(n[n.length-1])&&(t=new Array(n.length-1).fill(null),H.copyDeep(n,0,t,0,n.length-1)),t.length<=2)return this.extremalPts=H.copyDeep(t),null;for(var i=fi.lowestPoint(t),r=fi.pointWitMinAngleWithX(t,i),o=0;o<t.length;o++){var s=fi.pointWithMinAngleWithSegment(t,i,r);if(hi.isObtuse(i,s,r))return this.extremalPts=[new g(i),new g(r)],null;if(hi.isObtuse(s,i,r))i=s;else{if(!hi.isObtuse(s,r,i))return this.extremalPts=[new g(i),new g(r),new g(s)],null;r=s}}f.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")},compute:function(){return null!==this.extremalPts?null:(this.computeCirclePoints(),this.computeCentre(),void(null!==this.centre&&(this.radius=this.centre.distance(this.extremalPts[0]))))},getFarthestPoints:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[this.extremalPts.length-1];return this.input.getFactory().createLineString([t,e])},getCircle:function(){if(this.compute(),null===this.centre)return this.input.getFactory().createPolygon();var t=this.input.getFactory().createPoint(this.centre);return 0===this.radius?t:t.buffer(this.radius)},getCentre:function(){return this.compute(),this.centre},computeCentre:function(){switch(this.extremalPts.length){case 0:this.centre=null;break;case 1:this.centre=this.extremalPts[0];break;case 2:this.centre=new g((this.extremalPts[0].x+this.extremalPts[1].x)/2,(this.extremalPts[0].y+this.extremalPts[1].y)/2);break;case 3:this.centre=ci.circumcentre(this.extremalPts[0],this.extremalPts[1],this.extremalPts[2])}},interfaces_:function(){return[]},getClass:function(){return fi}}),fi.pointWitMinAngleWithX=function(t,e){for(var n=r.MAX_VALUE,i=null,o=0;o<t.length;o++){var s=t[o];if(s!==e){var a=s.x-e.x,c=s.y-e.y;0>c&&(c=-c);var u=Math.sqrt(a*a+c*c),l=c/u;n>l&&(n=l,i=s)}}return i},fi.lowestPoint=function(t){for(var e=t[0],n=1;n<t.length;n++)t[n].y<e.y&&(e=t[n]);return e},fi.pointWithMinAngleWithSegment=function(t,e,n){for(var i=r.MAX_VALUE,o=null,s=0;s<t.length;s++){var a=t[s];if(a!==e&&a!==n){var c=hi.angleBetween(e,a,n);i>c&&(i=c,o=a)}}return o},e(gi.prototype,{getWidthCoordinate:function(){return this.computeMinimumDiameter(),this.minWidthPt},getSupportingSegment:function(){return this.computeMinimumDiameter(),this.inputGeom.getFactory().createLineString([this.minBaseSeg.p0,this.minBaseSeg.p1])},getDiameter:function(){if(this.computeMinimumDiameter(),null===this.minWidthPt)return this.inputGeom.getFactory().createLineString(null);var t=this.minBaseSeg.project(this.minWidthPt);return this.inputGeom.getFactory().createLineString([t,this.minWidthPt])},computeWidthConvex:function(t){t instanceof Tt?this.convexHullPts=t.getExteriorRing().getCoordinates():this.convexHullPts=t.getCoordinates(),0===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=null,this.minBaseSeg=null):1===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[0]):2===this.convexHullPts.length||3===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[1]):this.computeConvexRingMinDiameter(this.convexHullPts)},computeConvexRingMinDiameter:function(t){this.minWidth=r.MAX_VALUE;for(var e=1,n=new ce,i=0;i<t.length-1;i++)n.p0=t[i],n.p1=t[i+1],e=this.findMaxPerpDistance(t,n,e)},computeMinimumDiameter:function(){if(null!==this.minWidthPt)return null;if(this.isConvex)this.computeWidthConvex(this.inputGeom);else{var t=new me(this.inputGeom).getConvexHull();this.computeWidthConvex(t)}},getLength:function(){return this.computeMinimumDiameter(),this.minWidth},findMaxPerpDistance:function(t,e,n){for(var i=e.distancePerpendicular(t[n]),r=i,o=n,s=o;r>=i;)i=r,o=s,s=gi.nextIndex(t,o),r=e.distancePerpendicular(t[s]);return i<this.minWidth&&(this.minPtIndex=o,this.minWidth=i,this.minWidthPt=t[this.minPtIndex],this.minBaseSeg=new ce(e)),o},getMinimumRectangle:function(){if(this.computeMinimumDiameter(),0===this.minWidth)return this.minBaseSeg.p0.equals2D(this.minBaseSeg.p1)?this.inputGeom.getFactory().createPoint(this.minBaseSeg.p0):this.minBaseSeg.toGeometry(this.inputGeom.getFactory());for(var t=this.minBaseSeg.p1.x-this.minBaseSeg.p0.x,e=this.minBaseSeg.p1.y-this.minBaseSeg.p0.y,n=r.MAX_VALUE,i=-r.MAX_VALUE,o=r.MAX_VALUE,s=-r.MAX_VALUE,a=0;a<this.convexHullPts.length;a++){var c=gi.computeC(t,e,this.convexHullPts[a]);c>i&&(i=c),n>c&&(n=c);var u=gi.computeC(-e,t,this.convexHullPts[a]);u>s&&(s=u),o>u&&(o=u)}var l=gi.computeSegmentForLine(-t,-e,s),h=gi.computeSegmentForLine(-t,-e,o),p=gi.computeSegmentForLine(-e,t,i),f=gi.computeSegmentForLine(-e,t,n),d=p.lineIntersection(l),g=f.lineIntersection(l),y=f.lineIntersection(h),v=p.lineIntersection(h),m=this.inputGeom.getFactory().createLinearRing([d,g,y,v,d]);return this.inputGeom.getFactory().createPolygon(m,null)},interfaces_:function(){return[]},getClass:function(){return gi}}),gi.nextIndex=function(t,e){return e++,e>=t.length&&(e=0),e},gi.computeC=function(t,e,n){return t*n.y-e*n.x},gi.getMinimumDiameter=function(t){return new gi(t).getDiameter()},gi.getMinimumRectangle=function(t){return new gi(t).getMinimumRectangle()},
gi.computeSegmentForLine=function(t,e,n){var i=null,r=null;return Math.abs(e)>Math.abs(t)?(i=new g(0,n/e),r=new g(1,n/e-t/e)):(i=new g(n/t,0),r=new g(n/t-e/t,1)),new ce(i,r)};var go=Object.freeze({Centroid:ge,CGAlgorithms:he,ConvexHull:me,InteriorPointArea:oi,InteriorPointLine:ui,InteriorPointPoint:li,RobustLineIntersector:ae,MinimumBoundingCircle:fi,MinimumDiameter:gi});e(di.prototype,{getResultGeometry:function(){return new pi(this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(0>=t)throw new i("Tolerance must be positive");this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return di}}),di.densifyPoints=function(t,e,n){for(var i=new ce,r=new N,o=0;o<t.length-1;o++){i.p0=t[o],i.p1=t[o+1],r.add(i.p0,!1);var s=i.getLength(),a=Math.trunc(s/e)+1;if(a>1)for(var c=s/a,u=1;a>u;u++){var l=u*c/s,h=i.pointAlong(l);n.makePrecise(h),r.add(h,!1)}}return r.add(t[t.length-1],!1),r.toCoordinateArray()},di.densify=function(t,e){var n=new di(t);return n.setDistanceTolerance(e),n.getResultGeometry()},h(pi,xe),e(pi.prototype,{transformMultiPolygon:function(t,e){var n=xe.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformPolygon:function(t,e){var n=xe.prototype.transformPolygon.call(this,t,e);return e instanceof Ot?n:this.createValidArea(n)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),i=di.densifyPoints(n,this.distanceTolerance,e.getPrecisionModel());return e instanceof St&&1===i.length&&(i=new Array(0).fill(null)),this.factory.getCoordinateSequenceFactory().create(i)},createValidArea:function(t){return t.buffer(0)},interfaces_:function(){return[]},getClass:function(){return pi}}),di.DensifyTransformer=pi;var yo=Object.freeze({Densifier:di});e(vi.prototype,{find:function(t){var e=this;do{if(null===e)return null;if(e.dest().equals2D(t))return e;e=e.oNext()}while(e!==this);return null},dest:function(){return this._sym._orig},oNext:function(){return this._sym._next},insert:function(t){if(this.oNext()===this)return this.insertAfter(t),null;var e=this.compareTo(t),n=this;do{var i=n.oNext(),r=i.compareTo(t);if(r!==e||i===this)return n.insertAfter(t),null;n=i}while(n!==this);f.shouldNeverReachHere()},insertAfter:function(t){f.equals(this._orig,t.orig());var e=this.oNext();this._sym.setNext(t),t.sym().setNext(e)},degree:function t(){var t=0,e=this;do t++,e=e.oNext();while(e!==this);return t},equals:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this._orig.equals2D(t)&&this._sym._orig.equals(e)}},deltaY:function(){return this._sym._orig.y-this._orig.y},sym:function(){return this._sym},prev:function(){return this._sym.next()._sym},compareAngularDirection:function(t){var e=this.deltaX(),n=this.deltaY(),i=t.deltaX(),r=t.deltaY();if(e===i&&n===r)return 0;var o=Je.quadrant(e,n),s=Je.quadrant(i,r);return o>s?1:s>o?-1:he.computeOrientation(t._orig,t.dest(),this.dest())},prevNode:function(){for(var t=this;2===t.degree();)if(t=t.prev(),t===this)return null;return t},compareTo:function(t){var e=t,n=this.compareAngularDirection(e);return n},next:function(){return this._next},setSym:function(t){this._sym=t},orig:function(){return this._orig},toString:function(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"},setNext:function(t){this._next=t},init:function(t){this.setSym(t),t.setSym(this),this.setNext(t),t.setNext(this)},deltaX:function(){return this._sym._orig.x-this._orig.x},interfaces_:function(){return[]},getClass:function(){return vi}}),vi.init=function(t,e){if(null!==t._sym||null!==e._sym||null!==t._next||null!==e._next)throw new IllegalStateException("Edges are already initialized");return t.init(e),t},vi.create=function(t,e){var n=new vi(t),i=new vi(e);return n.init(i),n},h(mi,vi),e(mi.prototype,{mark:function(){this._isMarked=!0},setMark:function(t){this._isMarked=t},isMarked:function(){return this._isMarked},interfaces_:function(){return[]},getClass:function(){return mi}}),mi.setMarkBoth=function(t,e){t.setMark(e),t.sym().setMark(e)},mi.isMarked=function(t){return t.isMarked()},mi.setMark=function(t,e){t.setMark(e)},mi.markBoth=function(t){t.mark(),t.sym().mark()},mi.mark=function(t){t.mark()},e(yi.prototype,{insert:function(t,e,n){var i=this.create(t,e);null!==n?n.insert(i):this.vertexMap.put(t,i);var r=this.vertexMap.get(e);return null!==r?r.insert(i.sym()):this.vertexMap.put(e,i.sym()),i},create:function(t,e){var n=this.createEdge(t),i=this.createEdge(e);return vi.init(n,i),n},createEdge:function(t){return new vi(t)},addEdge:function(t,e){if(!yi.isValidEdge(t,e))return null;var n=this.vertexMap.get(t),i=null;if(null!==n&&(i=n.find(e)),null!==i)return i;var r=this.insert(t,e,n);return r},getVertexEdges:function(){return this.vertexMap.values()},findEdge:function(t,e){var n=this.vertexMap.get(t);return null===n?null:n.find(e)},interfaces_:function(){return[]},getClass:function(){return yi}}),yi.isValidEdge=function(t,e){var n=e.compareTo(t);return 0!==n},h(xi,mi),e(xi.prototype,{setStart:function(){this._isStart=!0},isStart:function(){return this._isStart},interfaces_:function(){return[]},getClass:function(){return xi}}),h(Ei,yi),e(Ei.prototype,{createEdge:function(t){return new xi(t)},interfaces_:function(){return[]},getClass:function(){return Ei}}),e(Ii.prototype,{addLine:function(t){this.lines.add(this.factory.createLineString(t.toCoordinateArray()))},updateRingStartEdge:function(t){return t.isStart()||(t=t.sym(),t.isStart())?null===this.ringStartEdge?(this.ringStartEdge=t,null):void(t.orig().compareTo(this.ringStartEdge.orig())<0&&(this.ringStartEdge=t)):null},getResult:function(){return null===this.result&&this.computeResult(),this.result},process:function(t){var e=t.prevNode();null===e&&(e=t),this.stackEdges(e),this.buildLines()},buildRing:function(t){var e=new N,n=t;for(e.add(n.orig().copy(),!1);2===n.sym().degree();){var i=n.next();if(i===t)break;e.add(i.orig().copy(),!1),n=i}e.add(n.dest().copy(),!1),this.addLine(e)},buildLine:function(t){var e=new N,n=t;for(this.ringStartEdge=null,mi.markBoth(n),e.add(n.orig().copy(),!1);2===n.sym().degree();){this.updateRingStartEdge(n);var i=n.next();if(i===t)return this.buildRing(this.ringStartEdge),null;e.add(i.orig().copy(),!1),n=i,mi.markBoth(n)}e.add(n.dest().copy(),!1),this.stackEdges(n.sym()),this.addLine(e)},stackEdges:function(t){var e=t;do mi.isMarked(e)||this.nodeEdgeStack.add(e),e=e.oNext();while(e!==t)},computeResult:function(){for(var t=this.graph.getVertexEdges(),e=t.iterator();e.hasNext();){var n=e.next();mi.isMarked(n)||this.process(n)}this.result=this.factory.buildGeometry(this.lines)},buildLines:function(){for(;!this.nodeEdgeStack.empty();){var t=this.nodeEdgeStack.pop();mi.isMarked(t)||this.buildLine(t)}},add:function(){if(arguments[0]instanceof B){var t=arguments[0];t.apply({interfaces_:function(){return[q]},filter:function(t){t instanceof St&&this.add(t)}})}else if(R(arguments[0],v))for(var e=arguments[0],n=e.iterator();n.hasNext();){var i=n.next();this.add(i)}else if(arguments[0]instanceof St){var r=arguments[0];null===this.factory&&(this.factory=r.getFactory());for(var o=r.getCoordinateSequence(),s=!1,n=1;n<o.size();n++){var a=this.graph.addEdge(o.getCoordinate(n-1),o.getCoordinate(n));null!==a&&(s||(a.setStart(),s=!0))}}},interfaces_:function(){return[]},getClass:function(){return Ii}}),Ii.dissolve=function(t){var e=new Ii;return e.add(t),e.getResult()};var vo=Object.freeze({LineDissolver:Ii});e(Ni.prototype,{hasChildren:function(){for(var t=0;4>t;t++)if(null!==this.subnode[t])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;4>e;e++)null!==this.subnode[e]&&this.subnode[e].addAllItems(t);return t},getNodeCount:function(){for(var t=0,e=0;4>e;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+1},size:function(){for(var t=0,e=0;4>e;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){if(!this.isSearchMatch(t))return null;e.addAll(this.items);for(var n=0;4>n;n++)null!==this.subnode[n]&&this.subnode[n].addAllItemsFromOverlapping(t,e)},visitItems:function(t,e){for(var n=this.items.iterator();n.hasNext();)e.visitItem(n.next())},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,i=0;4>i;i++)if(null!==this.subnode[i]&&(n=this.subnode[i].remove(t,e))){this.subnode[i].isPrunable()&&(this.subnode[i]=null);break}return n?n:n=this.items.remove(e)},visit:function(t,e){if(!this.isSearchMatch(t))return null;this.visitItems(t,e);for(var n=0;4>n;n++)null!==this.subnode[n]&&this.subnode[n].visit(t,e)},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;4>e;e++)if(null!==this.subnode[e]){var n=this.subnode[e].depth();n>t&&(t=n)}return t+1},isEmpty:function t(){var t=!0;this.items.isEmpty()||(t=!1);for(var e=0;4>e;e++)null!==this.subnode[e]&&(this.subnode[e].isEmpty()||(t=!1));return t},add:function(t){this.items.add(t)},interfaces_:function(){return[u]},getClass:function(){return Ni}}),Ni.getSubnodeIndex=function(t,e,n){var i=-1;return t.getMinX()>=e&&(t.getMinY()>=n&&(i=3),t.getMaxY()<=n&&(i=1)),t.getMaxX()<=e&&(t.getMinY()>=n&&(i=2),t.getMaxY()<=n&&(i=0)),i},Ci.exponent=function(t){return Si(64,t)-1023},Ci.powerOf2=function(t){return Math.pow(2,t)},e(wi.prototype,{getLevel:function(){return this.level},computeKey:function(){if(1===arguments.length){var t=arguments[0];for(this.level=wi.computeQuadLevel(t),this.env=new C,this.computeKey(this.level,t);!this.env.contains(t);)this.level+=1,this.computeKey(this.level,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=Ci.powerOf2(e);this.pt.x=Math.floor(n.getMinX()/i)*i,this.pt.y=Math.floor(n.getMinY()/i)*i,this.env.init(this.pt.x,this.pt.x+i,this.pt.y,this.pt.y+i)}},getEnvelope:function(){return this.env},getCentre:function(){return new g((this.env.getMinX()+this.env.getMaxX())/2,(this.env.getMinY()+this.env.getMaxY())/2)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return wi}}),wi.computeQuadLevel=function(t){var e=t.getWidth(),n=t.getHeight(),i=e>n?e:n,r=Ci.exponent(i)+1;return r},h(Li,Ni),e(Li.prototype,{find:function(t){var e=Ni.getSubnodeIndex(t,this.centrex,this.centrey);if(-1===e)return this;if(null!==this.subnode[e]){var n=this.subnode[e];return n.find(t)}return this},isSearchMatch:function(t){return this.env.intersects(t)},getSubnode:function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getEnvelope:function(){return this.env},getNode:function(t){var e=Ni.getSubnodeIndex(t,this.centrex,this.centrey);if(-1!==e){var n=this.getSubnode(e);return n.getNode(t)}return this},createSubnode:function(t){var e=0,n=0,i=0,r=0;switch(t){case 0:e=this.env.getMinX(),n=this.centrex,i=this.env.getMinY(),r=this.centrey;break;case 1:e=this.centrex,n=this.env.getMaxX(),i=this.env.getMinY(),r=this.centrey;break;case 2:e=this.env.getMinX(),n=this.centrex,i=this.centrey,r=this.env.getMaxY();break;case 3:e=this.centrex,n=this.env.getMaxX(),i=this.centrey,r=this.env.getMaxY()}var o=new C(e,n,i,r),s=new Li(o,this.level-1);return s},insertNode:function(t){f.isTrue(null===this.env||this.env.contains(t.env));var e=Ni.getSubnodeIndex(t.env,this.centrex,this.centrey);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insertNode(t),this.subnode[e]=n}},interfaces_:function(){return[]},getClass:function(){return Li}}),Li.createNode=function(t){var e=new wi(t),n=new Li(e.getEnvelope(),e.getLevel());return n},Li.createExpanded=function(t,e){var n=new C(e);null!==t&&n.expandToInclude(t.env);var i=Li.createNode(n);return null!==t&&i.insertNode(t),i},e(Ri.prototype,{interfaces_:function(){return[]},getClass:function(){return Ri}}),Ri.isZeroWidth=function(t,e){var n=e-t;if(0===n)return!0;var i=Math.max(Math.abs(t),Math.abs(e)),r=n/i,o=Ci.exponent(r);return o<=Ri.MIN_BINARY_EXPONENT},Ri.MIN_BINARY_EXPONENT=-50,h(Ti,Ni),e(Ti.prototype,{insert:function(t,e){var n=Ni.getSubnodeIndex(t,Ti.origin.x,Ti.origin.y);if(-1===n)return this.add(e),null;var i=this.subnode[n];if(null===i||!i.getEnvelope().contains(t)){var r=Li.createExpanded(i,t);this.subnode[n]=r}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){f.isTrue(t.getEnvelope().contains(e));var i=Ri.isZeroWidth(e.getMinX(),e.getMaxX()),r=Ri.isZeroWidth(e.getMinY(),e.getMaxY()),o=null;o=i||r?t.find(e):t.getNode(e),o.add(n)},interfaces_:function(){return[]},getClass:function(){return Ti}}),Ti.origin=new g(0,0),e(Pi.prototype,{size:function(){return null!==this.root?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=Pi.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(1===arguments.length){var t=arguments[0],e=new Yn;return this.query(t,e),e.getItems()}if(2===arguments.length){var n=arguments[0],i=arguments[1];this.root.visit(n,i)}},queryAll:function(){var t=new I;return this.root.addAllItems(t),t},remove:function(t,e){var n=Pi.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e);var n=t.getHeight();n<this.minExtent&&n>0&&(this.minExtent=n)},depth:function(){return null!==this.root?this.root.depth():0},isEmpty:function(){return null===this.root},interfaces_:function(){return[Fe,u]},getClass:function(){return Pi}}),Pi.ensureExtent=function(t,e){var n=t.getMinX(),i=t.getMaxX(),r=t.getMinY(),o=t.getMaxY();return n!==i&&r!==o?t:(n===i&&(n-=e/2,i=n+e/2),r===o&&(r-=e/2,o=r+e/2),new C(n,i,r,o))},Pi.serialVersionUID=-0x678b60c967a25400;var mo=Object.freeze({Quadtree:Pi}),bo=Object.freeze({STRtree:ke}),xo=Object.freeze({quadtree:mo,strtree:bo}),So=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];e(bi.prototype,{read:function(t){var e=void 0;e="string"==typeof t?JSON.parse(t):t;var n=e.type;if(!_o[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==So.indexOf(n)?_o[n].apply(this,[e.coordinates]):"GeometryCollection"===n?_o[n].apply(this,[e.geometries]):_o[n].apply(this,[e])},write:function(t){var e=t.getGeometryType();if(!wo[e])throw new Error("Geometry is not supported");return wo[e].apply(this,[t])}});var _o={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var i=t.geometry.type;if(!_o[i])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=_o.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function t(e){for(var t=[],n=0;n<e.length;++n){var i=e[n];t.push(new g(i[0],i[1]))}return t},bbox:function(t){return this.geometryFactory.createLinearRing([new g(t[0],t[1]),new g(t[2],t[1]),new g(t[2],t[3]),new g(t[0],t[3]),new g(t[0],t[1])])},Point:function(t){var e=new g(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(_o.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=_o.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(_o.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=_o.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var o=t[r],s=_o.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);i.push(a)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(_o.Polygon.apply(this,[i]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},wo={coordinate:function(t){return[t.x,t.y]},Point:function(t){var e=wo.coordinate.apply(this,[t.getCoordinate()]);return{type:"Point",coordinates:e}},MultiPoint:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=wo.Point.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i];e.push(wo.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=wo.LineString.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=wo.LineString.apply(this,[t.shell]);e.push(n.coordinates);for(var i=0;i<t.holes.length;++i){var r=t.holes[i],o=wo.LineString.apply(this,[r]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=wo.Polygon.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=i.getGeometryType();e.push(wo[r].apply(this,[i]))}return{type:"GeometryCollection",geometries:e}}};e(Oi.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===ee.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;n>e;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;n>e;e++)this.reducePrecision(t.geometries[e])}}),e(_i.prototype,{write:function(t){return this.parser.write(t)}}),e(Mi.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===ee.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(var e=0,n=t.points.coordinates.length;n>e;e++)this.precisionModel.makePrecise(t.points.coordinates[e]);else if(t.geometries)for(var i=0,r=t.geometries.length;r>i;i++)this.reducePrecision(t.geometries[i])}}),e(Ai.prototype,{read:function(t){return t instanceof ol.geom.Point?this.convertFromPoint(t):t instanceof ol.geom.LineString?this.convertFromLineString(t):t instanceof ol.geom.LinearRing?this.convertFromLinearRing(t):t instanceof ol.geom.Polygon?this.convertFromPolygon(t):t instanceof ol.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof ol.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof ol.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof ol.geom.GeometryCollection?this.convertFromCollection(t):void 0},convertFromPoint:function(t){var e=t.getCoordinates();return this.geometryFactory.createPoint(new g(e[0],e[1]))},convertFromLineString:function(t){return this.geometryFactory.createLineString(t.getCoordinates().map(function(t){return new g(t[0],t[1])}))},convertFromLinearRing:function(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map(function(t){return new g(t[0],t[1])}))},convertFromPolygon:function(t){for(var e=t.getLinearRings(),n=null,i=[],r=0;r<e.length;r++){var o=this.convertFromLinearRing(e[r]);0===r?n=o:i.push(o)}return this.geometryFactory.createPolygon(n,i)},convertFromMultiPoint:function(t){var e=t.getPoints().map(function(t){return this.convertFromPoint(t)},this);return this.geometryFactory.createMultiPoint(e)},convertFromMultiLineString:function(t){var e=t.getLineStrings().map(function(t){return this.convertFromLineString(t)},this);return this.geometryFactory.createMultiLineString(e)},convertFromMultiPolygon:function(t){var e=t.getPolygons().map(function(t){return this.convertFromPolygon(t)},this);return this.geometryFactory.createMultiPolygon(e)},convertFromCollection:function(t){var e=t.getGeometries().map(function(t){return this.read(t)},this);return this.geometryFactory.createGeometryCollection(e)},write:function(t){return"Point"===t.getGeometryType()?this.convertToPoint(t.getCoordinate()):"LineString"===t.getGeometryType()?this.convertToLineString(t):"LinearRing"===t.getGeometryType()?this.convertToLinearRing(t):"Polygon"===t.getGeometryType()?this.convertToPolygon(t):"MultiPoint"===t.getGeometryType()?this.convertToMultiPoint(t):"MultiLineString"===t.getGeometryType()?this.convertToMultiLineString(t):"MultiPolygon"===t.getGeometryType()?this.convertToMultiPolygon(t):"GeometryCollection"===t.getGeometryType()?this.convertToCollection(t):void 0},convertToPoint:function(t){return new ol.geom.Point([t.x,t.y])},convertToLineString:function(t){var e=t.points.coordinates.map(Di);return new ol.geom.LineString(e)},convertToLinearRing:function(t){var e=t.points.coordinates.map(Di);return new ol.geom.LinearRing(e)},convertToPolygon:function(t){for(var e=[t.shell.points.coordinates.map(Di)],n=0;n<t.holes.length;n++)e.push(t.holes[n].points.coordinates.map(Di));return new ol.geom.Polygon(e)},convertToMultiPoint:function(t){return new ol.geom.MultiPoint(t.getCoordinates().map(Di))},convertToMultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToLineString(t.geometries[n]).getCoordinates());return new ol.geom.MultiLineString(e)},convertToMultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToPolygon(t.geometries[n]).getCoordinates());return new ol.geom.MultiPolygon(e)},convertToCollection:function(t){for(var e=[],n=0;n<t.geometries.length;n++){var i=t.geometries[n];e.push(this.write(i))}return new ol.geom.GeometryCollection(e)}});var Co=Object.freeze({GeoJSONReader:Oi,GeoJSONWriter:_i,OL3Parser:Ai,WKTReader:Mi,WKTWriter:se});e(Fi.prototype,{rescale:function(){if(R(arguments[0],v))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){var i=arguments[0],r=null,o=null;2===i.length&&(r=new g(i[0]),o=new g(i[1]));for(var e=0;e<i.length;e++)i[e].x=i[e].x/this.scaleFactor+this.offsetX,i[e].y=i[e].y/this.scaleFactor+this.offsetY;2===i.length&&i[0].equals2D(i[1])&&A.out.println(i)}},scale:function(){if(R(arguments[0],v)){for(var t=arguments[0],e=new I,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Ke(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],o=new Array(r.length).fill(null),n=0;n<r.length;n++)o[n]=new g(Math.round((r[n].x-this.offsetX)*this.scaleFactor),Math.round((r[n].y-this.offsetY)*this.scaleFactor),r[n].z);var s=H.removeRepeatedPoints(o);return s}},isIntegerPrecision:function(){return 1===this.scaleFactor},getNodedSubstrings:function(){var t=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(t),t},computeNodes:function(t){var e=t;this.isScaled&&(e=this.scale(t)),this.noder.computeNodes(e)},interfaces_:function(){return[tn]},getClass:function(){return Fi}});var Io=Object.freeze({MCIndexNoder:nn,ScaledNoder:Fi,SegmentString:be});e(Gi.prototype,{isSimpleMultiPoint:function(t){if(t.isEmpty())return!0;for(var e=new at,n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n),r=i.getCoordinate();if(e.contains(r))return this.nonSimpleLocation=r,!1;e.add(r)}return!0},isSimplePolygonal:function(t){for(var e=kn.getLines(t),n=e.iterator();n.hasNext();){var i=n.next();if(!this.isSimpleLinearGeometry(i))return!1}return!0},hasClosedEndpointIntersection:function(t){for(var e=new rt,n=t.getEdgeIterator();n.hasNext();){var i=n.next(),r=(i.getMaximumSegmentIndex(),i.isClosed()),o=i.getCoordinate(0);this.addEndpoint(e,o,r);var s=i.getCoordinate(i.getNumPoints()-1);this.addEndpoint(e,s,r)}for(var n=e.values().iterator();n.hasNext();){var a=n.next();if(a.isClosed&&2!==a.degree)return this.nonSimpleLocation=a.getCoordinate(),!0}return!1},getNonSimpleLocation:function(){return this.nonSimpleLocation},isSimpleLinearGeometry:function(t){if(t.isEmpty())return!0;var e=new $n(0,t),n=new ae,i=e.computeSelfNodes(n,!0);return!i.hasIntersection()||(i.hasProperIntersection()?(this.nonSimpleLocation=i.getProperIntersectionPoint(),!1):!this.hasNonEndpointIntersection(e)&&(!this.isClosedEndpointsInInterior||!this.hasClosedEndpointIntersection(e)))},hasNonEndpointIntersection:function(t){for(var e=t.getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getMaximumSegmentIndex(),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var o=r.next();if(!o.isEndPoint(i))return this.nonSimpleLocation=o.getCoordinate(),!0}return!1},addEndpoint:function(t,e,n){var i=t.get(e);null===i&&(i=new qi(e),t.put(e,i)),i.addEndpoint(n)},computeSimple:function(t){return this.nonSimpleLocation=null,!!t.isEmpty()||(t instanceof St?this.isSimpleLinearGeometry(t):t instanceof gt?this.isSimpleLinearGeometry(t):t instanceof Pt?this.isSimpleMultiPoint(t):R(t,Rt)?this.isSimplePolygonal(t):!(t instanceof ft)||this.isSimpleGeometryCollection(t))},isSimple:function(){return this.nonSimpleLocation=null,this.computeSimple(this.inputGeom)},isSimpleGeometryCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.computeSimple(n))return!1}return!0},interfaces_:function(){return[]},getClass:function(){return Gi}}),e(qi.prototype,{addEndpoint:function(t){this.degree++,this.isClosed|=t},getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return qi}}),Gi.EndpointInfo=qi,e(Bi.prototype,{getEndCapStyle:function(){return this.endCapStyle},isSingleSided:function(){return this._isSingleSided},setQuadrantSegments:function(t){this.quadrantSegments=t,0===this.quadrantSegments&&(this.joinStyle=Bi.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=Bi.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),0>=t&&(this.quadrantSegments=1),this.joinStyle!==Bi.JOIN_ROUND&&(this.quadrantSegments=Bi.DEFAULT_QUADRANT_SEGMENTS)},getJoinStyle:function(){return this.joinStyle},setJoinStyle:function(t){this.joinStyle=t},setSimplifyFactor:function(t){this.simplifyFactor=0>t?0:t},getSimplifyFactor:function(){return this.simplifyFactor},getQuadrantSegments:function(){return this.quadrantSegments},setEndCapStyle:function(t){this.endCapStyle=t},getMitreLimit:function(){return this.mitreLimit},setMitreLimit:function(t){this.mitreLimit=t},setSingleSided:function(t){this._isSingleSided=t},interfaces_:function(){return[]},getClass:function(){return Bi}}),Bi.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Bi.CAP_ROUND=1,Bi.CAP_FLAT=2,Bi.CAP_SQUARE=3,Bi.JOIN_ROUND=1,Bi.JOIN_MITRE=2,Bi.JOIN_BEVEL=3,Bi.DEFAULT_QUADRANT_SEGMENTS=8,Bi.DEFAULT_MITRE_LIMIT=5,Bi.DEFAULT_SIMPLIFY_FACTOR=.01,e(zi.prototype,{getCoordinate:function(){return this.minCoord},getRightmostSide:function(t,e){var n=this.getRightmostSideOfSegment(t,e);return 0>n&&(n=this.getRightmostSideOfSegment(t,e-1)),0>n&&(this.minCoord=null,this.checkForRightmostCoordinate(t)),n},findRightmostEdgeAtVertex:function(){var t=this.minDe.getEdge().getCoordinates();f.isTrue(this.minIndex>0&&this.minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this.minIndex-1],n=t[this.minIndex+1],i=he.computeOrientation(this.minCoord,n,e),r=!1;e.y<this.minCoord.y&&n.y<this.minCoord.y&&i===he.COUNTERCLOCKWISE?r=!0:e.y>this.minCoord.y&&n.y>this.minCoord.y&&i===he.CLOCKWISE&&(r=!0),r&&(this.minIndex=this.minIndex-1)},getRightmostSideOfSegment:function(t,e){var n=t.getEdge(),i=n.getCoordinates();if(0>e||e+1>=i.length)return-1;if(i[e].y===i[e+1].y)return-1;var r=cn.LEFT;return i[e].y<i[e+1].y&&(r=cn.RIGHT),r},getEdge:function(){return this.orientedDe},checkForRightmostCoordinate:function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this.minCoord||e[n].x>this.minCoord.x)&&(this.minDe=t,this.minIndex=n,this.minCoord=e[n])},findRightmostEdgeAtNode:function(){var t=this.minDe.getNode(),e=t.getEdges();this.minDe=e.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)},findEdge:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}f.isTrue(0!==this.minIndex||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this.minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe;var i=this.getRightmostSide(this.minDe,this.minIndex);i===cn.LEFT&&(this.orientedDe=this.minDe.getSym())},interfaces_:function(){return[]},getClass:function(){return zi}}),Vi.prototype.addLast=function(t){this.array_.push(t)},Vi.prototype.removeFirst=function(){return this.array_.shift()},Vi.prototype.isEmpty=function(){return 0===this.array_.length},e(ki.prototype,{clearVisitedEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.setVisited(!1)}},getRightmostCoordinate:function(){return this.rightMostCoord},computeNodeDepth:function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new sn("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();i.setVisited(!0),this.copySymDepths(i)}},computeDepth:function(t){this.clearVisitedEdges();var e=this.finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(cn.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},create:function(t){this.addReachable(t),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()},findResultEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(cn.RIGHT)>=1&&e.getDepth(cn.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},computeDepths:function(t){var e=new J,n=new Vi,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var s=o.next(),a=s.getSym();if(!a.isVisited()){var c=a.getNode();e.contains(c)||(n.addLast(c),e.add(c))}}}},compareTo:function(t){var e=t;return this.rightMostCoord.x<e.rightMostCoord.x?-1:this.rightMostCoord.x>e.rightMostCoord.x?1:0},getEnvelope:function(){if(null===this.env){for(var t=new C,e=this.dirEdgeList.iterator();e.hasNext();)for(var n=e.next(),i=n.getEdge().getCoordinates(),r=0;r<i.length-1;r++)t.expandToInclude(i[r]);this.env=t}return this.env},addReachable:function(t){var e=new pe;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},copySymDepths:function(t){var e=t.getSym();e.setDepth(cn.LEFT,t.getDepth(cn.RIGHT)),e.setDepth(cn.RIGHT,t.getDepth(cn.LEFT))},add:function(t,e){t.setVisited(!0),this.nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this.dirEdgeList.add(i);var r=i.getSym(),o=r.getNode();o.isVisited()||e.push(o)}},getNodes:function(){return this.nodes},getDirectedEdges:function(){return this.dirEdgeList},interfaces_:function(){return[s]},getClass:function(){return ki}}),e(Yi.prototype,{isDeletable:function(t,e,n,i){var r=this.inputLine[t],o=this.inputLine[e],s=this.inputLine[n];return!(!this.isConcave(r,o,s)||!this.isShallow(r,o,s,i))&&this.isShallowSampled(r,o,t,n,i)},deleteShallowConcavities:function(){for(var t=1,e=(this.inputLine.length-1,this.findNextNonDeletedIndex(t)),n=this.findNextNonDeletedIndex(e),i=!1;n<this.inputLine.length;){var r=!1;this.isDeletable(t,e,n,this.distanceTol)&&(this.isDeleted[e]=Yi.DELETE,r=!0,i=!0),t=r?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return i},isShallowConcavity:function(t,e,n,i){var r=he.computeOrientation(t,e,n),o=r===this.angleOrientation;if(!o)return!1;var s=he.distancePointLine(e,t,n);return i>s},isShallowSampled:function(t,e,n,i,r){var o=Math.trunc((i-n)/Yi.NUM_PTS_TO_CHECK);
0>=o&&(o=1);for(var s=n;i>s;s+=o)if(!this.isShallow(t,e,this.inputLine[s],r))return!1;return!0},isConcave:function t(e,n,i){var r=he.computeOrientation(e,n,i),t=r===this.angleOrientation;return t},simplify:function(t){this.distanceTol=Math.abs(t),0>t&&(this.angleOrientation=he.CLOCKWISE),this.isDeleted=new Array(this.inputLine.length).fill(null);var e=!1;do e=this.deleteShallowConcavities();while(e);return this.collapseLine()},findNextNonDeletedIndex:function(t){for(var e=t+1;e<this.inputLine.length&&this.isDeleted[e]===Yi.DELETE;)e++;return e},isShallow:function(t,e,n,i){var r=he.distancePointLine(e,t,n);return i>r},collapseLine:function(){for(var t=new N,e=0;e<this.inputLine.length;e++)this.isDeleted[e]!==Yi.DELETE&&t.add(this.inputLine[e]);return t.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return Yi}}),Yi.simplify=function(t,e){var n=new Yi(t);return n.simplify(e)},Yi.INIT=0,Yi.DELETE=1,Yi.KEEP=1,Yi.NUM_PTS_TO_CHECK=10,e(Ui.prototype,{getCoordinates:function(){var t=this.ptList.toArray(Ui.COORDINATE_ARRAY_TYPE);return t},setPrecisionModel:function(t){this.precisionModel=t},addPt:function(t){var e=new g(t);return this.precisionModel.makePrecise(e),this.isRedundant(e)?null:void this.ptList.add(e)},reverse:function(){},addPts:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var n=t.length-1;n>=0;n--)this.addPt(t[n])},isRedundant:function(t){if(this.ptList.size()<1)return!1;var e=this.ptList.get(this.ptList.size()-1),n=t.distance(e);return n<this.minimimVertexDistance},toString:function(){var t=new ie,e=t.createLineString(this.getCoordinates());return e.toString()},closeRing:function(){if(this.ptList.size()<1)return null;var t=new g(this.ptList.get(0)),e=this.ptList.get(this.ptList.size()-1),n=null;return this.ptList.size()>=2&&(n=this.ptList.get(this.ptList.size()-2)),t.equals(e)?null:void this.ptList.add(t)},setMinimumVertexDistance:function(t){this.minimimVertexDistance=t},interfaces_:function(){return[]},getClass:function(){return Ui}}),Ui.COORDINATE_ARRAY_TYPE=new Array(0).fill(null),e(Xi.prototype,{addNextSegment:function(t,e){if(this.s0=this.s1,this.s1=this.s2,this.s2=t,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),this.s1.equals(this.s2))return null;var n=he.computeOrientation(this.s0,this.s1,this.s2),i=n===he.CLOCKWISE&&this.side===cn.LEFT||n===he.COUNTERCLOCKWISE&&this.side===cn.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},addLineEndCap:function(t,e){var n=new ce(t,e),i=new ce;this.computeOffsetSegment(n,cn.LEFT,this.distance,i);var r=new ce;this.computeOffsetSegment(n,cn.RIGHT,this.distance,r);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this.bufParams.getEndCapStyle()){case Bi.CAP_ROUND:this.segList.addPt(i.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,he.CLOCKWISE,this.distance),this.segList.addPt(r.p1);break;case Bi.CAP_FLAT:this.segList.addPt(i.p1),this.segList.addPt(r.p1);break;case Bi.CAP_SQUARE:var c=new g;c.x=Math.abs(this.distance)*Math.cos(a),c.y=Math.abs(this.distance)*Math.sin(a);var u=new g(i.p1.x+c.x,i.p1.y+c.y),l=new g(r.p1.x+c.x,r.p1.y+c.y);this.segList.addPt(u),this.segList.addPt(l)}},getCoordinates:function(){var t=this.segList.getCoordinates();return t},addMitreJoin:function(t,e,n,i){var r=!0,o=null;try{o=F.intersection(e.p0,e.p1,n.p0,n.p1);var s=0>=i?1:o.distance(t)/Math.abs(i);s>this.bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof w))throw t;o=new g(0,0),r=!1}finally{}r?this.segList.addPt(o):this.addLimitedMitreJoin(e,n,i,this.bufParams.getMitreLimit())},addFilletCorner:function(t,e,n,i,r){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),c=n.x-t.x,u=n.y-t.y,l=Math.atan2(u,c);i===he.CLOCKWISE?l>=a&&(a+=2*Math.PI):a>=l&&(a-=2*Math.PI),this.segList.addPt(e),this.addFilletArc(t,a,l,i,r),this.segList.addPt(n)},addOutsideTurn:function(t,e){return this.offset0.p1.distance(this.offset1.p0)<this.distance*Xi.OFFSET_SEGMENT_SEPARATION_FACTOR?(this.segList.addPt(this.offset0.p1),null):void(this.bufParams.getJoinStyle()===Bi.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===Bi.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(e&&this.segList.addPt(this.offset0.p1),this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,t,this.distance),this.segList.addPt(this.offset1.p0)))},createSquare:function(t){this.segList.addPt(new g(t.x+this.distance,t.y+this.distance)),this.segList.addPt(new g(t.x+this.distance,t.y-this.distance)),this.segList.addPt(new g(t.x-this.distance,t.y-this.distance)),this.segList.addPt(new g(t.x-this.distance,t.y+this.distance)),this.segList.closeRing()},addSegments:function(t,e){this.segList.addPts(t,e)},addFirstSegment:function(){this.segList.addPt(this.offset1.p0)},addLastSegment:function(){this.segList.addPt(this.offset1.p1)},initSideSegments:function(t,e,n){this.s1=t,this.s2=e,this.side=n,this.seg1.setCoordinates(t,e),this.computeOffsetSegment(this.seg1,n,this.distance,this.offset1)},addLimitedMitreJoin:function(t,e,n,i){var r=this.seg0.p1,o=hi.angle(r,this.seg0.p0),s=(hi.angle(r,this.seg1.p1),hi.angleBetweenOriented(this.seg0.p0,r,this.seg1.p1)),a=s/2,c=hi.normalize(o+a),u=hi.normalize(c+Math.PI),l=i*n,h=l*Math.abs(Math.sin(a)),p=n-h,f=r.x+l*Math.cos(u),d=r.y+l*Math.sin(u),y=new g(f,d),v=new ce(r,y),m=v.pointAlongOffset(1,p),b=v.pointAlongOffset(1,-p);this.side===cn.LEFT?(this.segList.addPt(m),this.segList.addPt(b)):(this.segList.addPt(b),this.segList.addPt(m))},computeOffsetSegment:function(t,e,n,i){var r=e===cn.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),c=r*n*o/a,u=r*n*s/a;i.p0.x=t.p0.x-u,i.p0.y=t.p0.y+c,i.p1.x=t.p1.x-u,i.p1.y=t.p1.y+c},addFilletArc:function(t,e,n,i,r){var o=i===he.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this.filletAngleQuantum+.5);if(1>a)return null;var c=null,u=null;c=0,u=s/a;for(var l=c,h=new g;s>l;){var p=e+o*l;h.x=t.x+r*Math.cos(p),h.y=t.y+r*Math.sin(p),this.segList.addPt(h),l+=u}},addInsideTurn:function(t,e){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*Xi.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var n=new g((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(n);var i=new g((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(i)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}},createCircle:function(t){var e=new g(t.x+this.distance,t.y);this.segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this.distance),this.segList.closeRing()},addBevelJoin:function(t,e){this.segList.addPt(t.p1),this.segList.addPt(e.p0)},init:function(t){this.distance=t,this.maxCurveSegmentError=t*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new Ui,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(t*Xi.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},addCollinear:function(t){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2);var e=this.li.getIntersectionNum();e>=2&&(this.bufParams.getJoinStyle()===Bi.JOIN_BEVEL||this.bufParams.getJoinStyle()===Bi.JOIN_MITRE?(t&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,he.CLOCKWISE,this.distance))},closeRing:function(){this.segList.closeRing()},hasNarrowConcaveAngle:function(){return this._hasNarrowConcaveAngle},interfaces_:function(){return[]},getClass:function(){return Xi}}),Xi.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Xi.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Xi.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Xi.MAX_CLOSING_SEG_LEN_FACTOR=80,e(Hi.prototype,{getOffsetCurve:function(t,e){if(this.distance=e,0===e)return null;var n=0>e,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var o=r.getCoordinates();return n&&H.reverse(o),o},computeSingleSidedBufferCurve:function(t,e,n){var i=this.simplifyTolerance(this.distance);if(e){n.addSegments(t,!0);var r=Yi.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],cn.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{n.addSegments(t,!1);var a=Yi.simplify(t,i),c=a.length-1;n.initSideSegments(a[0],a[1],cn.LEFT),n.addFirstSegment();for(var s=2;c>=s;s++)n.addNextSegment(a[s],!0)}n.addLastSegment(),n.closeRing()},computeRingBufferCurve:function(t,e,n){var i=this.simplifyTolerance(this.distance);e===cn.RIGHT&&(i=-i);var r=Yi.simplify(t,i),o=r.length-1;n.initSideSegments(r[o-1],r[0],e);for(var s=1;o>=s;s++){var a=1!==s;n.addNextSegment(r[s],a)}n.closeRing()},computeLineBufferCurve:function(t,e){var n=this.simplifyTolerance(this.distance),i=Yi.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],cn.LEFT);for(var o=2;r>=o;o++)e.addNextSegment(i[o],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var s=Yi.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],cn.LEFT);for(var o=a-2;o>=0;o--)e.addNextSegment(s[o],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},computePointCurve:function(t,e){switch(this.bufParams.getEndCapStyle()){case Bi.CAP_ROUND:e.createCircle(t);break;case Bi.CAP_SQUARE:e.createSquare(t)}},getLineCurve:function(t,e){if(this.distance=e,0>e&&!this.bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this.bufParams.isSingleSided()){var r=0>e;this.computeSingleSidedBufferCurve(t,r,i)}else this.computeLineBufferCurve(t,i);var o=i.getCoordinates();return o},getBufferParameters:function(){return this.bufParams},simplifyTolerance:function(t){return t*this.bufParams.getSimplifyFactor()},getRingCurve:function(t,e,n){if(this.distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Hi.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()},computeOffsetCurve:function(t,e,n){var i=this.simplifyTolerance(this.distance);if(e){var r=Yi.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],cn.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{var a=Yi.simplify(t,i),c=a.length-1;n.initSideSegments(a[0],a[1],cn.LEFT),n.addFirstSegment();for(var s=2;c>=s;s++)n.addNextSegment(a[s],!0)}n.addLastSegment()},getSegGen:function(t){return new Xi(this.precisionModel,this.bufParams,t)},interfaces_:function(){return[]},getClass:function(){return Hi}}),Hi.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new g(t[n]);return e},e(Wi.prototype,{findStabbedSegments:function(){if(1===arguments.length){for(var t=arguments[0],e=new I,n=this.subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(R(arguments[2],y)&&arguments[0]instanceof g&&arguments[1]instanceof In)for(var o=arguments[0],s=arguments[1],a=arguments[2],c=s.getEdge().getCoordinates(),n=0;n<c.length-1;n++){this.seg.p0=c[n],this.seg.p1=c[n+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse();var u=Math.max(this.seg.p0.x,this.seg.p1.x);if(!(u<o.x||this.seg.isHorizontal()||o.y<this.seg.p0.y||o.y>this.seg.p1.y||he.computeOrientation(this.seg.p0,this.seg.p1,o)===he.RIGHT)){var l=s.getDepth(cn.LEFT);this.seg.p0.equals(c[n])||(l=s.getDepth(cn.RIGHT));var h=new ji(this.seg,l);a.add(h)}}else if(R(arguments[2],y)&&arguments[0]instanceof g&&R(arguments[1],y))for(var p=arguments[0],f=arguments[1],d=arguments[2],n=f.iterator();n.hasNext();){var v=n.next();v.isForward()&&this.findStabbedSegments(p,v,d)}},getDepth:function(t){var e=this.findStabbedSegments(t);if(0===e.size())return 0;var n=fo.min(e);return n.leftDepth},interfaces_:function(){return[]},getClass:function(){return Wi}}),e(ji.prototype,{compareTo:function(t){var e=t;if(this.upwardSeg.minX()>=e.upwardSeg.maxX())return 1;if(this.upwardSeg.maxX()<=e.upwardSeg.minX())return-1;var n=this.upwardSeg.orientationIndex(e.upwardSeg);return 0!==n?n:(n=-1*e.upwardSeg.orientationIndex(this.upwardSeg),0!==n?n:this.upwardSeg.compareTo(e.upwardSeg))},compareX:function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},toString:function(){return this.upwardSeg.toString()},interfaces_:function(){return[s]},getClass:function(){return ji}}),Wi.DepthSegment=ji,e(Ki.prototype,{addPoint:function(t){if(this.distance<=0)return null;var e=t.getCoordinates(),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,L.EXTERIOR,L.INTERIOR)},addPolygon:function(t){var e=this.distance,n=cn.LEFT;this.distance<0&&(e=-this.distance,n=cn.RIGHT);var i=t.getExteriorRing(),r=H.removeRepeatedPoints(i.getCoordinates());if(this.distance<0&&this.isErodedCompletely(i,this.distance))return null;if(this.distance<=0&&r.length<3)return null;this.addPolygonRing(r,e,n,L.EXTERIOR,L.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=H.removeRepeatedPoints(s.getCoordinates());this.distance>0&&this.isErodedCompletely(s,-this.distance)||this.addPolygonRing(a,e,cn.opposite(n),L.INTERIOR,L.EXTERIOR)}},isTriangleErodedCompletely:function(t,e){var n=new ci(t[0],t[1],t[2]),i=n.inCentre(),r=he.distancePointLine(i,n.p0,n.p1);return r<Math.abs(e)},addLineString:function(t){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return null;var e=H.removeRepeatedPoints(t.getCoordinates()),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,L.EXTERIOR,L.INTERIOR)},addCurve:function(t,e,n){if(null===t||t.length<2)return null;var i=new Ke(t,new gn(0,L.BOUNDARY,e,n));this.curveList.add(i)},getCurves:function(){return this.add(this.inputGeom),this.curveList},addPolygonRing:function(t,e,n,i,r){if(0===e&&t.length<bt.MINIMUM_VALID_SIZE)return null;var o=i,s=r;t.length>=bt.MINIMUM_VALID_SIZE&&he.isCCW(t)&&(o=r,s=i,n=cn.opposite(n));var a=this.curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},add:function(t){if(t.isEmpty())return null;if(t instanceof Tt)this.addPolygon(t);else if(t instanceof St)this.addLineString(t);else if(t instanceof Lt)this.addPoint(t);else if(t instanceof Pt)this.addCollection(t);else if(t instanceof gt)this.addCollection(t);else if(t instanceof Ot)this.addCollection(t);else{if(!(t instanceof ft))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},isErodedCompletely:function(t,e){var n=t.getCoordinates();if(n.length<4)return 0>e;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return 0>e&&2*Math.abs(e)>r},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},interfaces_:function(){return[]},getClass:function(){return Ki}}),e(Zi.prototype,{isTrivialIntersection:function(t,e,n,i){if(t===n&&1===this.li.getIntersectionNum()){if(Zi.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},hasProperInteriorIntersection:function(){return this.hasProperInterior},getLineIntersector:function(){return this.li},hasProperIntersection:function(){return this.hasProper},processIntersections:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this.li.computeIntersection(r,o,s,a),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))},hasIntersection:function(){return this._hasIntersection},isDone:function(){return!1},hasInteriorIntersection:function(){return this.hasInterior},interfaces_:function(){return[on]},getClass:function(){return Zi}}),Zi.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},e(Qi.prototype,{setWorkingPrecisionModel:function(t){this.workingPrecisionModel=t},insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new gn(t.getLabel()),i.flip()),n.merge(i);var r=Qi.depthDelta(i),o=e.getDepthDelta(),s=o+r;e.setDepthDelta(s)}else this.edgeList.add(t),t.setDepthDelta(Qi.depthDelta(t.getLabel()))},buildSubgraphs:function(t,e){for(var n=new I,i=t.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),s=new Wi(n),a=s.getDepth(o);r.computeDepth(a),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},createSubgraphs:function(t){for(var e=new I,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new ki;r.create(i),e.add(r)}}return fo.sort(e,fo.reverseOrder()),e},createEmptyResultGeometry:function(){var t=this.geomFact.createPolygon();return t},getNoder:function(t){if(null!==this.workingNoder)return this.workingNoder;var e=new nn,n=new ae;return n.setPrecisionModel(t),e.setSegmentIntersector(new Zi(n)),e},buffer:function(t,e){var n=this.workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this.geomFact=t.getFactory();var i=new Hi(n,this.bufParams),r=new Ki(t,e,i),o=r.getCurves();if(o.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(o,n),this.graph=new Cn(new On),this.graph.addEdges(this.edgeList.getEdges());var s=this.createSubgraphs(this.graph),a=new Sn(this.geomFact);this.buildSubgraphs(s,a);var c=a.getPolygons();if(c.size()<=0)return this.createEmptyResultGeometry();var u=this.geomFact.buildGeometry(c);return u},computeNodedEdges:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings(),r=i.iterator();r.hasNext();){var o=r.next(),s=o.getCoordinates();if(2!==s.length||!s[0].equals2D(s[1])){var a=o.getData(),c=new Jn(o.getCoordinates(),new gn(a));this.insertUniqueEdge(c)}}},setNoder:function(t){this.workingNoder=t},interfaces_:function(){return[]},getClass:function(){return Qi}}),Qi.depthDelta=function(t){var e=t.getLocation(0,cn.LEFT),n=t.getLocation(0,cn.RIGHT);return e===L.INTERIOR&&n===L.EXTERIOR?1:e===L.EXTERIOR&&n===L.INTERIOR?-1:0},Qi.convertSegStrings=function(t){for(var e=new ie,n=new I;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)},e(Ji.prototype,{checkEndPtVertexIntersections:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next(),n=e.getCoordinates();this.checkEndPtVertexIntersections(n[0],this.segStrings),this.checkEndPtVertexIntersections(n[n.length-1],this.segStrings)}else if(2===arguments.length)for(var i=arguments[0],r=arguments[1],t=r.iterator();t.hasNext();)for(var e=t.next(),n=e.getCoordinates(),o=1;o<n.length-1;o++)if(n[o].equals(i))throw new l("found endpt/interior pt intersection at index "+o+" :pt "+i)},checkInteriorIntersections:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this.segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],s=r.getCoordinates(),a=o.getCoordinates(),c=0;c<s.length-1;c++)for(var u=0;u<a.length-1;u++)this.checkInteriorIntersections(r,c,o,u);else if(4===arguments.length){var h=arguments[0],p=arguments[1],f=arguments[2],d=arguments[3];if(h===f&&p===d)return null;var g=h.getCoordinates()[p],y=h.getCoordinates()[p+1],v=f.getCoordinates()[d],m=f.getCoordinates()[d+1];if(this.li.computeIntersection(g,y,v,m),this.li.hasIntersection()&&(this.li.isProper()||this.hasInteriorIntersection(this.li,g,y)||this.hasInteriorIntersection(this.li,v,m)))throw new l("found non-noded intersection at "+g+"-"+y+" and "+v+"-"+m)}},checkValid:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},checkCollapses:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0],i=n.getCoordinates(),t=0;t<i.length-2;t++)this.checkCollapse(i[t],i[t+1],i[t+2])},hasInteriorIntersection:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1},checkCollapse:function(t,e,n){if(t.equals(n))throw new l("found non-noded collapse at "+Ji.fact.createLineString([t,e,n]))},interfaces_:function(){return[]},getClass:function(){return Ji}}),Ji.fact=new ie,e($i.prototype,{intersectsScaled:function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this.maxx<n||this.minx>i||this.maxy<r||this.miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return f.isTrue(!(s&&a),"Found bad envelope test"),a},initCorners:function(t){var e=.5;this.minx=t.x-e,this.maxx=t.x+e,this.miny=t.y-e,this.maxy=t.y+e,this.corner[0]=new g(this.maxx,this.maxy),this.corner[1]=new g(this.minx,this.maxy),this.corner[2]=new g(this.minx,this.miny),this.corner[3]=new g(this.maxx,this.miny)},intersects:function(t,e){return 1===this.scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this.p0Scaled),this.copyScaled(e,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))},scale:function(t){return Math.round(t*this.scaleFactor)},getCoordinate:function(){return this.originalPt},copyScaled:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},getSafeEnvelope:function(){if(null===this.safeEnv){var t=$i.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new C(this.originalPt.x-t,this.originalPt.x+t,this.originalPt.y-t,this.originalPt.y+t)}return this.safeEnv},intersectsPixelClosure:function(t,e){return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),!!this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),!!this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),!!this.li.hasIntersection())))},intersectsToleranceSquare:function(t,e){var n=!1,i=!1;return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!this.li.isProper()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),!!this.li.isProper()||(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),!!this.li.isProper()||(this.li.hasIntersection()&&(i=!0),this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),!!this.li.isProper()||(!(!n||!i)||(!!t.equals(this.pt)||!!e.equals(this.pt))))))},addSnappedNode:function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},interfaces_:function(){return[]},getClass:function(){return $i}}),$i.SAFE_ENV_EXPANSION_FACTOR=.75,e(tr.prototype,{select:function(){if(1===arguments.length)arguments[0];else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},interfaces_:function(){return[]},getClass:function(){return tr}}),e(er.prototype,{snap:function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=e.getSafeEnvelope(),o=new nr(e,n,i);return this.index.query(r,{interfaces_:function(){return[Ae]},visitItem:function(t){var e=t;e.select(r,o)}}),o.isNodeAdded()}},interfaces_:function(){return[]},getClass:function(){return er}}),h(nr,tr),e(nr.prototype,{isNodeAdded:function(){return this._isNodeAdded},select:function(){if(2!==arguments.length)return tr.prototype.select.apply(this,arguments);var t=arguments[0],e=arguments[1],n=t.getContext();return null!==this.parentEdge&&n===this.parentEdge&&e===this.hotPixelVertexIndex?null:void(this._isNodeAdded=this.hotPixel.addSnappedNode(n,e))},interfaces_:function(){return[]},getClass:function(){return nr}}),er.HotPixelSnapAction=nr,e(ir.prototype,{processIntersections:function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];if(this.li.computeIntersection(r,o,s,a),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var c=0;c<this.li.getIntersectionNum();c++)this.interiorIntersections.add(this.li.getIntersection(c));t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1)}},isDone:function(){return!1},getInteriorIntersections:function(){return this.interiorIntersections},interfaces_:function(){return[on]},getClass:function(){return ir}}),e(rr.prototype,{checkCorrectness:function(t){var e=Ke.getNodedSubstrings(t),n=new Ji(e);try{n.checkValid()}catch(t){if(!(t instanceof S))throw t;t.printStackTrace()}finally{}},getNodedSubstrings:function(){return Ke.getNodedSubstrings(this.nodedSegStrings)},snapRound:function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},findInteriorIntersections:function(t,e){var n=new ir(e);return this.noder.setSegmentIntersector(n),this.noder.computeNodes(t),n.getInteriorIntersections()},computeVertexSnaps:function(){if(R(arguments[0],v))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.computeVertexSnaps(n)}else if(arguments[0]instanceof Ke)for(var i=arguments[0],r=i.getCoordinates(),o=0;o<r.length;o++){var s=new $i(r[o],this.scaleFactor,this.li),a=this.pointSnapper.snap(s,i,o);a&&i.addIntersection(r[o],o)}},computeNodes:function(t){this.nodedSegStrings=t,this.noder=new nn,this.pointSnapper=new er(this.noder.getIndex()),this.snapRound(t,this.li)},computeIntersectionSnaps:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=new $i(n,this.scaleFactor,this.li);this.pointSnapper.snap(i)}},interfaces_:function(){return[tn]},getClass:function(){return rr}}),e(sr.prototype,{bufferFixedPrecision:function(t){var e=new Fi(new rr(new ee(1)),t.getScale()),n=new Qi(this.bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this.resultGeometry=n.buffer(this.argGeom,this.distance)},bufferReducedPrecision:function(){if(0===arguments.length){for(var t=sr.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(t){if(!(t instanceof sn))throw t;this.saveException=t}finally{}if(null!==this.resultGeometry)return null}throw this.saveException}if(1===arguments.length){var e=arguments[0],n=sr.precisionScaleFactor(this.argGeom,this.distance,e),i=new ee(n);this.bufferFixedPrecision(i)}},computeGeometry:function(){if(this.bufferOriginalPrecision(),null!==this.resultGeometry)return null;var t=this.argGeom.getFactory().getPrecisionModel();t.getType()===ee.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},setQuadrantSegments:function(t){this.bufParams.setQuadrantSegments(t)},bufferOriginalPrecision:function(){try{var t=new Qi(this.bufParams);this.resultGeometry=t.buffer(this.argGeom,this.distance)}catch(t){if(!(t instanceof l))throw t;this.saveException=t}finally{}},getResultGeometry:function(t){return this.distance=t,this.computeGeometry(),this.resultGeometry},setEndCapStyle:function(t){this.bufParams.setEndCapStyle(t)},interfaces_:function(){return[]},getClass:function(){return sr}}),sr.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new sr(t),i=n.getResultGeometry(e);return i}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof B&&"number"==typeof arguments[1]){var r=arguments[0],o=arguments[1],s=arguments[2],a=new sr(r);a.setQuadrantSegments(s);var i=a.getResultGeometry(o);return i}if(arguments[2]instanceof Bi&&arguments[0]instanceof B&&"number"==typeof arguments[1]){var c=arguments[0],u=arguments[1],l=arguments[2],a=new sr(c,l),i=a.getResultGeometry(u);return i}}else if(4===arguments.length){var h=arguments[0],p=arguments[1],f=arguments[2],d=arguments[3],a=new sr(h);a.setQuadrantSegments(f),a.setEndCapStyle(d);var i=a.getResultGeometry(p);return i}},sr.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal(),r=T.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY())),o=e>0?e:0,s=r+2*o,a=Math.trunc(Math.log(s)/Math.log(10)+1),c=n-a,u=Math.pow(10,c);return u},sr.CAP_ROUND=Bi.CAP_ROUND,sr.CAP_BUTT=Bi.CAP_FLAT,sr.CAP_FLAT=Bi.CAP_FLAT,sr.CAP_SQUARE=Bi.CAP_SQUARE,sr.MAX_PRECISION_DIGITS=12;var Eo=Object.freeze({BufferOp:sr,BufferParameters:Bi});e(or.prototype,{filter:function(t){t instanceof Tt&&this.comps.add(t)},interfaces_:function(){return[ht]},getClass:function(){return or}}),or.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return or.getPolygons(t,new I)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Tt?n.add(e):e instanceof ft&&e.apply(new or(n)),n}},e(ar.prototype,{isInsideArea:function(){return this.segIndex===ar.INSIDE_AREA},getCoordinate:function(){return this.pt},getGeometryComponent:function(){return this.component},getSegmentIndex:function(){return this.segIndex},interfaces_:function(){return[]},getClass:function(){return ar}}),ar.INSIDE_AREA=-1,e(ur.prototype,{filter:function(t){t instanceof Lt&&this.pts.add(t)},interfaces_:function(){return[ht]},getClass:function(){return ur}}),ur.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Lt?fo.singletonList(t):ur.getPoints(t,new I)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Lt?n.add(e):e instanceof ft&&e.apply(new ur(n)),n}},e(lr.prototype,{filter:function(t){(t instanceof Lt||t instanceof St||t instanceof Tt)&&this.locations.add(new ar(t,0,t.getCoordinate()))},interfaces_:function(){return[ht]},getClass:function(){return lr}}),lr.getLocations=function(t){var e=new I;return t.apply(new lr(e)),e},e(hr.prototype,{computeContainmentDistance:function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this.minDistance<=this.terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=1-e,r=or.getPolygons(this.geom[e]);if(r.size()>0){var o=lr.getLocations(this.geom[i]);if(this.computeContainmentDistance(o,r,n),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[i]=n[0],this.minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&R(arguments[0],y)&&R(arguments[1],y)){for(var s=arguments[0],a=arguments[1],c=arguments[2],u=0;u<s.size();u++)for(var l=s.get(u),h=0;h<a.size();h++)if(this.computeContainmentDistance(l,a.get(h),c),this.minDistance<=this.terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof ar&&arguments[1]instanceof Tt){var p=arguments[0],f=arguments[1],d=arguments[2],g=p.getCoordinate();if(L.EXTERIOR!==this.ptLocator.locate(g,f))return this.minDistance=0,d[0]=p,d[1]=new ar(f,g),null}},computeMinDistanceLinesPoints:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(r,s,n),this.minDistance<=this.terminateDistance)return null}},computeFacetDistance:function(){var t=new Array(2).fill(null),e=kn.getLines(this.geom[0]),n=kn.getLines(this.geom[1]),i=ur.getPoints(this.geom[0]),r=ur.getPoints(this.geom[1]);
return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))},nearestLocations:function(){return this.computeMinDistance(),this.minDistanceLocation},updateMinDistance:function(t,e){return null===t[0]?null:void(e?(this.minDistanceLocation[0]=t[1],this.minDistanceLocation[1]=t[0]):(this.minDistanceLocation[0]=t[0],this.minDistanceLocation[1]=t[1]))},nearestPoints:function(){this.computeMinDistance();var t=[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];return t},computeMinDistance:function(){if(0===arguments.length){if(null!==this.minDistanceLocation)return null;if(this.minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this.minDistance<=this.terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof St&&arguments[1]instanceof Lt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this.minDistance)return null;for(var i=t.getCoordinates(),r=e.getCoordinate(),o=0;o<i.length-1;o++){var s=he.distancePointLine(r,i[o],i[o+1]);if(s<this.minDistance){this.minDistance=s;var a=new ce(i[o],i[o+1]),c=a.closestPoint(r);n[0]=new ar(t,o,c),n[1]=new ar(e,0,r)}if(this.minDistance<=this.terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof St&&arguments[1]instanceof St){var u=arguments[0],l=arguments[1],h=arguments[2];if(u.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this.minDistance)return null;for(var i=u.getCoordinates(),p=l.getCoordinates(),o=0;o<i.length-1;o++)for(var f=0;f<p.length-1;f++){var s=he.distanceLineLine(i[o],i[o+1],p[f],p[f+1]);if(s<this.minDistance){this.minDistance=s;var d=new ce(i[o],i[o+1]),g=new ce(p[f],p[f+1]),y=d.closestPoints(g);h[0]=new ar(u,o,y[0]),h[1]=new ar(l,f,y[1])}if(this.minDistance<=this.terminateDistance)return null}}},computeMinDistancePoints:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o),a=r.getCoordinate().distance(s.getCoordinate());if(a<this.minDistance&&(this.minDistance=a,n[0]=new ar(r,0,r.getCoordinate()),n[1]=new ar(s,0,s.getCoordinate())),this.minDistance<=this.terminateDistance)return null}},distance:function(){if(null===this.geom[0]||null===this.geom[1])throw new i("null geometries are not supported");return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)},computeMinDistanceLines:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(r,s,n),this.minDistance<=this.terminateDistance)return null}},interfaces_:function(){return[]},getClass:function(){return hr}}),hr.distance=function(t,e){var n=new hr(t,e);return n.distance()},hr.isWithinDistance=function(t,e,n){var i=new hr(t,e,n);return i.distance()<=n},hr.nearestPoints=function(t,e){var n=new hr(t,e);return n.nearestPoints()};var Lo=Object.freeze({DistanceOp:hr});e(cr.prototype,{getCoordinates:function(){if(null===this.coordinates){for(var t=0,e=0,n=new N,i=this.directedEdges.iterator();i.hasNext();){var r=i.next();r.getEdgeDirection()?t++:e++,n.add(r.getEdge().getLine().getCoordinates(),!1,r.getEdgeDirection())}this.coordinates=n.toCoordinateArray(),e>t&&H.reverse(this.coordinates)}return this.coordinates},toLineString:function(){return this.factory.createLineString(this.getCoordinates())},add:function(t){this.directedEdges.add(t)},interfaces_:function(){return[]},getClass:function(){return cr}}),e(fr.prototype,{setVisited:function(t){this._isVisited=t},isMarked:function(){return this._isMarked},setData:function(t){this.data=t},getData:function(){return this.data},setMarked:function(t){this._isMarked=t},getContext:function(){return this.data},isVisited:function(){return this._isVisited},setContext:function(t){this.data=t},interfaces_:function(){return[]},getClass:function(){return fr}}),fr.getComponentWithVisitedState=function(t,e){for(;t.hasNext();){var n=t.next();if(n.isVisited()===e)return n}return null},fr.setVisited=function(t,e){for(;t.hasNext();){var n=t.next();n.setVisited(e)}},fr.setMarked=function(t,e){for(;t.hasNext();){var n=t.next();n.setMarked(e)}},h(gr,fr),e(gr.prototype,{isRemoved:function(){return null===this.parentEdge},compareDirection:function(t){return this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:he.computeOrientation(t.p0,t.p1,this.p1)},getCoordinate:function(){return this.from.getCoordinate()},print:function(t){var e=this.getClass().getName(),n=e.lastIndexOf("."),i=e.substring(n+1);t.print("  "+i+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+this.angle)},getDirectionPt:function(){return this.p1},getAngle:function(){return this.angle},compareTo:function(t){var e=t;return this.compareDirection(e)},getFromNode:function(){return this.from},getSym:function(){return this.sym},setEdge:function(t){this.parentEdge=t},remove:function(){this.sym=null,this.parentEdge=null},getEdge:function(){return this.parentEdge},getQuadrant:function(){return this.quadrant},setSym:function(t){this.sym=t},getToNode:function(){return this.to},getEdgeDirection:function(){return this.edgeDirection},interfaces_:function(){return[s]},getClass:function(){return gr}}),gr.toEdges=function(t){for(var e=new I,n=t.iterator();n.hasNext();)e.add(n.next().parentEdge);return e},h(dr,gr),e(dr.prototype,{getNext:function(){return 2!==this.getToNode().getDegree()?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(f.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))},interfaces_:function(){return[]},getClass:function(){return dr}}),h(pr,fr),e(pr.prototype,{isRemoved:function(){return null===this.dirEdge},setDirectedEdges:function(t,e){this.dirEdge=[t,e],t.setEdge(this),e.setEdge(this),t.setSym(e),e.setSym(t),t.getFromNode().addOutEdge(t),e.getFromNode().addOutEdge(e)},getDirEdge:function(){if(Number.isInteger(arguments[0])){var t=arguments[0];return this.dirEdge[t]}if(arguments[0]instanceof mr){var e=arguments[0];return this.dirEdge[0].getFromNode()===e?this.dirEdge[0]:this.dirEdge[1].getFromNode()===e?this.dirEdge[1]:null}},remove:function(){this.dirEdge=null},getOppositeNode:function(t){return this.dirEdge[0].getFromNode()===t?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()===t?this.dirEdge[1].getToNode():null},interfaces_:function(){return[]},getClass:function(){return pr}}),e(vr.prototype,{getNextEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e+1))},getCoordinate:function(){var t=this.iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},iterator:function(){return this.sortEdges(),this.outEdges.iterator()},sortEdges:function(){this.sorted||(fo.sort(this.outEdges),this.sorted=!0)},remove:function(t){this.outEdges.remove(t)},getEdges:function(){return this.sortEdges(),this.outEdges},getNextCWEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e-1))},getIndex:function(){if(arguments[0]instanceof pr){var t=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var n=this.outEdges.get(e);if(n.getEdge()===t)return e}return-1}if(arguments[0]instanceof gr){var i=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var n=this.outEdges.get(e);if(n===i)return e}return-1}if(Number.isInteger(arguments[0])){var r=arguments[0],o=r%this.outEdges.size();return 0>o&&(o+=this.outEdges.size()),o}},add:function(t){this.outEdges.add(t),this.sorted=!1},getDegree:function(){return this.outEdges.size()},interfaces_:function(){return[]},getClass:function(){return vr}}),h(mr,fr),e(mr.prototype,{isRemoved:function(){return null===this.pt},addOutEdge:function(t){this.deStar.add(t)},getCoordinate:function(){return this.pt},getOutEdges:function(){return this.deStar},remove:function(){if(0===arguments.length)this.pt=null;else if(1===arguments.length){var t=arguments[0];this.deStar.remove(t)}},getIndex:function(t){return this.deStar.getIndex(t)},getDegree:function(){return this.deStar.getDegree()},interfaces_:function(){return[]},getClass:function(){return mr}}),mr.getEdgesBetween=function(t,e){var n=gr.toEdges(t.getOutEdges().getEdges()),i=new J(n),r=gr.toEdges(e.getOutEdges().getEdges());return i.retainAll(r),i},h(yr,pr),e(yr.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return yr}}),e(xr.prototype,{find:function(t){return this.nodeMap.get(t)},iterator:function(){return this.nodeMap.values().iterator()},remove:function(t){return this.nodeMap.remove(t)},values:function(){return this.nodeMap.values()},add:function(t){return this.nodeMap.put(t.getCoordinate(),t),t},interfaces_:function(){return[]},getClass:function(){return xr}}),e(Er.prototype,{findNodesOfDegree:function(t){for(var e=new I,n=this.nodeIterator();n.hasNext();){var i=n.next();i.getDegree()===t&&e.add(i)}return e},dirEdgeIterator:function(){return this.dirEdges.iterator()},edgeIterator:function(){return this.edges.iterator()},remove:function(){if(arguments[0]instanceof pr){var t=arguments[0];this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this.edges.remove(t),t.remove()}else if(arguments[0]instanceof gr){var e=arguments[0],n=e.getSym();null!==n&&n.setSym(null),e.getFromNode().remove(e),e.remove(),this.dirEdges.remove(e)}else if(arguments[0]instanceof mr){for(var i=arguments[0],r=i.getOutEdges().getEdges(),o=r.iterator();o.hasNext();){var s=o.next(),n=s.getSym();null!==n&&this.remove(n),this.dirEdges.remove(s);var a=s.getEdge();null!==a&&this.edges.remove(a)}this.nodeMap.remove(i.getCoordinate()),i.remove()}},findNode:function(t){return this.nodeMap.find(t)},getEdges:function(){return this.edges},nodeIterator:function(){return this.nodeMap.iterator()},contains:function(){if(arguments[0]instanceof pr){var t=arguments[0];return this.edges.contains(t)}if(arguments[0]instanceof gr){var e=arguments[0];return this.dirEdges.contains(e)}},add:function(){if(arguments[0]instanceof mr){var t=arguments[0];this.nodeMap.add(t)}else if(arguments[0]instanceof pr){var e=arguments[0];this.edges.add(e),this.add(e.getDirEdge(0)),this.add(e.getDirEdge(1))}else if(arguments[0]instanceof gr){var n=arguments[0];this.dirEdges.add(n)}},getNodes:function(){return this.nodeMap.values()},interfaces_:function(){return[]},getClass:function(){return Er}}),h(Ir,Er),e(Ir.prototype,{addEdge:function(t){if(t.isEmpty())return null;var e=H.removeRepeatedPoints(t.getCoordinates());if(e.length<=1)return null;var n=e[0],i=e[e.length-1],r=this.getNode(n),o=this.getNode(i),s=new dr(r,o,e[1],(!0)),a=new dr(o,r,e[e.length-2],(!1)),c=new yr(t);c.setDirectedEdges(s,a),this.add(c)},getNode:function(t){var e=this.findNode(t);return null===e&&(e=new mr(t),this.add(e)),e},interfaces_:function(){return[]},getClass:function(){return Ir}}),e(Nr.prototype,{buildEdgeStringsForUnprocessedNodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.isMarked()||(f.isTrue(2===e.getDegree()),this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForNonDegree2Nodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();2!==e.getDegree()&&(this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForObviousStartNodes:function(){this.buildEdgeStringsForNonDegree2Nodes()},getMergedLineStrings:function(){return this.merge(),this.mergedLineStrings},buildEdgeStringsStartingAt:function(t){for(var e=t.getOutEdges().iterator();e.hasNext();){var n=e.next();n.getEdge().isMarked()||this.edgeStrings.add(this.buildEdgeStringStartingWith(n))}},merge:function(){if(null!==this.mergedLineStrings)return null;fr.setMarked(this.graph.nodeIterator(),!1),fr.setMarked(this.graph.edgeIterator(),!1),this.edgeStrings=new I,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this.mergedLineStrings=new I;for(var t=this.edgeStrings.iterator();t.hasNext();){var e=t.next();this.mergedLineStrings.add(e.toLineString())}},buildEdgeStringStartingWith:function(t){var e=new cr(this.factory),n=t;do e.add(n),n.getEdge().setMarked(!0),n=n.getNext();while(null!==n&&n!==t);return e},add:function(){if(arguments[0]instanceof B){var t=arguments[0];t.apply({interfaces_:function(){return[q]},filter:function(t){t instanceof St&&this.add(t)}})}else if(R(arguments[0],v)){var e=arguments[0];this.mergedLineStrings=null;for(var n=e.iterator();n.hasNext();){var i=n.next();this.add(i)}}else if(arguments[0]instanceof St){var r=arguments[0];null===this.factory&&(this.factory=r.getFactory()),this.graph.addEdge(r)}},buildEdgeStringsForIsolatedLoops:function(){this.buildEdgeStringsForUnprocessedNodes()},interfaces_:function(){return[]},getClass:function(){return Nr}});var To=Object.freeze({LineMerger:Nr}),Oo=Object.freeze({OverlayOp:ii});h(Cr,gr),e(Cr.prototype,{getNext:function(){return this.next},isInRing:function(){return null!==this.edgeRing},setRing:function(t){this.edgeRing=t},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setNext:function(t){this.next=t},getRing:function(){return this.edgeRing},interfaces_:function(){return[]},getClass:function(){return Cr}}),h(Sr,pr),e(Sr.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return Sr}}),e(wr.prototype,{isIncluded:function(){return this._isIncluded},getCoordinates:function(){if(null===this.ringPts){for(var t=new N,e=this.deList.iterator();e.hasNext();){var n=e.next(),i=n.getEdge();wr.addEdge(i.getLine().getCoordinates(),n.getEdgeDirection(),t)}this.ringPts=t.toCoordinateArray()}return this.ringPts},isIncludedSet:function(){return this._isIncludedSet},isValid:function(){return this.getCoordinates(),!(this.ringPts.length<=3)&&(this.getRing(),this.ring.isValid())},build:function(t){var e=t;do this.add(e),e.setRing(this),e=e.getNext(),f.isTrue(null!==e,"found null DE in ring"),f.isTrue(e===t||!e.isInRing(),"found DE already in ring");while(e!==t)},isOuterHole:function(){return!!this._isHole&&!this.hasShell()},getPolygon:function(){var t=null;if(null!==this.holes){t=new Array(this.holes.size()).fill(null);for(var e=0;e<this.holes.size();e++)t[e]=this.holes.get(e)}var n=this.factory.createPolygon(this.ring,t);return n},isHole:function(){return this._isHole},isProcessed:function(){return this._isProcessed},addHole:function(){if(arguments[0]instanceof bt){var t=arguments[0];null===this.holes&&(this.holes=new I),this.holes.add(t)}else if(arguments[0]instanceof wr){var e=arguments[0];e.setShell(this);var n=e.getRing();null===this.holes&&(this.holes=new I),this.holes.add(n)}},setIncluded:function(t){this._isIncluded=t,this._isIncludedSet=!0},getOuterHole:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t),n=e.getSym().getRing();if(n.isOuterHole())return n}return null},computeHole:function(){var t=this.getRing();this._isHole=he.isCCW(t.getCoordinates())},hasShell:function(){return null!==this.shell},isOuterShell:function(){return null!==this.getOuterHole()},getLineString:function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)},toString:function(){return se.toLineString(new Gt(this.getCoordinates()))},getShell:function(){return this.isHole()?this.shell:this},add:function(t){this.deList.add(t)},getRing:function(){if(null!==this.ring)return this.ring;this.getCoordinates(),this.ringPts.length<3&&A.out.println(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(t){if(!(t instanceof S))throw t;A.out.println(this.ringPts)}finally{}return this.ring},updateIncluded:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t),n=e.getSym().getRing().getShell();if(null!==n&&n.isIncludedSet())return this.setIncluded(!n.isIncluded()),null}},setShell:function(t){this.shell=t},setProcessed:function(t){this._isProcessed=t},interfaces_:function(){return[]},getClass:function(){return wr}}),wr.findDirEdgesInRing=function(t){var e=t,n=new I;do n.add(e),e=e.getNext(),f.isTrue(null!==e,"found null DE in ring"),f.isTrue(e===t||!e.isInRing(),"found DE already in ring");while(e!==t);return n},wr.addEdge=function(t,e,n){if(e)for(var i=0;i<t.length;i++)n.add(t[i],!1);else for(var i=t.length-1;i>=0;i--)n.add(t[i],!1)},wr.findEdgeRingContaining=function(t,e){for(var n=t.getRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var c=a.next(),u=c.getRing(),l=u.getEnvelopeInternal();if(!l.equals(i)&&l.contains(i)){r=H.ptNotInList(n.getCoordinates(),u.getCoordinates());var h=!1;he.isPointInRing(r,u.getCoordinates())&&(h=!0),h&&(null===o||s.contains(l))&&(o=c,s=o.getRing().getEnvelopeInternal())}}return o},e(Lr.prototype,{compare:function(t,e){var n=t,i=e;return n.getRing().getEnvelope().compareTo(i.getRing().getEnvelope())},interfaces_:function(){return[a]},getClass:function(){return Lr}}),wr.EnvelopeComparator=Lr,h(Rr,Er),e(Rr.prototype,{findEdgeRing:function(t){var e=new wr(this.factory);return e.build(t),e},computeDepthParity:function(){if(0===arguments.length)for(;;){var t=null;if(null===t)return null;this.computeDepthParity(t)}else 1===arguments.length&&arguments[0]},computeNextCWEdges:function(){for(var t=this.nodeIterator();t.hasNext();){var e=t.next();Rr.computeNextCWEdges(e)}},addEdge:function(t){if(t.isEmpty())return null;var e=H.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return null;var n=e[0],i=e[e.length-1],r=this.getNode(n),o=this.getNode(i),s=new Cr(r,o,e[1],(!0)),a=new Cr(o,r,e[e.length-2],(!1)),c=new Sr(t);c.setDirectedEdges(s,a),this.add(c)},deleteCutEdges:function(){this.computeNextCWEdges(),Rr.findLabeledEdgeRings(this.dirEdges);for(var t=new I,e=this.dirEdges.iterator();e.hasNext();){var n=e.next();if(!n.isMarked()){var i=n.getSym();if(n.getLabel()===i.getLabel()){n.setMarked(!0),i.setMarked(!0);var r=n.getEdge();t.add(r.getLine())}}}return t},getEdgeRings:function(){this.computeNextCWEdges(),Rr.label(this.dirEdges,-1);var t=Rr.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(t);for(var e=new I,n=this.dirEdges.iterator();n.hasNext();){var i=n.next();if(!i.isMarked()&&!i.isInRing()){var r=this.findEdgeRing(i);e.add(r)}}return e},getNode:function(t){var e=this.findNode(t);return null===e&&(e=new mr(t),this.add(e)),e},convertMaximalToMinimalEdgeRings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel(),r=Rr.findIntersectionNodes(n,i);if(null!==r)for(var o=r.iterator();o.hasNext();){var s=o.next();Rr.computeNextCCWEdges(s,i)}}},deleteDangles:function(){for(var t=this.findNodesOfDegree(1),e=new J,n=new pe,i=t.iterator();i.hasNext();)n.push(i.next());for(;!n.isEmpty();){var r=n.pop();Rr.deleteAllEdges(r);for(var o=r.getOutEdges().getEdges(),i=o.iterator();i.hasNext();){var s=i.next();s.setMarked(!0);var a=s.getSym();null!==a&&a.setMarked(!0);var c=s.getEdge();e.add(c.getLine());var u=s.getToNode();1===Rr.getDegreeNonDeleted(u)&&n.push(u)}}return e},interfaces_:function(){return[]},getClass:function(){return Rr}}),Rr.findLabeledEdgeRings=function(t){for(var e=new I,n=1,i=t.iterator();i.hasNext();){var r=i.next();if(!(r.isMarked()||r.getLabel()>=0)){e.add(r);var o=wr.findDirEdgesInRing(r);Rr.label(o,n),n++}}return e},Rr.getDegreeNonDeleted=function(t){for(var e=t.getOutEdges().getEdges(),n=0,i=e.iterator();i.hasNext();){var r=i.next();r.isMarked()||n++}return n},Rr.deleteAllEdges=function(t){for(var e=t.getOutEdges().getEdges(),n=e.iterator();n.hasNext();){var i=n.next();i.setMarked(!0);var r=i.getSym();null!==r&&r.setMarked(!0)}},Rr.label=function(t,e){for(var n=t.iterator();n.hasNext();){var i=n.next();i.setLabel(e)}},Rr.computeNextCWEdges=function(t){for(var e=t.getOutEdges(),n=null,i=null,r=e.getEdges().iterator();r.hasNext();){var o=r.next();if(!o.isMarked()){if(null===n&&(n=o),null!==i){var s=i.getSym();s.setNext(o)}i=o}}if(null!==i){var s=i.getSym();s.setNext(n)}},Rr.computeNextCCWEdges=function(t,e){for(var n=t.getOutEdges(),i=null,r=null,o=n.getEdges(),s=o.size()-1;s>=0;s--){var a=o.get(s),c=a.getSym(),u=null;a.getLabel()===e&&(u=a);var l=null;c.getLabel()===e&&(l=c),null===u&&null===l||(null!==l&&(r=l),null!==u&&(null!==r&&(r.setNext(u),r=null),null===i&&(i=u)))}null!==r&&(f.isTrue(null!==i),r.setNext(i))},Rr.getDegree=function(t,e){for(var n=t.getOutEdges().getEdges(),i=0,r=n.iterator();r.hasNext();){var o=r.next();o.getLabel()===e&&i++}return i},Rr.findIntersectionNodes=function(t,e){var n=t,i=null;do{var r=n.getFromNode();Rr.getDegree(r,e)>1&&(null===i&&(i=new I),i.add(r)),n=n.getNext(),f.isTrue(null!==n,"found null DE in ring"),f.isTrue(n===t||!n.isInRing(),"found DE already in ring")}while(n!==t);return i},e(Tr.prototype,{getGeometry:function(){return null===this.geomFactory&&(this.geomFactory=new ie),this.polygonize(),this.extractOnlyPolygonal?this.geomFactory.buildGeometry(this.polyList):this.geomFactory.createGeometryCollection(ie.toGeometryArray(this.polyList))},getInvalidRingLines:function(){return this.polygonize(),this.invalidRingLines},findValidRings:function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isValid()?e.add(r):n.add(r.getLineString())}},polygonize:function(){if(null!==this.polyList)return null;if(this.polyList=new I,null===this.graph)return null;this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var t=this.graph.getEdgeRings(),e=new I;this.invalidRingLines=new I,this.isCheckingRingsValid?this.findValidRings(t,e,this.invalidRingLines):e=t,this.findShellsAndHoles(e),Tr.assignHolesToShells(this.holeList,this.shellList),fo.sort(this.shellList,new wr.EnvelopeComparator);var n=!0;this.extractOnlyPolygonal&&(Tr.findDisjointShells(this.shellList),n=!1),this.polyList=Tr.extractPolygons(this.shellList,n)},getDangles:function(){return this.polygonize(),this.dangles},getCutEdges:function(){return this.polygonize(),this.cutEdges},getPolygons:function(){return this.polygonize(),this.polyList},add:function(){if(R(arguments[0],v))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.add(n)}else if(arguments[0]instanceof St){var i=arguments[0];this.geomFactory=i.getFactory(),null===this.graph&&(this.graph=new Rr(this.geomFactory)),this.graph.addEdge(i)}else if(arguments[0]instanceof B){var r=arguments[0];r.apply(this.lineStringAdder)}},setCheckRingsValid:function(t){this.isCheckingRingsValid=t},findShellsAndHoles:function(t){this.holeList=new I,this.shellList=new I;for(var e=t.iterator();e.hasNext();){var n=e.next();n.computeHole(),n.isHole()?this.holeList.add(n):this.shellList.add(n)}},interfaces_:function(){return[]},getClass:function(){return Tr}}),Tr.findOuterShells=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getOuterHole();null===i||i.isProcessed()||(n.setIncluded(!0),i.setProcessed(!0))}},Tr.extractPolygons=function(t,e){for(var n=new I,i=t.iterator();i.hasNext();){var r=i.next();(e||r.isIncluded())&&n.add(r.getPolygon())}return n},Tr.assignHolesToShells=function(t,e){for(var n=t.iterator();n.hasNext();){var i=n.next();Tr.assignHoleToShell(i,e)}},Tr.assignHoleToShell=function(t,e){var n=wr.findEdgeRingContaining(t,e);null!==n&&n.addHole(t)},Tr.findDisjointShells=function(t){Tr.findOuterShells(t);var e=null;do{e=!1;for(var n=t.iterator();n.hasNext();){var i=n.next();i.isIncludedSet()||(i.updateIncluded(),i.isIncludedSet()||(e=!0))}}while(e)},e(Pr.prototype,{filter:function(t){t instanceof St&&this.p.add(t)},interfaces_:function(){return[q]},getClass:function(){return Pr}}),Tr.LineStringAdder=Pr;var No=Object.freeze({Polygonizer:Tr});e(br.prototype,{createEdgeEndForNext:function(t,e,n,i){var r=n.segmentIndex+1;if(r>=t.getNumPoints()&&null===i)return null;var o=t.getCoordinate(r);null!==i&&i.segmentIndex===n.segmentIndex&&(o=i.coord);var s=new En(t,n.coord,o,new gn(t.getLabel()));e.add(s)},createEdgeEndForPrev:function(t,e,n,i){var r=n.segmentIndex;if(0===n.dist){if(0===r)return null;r--}var o=t.getCoordinate(r);null!==i&&i.segmentIndex>=r&&(o=i.coord);var s=new gn(t.getLabel());s.flip();var a=new En(t,n.coord,o,s);e.add(a)},computeEdgeEnds:function(){if(1===arguments.length){for(var t=arguments[0],e=new I,n=t;n.hasNext();){var i=n.next();this.computeEdgeEnds(i,e)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1],s=r.getEdgeIntersectionList();s.addEndpoints();var a=s.iterator(),c=null,u=null;if(!a.hasNext())return null;var l=a.next();do c=u,u=l,l=null,a.hasNext()&&(l=a.next()),null!==u&&(this.createEdgeEndForPrev(r,o,u,c),this.createEdgeEndForNext(r,o,u,l));while(null!==u)}},interfaces_:function(){return[]},getClass:function(){return br}}),h(Or,En),e(Or.prototype,{insert:function(t){this.edgeEnds.add(t)},print:function(t){t.println("EdgeEndBundle--> Label: "+this.label);for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t),t.println()}},iterator:function(){return this.edgeEnds.iterator()},getEdgeEnds:function(){return this.edgeEnds},computeLabelOn:function(t,e){for(var n=0,i=!1,r=this.iterator();r.hasNext();){var o=r.next(),s=o.getLabel().getLocation(t);s===L.BOUNDARY&&n++,s===L.INTERIOR&&(i=!0)}var s=L.NONE;i&&(s=L.INTERIOR),n>0&&(s=$n.determineBoundary(e,n)),this.label.setLocation(t,s)},computeLabelSide:function(t,e){for(var n=this.iterator();n.hasNext();){var i=n.next();if(i.getLabel().isArea()){var r=i.getLabel().getLocation(t,e);if(r===L.INTERIOR)return this.label.setLocation(t,e,L.INTERIOR),null;r===L.EXTERIOR&&this.label.setLocation(t,e,L.EXTERIOR)}}},getLabel:function(){return this.label},computeLabelSides:function(t){this.computeLabelSide(t,cn.LEFT),this.computeLabelSide(t,cn.RIGHT)},updateIM:function(t){Jn.updateIM(this.label,t)},computeLabel:function(t){for(var e=!1,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().isArea()&&(e=!0)}e?this.label=new gn(L.NONE,L.NONE,L.NONE):this.label=new gn(L.NONE);for(var r=0;2>r;r++)this.computeLabelOn(r,t),e&&this.computeLabelSides(r)},interfaces_:function(){return[]},getClass:function(){return Or}}),h(_r,Pn),e(_r.prototype,{updateIM:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.updateIM(t)}},insert:function(t){var e=this.edgeMap.get(t);null===e?(e=new Or(t),this.insertEdgeEnd(t,e)):e.insert(t)},interfaces_:function(){return[]},getClass:function(){return _r}}),h(Mr,yn),e(Mr.prototype,{updateIMFromEdges:function(t){this.edges.updateIM(t)},computeIM:function(t){t.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)},interfaces_:function(){return[]},getClass:function(){return Mr}}),h(Dr,Nn),e(Dr.prototype,{createNode:function(t){return new Mr(t,new _r)},interfaces_:function(){return[]},getClass:function(){return Dr}}),e(Ar.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},computeProperIntersectionIM:function(t,e){var n=this.arg[0].getGeometry().getDimension(),i=this.arg[1].getGeometry().getDimension(),r=t.hasProperIntersection(),o=t.hasProperInteriorIntersection();2===n&&2===i?r&&e.setAtLeast("212101212"):2===n&&1===i?(r&&e.setAtLeast("FFF0FFFF2"),o&&e.setAtLeast("1FFFFF1FF")):1===n&&2===i?(r&&e.setAtLeast("F0FFFFFF2"),o&&e.setAtLeast("1F1FFFFFF")):1===n&&1===i&&o&&e.setAtLeast("0FFFFFFFF")},labelIsolatedEdges:function(t,e){for(var n=this.arg[t].getEdgeIterator();n.hasNext();){var i=n.next();i.isIsolated()&&(this.labelIsolatedEdge(i,e,this.arg[e].getGeometry()),this.isolatedEdges.add(i))}},labelIsolatedEdge:function(t,e,n){if(n.getDimension()>0){var i=this.ptLocator.locate(t.getCoordinate(),n);t.getLabel().setAllLocations(e,i)}else t.getLabel().setAllLocations(e,L.EXTERIOR)},computeIM:function(){var t=new fe;if(t.set(L.EXTERIOR,L.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var e=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);var n=new br,i=n.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(i);var r=n.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(r),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t},labelNodeEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().computeLabelling(this.arg)}},copyNodesAndLabels:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next(),i=this.nodes.addNode(n.getCoordinate());i.setLabel(t,n.getLabel().getLocation(t))}},labelIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var o=r.next(),s=this.nodes.find(o.coord);s.getLabel().isNull(t)&&(i===L.BOUNDARY?s.setLabelBoundary(t):s.setLabel(t,L.INTERIOR))}},labelIsolatedNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setAllLocations(e,n)},computeIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var o=r.next(),s=this.nodes.addNode(o.coord);i===L.BOUNDARY?s.setLabelBoundary(t):s.getLabel().isNull(t)&&s.setLabel(t,L.INTERIOR)}},labelIsolatedNodes:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();f.isTrue(n.getGeometryCount()>0,"node with empty label found"),e.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}},updateIM:function(t){for(var e=this.isolatedEdges.iterator();e.hasNext();){var n=e.next();n.updateIM(t)}for(var i=this.nodes.iterator();i.hasNext();){var r=i.next();r.updateIM(t),r.updateIMFromEdges(t)}},computeDisjointIM:function(t){var e=this.arg[0].getGeometry();e.isEmpty()||(t.set(L.INTERIOR,L.EXTERIOR,e.getDimension()),t.set(L.BOUNDARY,L.EXTERIOR,e.getBoundaryDimension()));var n=this.arg[1].getGeometry();n.isEmpty()||(t.set(L.EXTERIOR,L.INTERIOR,n.getDimension()),t.set(L.EXTERIOR,L.BOUNDARY,n.getBoundaryDimension()))},interfaces_:function(){return[]},getClass:function(){return Ar}}),e(Fr.prototype,{isContainedInBoundary:function(t){if(t instanceof Tt)return!1;if(t instanceof Lt)return this.isPointContainedInBoundary(t);if(t instanceof St)return this.isLineStringContainedInBoundary(t);for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.isContainedInBoundary(n))return!1}return!0},isLineSegmentContainedInBoundary:function(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this.rectEnv.getMinX()||t.x===this.rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this.rectEnv.getMinY()||t.y===this.rectEnv.getMaxY()))return!0;return!1},isLineStringContainedInBoundary:function(t){for(var e=t.getCoordinateSequence(),n=new g,i=new g,r=0;r<e.size()-1;r++)if(e.getCoordinate(r,n),e.getCoordinate(r+1,i),!this.isLineSegmentContainedInBoundary(n,i))return!1;return!0},isPointContainedInBoundary:function(){if(arguments[0]instanceof Lt){var t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof g){var e=arguments[0];return e.x===this.rectEnv.getMinX()||e.x===this.rectEnv.getMaxX()||e.y===this.rectEnv.getMinY()||e.y===this.rectEnv.getMaxY();
}},contains:function(t){return!!this.rectEnv.contains(t.getEnvelopeInternal())&&!this.isContainedInBoundary(t)},interfaces_:function(){return[]},getClass:function(){return Fr}}),Fr.contains=function(t,e){var n=new Fr(t);return n.contains(e)},e(Gr.prototype,{intersects:function(t,e){var n=new C(t,e);if(!this.rectEnv.intersects(n))return!1;if(this.rectEnv.intersects(t))return!0;if(this.rectEnv.intersects(e))return!0;if(t.compareTo(e)>0){var i=t;t=e,e=i}var r=!1;return e.y>t.y&&(r=!0),r?this.li.computeIntersection(t,e,this.diagDown0,this.diagDown1):this.li.computeIntersection(t,e,this.diagUp0,this.diagUp1),!!this.li.hasIntersection()},interfaces_:function(){return[]},getClass:function(){return Gr}}),e(qr.prototype,{applyTo:function(t){for(var e=0;e<t.getNumGeometries()&&!this._isDone;e++){var n=t.getGeometryN(e);if(n instanceof ft)this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null}},interfaces_:function(){return[]},getClass:function(){return qr}}),e(Br.prototype,{intersects:function(t){if(!this.rectEnv.intersects(t.getEnvelopeInternal()))return!1;var e=new zr(this.rectEnv);if(e.applyTo(t),e.intersects())return!0;var n=new Vr(this.rectangle);if(n.applyTo(t),n.containsPoint())return!0;var i=new kr(this.rectangle);return i.applyTo(t),!!i.intersects()},interfaces_:function(){return[]},getClass:function(){return Br}}),Br.intersects=function(t,e){var n=new Br(t);return n.intersects(e)},h(zr,qr),e(zr.prototype,{isDone:function(){return this._intersects===!0},visit:function(t){var e=t.getEnvelopeInternal();return this.rectEnv.intersects(e)?this.rectEnv.contains(e)?(this._intersects=!0,null):e.getMinX()>=this.rectEnv.getMinX()&&e.getMaxX()<=this.rectEnv.getMaxX()?(this._intersects=!0,null):e.getMinY()>=this.rectEnv.getMinY()&&e.getMaxY()<=this.rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null},intersects:function(){return this._intersects},interfaces_:function(){return[]},getClass:function(){return zr}}),h(Vr,qr),e(Vr.prototype,{isDone:function(){return this._containsPoint===!0},visit:function(t){if(!(t instanceof Tt))return null;var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;for(var n=new g,i=0;4>i;i++)if(this.rectSeq.getCoordinate(i,n),e.contains(n)&&Tn.containsPointInPolygon(n,t))return this._containsPoint=!0,null},containsPoint:function(){return this._containsPoint},interfaces_:function(){return[]},getClass:function(){return Vr}}),h(kr,qr),e(kr.prototype,{intersects:function(){return this.hasIntersection},isDone:function(){return this.hasIntersection===!0},visit:function(t){var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;var n=kn.getLines(t);this.checkIntersectionWithLineStrings(n)},checkIntersectionWithLineStrings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();if(this.checkIntersectionWithSegments(n),this.hasIntersection)return null}},checkIntersectionWithSegments:function(t){for(var e=t.getCoordinateSequence(),n=1;n<e.size();n++)if(e.getCoordinate(n-1,this.p0),e.getCoordinate(n,this.p1),this.rectIntersector.intersects(this.p0,this.p1))return this.hasIntersection=!0,null},interfaces_:function(){return[]},getClass:function(){return kr}}),h(Yr,ti),e(Yr.prototype,{getIntersectionMatrix:function(){return this._relate.computeIM()},interfaces_:function(){return[]},getClass:function(){return Yr}}),Yr.covers=function(t,e){return!!t.getEnvelopeInternal().covers(e.getEnvelopeInternal())&&(!!t.isRectangle()||Yr.relate(t,e).isCovers())},Yr.intersects=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&(t.isRectangle()?Br.intersects(t,e):e.isRectangle()?Br.intersects(e,t):Yr.relate(t,e).isIntersects())},Yr.touches=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&Yr.relate(t,e).isTouches(t.getDimension(),e.getDimension())},Yr.within=function(t,e){return e.contains(t)},Yr.coveredBy=function(t,e){return Yr.covers(e,t)},Yr.relate=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Yr(t,e),i=n.getIntersectionMatrix();return i}if(3===arguments.length){if("string"==typeof arguments[2]&&arguments[0]instanceof B&&arguments[1]instanceof B){var r=arguments[0],o=arguments[1],s=arguments[2];return Yr.relateWithCheck(r,o).matches(s)}if(R(arguments[2],V)&&arguments[0]instanceof B&&arguments[1]instanceof B){var a=arguments[0],c=arguments[1],u=arguments[2],n=new Yr(a,c,u),i=n.getIntersectionMatrix();return i}}},Yr.overlaps=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&Yr.relate(t,e).isOverlaps(t.getDimension(),e.getDimension())},Yr.disjoint=function(t,e){return!t.intersects(e)},Yr.relateWithCheck=function(t,e){return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Yr.relate(t,e)},Yr.crosses=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&Yr.relate(t,e).isCrosses(t.getDimension(),e.getDimension())},Yr.contains=function(t,e){return!!t.getEnvelopeInternal().contains(e.getEnvelopeInternal())&&(t.isRectangle()?Fr.contains(t,e):Yr.relate(t,e).isContains())};var Po=Object.freeze({RelateOp:Yr});e(Ur.prototype,{extractElements:function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this.skipEmpty&&i.isEmpty()||e.add(i)}},combine:function(){for(var t=new I,e=this.inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this.geomFactory?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(t)},interfaces_:function(){return[]},getClass:function(){return Ur}}),Ur.combine=function(){if(1===arguments.length){var t=arguments[0],e=new Ur(t);return e.combine()}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=new Ur(Ur.createList(n,i));return e.combine()}if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],e=new Ur(Ur.createList(r,o,s));return e.combine()}},Ur.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Ur.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new I;return n.add(t),n.add(e),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],n=new I;return n.add(i),n.add(r),n.add(o),n}},e(Xr.prototype,{union:function(){for(var t=new Te,e=new at,n=0;n<this.pointGeom.getNumGeometries();n++){var i=this.pointGeom.getGeometryN(n),r=i.getCoordinate(),o=t.locate(r,this.otherGeom);o===L.EXTERIOR&&e.add(r)}if(0===e.size())return this.otherGeom;var s=null,a=H.toCoordinateArray(e);return s=1===a.length?this.geomFact.createPoint(a[0]):this.geomFact.createMultiPointFromCoords(a),Ur.combine(s,this.otherGeom)},interfaces_:function(){return[]},getClass:function(){return Xr}}),Xr.union=function(t,e){var n=new Xr(t,e);return n.union()},e(Hr.prototype,{filter:function(t){-1!==this.sortIndex&&t.getSortIndex()!==this.sortIndex||this.comps.add(t)},interfaces_:function(){return[ht]},getClass:function(){return Hr}}),Hr.extract=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return Hr.extract(t,e,new I)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];return n.getSortIndex()===i?r.add(n):n instanceof ft&&n.apply(new Hr(i,r)),r}},e(Wr.prototype,{reduceToGeometries:function(t){for(var e=new I,n=t.iterator();n.hasNext();){var i=n.next(),r=null;R(i,y)?r=this.unionTree(i):i instanceof B&&(r=i),e.add(r)}return e},extractByEnvelope:function(t,e,n){for(var i=new I,r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r);o.getEnvelopeInternal().intersects(t)?i.add(o):n.add(o)}return this.geomFactory.buildGeometry(i)},unionOptimized:function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i)){var r=Ur.combine(t,e);return r}if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var o=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,o)},union:function(){if(null===this.inputPolys)throw new IllegalStateException("union() method cannot be called twice");if(this.inputPolys.isEmpty())return null;this.geomFactory=this.inputPolys.iterator().next().getFactory();for(var t=new ke(Wr.STRTREE_NODE_CAPACITY),e=this.inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this.inputPolys=null;var i=t.itemsTree(),r=this.unionTree(i);return r},binaryUnion:function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(1>=i-n){var r=Wr.getGeometry(e,n);return this.unionSafe(r,null)}if(i-n===2)return this.unionSafe(Wr.getGeometry(e,n),Wr.getGeometry(e,n+1));var o=Math.trunc((i+n)/2),r=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,i);return this.unionSafe(r,s)}},repeatedUnion:function(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next();e=null===e?i.copy():e.union(i)}return e},unionSafe:function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},unionActual:function(t,e){return Wr.restrictToPolygons(t.union(e))},unionTree:function(t){var e=this.reduceToGeometries(t),n=this.binaryUnion(e);return n},unionUsingEnvelopeIntersection:function(t,e,n){var i=new I,r=this.extractByEnvelope(n,t,i),o=this.extractByEnvelope(n,e,i),s=this.unionActual(r,o);i.add(s);var a=Ur.combine(i);return a},bufferUnion:function(){if(1===arguments.length){var t=arguments[0],e=t.get(0).getFactory(),n=e.buildGeometry(t),i=n.buffer(0);return i}if(2===arguments.length){var r=arguments[0],o=arguments[1],e=r.getFactory(),n=e.createGeometryCollection([r,o]),i=n.buffer(0);return i}},interfaces_:function(){return[]},getClass:function(){return Wr}}),Wr.restrictToPolygons=function(t){if(R(t,Rt))return t;var e=or.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(ie.toPolygonArray(e))},Wr.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Wr.union=function(t){var e=new Wr(t);return e.union()},Wr.STRTREE_NODE_CAPACITY=4,e(jr.prototype,{unionNoOpt:function(t){var e=this.geomFact.createPoint();return si.overlayOp(t,e,ii.UNION)},unionWithNull:function(t,e){return null===t&&null===e?null:null===e?t:null===t?e:t.union(e)},extract:function(){if(R(arguments[0],v))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.extract(n)}else if(arguments[0]instanceof B){var i=arguments[0];null===this.geomFact&&(this.geomFact=i.getFactory()),Hr.extract(i,B.SORTINDEX_POLYGON,this.polygons),Hr.extract(i,B.SORTINDEX_LINESTRING,this.lines),Hr.extract(i,B.SORTINDEX_POINT,this.points)}},union:function t(){if(null===this.geomFact)return null;var e=null;if(this.points.size()>0){var n=this.geomFact.buildGeometry(this.points);e=this.unionNoOpt(n)}var i=null;if(this.lines.size()>0){var r=this.geomFact.buildGeometry(this.lines);i=this.unionNoOpt(r)}var o=null;this.polygons.size()>0&&(o=Wr.union(this.polygons));var s=this.unionWithNull(i,o),t=null;return t=null===e?s:null===s?e:Xr.union(e,s),null===t?this.geomFact.createGeometryCollection():t},interfaces_:function(){return[]},getClass:function(){return jr}}),jr.union=function(){if(1===arguments.length){if(R(arguments[0],v)){var t=arguments[0],e=new jr(t);return e.union()}if(arguments[0]instanceof B){var n=arguments[0],e=new jr(n);return e.union()}}else if(2===arguments.length){var i=arguments[0],r=arguments[1],e=new jr(i,r);return e.union()}};var Mo=Object.freeze({UnaryUnionOp:jr});e(Kr.prototype,{visitInteriorRing:function(t,e){var n=t.getCoordinates(),i=n[0],r=Kr.findDifferentPoint(n,i),o=e.findEdgeInSameDirection(i,r),s=e.findEdgeEnd(o),a=null;s.getLabel().getLocation(0,cn.RIGHT)===L.INTERIOR?a=s:s.getSym().getLabel().getLocation(0,cn.RIGHT)===L.INTERIOR&&(a=s.getSym()),f.isTrue(null!==a,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(a)},visitShellInteriors:function(t,e){if(t instanceof Tt){var n=t;this.visitInteriorRing(n.getExteriorRing(),e)}if(t instanceof Ot)for(var i=t,r=0;r<i.getNumGeometries();r++){var n=i.getGeometryN(r);this.visitInteriorRing(n.getExteriorRing(),e)}},getCoordinate:function(){return this.disconnectedRingcoord},setInteriorEdgesInResult:function(t){for(var e=t.getEdgeEnds().iterator();e.hasNext();){var n=e.next();n.getLabel().getLocation(0,cn.RIGHT)===L.INTERIOR&&n.setInResult(!0)}},visitLinkedDirectedEdges:function(t){var e=t,n=t;do f.isTrue(null!==n,"found null Directed Edge"),n.setVisited(!0),n=n.getNext();while(n!==e)},buildEdgeRings:function(t){for(var e=new I,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&null===i.getEdgeRing()){var r=new vn(i,this.geometryFactory);r.linkDirectedEdgesForMinimalEdgeRings();var o=r.buildMinimalRings();e.addAll(o)}}return e},hasUnvisitedShellEdge:function(t){for(var e=0;e<t.size();e++){var n=t.get(e);if(!n.isHole()){var i=n.getEdges(),r=i.get(0);if(r.getLabel().getLocation(0,cn.RIGHT)===L.INTERIOR)for(var o=0;o<i.size();o++)if(r=i.get(o),!r.isVisited())return this.disconnectedRingcoord=r.getCoordinate(),!0}}return!1},isInteriorsConnected:function(){var t=new I;this.geomGraph.computeSplitEdges(t);var e=new Cn(new On);e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();var n=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(n)},interfaces_:function(){return[]},getClass:function(){return Kr}}),Kr.findDifferentPoint=function(t,e){for(var n=0;n<t.length;n++)if(!t[n].equals(e))return t[n];return null},e(Zr.prototype,{hasChildren:function(){for(var t=0;2>t;t++)if(null!==this.subnode[t])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;2>e;e++)null!==this.subnode[e]&&this.subnode[e].addAllItems(t);return t},size:function(){for(var t=0,e=0;2>e;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){return null===t||this.isSearchMatch(t)?(e.addAll(this.items),null!==this.subnode[0]&&this.subnode[0].addAllItemsFromOverlapping(t,e),void(null!==this.subnode[1]&&this.subnode[1].addAllItemsFromOverlapping(t,e))):null},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,i=0;2>i;i++)if(null!==this.subnode[i]&&(n=this.subnode[i].remove(t,e))){this.subnode[i].isPrunable()&&(this.subnode[i]=null);break}return n?n:n=this.items.remove(e)},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;2>e;e++)if(null!==this.subnode[e]){var n=this.subnode[e].depth();n>t&&(t=n)}return t+1},nodeSize:function(){for(var t=0,e=0;2>e;e++)null!==this.subnode[e]&&(t+=this.subnode[e].nodeSize());return t+1},add:function(t){this.items.add(t)},interfaces_:function(){return[]},getClass:function(){return Zr}}),Zr.getSubnodeIndex=function(t,e){var n=-1;return t.min>=e&&(n=1),t.max<=e&&(n=0),n},e(Qr.prototype,{expandToInclude:function(t){t.max>this.max&&(this.max=t.max),t.min<this.min&&(this.min=t.min)},getWidth:function(){return this.max-this.min},overlaps:function(){if(1===arguments.length){var t=arguments[0];return this.overlaps(t.min,t.max)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!(this.min>n||this.max<e)}},getMin:function(){return this.min},toString:function(){return"["+this.min+", "+this.max+"]"},contains:function(){if(1===arguments.length){if(arguments[0]instanceof Qr){var t=arguments[0];return this.contains(t.min,t.max)}if("number"==typeof arguments[0]){var e=arguments[0];return e>=this.min&&e<=this.max}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return n>=this.min&&i<=this.max}},init:function(t,e){this.min=t,this.max=e,t>e&&(this.min=e,this.max=t)},getMax:function(){return this.max},interfaces_:function(){return[]},getClass:function(){return Qr}}),e(Jr.prototype,{getInterval:function(){return this.interval},getLevel:function(){return this.level},computeKey:function(t){for(this.level=Jr.computeLevel(t),this.interval=new Qr,this.computeInterval(this.level,t);!this.interval.contains(t);)this.level+=1,this.computeInterval(this.level,t)},computeInterval:function(t,e){var n=Ci.powerOf2(t);this.pt=Math.floor(e.getMin()/n)*n,this.interval.init(this.pt,this.pt+n)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Jr}}),Jr.computeLevel=function(t){var e=t.getWidth(),n=Ci.exponent(e)+1;return n},h($r,Zr),e($r.prototype,{getInterval:function(){return this.interval},find:function(t){var e=Zr.getSubnodeIndex(t,this.centre);if(-1===e)return this;if(null!==this.subnode[e]){var n=this.subnode[e];return n.find(t)}return this},insert:function(t){f.isTrue(null===this.interval||this.interval.contains(t.interval));var e=Zr.getSubnodeIndex(t.interval,this.centre);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insert(t),this.subnode[e]=n}},isSearchMatch:function(t){return t.overlaps(this.interval)},getSubnode:function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getNode:function(t){var e=Zr.getSubnodeIndex(t,this.centre);if(-1!==e){var n=this.getSubnode(e);return n.getNode(t)}return this},createSubnode:function(t){var e=0,n=0;switch(t){case 0:e=this.interval.getMin(),n=this.centre;break;case 1:e=this.centre,n=this.interval.getMax()}var i=new Qr(e,n),r=new $r(i,this.level-1);return r},interfaces_:function(){return[]},getClass:function(){return $r}}),$r.createNode=function(t){var e=new Jr(t),n=new $r(e.getInterval(),e.getLevel());return n},$r.createExpanded=function(t,e){var n=new Qr(e);null!==t&&n.expandToInclude(t.interval);var i=$r.createNode(n);return null!==t&&i.insert(t),i},h(ts,Zr),e(ts.prototype,{insert:function(t,e){var n=Zr.getSubnodeIndex(t,ts.origin);if(-1===n)return this.add(e),null;var i=this.subnode[n];if(null===i||!i.getInterval().contains(t)){var r=$r.createExpanded(i,t);this.subnode[n]=r}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){f.isTrue(t.getInterval().contains(e));var i=Ri.isZeroWidth(e.getMin(),e.getMax()),r=null;r=i?t.find(e):t.getNode(e),r.add(n)},interfaces_:function(){return[]},getClass:function(){return ts}}),ts.origin=0,e(es.prototype,{size:function(){return null!==this.root?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=es.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];return this.query(new Qr(t,t))}if(arguments[0]instanceof Qr){var e=arguments[0],n=new I;return this.query(e,n),n}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.root.addAllItemsFromOverlapping(i,r)}},iterator:function(){var t=new I;return this.root.addAllItems(t),t.iterator()},remove:function(t,e){var n=es.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e)},depth:function(){return null!==this.root?this.root.depth():0},nodeSize:function(){return null!==this.root?this.root.nodeSize():0},interfaces_:function(){return[]},getClass:function(){return es}}),es.ensureExtent=function(t,e){var n=t.getMin(),i=t.getMax();return n!==i?t:(n===i&&(n-=e/2,i=n+e/2),new Qr(n,i))},e(ns.prototype,{isInside:function(t){},interfaces_:function(){return[]},getClass:function(){return ns}}),e(is.prototype,{testLineSegment:function(t,e){var n=null,i=null,r=null,o=null,s=null,a=e.p0,c=e.p1;i=a.x-t.x,r=a.y-t.y,o=c.x-t.x,s=c.y-t.y,(r>0&&0>=s||s>0&&0>=r)&&(n=ue.signOfDet2x2(i,r,o,s)/(s-r),n>0&&this.crossings++)},buildIndex:function(){this.tree=new es;for(var t=H.removeRepeatedPoints(this.ring.getCoordinates()),e=$e.getChains(t),n=0;n<e.size();n++){var i=e.get(n),r=i.getEnvelope();this.interval.min=r.getMinY(),this.interval.max=r.getMaxY(),this.tree.insert(this.interval,i)}},testMonotoneChain:function(t,e,n){n.select(t,e)},isInside:function(t){this.crossings=0;var e=new C(r.NEGATIVE_INFINITY,r.POSITIVE_INFINITY,t.y,t.y);this.interval.min=t.y,this.interval.max=t.y;for(var n=this.tree.query(this.interval),i=new rs(this,t),o=n.iterator();o.hasNext();){var s=o.next();this.testMonotoneChain(e,i,s)}return this.crossings%2===1},interfaces_:function(){return[ns]},getClass:function(){return is}}),h(rs,tr),e(rs.prototype,{select:function(){if(1!==arguments.length)return tr.prototype.select.apply(this,arguments);var t=arguments[0];this.mcp.testLineSegment(this.p,t)},interfaces_:function(){return[]},getClass:function(){return rs}}),is.MCSelecter=rs,e(ss.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},getNodeIterator:function(){return this.nodes.iterator()},copyNodesAndLabels:function(t,e){for(var n=t.getNodeIterator();n.hasNext();){var i=n.next(),r=this.nodes.addNode(i.getCoordinate());r.setLabel(e,i.getLabel().getLocation(e))}},build:function(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);var e=new br,n=e.computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(n)},computeIntersectionNodes:function(t,e){for(var n=t.getEdgeIterator();n.hasNext();)for(var i=n.next(),r=i.getLabel().getLocation(e),o=i.getEdgeIntersectionList().iterator();o.hasNext();){var s=o.next(),a=this.nodes.addNode(s.coord);r===L.BOUNDARY?a.setLabelBoundary(e):a.getLabel().isNull(e)&&a.setLabel(e,L.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return ss}}),e(os.prototype,{isNodeEdgeAreaLabelsConsistent:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();){var e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=e.getCoordinate().copy(),!1}return!0},getInvalidPoint:function(){return this.invalidPoint},hasDuplicateRings:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();)for(var e=t.next(),n=e.getEdges().iterator();n.hasNext();){var i=n.next();if(i.getEdgeEnds().size()>1)return this.invalidPoint=i.getEdge().getCoordinate(0),!0}return!1},isNodeConsistentArea:function(){var t=this.geomGraph.computeSelfNodes(this.li,!0,!0);return t.hasProperIntersection()?(this.invalidPoint=t.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())},interfaces_:function(){return[]},getClass:function(){return os}}),e(as.prototype,{buildIndex:function(){this.index=new ke;for(var t=0;t<this.rings.size();t++){var e=this.rings.get(t),n=e.getEnvelopeInternal();this.index.insert(n,e)}},getNestedPoint:function(){return this.nestedPt},isNonNested:function(){this.buildIndex();for(var t=0;t<this.rings.size();t++)for(var e=this.rings.get(t),n=e.getCoordinates(),i=this.index.query(e.getEnvelopeInternal()),r=0;r<i.size();r++){var o=i.get(r),s=o.getCoordinates();if(e!==o&&e.getEnvelopeInternal().intersects(o.getEnvelopeInternal())){var a=ls.findPtNotNode(n,o,this.graph);if(null!==a){var c=he.isPointInRing(a,s);if(c)return this.nestedPt=a,!1}}}return!0},add:function(t){this.rings.add(t),this.totalEnv.expandToInclude(t.getEnvelopeInternal())},interfaces_:function(){return[]},getClass:function(){return as}}),e(us.prototype,{getErrorType:function(){return this.errorType},getMessage:function(){return us.errMsg[this.errorType]},getCoordinate:function(){return this.pt},toString:function(){var t="";return null!==this.pt&&(t=" at or near point "+this.pt),this.getMessage()+t},interfaces_:function(){return[]},getClass:function(){return us}}),us.ERROR=0,us.REPEATED_POINT=1,us.HOLE_OUTSIDE_SHELL=2,us.NESTED_HOLES=3,us.DISCONNECTED_INTERIOR=4,us.SELF_INTERSECTION=5,us.RING_SELF_INTERSECTION=6,us.NESTED_SHELLS=7,us.DUPLICATE_RINGS=8,us.TOO_FEW_POINTS=9,us.INVALID_COORDINATE=10,us.RING_NOT_CLOSED=11,us.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],e(ls.prototype,{checkInvalidCoordinates:function(){if(arguments[0]instanceof Array){for(var t=arguments[0],e=0;e<t.length;e++)if(!ls.isValid(t[e]))return this.validErr=new us(us.INVALID_COORDINATE,t[e]),null}else if(arguments[0]instanceof Tt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getExteriorRing().getCoordinates()),null!==this.validErr)return null;for(var e=0;e<n.getNumInteriorRing();e++)if(this.checkInvalidCoordinates(n.getInteriorRingN(e).getCoordinates()),null!==this.validErr)return null}},checkHolesNotNested:function(t,e){for(var n=new as(e),i=0;i<t.getNumInteriorRing();i++){var r=t.getInteriorRingN(i);n.add(r)}var o=n.isNonNested();o||(this.validErr=new us(us.NESTED_HOLES,n.getNestedPoint()))},checkConsistentArea:function(t){var e=new os(t),n=e.isNodeConsistentArea();return n?void(e.hasDuplicateRings()&&(this.validErr=new us(us.DUPLICATE_RINGS,e.getInvalidPoint()))):(this.validErr=new us(us.SELF_INTERSECTION,e.getInvalidPoint()),null)},isValid:function(){return this.checkValid(this.parentGeometry),null===this.validErr},checkShellInsideHole:function(t,e,n){var i=t.getCoordinates(),r=e.getCoordinates(),o=ls.findPtNotNode(i,e,n);if(null!==o){var s=he.isPointInRing(o,r);if(!s)return o}var a=ls.findPtNotNode(r,t,n);if(null!==a){var c=he.isPointInRing(a,i);return c?a:null}return f.shouldNeverReachHere("points in shell and hole appear to be equal"),null},checkNoSelfIntersectingRings:function(t){for(var e=t.getEdgeIterator();e.hasNext();){var n=e.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),null!==this.validErr)return null}},checkConnectedInteriors:function(t){var e=new Kr(t);e.isInteriorsConnected()||(this.validErr=new us(us.DISCONNECTED_INTERIOR,e.getCoordinate()))},checkNoSelfIntersectingRing:function(t){for(var e=new at,n=!0,i=t.iterator();i.hasNext();){var r=i.next();if(n)n=!1;else{if(e.contains(r.coord))return this.validErr=new us(us.RING_SELF_INTERSECTION,r.coord),null;e.add(r.coord)}}},checkHolesInShell:function(t,e){for(var n=t.getExteriorRing(),i=new is(n),r=0;r<t.getNumInteriorRing();r++){var o=t.getInteriorRingN(r),s=ls.findPtNotNode(o.getCoordinates(),n,e);if(null===s)return null;var a=!i.isInside(s);if(a)return this.validErr=new us(us.HOLE_OUTSIDE_SHELL,s),null}},checkTooFewPoints:function(t){return t.hasTooFewPoints()?(this.validErr=new us(us.TOO_FEW_POINTS,t.getInvalidPoint()),null):void 0},getValidationError:function(){return this.checkValid(this.parentGeometry),this.validErr},checkValid:function(){if(arguments[0]instanceof Lt){var t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof Pt){var e=arguments[0];this.checkInvalidCoordinates(e.getCoordinates())}else if(arguments[0]instanceof bt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getCoordinates()),null!==this.validErr)return null;if(this.checkClosedRing(n),null!==this.validErr)return null;var i=new $n(0,n);if(this.checkTooFewPoints(i),null!==this.validErr)return null;var r=new ae;i.computeSelfNodes(r,!0,!0),this.checkNoSelfIntersectingRings(i)}else if(arguments[0]instanceof St){var o=arguments[0];if(this.checkInvalidCoordinates(o.getCoordinates()),null!==this.validErr)return null;var i=new $n(0,o);this.checkTooFewPoints(i)}else if(arguments[0]instanceof Tt){var s=arguments[0];if(this.checkInvalidCoordinates(s),null!==this.validErr)return null;if(this.checkClosedRings(s),null!==this.validErr)return null;var i=new $n(0,s);if(this.checkTooFewPoints(i),null!==this.validErr)return null;if(this.checkConsistentArea(i),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(i),null!==this.validErr))return null;if(this.checkHolesInShell(s,i),null!==this.validErr)return null;if(this.checkHolesNotNested(s,i),null!==this.validErr)return null;this.checkConnectedInteriors(i)}else if(arguments[0]instanceof Ot){for(var a=arguments[0],c=0;c<a.getNumGeometries();c++){var u=a.getGeometryN(c);if(this.checkInvalidCoordinates(u),null!==this.validErr)return null;if(this.checkClosedRings(u),null!==this.validErr)return null}var i=new $n(0,a);if(this.checkTooFewPoints(i),null!==this.validErr)return null;if(this.checkConsistentArea(i),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(i),null!==this.validErr))return null;for(var c=0;c<a.getNumGeometries();c++){var u=a.getGeometryN(c);if(this.checkHolesInShell(u,i),null!==this.validErr)return null}for(var c=0;c<a.getNumGeometries();c++){var u=a.getGeometryN(c);if(this.checkHolesNotNested(u,i),null!==this.validErr)return null}if(this.checkShellsNotNested(a,i),null!==this.validErr)return null;this.checkConnectedInteriors(i)}else if(arguments[0]instanceof ft)for(var l=arguments[0],c=0;c<l.getNumGeometries();c++){var h=l.getGeometryN(c);if(this.checkValid(h),null!==this.validErr)return null}else if(arguments[0]instanceof B){var p=arguments[0];if(this.validErr=null,p.isEmpty())return null;if(p instanceof Lt)this.checkValid(p);else if(p instanceof Pt)this.checkValid(p);else if(p instanceof bt)this.checkValid(p);else if(p instanceof St)this.checkValid(p);else if(p instanceof Tt)this.checkValid(p);else if(p instanceof Ot)this.checkValid(p);else{if(!(p instanceof ft))throw new UnsupportedOperationException(p.getClass().getName());this.checkValid(p)}}},setSelfTouchingRingFormingHoleValid:function(t){this.isSelfTouchingRingFormingHoleValid=t},checkShellNotNested:function(t,e,n){var i=t.getCoordinates(),r=e.getExteriorRing(),o=r.getCoordinates(),s=ls.findPtNotNode(i,r,n);if(null===s)return null;var a=he.isPointInRing(s,o);if(!a)return null;if(e.getNumInteriorRing()<=0)return this.validErr=new us(us.NESTED_SHELLS,s),null;for(var c=null,u=0;u<e.getNumInteriorRing();u++){var l=e.getInteriorRingN(u);if(c=this.checkShellInsideHole(t,l,n),null===c)return null}this.validErr=new us(us.NESTED_SHELLS,c)},checkClosedRings:function(t){if(this.checkClosedRing(t.getExteriorRing()),null!==this.validErr)return null;for(var e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),null!==this.validErr)return null},checkClosedRing:function(t){if(!t.isClosed()){var e=null;t.getNumPoints()>=1&&(e=t.getCoordinateN(0)),this.validErr=new us(us.RING_NOT_CLOSED,e)}},checkShellsNotNested:function(t,e){for(var n=0;n<t.getNumGeometries();n++)for(var i=t.getGeometryN(n),r=i.getExteriorRing(),o=0;o<t.getNumGeometries();o++)if(n!==o){var s=t.getGeometryN(o);if(this.checkShellNotNested(r,s,e),null!==this.validErr)return null}},interfaces_:function(){return[]},getClass:function(){return ls}}),ls.findPtNotNode=function(t,e,n){for(var i=n.findEdge(e),r=i.getEdgeIntersectionList(),o=0;o<t.length;o++){var s=t[o];if(!r.isIntersection(s))return s}return null},ls.isValid=function(){if(arguments[0]instanceof B){var t=arguments[0],e=new ls(t);return e.isValid()}if(arguments[0]instanceof g){var n=arguments[0];return!r.isNaN(n.x)&&(!r.isInfinite(n.x)&&(!r.isNaN(n.y)&&!r.isInfinite(n.y)))}};var Ro=Object.freeze({IsValidOp:ls}),Ao=Object.freeze({BoundaryOp:dt,IsSimpleOp:Gi,buffer:Eo,distance:Lo,linemerge:To,overlay:Oo,polygonize:No,relate:Po,union:Mo,valid:Ro});h(hs,_t.CoordinateOperation),e(hs.prototype,{editCoordinates:function(t,e){if(0===t.length)return null;for(var n=new Array(t.length).fill(null),i=0;i<t.length;i++){var r=new g(t[i]);this.targetPM.makePrecise(r),n[i]=r}var o=new N(n,(!1)),s=o.toCoordinateArray(),a=0;e instanceof St&&(a=2),e instanceof bt&&(a=4);var c=n;return this.removeCollapsed&&(c=null),s.length<a?c:s},interfaces_:function(){return[]},getClass:function(){return hs}}),e(cs.prototype,{fixPolygonalTopology:function(t){var e=t;this.changePrecisionModel||(e=this.changePM(t,this.targetPM));var n=e.buffer(0),i=n;return this.changePrecisionModel||(i=t.getFactory().createGeometry(n)),i},reducePointwise:function(t){var e=null;if(this.changePrecisionModel){var n=this.createFactory(t.getFactory(),this.targetPM);e=new _t(n)}else e=new _t;
var i=this.removeCollapsed;t.getDimension()>=2&&(i=!0);var r=e.edit(t,new hs(this.targetPM,i));return r},changePM:function(t,e){var n=this.createEditor(t.getFactory(),e);return n.edit(t,new _t.NoOpGeometryOperation)},setRemoveCollapsedComponents:function(t){this.removeCollapsed=t},createFactory:function(t,e){var n=new ie(e,t.getSRID(),t.getCoordinateSequenceFactory());return n},setChangePrecisionModel:function(t){this.changePrecisionModel=t},reduce:function(t){var e=this.reducePointwise(t);return this.isPointwise?e:R(e,Rt)?e.isValid()?e:this.fixPolygonalTopology(e):e},setPointwise:function(t){this.isPointwise=t},createEditor:function(t,e){if(t.getPrecisionModel()===e)return new _t;var n=this.createFactory(t,e),i=new _t(n);return i},interfaces_:function(){return[]},getClass:function(){return cs}}),cs.reduce=function(t,e){var n=new cs(e);return n.reduce(t)},cs.reducePointwise=function(t,e){var n=new cs(e);return n.setPointwise(!0),n.reduce(t)};var Fo=Object.freeze({GeometryPrecisionReducer:cs});e(fs.prototype,{simplifySection:function(t,e){if(t+1===e)return null;this.seg.p0=this.pts[t],this.seg.p1=this.pts[e];for(var n=-1,i=t,r=t+1;e>r;r++){var o=this.seg.distance(this.pts[r]);o>n&&(n=o,i=r)}if(n<=this.distanceTolerance)for(var r=t+1;e>r;r++)this.usePt[r]=!1;else this.simplifySection(t,i),this.simplifySection(i,e)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(){this.usePt=new Array(this.pts.length).fill(null);for(var t=0;t<this.pts.length;t++)this.usePt[t]=!0;this.simplifySection(0,this.pts.length-1);for(var e=new N,t=0;t<this.pts.length;t++)this.usePt[t]&&e.add(new g(this.pts[t]));return e.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return fs}}),fs.simplify=function(t,e){var n=new fs(t);return n.setDistanceTolerance(e),n.simplify()},e(gs.prototype,{setEnsureValid:function(t){this.isEnsureValidTopology=t},getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():new ds(this.isEnsureValidTopology,this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(0>t)throw new i("Tolerance must be non-negative");this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return gs}}),gs.simplify=function(t,e){var n=new gs(t);return n.setDistanceTolerance(e),n.getResultGeometry()},h(ds,xe),e(ds.prototype,{transformPolygon:function(t,e){if(t.isEmpty())return null;var n=xe.prototype.transformPolygon.call(this,t,e);return e instanceof Ot?n:this.createValidArea(n)},createValidArea:function(t){return this.isEnsureValidTopology?t.buffer(0):t},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),i=null;return i=0===n.length?new Array(0).fill(null):fs.simplify(n,this.distanceTolerance),this.factory.getCoordinateSequenceFactory().create(i)},transformMultiPolygon:function(t,e){var n=xe.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformLinearRing:function(t,e){var n=e instanceof Tt,i=xe.prototype.transformLinearRing.call(this,t,e);return!n||i instanceof bt?i:null},interfaces_:function(){return[]},getClass:function(){return ds}}),gs.DPTransformer=ds,h(ps,ce),e(ps.prototype,{getIndex:function(){return this.index},getParent:function(){return this.parent},interfaces_:function(){return[]},getClass:function(){return ps}}),e(vs.prototype,{addToResult:function(t){this.resultSegs.add(t)},asLineString:function(){return this.parentLine.getFactory().createLineString(vs.extractCoordinates(this.resultSegs))},getResultSize:function(){var t=this.resultSegs.size();return 0===t?0:t+1},getParent:function(){return this.parentLine},getSegment:function(t){return this.segs[t]},getParentCoordinates:function(){return this.parentLine.getCoordinates()},getMinimumSize:function(){return this.minimumSize},asLinearRing:function(){return this.parentLine.getFactory().createLinearRing(vs.extractCoordinates(this.resultSegs))},getSegments:function(){return this.segs},init:function(){var t=this.parentLine.getCoordinates();this.segs=new Array(t.length-1).fill(null);for(var e=0;e<t.length-1;e++){var n=new ps(t[e],t[e+1],this.parentLine,e);this.segs[e]=n}},getResultCoordinates:function(){return vs.extractCoordinates(this.resultSegs)},interfaces_:function(){return[]},getClass:function(){return vs}}),vs.extractCoordinates=function(t){for(var e=new Array(t.size()+1).fill(null),n=null,i=0;i<t.size();i++)n=t.get(i),e[i]=n.p0;return e[e.length-1]=n.p1,e},e(ms.prototype,{remove:function(t){this.index.remove(new C(t.p0,t.p1),t)},add:function(){if(arguments[0]instanceof vs)for(var t=arguments[0],e=t.getSegments(),n=0;n<e.length;n++){var i=e[n];this.add(i)}else if(arguments[0]instanceof ce){var r=arguments[0];this.index.insert(new C(r.p0,r.p1),r)}},query:function(t){var e=new C(t.p0,t.p1),n=new ys(t);this.index.query(e,n);var i=n.getItems();return i},interfaces_:function(){return[]},getClass:function(){return ms}}),e(ys.prototype,{visitItem:function(t){var e=t;C.intersects(e.p0,e.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[Ae]},getClass:function(){return ys}}),e(xs.prototype,{flatten:function(t,e){var n=this.linePts[t],i=this.linePts[e],r=new ce(n,i);return this.remove(this.line,t,e),this.outputIndex.add(r),r},hasBadIntersection:function(t,e,n){return!!this.hasBadOutputIntersection(n)||!!this.hasBadInputIntersection(t,e,n)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplifySection:function(t,e,n){n+=1;var i=new Array(2).fill(null);if(t+1===e){var r=this.line.getSegment(t);return this.line.addToResult(r),null}var o=!0;if(this.line.getResultSize()<this.line.getMinimumSize()){var s=n+1;s<this.line.getMinimumSize()&&(o=!1)}var a=new Array(1).fill(null),c=this.findFurthestPoint(this.linePts,t,e,a);a[0]>this.distanceTolerance&&(o=!1);var u=new ce;if(u.p0=this.linePts[t],u.p1=this.linePts[e],i[0]=t,i[1]=e,this.hasBadIntersection(this.line,i,u)&&(o=!1),o){var r=this.flatten(t,e);return this.line.addToResult(r),null}this.simplifySection(t,c,n),this.simplifySection(c,e,n)},hasBadOutputIntersection:function(t){for(var e=this.outputIndex.query(t),n=e.iterator();n.hasNext();){var i=n.next();if(this.hasInteriorIntersection(i,t))return!0}return!1},findFurthestPoint:function(t,e,n,i){var r=new ce;r.p0=t[e],r.p1=t[n];for(var o=-1,s=e,a=e+1;n>a;a++){var c=t[a],u=r.distance(c);u>o&&(o=u,s=a)}return i[0]=o,s},simplify:function(t){this.line=t,this.linePts=t.getParentCoordinates(),this.simplifySection(0,this.linePts.length-1,0)},remove:function(t,e,n){for(var i=e;n>i;i++){var r=t.getSegment(i);this.inputIndex.remove(r)}},hasInteriorIntersection:function(t,e){return this.li.computeIntersection(t.p0,t.p1,e.p0,e.p1),this.li.isInteriorIntersection()},hasBadInputIntersection:function(t,e,n){for(var i=this.inputIndex.query(n),r=i.iterator();r.hasNext();){var o=r.next();if(this.hasInteriorIntersection(o,n)){if(xs.isInLineSection(t,e,o))continue;return!0}}return!1},interfaces_:function(){return[]},getClass:function(){return xs}}),xs.isInLineSection=function(t,e,n){if(n.getParent()!==t.getParent())return!1;var i=n.getIndex();return i>=e[0]&&i<e[1]},e(Es.prototype,{setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(t){for(var e=t.iterator();e.hasNext();)this.inputIndex.add(e.next());for(var e=t.iterator();e.hasNext();){var n=new xs(this.inputIndex,this.outputIndex);n.setDistanceTolerance(this.distanceTolerance),n.simplify(e.next())}},interfaces_:function(){return[]},getClass:function(){return Es}}),e(Is.prototype,{getResultGeometry:function(){if(this.inputGeom.isEmpty())return this.inputGeom.copy();this.linestringMap=new te,this.inputGeom.apply(new Cs(this)),this.lineSimplifier.simplify(this.linestringMap.values());var t=new Ns(this.linestringMap).transform(this.inputGeom);return t},setDistanceTolerance:function(t){if(0>t)throw new i("Tolerance must be non-negative");this.lineSimplifier.setDistanceTolerance(t)},interfaces_:function(){return[]},getClass:function(){return Is}}),Is.simplify=function(t,e){var n=new Is(t);return n.setDistanceTolerance(e),n.getResultGeometry()},h(Ns,xe),e(Ns.prototype,{transformCoordinates:function(t,e){if(0===t.size())return null;if(e instanceof St){var n=this.linestringMap.get(e);return this.createCoordinateSequence(n.getResultCoordinates())}return xe.prototype.transformCoordinates.call(this,t,e)},interfaces_:function(){return[]},getClass:function(){return Ns}}),e(Cs.prototype,{filter:function(t){if(t instanceof St){var e=t;if(e.isEmpty())return null;var n=e.isClosed()?4:2,i=new vs(e,n);this.tps.linestringMap.put(e,i)}},interfaces_:function(){return[q]},getClass:function(){return Cs}}),Is.LineStringTransformer=Ns,Is.LineStringMapBuilderFilter=Cs;var Do=Object.freeze({DouglasPeuckerSimplifier:gs,TopologyPreservingSimplifier:Is});e(Ss.prototype,{splitAt:function(){if(1===arguments.length){var t=arguments[0],e=this.minimumLen/this.segLen;if(t.distance(this.seg.p0)<this.minimumLen)return this.splitPt=this.seg.pointAlong(e),null;if(t.distance(this.seg.p1)<this.minimumLen)return this.splitPt=Ss.pointAlongReverse(this.seg,e),null;this.splitPt=t}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=this.getConstrainedLength(n),o=r/this.segLen;i.equals2D(this.seg.p0)?this.splitPt=this.seg.pointAlong(o):this.splitPt=Ss.pointAlongReverse(this.seg,o)}},setMinimumLength:function(t){this.minimumLen=t},getConstrainedLength:function(t){return t<this.minimumLen?this.minimumLen:t},getSplitPoint:function(){return this.splitPt},interfaces_:function(){return[]},getClass:function(){return Ss}}),Ss.pointAlongReverse=function(t,e){var n=new g;return n.x=t.p1.x-e*(t.p1.x-t.p0.x),n.y=t.p1.y-e*(t.p1.y-t.p0.y),n},e(ws.prototype,{findSplitPoint:function(t,e){},interfaces_:function(){return[]},getClass:function(){return ws}}),e(Ls.prototype,{findSplitPoint:function(t,e){var n=t.getLineSegment(),i=n.getLength(),r=i/2,o=new Ss(n),s=Ls.projectedSplitPoint(t,e),a=2*s.distance(e)*.8,c=a;return c>r&&(c=r),o.setMinimumLength(c),o.splitAt(s),o.getSplitPoint()},interfaces_:function(){return[ws]},getClass:function(){return Ls}}),Ls.projectedSplitPoint=function(t,e){var n=t.getLineSegment(),i=n.project(e);return i},e(Rs.prototype,{interfaces_:function(){return[]},getClass:function(){return Rs}}),Rs.triArea=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)},Rs.isInCircleDDNormalized=function(t,e,n,i){var r=_.valueOf(t.x).selfSubtract(i.x),o=_.valueOf(t.y).selfSubtract(i.y),s=_.valueOf(e.x).selfSubtract(i.x),a=_.valueOf(e.y).selfSubtract(i.y),c=_.valueOf(n.x).selfSubtract(i.x),u=_.valueOf(n.y).selfSubtract(i.y),l=r.multiply(a).selfSubtract(s.multiply(o)),h=s.multiply(u).selfSubtract(c.multiply(a)),p=c.multiply(o).selfSubtract(r.multiply(u)),f=r.multiply(r).selfAdd(o.multiply(o)),d=s.multiply(s).selfAdd(a.multiply(a)),g=c.multiply(c).selfAdd(u.multiply(u)),y=f.selfMultiply(h).selfAdd(d.selfMultiply(p)).selfAdd(g.selfMultiply(l)),v=y.doubleValue()>0;return v},Rs.checkRobustInCircle=function(t,e,n,i){var r=Rs.isInCircleNonRobust(t,e,n,i),o=Rs.isInCircleDDSlow(t,e,n,i),s=Rs.isInCircleCC(t,e,n,i),a=ci.circumcentre(t,e,n);A.out.println("p radius diff a = "+Math.abs(i.distance(a)-t.distance(a))/t.distance(a)),r===o&&r===s||(A.out.println("inCircle robustness failure (double result = "+r+", DD result = "+o+", CC result = "+s+")"),A.out.println(se.toLineString(new Gt([t,e,n,i]))),A.out.println("Circumcentre = "+se.toPoint(a)+" radius = "+t.distance(a)),A.out.println("p radius diff a = "+Math.abs(i.distance(a)/t.distance(a)-1)),A.out.println("p radius diff b = "+Math.abs(i.distance(a)/e.distance(a)-1)),A.out.println("p radius diff c = "+Math.abs(i.distance(a)/n.distance(a)-1)),A.out.println())},Rs.isInCircleDDFast=function(t,e,n,i){var r=_.sqr(t.x).selfAdd(_.sqr(t.y)).selfMultiply(Rs.triAreaDDFast(e,n,i)),o=_.sqr(e.x).selfAdd(_.sqr(e.y)).selfMultiply(Rs.triAreaDDFast(t,n,i)),s=_.sqr(n.x).selfAdd(_.sqr(n.y)).selfMultiply(Rs.triAreaDDFast(t,e,i)),a=_.sqr(i.x).selfAdd(_.sqr(i.y)).selfMultiply(Rs.triAreaDDFast(t,e,n)),c=r.selfSubtract(o).selfAdd(s).selfSubtract(a),u=c.doubleValue()>0;return u},Rs.isInCircleCC=function(t,e,n,i){var r=ci.circumcentre(t,e,n),o=t.distance(r),s=i.distance(r)-o;return 0>=s},Rs.isInCircleNormalized=function(t,e,n,i){var r=t.x-i.x,o=t.y-i.y,s=e.x-i.x,a=e.y-i.y,c=n.x-i.x,u=n.y-i.y,l=r*a-s*o,h=s*u-c*a,p=c*o-r*u,f=r*r+o*o,d=s*s+a*a,g=c*c+u*u,y=f*h+d*p+g*l;return y>0},Rs.isInCircleDDSlow=function(t,e,n,i){var r=_.valueOf(i.x),o=_.valueOf(i.y),s=_.valueOf(t.x),a=_.valueOf(t.y),c=_.valueOf(e.x),u=_.valueOf(e.y),l=_.valueOf(n.x),h=_.valueOf(n.y),p=s.multiply(s).add(a.multiply(a)).multiply(Rs.triAreaDDSlow(c,u,l,h,r,o)),f=c.multiply(c).add(u.multiply(u)).multiply(Rs.triAreaDDSlow(s,a,l,h,r,o)),d=l.multiply(l).add(h.multiply(h)).multiply(Rs.triAreaDDSlow(s,a,c,u,r,o)),g=r.multiply(r).add(o.multiply(o)).multiply(Rs.triAreaDDSlow(s,a,c,u,l,h)),y=p.subtract(f).add(d).subtract(g),v=y.doubleValue()>0;return v},Rs.isInCircleNonRobust=function(t,e,n,i){var r=(t.x*t.x+t.y*t.y)*Rs.triArea(e,n,i)-(e.x*e.x+e.y*e.y)*Rs.triArea(t,n,i)+(n.x*n.x+n.y*n.y)*Rs.triArea(t,e,i)-(i.x*i.x+i.y*i.y)*Rs.triArea(t,e,n)>0;return r},Rs.isInCircleRobust=function(t,e,n,i){return Rs.isInCircleNormalized(t,e,n,i)},Rs.triAreaDDSlow=function(t,e,n,i,r,o){return n.subtract(t).multiply(o.subtract(e)).subtract(i.subtract(e).multiply(r.subtract(t)))},Rs.triAreaDDFast=function(t,e,n){var i=_.valueOf(e.x).selfSubtract(t.x).selfMultiply(_.valueOf(n.y).selfSubtract(t.y)),r=_.valueOf(e.y).selfSubtract(t.y).selfMultiply(_.valueOf(n.x).selfSubtract(t.x));return i.selfSubtract(r)},e(Ts.prototype,{circleCenter:function(t,e){var n=new Ts(this.getX(),this.getY()),i=this.bisector(n,t),r=this.bisector(t,e),o=new F(i,r),s=null;try{s=new Ts(o.getX(),o.getY())}catch(i){if(!(i instanceof w))throw i;A.err.println("a: "+n+"  b: "+t+"  c: "+e),A.err.println(i)}finally{}return s},dot:function(t){return this.p.x*t.getX()+this.p.y*t.getY()},magn:function(){return Math.sqrt(this.p.x*this.p.x+this.p.y*this.p.y)},getZ:function(){return this.p.z},bisector:function(t,e){var n=e.getX()-t.getX(),i=e.getY()-t.getY(),r=new F(t.getX()+n/2,t.getY()+i/2,1),o=new F(t.getX()-i+n/2,t.getY()+n+i/2,1);return new F(r,o)},equals:function(){if(1===arguments.length){var t=arguments[0];return this.p.x===t.getX()&&this.p.y===t.getY()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.p.distance(e.getCoordinate())<n}},getCoordinate:function(){return this.p},isInCircle:function(t,e,n){return Rs.isInCircleRobust(t.p,e.p,n.p,this.p)},interpolateZValue:function(t,e,n){var i=t.getX(),r=t.getY(),o=e.getX()-i,s=n.getX()-i,a=e.getY()-r,c=n.getY()-r,u=o*c-s*a,l=this.getX()-i,h=this.getY()-r,p=(c*l-s*h)/u,f=(-a*l+o*h)/u,d=t.getZ()+p*(e.getZ()-t.getZ())+f*(n.getZ()-t.getZ());return d},midPoint:function(t){var e=(this.p.x+t.getX())/2,n=(this.p.y+t.getY())/2,i=(this.p.z+t.getZ())/2;return new Ts(e,n,i)},rightOf:function(t){return this.isCCW(t.dest(),t.orig())},isCCW:function(t,e){return(t.p.x-this.p.x)*(e.p.y-this.p.y)-(t.p.y-this.p.y)*(e.p.x-this.p.x)>0},getX:function(){return this.p.x},crossProduct:function(t){return this.p.x*t.getY()-this.p.y*t.getX()},setZ:function(t){this.p.z=t},times:function(t){return new Ts(t*this.p.x,t*this.p.y)},cross:function(){return new Ts(this.p.y,(-this.p.x))},leftOf:function(t){return this.isCCW(t.orig(),t.dest())},toString:function(){return"POINT ("+this.p.x+" "+this.p.y+")"},sub:function(t){return new Ts(this.p.x-t.getX(),this.p.y-t.getY())},getY:function(){return this.p.y},classify:function(t,e){var n=this,i=e.sub(t),r=n.sub(t),o=i.crossProduct(r);return o>0?Ts.LEFT:0>o?Ts.RIGHT:i.getX()*r.getX()<0||i.getY()*r.getY()<0?Ts.BEHIND:i.magn()<r.magn()?Ts.BEYOND:t.equals(n)?Ts.ORIGIN:e.equals(n)?Ts.DESTINATION:Ts.BETWEEN},sum:function(t){return new Ts(this.p.x+t.getX(),this.p.y+t.getY())},distance:function(t,e){return Math.sqrt(Math.pow(e.getX()-t.getX(),2)+Math.pow(e.getY()-t.getY(),2))},circumRadiusRatio:function(t,e){var n=this.circleCenter(t,e),i=this.distance(n,t),r=this.distance(this,t),o=this.distance(t,e);return r>o&&(r=o),o=this.distance(e,this),r>o&&(r=o),i/r},interfaces_:function(){return[]},getClass:function(){return Ts}}),Ts.interpolateZ=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=e.distance(n),r=t.distance(e),o=n.z-e.z,s=e.z+o*(r/i);return s}if(4===arguments.length){var a=arguments[0],c=arguments[1],u=arguments[2],l=arguments[3],h=c.x,p=c.y,f=u.x-h,d=l.x-h,g=u.y-p,y=l.y-p,v=f*y-d*g,m=a.x-h,b=a.y-p,x=(y*m-d*b)/v,S=(-g*m+f*b)/v,_=c.z+x*(u.z-c.z)+S*(l.z-c.z);return _}},Ts.LEFT=0,Ts.RIGHT=1,Ts.BEYOND=2,Ts.BEHIND=3,Ts.BETWEEN=4,Ts.ORIGIN=5,Ts.DESTINATION=6,h(Ps,Ts),e(Ps.prototype,{getConstraint:function(){return this.constraint},setOnConstraint:function(t){this._isOnConstraint=t},merge:function(t){t._isOnConstraint&&(this._isOnConstraint=!0,this.constraint=t.constraint)},isOnConstraint:function(){return this._isOnConstraint},setConstraint:function(t){this._isOnConstraint=!0,this.constraint=t},interfaces_:function(){return[]},getClass:function(){return Ps}}),e(bs.prototype,{equalsNonOriented:function(t){return!!this.equalsOriented(t)||!!this.equalsOriented(t.sym())},toLineSegment:function(){return new ce(this.vertex.getCoordinate(),this.dest().getCoordinate())},dest:function(){return this.sym().orig()},oNext:function(){return this.next},equalsOriented:function(t){return!(!this.orig().getCoordinate().equals2D(t.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(t.dest().getCoordinate()))},dNext:function(){return this.sym().oNext().sym()},lPrev:function(){return this.next.sym()},rPrev:function(){return this.sym().oNext()},rot:function(){return this._rot},oPrev:function(){return this._rot.next._rot},sym:function(){return this._rot._rot},setOrig:function(t){this.vertex=t},lNext:function(){return this.invRot().oNext().rot()},getLength:function(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())},invRot:function(){return this._rot.sym()},setDest:function(t){this.sym().setOrig(t)},setData:function(t){this.data=t},getData:function(){return this.data},"delete":function(){this._rot=null},orig:function(){return this.vertex},rNext:function(){return this._rot.next.invRot()},toString:function(){var t=this.vertex.getCoordinate(),e=this.dest().getCoordinate();return se.toLineString(t,e)},isLive:function(){return null!==this._rot},getPrimary:function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},dPrev:function(){return this.invRot().oNext().invRot()},setNext:function(t){this.next=t},interfaces_:function(){return[]},getClass:function(){return bs}}),bs.makeEdge=function(t,e){var n=new bs,i=new bs,r=new bs,o=new bs;n._rot=i,i._rot=r,r._rot=o,o._rot=n,n.setNext(n),i.setNext(o),r.setNext(r),o.setNext(i);var s=n;return s.setOrig(t),s.setDest(e),s},bs.swap=function(t){var e=t.oPrev(),n=t.sym().oPrev();bs.splice(t,e),bs.splice(t.sym(),n),bs.splice(t,e.lNext()),bs.splice(t.sym(),n.lNext()),t.setOrig(e.dest()),t.setDest(n.dest())},bs.splice=function(t,e){var n=t.oNext().rot(),i=e.oNext().rot(),r=e.oNext(),o=t.oNext(),s=i.oNext(),a=n.oNext();t.setNext(r),e.setNext(o),n.setNext(s),i.setNext(a)},bs.connect=function(t,e){var n=bs.makeEdge(t.dest(),e.orig());return bs.splice(n,t.lNext()),bs.splice(n.sym(),e),n},e(Os.prototype,{insertSite:function(t){var e=this.subdiv.locate(t);if(this.subdiv.isVertexOfEdge(e,t))return e;this.subdiv.isOnEdge(e,t.getCoordinate())&&(e=e.oPrev(),this.subdiv.delete(e.oNext()));var n=this.subdiv.makeEdge(e.orig(),t);bs.splice(n,e);var i=n;do n=this.subdiv.connect(e,n.sym()),e=n.oPrev();while(e.lNext()!==i);for(;;){var r=e.oPrev();if(r.dest().rightOf(e)&&t.isInCircle(e.orig(),r.dest(),e.dest()))bs.swap(e),e=e.oPrev();else{if(e.oNext()===i)return n;e=e.oNext().lPrev()}}},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},interfaces_:function(){return[]},getClass:function(){return Os}}),e(_s.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return _s}}),e(Ms.prototype,{init:function(){this.lastEdge=this.findEdge()},locate:function(t){this.lastEdge.isLive()||this.init();var e=this.subdiv.locateFromEdge(t,this.lastEdge);return this.lastEdge=e,e},findEdge:function(){var t=this.subdiv.getEdges();return t.iterator().next()},interfaces_:function(){return[_s]},getClass:function(){return Ms}}),h(Ds,l),e(Ds.prototype,{getSegment:function(){return this.seg},interfaces_:function(){return[]},getClass:function(){return Ds}}),Ds.msgWithSpatial=function(t,e){return null!==e?t+" [ "+e+" ]":t},e(As.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return As}}),e(Fs.prototype,{getTriangleVertices:function(t){var e=new Bs;return this.visitTriangles(e,t),e.getTriangleVertices()},isFrameVertex:function(t){return!!t.equals(this.frameVertex[0])||(!!t.equals(this.frameVertex[1])||!!t.equals(this.frameVertex[2]))},isVertexOfEdge:function(t,e){return!(!e.equals(t.orig(),this.tolerance)&&!e.equals(t.dest(),this.tolerance))},connect:function(t,e){var n=bs.connect(t,e);return this.quadEdges.add(n),n},getVoronoiCellPolygon:function(t,e){var n=new I,i=t;do{var r=t.rot().orig().getCoordinate();n.add(r),t=t.oPrev()}while(t!==i);var o=new N;o.addAll(n,!1),o.closeRing(),o.size()<4&&(A.out.println(o),o.add(o.get(o.size()-1),!0));var s=o.toCoordinateArray(),a=e.createPolygon(e.createLinearRing(s),null),c=i.orig();return a.setUserData(c.getCoordinate()),a},setLocator:function(t){this.locator=t},initSubdiv:function(){var t=this.makeEdge(this.frameVertex[0],this.frameVertex[1]),e=this.makeEdge(this.frameVertex[1],this.frameVertex[2]);bs.splice(t.sym(),e);var n=this.makeEdge(this.frameVertex[2],this.frameVertex[0]);return bs.splice(e.sym(),n),bs.splice(n.sym(),t),t},isFrameBorderEdge:function(t){var e=new Array(3).fill(null);Fs.getTriangleEdges(t,e);var n=new Array(3).fill(null);Fs.getTriangleEdges(t.sym(),n);var i=t.lNext().dest();if(this.isFrameVertex(i))return!0;var r=t.sym().lNext().dest();return!!this.isFrameVertex(r)},makeEdge:function(t,e){var n=bs.makeEdge(t,e);return this.quadEdges.add(n),n},visitTriangles:function(t,e){this.visitedKey++;var n=new pe;n.push(this.startingEdge);for(var i=new J;!n.empty();){var r=n.pop();if(!i.contains(r)){var o=this.fetchTriangleToVisit(r,n,e,i);null!==o&&t.visit(o)}}},isFrameEdge:function(t){return!(!this.isFrameVertex(t.orig())&&!this.isFrameVertex(t.dest()))},isOnEdge:function(t,e){this.seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate());var n=this.seg.distance(e);return n<this.edgeCoincidenceTolerance},getEnvelope:function(){return new C(this.frameEnv)},createFrame:function(t){var e=t.getWidth(),n=t.getHeight(),i=0;i=e>n?10*e:10*n,this.frameVertex[0]=new Ts((t.getMaxX()+t.getMinX())/2,t.getMaxY()+i),this.frameVertex[1]=new Ts(t.getMinX()-i,t.getMinY()-i),this.frameVertex[2]=new Ts(t.getMaxX()+i,t.getMinY()-i),this.frameEnv=new C(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate()),this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())},getTriangleCoordinates:function(t){var e=new zs;return this.visitTriangles(e,t),e.getTriangles()},getVertices:function(t){for(var e=new J,n=this.quadEdges.iterator();n.hasNext();){var i=n.next(),r=i.orig();!t&&this.isFrameVertex(r)||e.add(r);var o=i.dest();!t&&this.isFrameVertex(o)||e.add(o)}return e},fetchTriangleToVisit:function(t,e,n,i){var r=t,o=0,s=!1;do{this.triEdges[o]=r,this.isFrameEdge(r)&&(s=!0);var a=r.sym();i.contains(a)||e.push(a),i.add(r),o++,r=r.lNext()}while(r!==t);return s&&!n?null:this.triEdges},getEdges:function(){if(0===arguments.length)return this.quadEdges;if(1===arguments.length){for(var t=arguments[0],e=this.getPrimaryEdges(!1),n=new Array(e.size()).fill(null),i=0,r=e.iterator();r.hasNext();){var o=r.next();n[i++]=t.createLineString([o.orig().getCoordinate(),o.dest().getCoordinate()])}return t.createMultiLineString(n)}},getVertexUniqueEdges:function(t){for(var e=new I,n=new J,i=this.quadEdges.iterator();i.hasNext();){var r=i.next(),o=r.orig();n.contains(o)||(n.add(o),!t&&this.isFrameVertex(o)||e.add(r));var s=r.sym(),a=s.orig();n.contains(a)||(n.add(a),!t&&this.isFrameVertex(a)||e.add(s))}return e},getTriangleEdges:function(t){var e=new qs;return this.visitTriangles(e,t),e.getTriangleEdges()},getPrimaryEdges:function(t){this.visitedKey++;var e=new I,n=new pe;n.push(this.startingEdge);for(var i=new J;!n.empty();){var r=n.pop();if(!i.contains(r)){var o=r.getPrimary();!t&&this.isFrameEdge(o)||e.add(o),n.push(r.oNext()),n.push(r.sym().oNext()),i.add(r),i.add(r.sym())}}return e},"delete":function(t){bs.splice(t,t.oPrev()),bs.splice(t.sym(),t.sym().oPrev());var e=t.sym(),n=t.rot(),i=t.rot().sym();this.quadEdges.remove(t),this.quadEdges.remove(e),this.quadEdges.remove(n),this.quadEdges.remove(i),t.delete(),e.delete(),n.delete(),i.delete()},locateFromEdge:function(t,e){for(var n=0,i=this.quadEdges.size(),r=e;;){if(n++,n>i)throw new Ds(r.toLineSegment());if(t.equals(r.orig())||t.equals(r.dest()))break;if(t.rightOf(r))r=r.sym();else if(t.rightOf(r.oNext())){if(t.rightOf(r.dPrev()))break;r=r.dPrev()}else r=r.oNext()}return r},getTolerance:function(){return this.tolerance},getVoronoiCellPolygons:function(t){this.visitTriangles(new Gs,!0);for(var e=new I,n=this.getVertexUniqueEdges(!1),i=n.iterator();i.hasNext();){var r=i.next();e.add(this.getVoronoiCellPolygon(r,t))}return e},getVoronoiDiagram:function(t){var e=this.getVoronoiCellPolygons(t);return t.createGeometryCollection(ie.toGeometryArray(e))},getTriangles:function(t){for(var e=this.getTriangleCoordinates(!1),n=new Array(e.size()).fill(null),i=0,r=e.iterator();r.hasNext();){var o=r.next();n[i++]=t.createPolygon(t.createLinearRing(o),null)}return t.createGeometryCollection(n)},insertSite:function(t){var e=this.locate(t);if(t.equals(e.orig(),this.tolerance)||t.equals(e.dest(),this.tolerance))return e;var n=this.makeEdge(e.orig(),t);bs.splice(n,e);var i=n;do n=this.connect(e,n.sym()),e=n.oPrev();while(e.lNext()!==i);return i},locate:function(){if(1===arguments.length){if(arguments[0]instanceof Ts){var t=arguments[0];return this.locator.locate(t)}if(arguments[0]instanceof g){var e=arguments[0];return this.locator.locate(new Ts(e))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=this.locator.locate(new Ts(n));if(null===r)return null;var o=r;r.dest().getCoordinate().equals2D(n)&&(o=r.sym());var s=o;do{if(s.dest().getCoordinate().equals2D(i))return s;s=s.oNext()}while(s!==o);return null}},interfaces_:function(){return[]},getClass:function(){return Fs}}),Fs.getTriangleEdges=function(t,e){if(e[0]=t,e[1]=e[0].lNext(),e[2]=e[1].lNext(),e[2].lNext()!==e[0])throw new i("Edges do not form a triangle")},e(Gs.prototype,{visit:function(t){for(var e=t[0].orig().getCoordinate(),n=t[1].orig().getCoordinate(),i=t[2].orig().getCoordinate(),r=ci.circumcentre(e,n,i),o=new Ts(r),s=0;3>s;s++)t[s].rot().setOrig(o)},interfaces_:function(){return[As]},getClass:function(){return Gs}}),e(qs.prototype,{getTriangleEdges:function(){return this.triList},visit:function(t){this.triList.add(t.clone())},interfaces_:function(){return[As]},getClass:function(){return qs}}),e(Bs.prototype,{visit:function(t){this.triList.add([t[0].orig(),t[1].orig(),t[2].orig()])},getTriangleVertices:function(){return this.triList},interfaces_:function(){return[As]},getClass:function(){return Bs}}),e(zs.prototype,{checkTriangleSize:function(t){var e="";t.length>=2?e=se.toLineString(t[0],t[1]):t.length>=1&&(e=se.toPoint(t[0]))},visit:function(t){this.coordList.clear();for(var e=0;3>e;e++){var n=t[e].orig();this.coordList.add(n.getCoordinate())}if(this.coordList.size()>0){this.coordList.closeRing();var i=this.coordList.toCoordinateArray();if(4!==i.length)return null;this.triCoords.add(i)}},getTriangles:function(){return this.triCoords},interfaces_:function(){return[As]},getClass:function(){return zs}}),Fs.TriangleCircumcentreVisitor=Gs,Fs.TriangleEdgesListVisitor=qs,Fs.TriangleVertexListVisitor=Bs,Fs.TriangleCoordinatesVisitor=zs,Fs.EDGE_COINCIDENCE_TOL_FACTOR=1e3,e(Vs.prototype,{getLineSegment:function(){return this.ls},getEndZ:function(){var t=this.ls.getCoordinate(1);return t.z},getStartZ:function(){var t=this.ls.getCoordinate(0);return t.z},intersection:function(t){return this.ls.intersection(t.getLineSegment())},getStart:function(){return this.ls.getCoordinate(0)},getEnd:function(){return this.ls.getCoordinate(1)},getEndY:function(){var t=this.ls.getCoordinate(1);return t.y},getStartX:function(){var t=this.ls.getCoordinate(0);return t.x},equalsTopo:function(t){return this.ls.equalsTopo(t.getLineSegment())},getStartY:function(){var t=this.ls.getCoordinate(0);return t.y},setData:function(t){this.data=t},getData:function(){return this.data},getEndX:function(){var t=this.ls.getCoordinate(1);return t.x},toString:function(){return this.ls.toString()},interfaces_:function(){return[]},getClass:function(){return Vs}}),e(ks.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return ks}}),e(Ys.prototype,{isRepeated:function(){return this.count>1},getRight:function(){return this.right},getCoordinate:function(){return this.p},setLeft:function(t){this.left=t},getX:function(){return this.p.x},getData:function(){return this.data},getCount:function(){return this.count},getLeft:function(){return this.left},getY:function(){return this.p.y},increment:function(){this.count=this.count+1},setRight:function(t){this.right=t},interfaces_:function(){return[]},getClass:function(){return Ys}}),e(Us.prototype,{insert:function(){if(1===arguments.length){var t=arguments[0];return this.insert(t,null)}if(2===arguments.length){var e=arguments[0],n=arguments[1];if(null===this.root)return this.root=new Ys(e,n),this.root;if(this.tolerance>0){var i=this.findBestMatchNode(e);if(null!==i)return i.increment(),i}return this.insertExact(e,n)}},query:function(){var t=arguments,e=this;if(1===arguments.length){var n=arguments[0],i=new I;return this.query(n,i),i}if(2===arguments.length)if(arguments[0]instanceof C&&R(arguments[1],y))!function(){var n=t[0],i=t[1];e.queryNode(e.root,n,!0,{interfaces_:function(){return[ks]},visit:function(t){i.add(t)}})}();else if(arguments[0]instanceof C&&R(arguments[1],ks)){var r=arguments[0],o=arguments[1];this.queryNode(this.root,r,!0,o)}},queryNode:function(t,e,n,i){if(null===t)return null;var r=null,o=null,s=null;n?(r=e.getMinX(),o=e.getMaxX(),s=t.getX()):(r=e.getMinY(),o=e.getMaxY(),s=t.getY());var a=s>r,c=o>=s;a&&this.queryNode(t.getLeft(),e,!n,i),e.contains(t.getCoordinate())&&i.visit(t),c&&this.queryNode(t.getRight(),e,!n,i)},findBestMatchNode:function(t){var e=new Xs(t,this.tolerance);return this.query(e.queryEnvelope(),e),e.getNode()},isEmpty:function(){return null===this.root},insertExact:function(t,e){for(var n=this.root,i=this.root,r=!0,o=!0;null!==n;){if(null!==n){var s=t.distance(n.getCoordinate())<=this.tolerance;if(s)return n.increment(),n}o=r?t.x<n.getX():t.y<n.getY(),i=n,n=o?n.getLeft():n.getRight(),r=!r}this.numberOfNodes=this.numberOfNodes+1;var a=new Ys(t,e);return o?i.setLeft(a):i.setRight(a),a},interfaces_:function(){return[]},getClass:function(){return Us}}),Us.toCoordinates=function(){if(1===arguments.length){var t=arguments[0];return Us.toCoordinates(t,!1)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new N,r=e.iterator();r.hasNext();)for(var o=r.next(),s=n?o.getCount():1,a=0;s>a;a++)i.add(o.getCoordinate(),!0);return i.toCoordinateArray()}},e(Xs.prototype,{visit:function(t){var e=this.p.distance(t.getCoordinate()),n=e<=this.tolerance;if(!n)return null;var i=!1;(null===this.matchNode||e<this.matchDist||null!==this.matchNode&&e===this.matchDist&&t.getCoordinate().compareTo(this.matchNode.getCoordinate())<1)&&(i=!0),i&&(this.matchNode=t,this.matchDist=e)},queryEnvelope:function(){var t=new C(this.p);return t.expandBy(this.tolerance),t},getNode:function(){return this.matchNode},interfaces_:function(){return[ks];
},getClass:function(){return Xs}}),Us.BestMatchVisitor=Xs,e(Hs.prototype,{getInitialVertices:function(){return this.initialVertices},getKDT:function(){return this.kdt},enforceConstraints:function(){this.addConstraintVertices();var t=0,e=0;do e=this.enforceGabriel(this.segments),t++;while(e>0&&t<Hs.MAX_SPLIT_ITER)},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},getVertexFactory:function(){return this.vertexFactory},getPointArray:function(){for(var t=new Array(this.initialVertices.size()+this.segVertices.size()).fill(null),e=0,n=this.initialVertices.iterator();n.hasNext();){var i=n.next();t[e++]=i.getCoordinate()}for(var r=this.segVertices.iterator();r.hasNext();){var i=r.next();t[e++]=i.getCoordinate()}return t},setConstraints:function(t,e){this.segments=t,this.segVertices=e},computeConvexHull:function(){var t=new ie,e=this.getPointArray(),n=new me(e,t);this.convexHull=n.getConvexHull()},addConstraintVertices:function(){this.computeConvexHull(),this.insertSites(this.segVertices)},findNonGabrielPoint:function(t){var e=t.getStart(),n=t.getEnd(),i=new g((e.x+n.x)/2,(e.y+n.y)/2),o=e.distance(i),s=new C(i);s.expandBy(o);for(var a=this.kdt.query(s),c=null,u=r.MAX_VALUE,l=a.iterator();l.hasNext();){var h=l.next(),p=h.getCoordinate();if(!p.equals2D(e)&&!p.equals2D(n)){var f=i.distance(p);if(o>f){var d=f;(null===c||u>d)&&(c=p,u=d)}}}return c},getConstraintSegments:function(){return this.segments},setSplitPointFinder:function(t){this.splitFinder=t},getConvexHull:function(){return this.convexHull},getTolerance:function(){return this.tolerance},enforceGabriel:function(t){for(var e=new I,n=0,i=new I,r=t.iterator();r.hasNext();){var o=r.next(),s=this.findNonGabrielPoint(o);if(null!==s){this.splitPt=this.splitFinder.findSplitPoint(o,s);var a=this.createVertex(this.splitPt,o),c=(this.insertSite(a),new Vs(o.getStartX(),o.getStartY(),o.getStartZ(),a.getX(),a.getY(),a.getZ(),o.getData())),u=new Vs(a.getX(),a.getY(),a.getZ(),o.getEndX(),o.getEndY(),o.getEndZ(),o.getData());e.add(c),e.add(u),i.add(o),n+=1}}return t.removeAll(i),t.addAll(e),n},createVertex:function(){if(1===arguments.length){var t=arguments[0],e=null;return e=null!==this.vertexFactory?this.vertexFactory.createVertex(t,null):new Ps(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=null;return e=null!==this.vertexFactory?this.vertexFactory.createVertex(n,i):new Ps(n),e.setOnConstraint(!0),e}},getSubdivision:function(){return this.subdiv},computeBoundingBox:function(){var t=Hs.computeVertexEnvelope(this.initialVertices),e=Hs.computeVertexEnvelope(this.segVertices),n=new C(t);n.expandToInclude(e);var i=.2*n.getWidth(),r=.2*n.getHeight(),o=Math.max(i,r);this.computeAreaEnv=new C(n),this.computeAreaEnv.expandBy(o)},setVertexFactory:function(t){this.vertexFactory=t},formInitialDelaunay:function(){this.computeBoundingBox(),this.subdiv=new Fs(this.computeAreaEnv,this.tolerance),this.subdiv.setLocator(new Ms(this.subdiv)),this.incDel=new Os(this.subdiv),this.insertSites(this.initialVertices)},insertSite:function(){if(arguments[0]instanceof Ps){var t=arguments[0],e=this.kdt.insert(t.getCoordinate(),t);if(e.isRepeated()){var n=e.getData();return n.merge(t),n}return this.incDel.insertSite(t),t}if(arguments[0]instanceof g){var i=arguments[0];this.insertSite(this.createVertex(i))}},interfaces_:function(){return[]},getClass:function(){return Hs}}),Hs.computeVertexEnvelope=function(t){for(var e=new C,n=t.iterator();n.hasNext();){var i=n.next();e.expandToInclude(i.getCoordinate())}return e},Hs.MAX_SPLIT_ITER=99,e(Ws.prototype,{create:function(){if(null!==this.subdiv)return null;var t=Ws.envelope(this.siteCoords),e=Ws.toVertices(this.siteCoords);this.subdiv=new Fs(t,this.tolerance);var n=new Os(this.subdiv);n.insertSites(e)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof B){var t=arguments[0];this.siteCoords=Ws.extractUniqueCoordinates(t)}else if(R(arguments[0],v)){var e=arguments[0];this.siteCoords=Ws.unique(H.toCoordinateArray(e))}},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},interfaces_:function(){return[]},getClass:function(){return Ws}}),Ws.extractUniqueCoordinates=function(t){if(null===t)return new N;var e=t.getCoordinates();return Ws.unique(e)},Ws.envelope=function(t){for(var e=new C,n=t.iterator();n.hasNext();){var i=n.next();e.expandToInclude(i)}return e},Ws.unique=function(t){var e=H.copyDeep(t);ut.sort(e);var n=new N(e,(!1));return n},Ws.toVertices=function(t){for(var e=new I,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Ts(i))}return e},e(js.prototype,{createSiteVertices:function(t){for(var e=new I,n=t.iterator();n.hasNext();){var i=n.next();this.constraintVertexMap.containsKey(i)||e.add(new Ps(i))}return e},create:function(){if(null!==this.subdiv)return null;var t=Ws.envelope(this.siteCoords),e=new I;null!==this.constraintLines&&(t.expandToInclude(this.constraintLines.getEnvelopeInternal()),this.createVertices(this.constraintLines),e=js.createConstraintSegments(this.constraintLines));var n=this.createSiteVertices(this.siteCoords),i=new Hs(n,this.tolerance);i.setConstraints(e,new I(this.constraintVertexMap.values())),i.formInitialDelaunay(),i.enforceConstraints(),this.subdiv=i.getSubdivision()},setTolerance:function(t){this.tolerance=t},setConstraints:function(t){this.constraintLines=t},setSites:function(t){this.siteCoords=Ws.extractUniqueCoordinates(t)},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},createVertices:function(t){for(var e=t.getCoordinates(),n=0;n<e.length;n++){var i=new Ps(e[n]);this.constraintVertexMap.put(e[n],i)}},interfaces_:function(){return[]},getClass:function(){return js}}),js.createConstraintSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=kn.getLines(t),n=new I,i=e.iterator();i.hasNext();){var r=i.next();js.createConstraintSegments(r,n)}return n}if(2===arguments.length)for(var o=arguments[0],s=arguments[1],a=o.getCoordinates(),i=1;i<a.length;i++)s.add(new Vs(a[i-1],a[i]))},e(Ks.prototype,{create:function(){if(null!==this.subdiv)return null;var t=Ws.envelope(this.siteCoords);this.diagramEnv=t;var e=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight());this.diagramEnv.expandBy(e),null!==this.clipEnv&&this.diagramEnv.expandToInclude(this.clipEnv);var n=Ws.toVertices(this.siteCoords);this.subdiv=new Fs(t,this.tolerance);var i=new Os(this.subdiv);i.insertSites(n)},getDiagram:function(t){this.create();var e=this.subdiv.getVoronoiDiagram(t);return Ks.clipGeometryCollection(e,this.diagramEnv)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof B){var t=arguments[0];this.siteCoords=Ws.extractUniqueCoordinates(t)}else if(R(arguments[0],v)){var e=arguments[0];this.siteCoords=Ws.unique(H.toCoordinateArray(e))}},setClipEnvelope:function(t){this.clipEnv=t},getSubdivision:function(){return this.create(),this.subdiv},interfaces_:function(){return[]},getClass:function(){return Ks}}),Ks.clipGeometryCollection=function(t,e){for(var n=t.getFactory().toGeometry(e),i=new I,r=0;r<t.getNumGeometries();r++){var o=t.getGeometryN(r),s=null;e.contains(o.getEnvelopeInternal())?s=o:e.intersects(o.getEnvelopeInternal())&&(s=n.intersection(o),s.setUserData(o.getUserData())),null===s||s.isEmpty()||i.add(s)}return t.getFactory().createGeometryCollection(ie.toGeometryArray(i))};var ko=Object.freeze({ConformingDelaunayTriangulationBuilder:js,DelaunayTriangulationBuilder:Ws,VoronoiDiagramBuilder:Ks});e(Zs.prototype,{interfaces_:function(){return[]},getClass:function(){return Zs}}),Zs.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ii.createEmptyResult(ii.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),si.overlayOp(t,e,ii.UNION)},e(B.prototype,{equalsTopo:function(t){return!!this.getEnvelopeInternal().equals(t.getEnvelopeInternal())&&Yr.relate(this,t).isEquals(this.getDimension(),t.getDimension())},union:function(){if(0===arguments.length)return jr.union(this);if(1===arguments.length){var t=arguments[0];return Zs.union(this,t)}},isValid:function(){return ls.isValid(this)},intersection:function(t){if(this.isEmpty()||t.isEmpty())return ii.createEmptyResult(ii.INTERSECTION,this,t,this.factory);if(this.isGeometryCollection()){var e=t;return hn.map(this,{interfaces_:function(){return[MapOp]},map:function(t){return t.intersection(e)}})}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),si.overlayOp(this,t,ii.INTERSECTION)},covers:function(t){return Yr.covers(this,t)},coveredBy:function(t){return Yr.coveredBy(this,t)},touches:function(t){return Yr.touches(this,t)},intersects:function(t){return Yr.intersects(this,t)},within:function(t){return Yr.within(this,t)},overlaps:function(t){return Yr.overlaps(this,t)},disjoint:function(t){return Yr.disjoint(this,t)},crosses:function(t){return Yr.crosses(this,t)},buffer:function(){if(1===arguments.length){var t=arguments[0];return sr.bufferOp(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return sr.bufferOp(this,e,n)}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];return sr.bufferOp(this,i,r,o)}},convexHull:function(){return new me(this).getConvexHull()},relate:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return Yr.relate.apply(Yr,[this].concat(e))},getCentroid:function(){if(this.isEmpty())return this.factory.createPoint();var t=ge.getCentroid(this);return this.createPointFromInternalCoord(t,this)},getInteriorPoint:function(){if(this.isEmpty())return this.factory.createPoint();var t=null,e=this.getDimension();if(0===e){var n=new li(this);t=n.getInteriorPoint()}else if(1===e){var n=new ui(this);t=n.getInteriorPoint()}else{var n=new oi(this);t=n.getInteriorPoint()}return this.createPointFromInternalCoord(t,this)},symDifference:function(t){if(this.isEmpty()||t.isEmpty()){if(this.isEmpty()&&t.isEmpty())return ii.createEmptyResult(ii.SYMDIFFERENCE,this,t,this.factory);if(this.isEmpty())return t.copy();if(t.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),si.overlayOp(this,t,ii.SYMDIFFERENCE)},createPointFromInternalCoord:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},toText:function(){var t=new se;return t.write(this)},toString:function(){this.toText()},contains:function(t){return Yr.contains(this,t)},difference:function(t){return this.isEmpty()?ii.createEmptyResult(ii.DIFFERENCE,this,t,this.factory):t.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),si.overlayOp(this,t,ii.DIFFERENCE))},isSimple:function(){var t=new Gi(this);return t.isSimple()},isWithinDistance:function(t,e){var n=this.getEnvelopeInternal().distance(t.getEnvelopeInternal());return!(n>e)&&hr.isWithinDistance(this,t,e)},distance:function(t){return hr.distance(this,t)},isEquivalentClass:function(t){return this.getClass()===t.getClass()}});var Bo="1.1.2 (248dab8)";t.version=Bo,t.algorithm=go,t.densify=yo,t.dissolve=vo,t.geom=po,t.index=xo,t.io=Co,t.noding=Io,t.operation=Ao,t.precision=Fo,t.simplify=Do,t.triangulate=ko})},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(18),o=n(26),s=function(t){function AsyncSubject(){t.apply(this,arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}return i(AsyncSubject,t),AsyncSubject.prototype._subscribe=function(e){return this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),o.Subscription.EMPTY):this.hasError?(e.error(this.thrownError),o.Subscription.EMPTY):t.prototype._subscribe.call(this,e)},AsyncSubject.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},AsyncSubject.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},AsyncSubject}(r.Subject);e.AsyncSubject=s},,function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(18),o=n(598),s=n(412),a=function(t){function ReplaySubject(e,n,i){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY),t.call(this),this.scheduler=i,this._events=[],this._bufferSize=e<1?1:e,this._windowTime=n<1?1:n}return i(ReplaySubject,t),ReplaySubject.prototype.next=function(e){var n=this._getNow();this._events.push(new c(n,e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},ReplaySubject.prototype._subscribe=function(e){var n=this._trimBufferThenGetEvents(),i=this.scheduler;i&&e.add(e=new s.ObserveOnSubscriber(e,i));for(var r=n.length,o=0;o<r&&!e.closed;o++)e.next(n[o].value);return t.prototype._subscribe.call(this,e)},ReplaySubject.prototype._getNow=function(){return(this.scheduler||o.queue).now()},ReplaySubject.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,i=this._events,r=i.length,o=0;o<r&&!(t-i[o].time<n);)o++;return r>e&&(o=Math.max(o,r-e)),o>0&&i.splice(0,o),i},ReplaySubject}(r.Subject);e.ReplaySubject=a;var c=function(){function ReplayEvent(t,e){this.time=t,this.value=e}return ReplayEvent}()},,,,,function(t,e){"use strict";var n=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},i=function(t){function ArgumentOutOfRangeError(){var e=t.call(this,"argument out of range");this.name=e.name="ArgumentOutOfRangeError",this.stack=e.stack,this.message=e.message}return n(ArgumentOutOfRangeError,t),ArgumentOutOfRangeError}(Error);e.ArgumentOutOfRangeError=i},function(t,e){"use strict";function isDate(t){return t instanceof Date&&!isNaN(+t)}e.isDate=isDate},function(t,e,n){var i=n(116).coordEach;t.exports=function(t){var e=[1/0,1/0,-(1/0),-(1/0)];return i(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}},function(t,e,n){var i=n(212).getCoord;t.exports=function(t,e){var n=Math.PI/180,r=180/Math.PI,o=i(t),s=i(e),a=n*o[0],c=n*s[0],u=n*o[1],l=n*s[1],h=Math.sin(c-a)*Math.cos(l),p=Math.cos(u)*Math.sin(l)-Math.sin(u)*Math.cos(l)*Math.cos(c-a),f=r*Math.atan2(h,p);return f}},function(t,e,n){var i=n(212).getCoord,r=n(10),o=r.point,s=r.distanceToRadians;t.exports=function(t,e,n,r){var a=Math.PI/180,c=180/Math.PI,u=i(t),l=a*u[0],h=a*u[1],p=a*n,f=s(e,r),d=Math.asin(Math.sin(h)*Math.cos(f)+Math.cos(h)*Math.sin(f)*Math.cos(p)),g=l+Math.atan2(Math.sin(p)*Math.sin(f)*Math.cos(h),Math.cos(f)-Math.sin(h)*Math.sin(d));return o([c*g,c*d])}},function(t,e){function getCoord(t){if(Array.isArray(t)&&"number"==typeof t[0]&&"number"==typeof t[1])return t;if(t){if("Feature"===t.type&&t.geometry&&"Point"===t.geometry.type&&Array.isArray(t.geometry.coordinates))return t.geometry.coordinates;if("Point"===t.type&&Array.isArray(t.coordinates))return t.coordinates}throw new Error("A coordinate, feature, or point geometry is required")}function geojsonType(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function featureOf(t,e,n){if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function collectionOf(t,e,n){if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var i=0;i<t.features.length;i++){var r=t.features[i];if(!r||"Feature"!==r.type||!r.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!r.geometry||r.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+r.geometry.type)}}t.exports.geojsonType=geojsonType,t.exports.collectionOf=collectionOf,t.exports.featureOf=featureOf,t.exports.getCoord=getCoord},,,,,function(t,e,n){"use strict";var i=n(1),r=n(72),o=n(20),s=n(432),a=function(){function EventService(t,e){this._http=t,this._converter=e,this.type=o.ModelType.Event,this.API_KEY="YGHTYGM3HPQGRQDLXBXH"}return EventService.prototype.get=function(t){var e=this,n=Math.ceil(t.getLargestLength()/1e3),i="https://www.eventbriteapi.com/v3/events/search/?token="+this.API_KEY+"&location.latitude="+t.lat+"&location.longitude="+t.lng+"&location.within="+n+"km&expand=venue";return this._http.get(i,{}).map(this.extractData).map(function(t){return t.events}).map(function(t){return e._converter.convertToBase(t)}).toPromise()},EventService.prototype.getOne=function(t){},EventService.prototype.add=function(t){},EventService.prototype.update=function(t){},EventService.prototype.remove=function(t){},EventService.prototype.extractData=function(t){var e=t.json();return e||{}},EventService=__decorate([i.Injectable(),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof r.Http&&r.Http)&&t||Object,"function"==typeof(e="undefined"!=typeof s.EventConverter&&s.EventConverter)&&e||Object])],EventService);var t,e}();e.EventService=a},function(t,e,n){"use strict";var i=n(1),r=n(42),o=n(47),s=function(){function LoadingProgress(t){this._mapManagerService=t,this._totalLoadedItems=r.TOTAL_AMOUNT_OF_LOADED_ITEMS,this._loadedItems=0}return Object.defineProperty(LoadingProgress.prototype,"progressPercent",{get:function(){return this._loadedItems/this._totalLoadedItems*100},enumerable:!0,configurable:!0}),LoadingProgress.prototype.incrementLoaded=function(){this._loadedItems++},LoadingProgress.prototype.progress=function(t){var e=this.progressPercent+" %, "+t;this._mapManagerService.setLoadingText(e)},LoadingProgress.prototype.incrementProgress=function(t){this.incrementLoaded(),this.progress(t)},LoadingProgress.prototype.resetProgress=function(t){this._totalLoadedItems=t,this._loadedItems=0},LoadingProgress=__decorate([i.Injectable(),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof o.MapManagerService&&o.MapManagerService)&&t||Object])],LoadingProgress);var t}();e.LoadingProgress=s},function(t,e,n){"use strict";var i=n(1),r=function(){function PropertyService(){}return PropertyService=__decorate([i.Injectable(),__metadata("design:paramtypes",[])],PropertyService)}();e.PropertyService=r},function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}__export(n(453)),__export(n(703)),__export(n(699)),__export(n(154)),__export(n(700)),__export(n(222)),__export(n(221)),__export(n(701)),__export(n(452)),__export(n(704)),__export(n(702))},function(t,e,n){"use strict";var i=n(154),r=function(){function MapEvent(t){t&&(this.state=t.state||i.MapState.Normal,this.type=t.type,this.data=t.data)}return MapEvent.create=function(t){return new MapEvent(t)},MapEvent}();e.MapEvent=r;var o=function(){function MapEventState(t,e){this.oldState=t,this.newState=e}return MapEventState.create=function(t,e){return new MapEventState(t,e)},MapEventState}();e.MapEventState=o},function(t,e){"use strict";!function(t){t[t.onReady=0]="onReady",t[t.onClose=1]="onClose",t[t.mapClick=2]="mapClick",t[t.mapHover=3]="mapHover",t[t.mapHoverChange=4]="mapHoverChange",t[t.mapDrag=5]="mapDrag",t[t.mapZoomToolTipClick=6]="mapZoomToolTipClick",t[t.mapEdit=7]="mapEdit",t[t.mapCreate=8]="mapCreate",t[t.mapSelect=9]="mapSelect",t[t.mapUnSelect=10]="mapUnSelect",t[t.mapPinchStart=11]="mapPinchStart",t[t.mapPinchEnd=12]="mapPinchEnd",t[t.mapPinchMove=13]="mapPinchMove",t[t.mapPanStart=14]="mapPanStart",t[t.mapPanEnd=15]="mapPanEnd",t[t.mapPanMove=16]="mapPanMove"}(e.MapEventType||(e.MapEventType={}));e.MapEventType},function(t,e,n){"use strict";var i=n(722),r=function(){function NavigatorDOMUtilities(){}return NavigatorDOMUtilities.mousePos=function(t,e){var n=t.getBoundingClientRect();return e=e.touches?e.touches[0]:e,new i.Point(e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop)},NavigatorDOMUtilities.now=function(){return window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date)},NavigatorDOMUtilities}();e.NavigatorDOMUtilities=r},function(t,e,n){"use strict";var i=n(1),r=n(221),o=n(457),s=n(404),a=function(){function BridgeService(t){this._mapStateService=t,this._onNewEventSource=new s.Subject,this._onLoaded=new i.EventEmitter,this._onNewEvent=this._onNewEventSource.asObservable()}return Object.defineProperty(BridgeService.prototype,"globalService",{get:function(){return this._globalTower},set:function(t){this._globalTower=t},enumerable:!0,configurable:!0}),Object.defineProperty(BridgeService.prototype,"isLocalReady",{get:function(){return this._localTower&&this._localTower.ready},enumerable:!0,configurable:!0}),Object.defineProperty(BridgeService.prototype,"localService",{get:function(){return this._localTower},set:function(t){this._localTower=t},enumerable:!0,configurable:!0}),Object.defineProperty(BridgeService.prototype,"currentState",{get:function(){return this._mapStateService.state},enumerable:!0,configurable:!0}),Object.defineProperty(BridgeService.prototype,"onNewState",{get:function(){return this._mapStateService.onStateChange},enumerable:!0,configurable:!0}),BridgeService.prototype.setState=function(t){this._mapStateService.setState(t)},Object.defineProperty(BridgeService.prototype,"onNewEvent",{get:function(){return this._onNewEvent},enumerable:!0,configurable:!0}),BridgeService.prototype.newEvent=function(t){t.state=this._mapStateService.state,this._onNewEventSource.next(r.MapEvent.create(t))},BridgeService=__decorate([i.Injectable(),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof o.StateService&&o.StateService)&&t||Object])],BridgeService);var t}();e.BridgeService=a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function cofactor(t,e){for(var n=new Array(t.length-1),i=1;i<t.length;++i)for(var r=n[i-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(r[s++]=t[i][o]);return n}function matrix(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var i=0;i<t;++i)e[n][i]=["m",i,"[",t-n-1,"]"].join("")}return e}function sign(t){return 1&t?"-":""}function generateSum(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",generateSum(t.slice(0,e)),",",generateSum(t.slice(e)),")"].join("")}function determinant(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],n=0;n<t.length;++n)e.push(["scale(",generateSum(determinant(cofactor(t,n))),",",sign(n),t[0][n],")"].join(""));return e}function orientation(t){for(var e=[],n=[],a=matrix(t),c=[],u=0;u<t;++u)0===(1&u)?e.push.apply(e,determinant(cofactor(a,u))):n.push.apply(n,determinant(cofactor(a,u))),c.push("m"+u);var l=generateSum(e),h=generateSum(n),p="orientation"+t+"Exact",f=["function ",p,"(",c.join(),"){var p=",l,",n=",h,",d=sub(p,n);return d[d.length-1];};return ",p].join(""),d=new Function("sum","prod","scale","sub",f);return d(r,i,o,s)}function slowOrient(t){var e=f[t.length];return e||(e=f[t.length]=orientation(t.length)),e.apply(void 0,t)}function generateOrientationProc(){for(;f.length<=a;)f.push(orientation(f.length));for(var e=[],n=["slow"],i=0;i<=a;++i)e.push("a"+i),n.push("o"+i);for(var r=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"],i=2;i<=a;++i)r.push("case ",i,":return o",i,"(",e.slice(0,i).join(),");");r.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(r.join(""));var o=Function.apply(void 0,n);t.exports=o.apply(void 0,[slowOrient].concat(f));for(var i=0;i<=a;++i)t.exports[i]=f[i]}var i=n(612),r=n(1040),o=n(1038),s=n(1039),a=5,c=1.1102230246251565e-16,u=(3+16*c)*c,l=(7+56*c)*c,h=orientation(3),p=orientation(4),f=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var i,r=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),s=r-o;if(r>0){if(o<=0)return s;i=r+o}else{if(!(r<0))return s;if(o>=0)return s;i=-(r+o)}var a=u*i;return s>=a||s<=-a?s:h(t,e,n)},function(t,e,n,i){var r=t[0]-i[0],o=e[0]-i[0],s=n[0]-i[0],a=t[1]-i[1],c=e[1]-i[1],u=n[1]-i[1],h=t[2]-i[2],f=e[2]-i[2],d=n[2]-i[2],g=o*u,y=s*c,v=s*a,m=r*u,b=r*c,x=o*a,S=h*(g-y)+f*(v-m)+d*(b-x),_=(Math.abs(g)+Math.abs(y))*Math.abs(h)+(Math.abs(v)+Math.abs(m))*Math.abs(f)+(Math.abs(b)+Math.abs(x))*Math.abs(d),w=l*_;return S>w||-S>w?S:p(t,e,n,i)}];generateOrientationProc()},function(t,e,n){"use strict";var i=n(18);e.Subject=i.Subject;var r=n(0);e.Observable=r.Observable,n(1045),n(1046),n(1047),n(1048),n(1049),n(1052),n(1053),n(1054),n(1055),n(1056),n(1057),n(1058),n(1059),n(1060),n(1061),n(1066),n(1062),n(1063),n(1064),n(1065),n(1067),n(1070),n(1068),n(1069),n(1071),n(1050),n(1051),n(1074),n(1075),n(1076),n(1077),n(1078),n(1079),n(1080),n(1081),n(1082),n(1083),n(1084),n(1085),n(1086),n(1087),n(1093),n(1088),n(1089),n(1090),n(1091),n(1092),n(1094),n(1095),n(1096),n(1097),n(1098),n(1101),n(1102),n(1103),n(1099),n(1104),n(1105),n(1106),n(1107),n(1108),n(1109),n(1110),n(1111),n(1072),n(1073),n(1112),n(1113),n(1100),n(419),n(1114),n(1115),n(1116),n(1117),n(1118),n(420),n(1119),n(1120),n(1121),n(1122),n(1123),n(1124),n(1125),n(1126),n(1127),n(1128),n(1129),n(1131),n(1130),n(1132),n(1133),n(1134),n(1135),n(1136),n(1137),n(1138),n(1139),n(1140),n(1141),n(1142),n(1143),n(1144),n(1145),n(1146),n(1147),n(1148),n(1149),n(1150),n(1151),n(1152),n(1153),n(1154),n(1155),n(1156),n(1157),n(1158),n(1159),n(1160),n(1161),n(1162),n(1163),n(1164),n(1165),n(1166),n(1167),n(1168),n(1169),n(1170),n(1171);var o=n(26);e.Subscription=o.Subscription;var s=n(4);e.Subscriber=s.Subscriber;var a=n(200);e.AsyncSubject=a.AsyncSubject;var c=n(202);e.ReplaySubject=c.ReplaySubject;var u=n(201);e.BehaviorSubject=u.BehaviorSubject;var l=n(579);e.MulticastObservable=l.MulticastObservable;var h=n(405);e.ConnectableObservable=h.ConnectableObservable;var p=n(141);e.Notification=p.Notification;var f=n(146);e.EmptyError=f.EmptyError;var d=n(207);e.ArgumentOutOfRangeError=d.ArgumentOutOfRangeError;var g=n(414);e.ObjectUnsubscribedError=g.ObjectUnsubscribedError;var y=n(601);e.UnsubscriptionError=y.UnsubscriptionError;var v=n(593);e.TimeInterval=v.TimeInterval;var m=n(594);e.Timestamp=m.Timestamp;var b=n(1299);e.TestScheduler=b.TestScheduler;var x=n(596);e.VirtualTimeScheduler=x.VirtualTimeScheduler;var S=n(581);e.AjaxResponse=S.AjaxResponse,e.AjaxError=S.AjaxError,e.AjaxTimeoutError=S.AjaxTimeoutError;var _=n(597),w=n(37),C=n(598),I=n(1296),E=n(206),L=n(145),T=n(205),O={asap:_.asap,queue:C.queue,animationFrame:I.animationFrame,async:w.async};e.Scheduler=O;var N={rxSubscriber:E.$$rxSubscriber,observable:T.$$observable,iterator:L.$$iterator};e.Symbol=N},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(18),o=n(0),s=n(4),a=n(26),c=function(t){function ConnectableObservable(e,n){t.call(this),this.source=e,this.subjectFactory=n,this._refCount=0}return i(ConnectableObservable,t),ConnectableObservable.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},ConnectableObservable.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},ConnectableObservable.prototype.connect=function(){var t=this._connection;return t||(t=this._connection=new a.Subscription,t.add(this.source.subscribe(new u(this.getSubject(),this))),t.closed?(this._connection=null,t=a.Subscription.EMPTY):this._connection=t),t},ConnectableObservable.prototype.refCount=function(){return this.lift(new l(this))},ConnectableObservable}(o.Observable);e.ConnectableObservable=c;var u=function(t){function ConnectableSubscriber(e,n){t.call(this,e),this.connectable=n}return i(ConnectableSubscriber,t),ConnectableSubscriber.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},ConnectableSubscriber.prototype._complete=function(){this._unsubscribe(),t.prototype._complete.call(this)},ConnectableSubscriber.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},ConnectableSubscriber}(r.SubjectSubscriber),l=function(){function RefCountOperator(t){this.connectable=t}return RefCountOperator.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var i=new h(t,n),r=e._subscribe(i);return i.closed||(i.connection=n.connect()),r},RefCountOperator}(),h=function(t){function RefCountSubscriber(e,n){t.call(this,e),this.connectable=n}return i(RefCountSubscriber,t),RefCountSubscriber.prototype._unsubscribe=function(){var t=this.connectable;if(!t)return void(this.connection=null);this.connectable=null;var e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);var n=this.connection,i=t._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()},RefCountSubscriber}(s.Subscriber)},,,function(t,e,n){"use strict";function combineLatest(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=null;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&o.isArray(t[0])&&(t=t[0]),t.unshift(this),new r.ArrayObservable(t).lift(new u(n))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(71),o=n(58),s=n(7),a=n(8),c={};e.combineLatest=combineLatest;var u=function(){function CombineLatestOperator(t){this.project=t}return CombineLatestOperator.prototype.call=function(t,e){return e._subscribe(new l(t,this.project))},CombineLatestOperator}();e.CombineLatestOperator=u;var l=function(t){function CombineLatestSubscriber(e,n){t.call(this,e),this.project=n,this.active=0,this.values=[],this.observables=[]}return i(CombineLatestSubscriber,t),CombineLatestSubscriber.prototype._next=function(t){this.values.push(c),this.observables.push(t)},CombineLatestSubscriber.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var i=t[n];this.add(a.subscribeToResult(this,i,i,n))}}},CombineLatestSubscriber.prototype.notifyComplete=function(t){0===(this.active-=1)&&this.destination.complete()},CombineLatestSubscriber.prototype.notifyNext=function(t,e,n,i,r){var o=this.values,s=o[n],a=this.toRespond?s===c?--this.toRespond:this.toRespond:0;o[n]=e,0===a&&(this.project?this._tryProject(o):this.destination.next(o.slice()))},CombineLatestSubscriber.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)},CombineLatestSubscriber}(s.OuterSubscriber);e.CombineLatestSubscriber=l},function(t,e,n){"use strict";function concat(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];
return concatStatic.apply(void 0,[this].concat(t))}function concatStatic(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=null,s=t;return i.isScheduler(s[t.length-1])&&(n=s.pop()),new r.ArrayObservable(t,n).lift(new o.MergeAllOperator(1))}var i=n(86),r=n(71),o=n(113);e.concat=concat,e.concatStatic=concatStatic},,,,function(t,e,n){"use strict";function zipProto(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return t.unshift(this),zipStatic.apply(this,t)}function zipStatic(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=t[t.length-1];return"function"==typeof n&&t.pop(),new r.ArrayObservable(t).lift(new l(n))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(71),o=n(58),s=n(4),a=n(7),c=n(8),u=n(145);e.zipProto=zipProto,e.zipStatic=zipStatic;var l=function(){function ZipOperator(t){this.project=t}return ZipOperator.prototype.call=function(t,e){return e._subscribe(new h(t,this.project))},ZipOperator}();e.ZipOperator=l;var h=function(t){function ZipSubscriber(e,n,i){void 0===i&&(i=Object.create(null)),t.call(this,e),this.index=0,this.iterators=[],this.active=0,this.project="function"==typeof n?n:null,this.values=i}return i(ZipSubscriber,t),ZipSubscriber.prototype._next=function(t){var e=this.iterators,n=this.index++;o.isArray(t)?e.push(new f(t)):"function"==typeof t[u.$$iterator]?e.push(new p(t[u.$$iterator]())):e.push(new d(this.destination,this,t,n))},ZipSubscriber.prototype._complete=function(){var t=this.iterators,e=t.length;this.active=e;for(var n=0;n<e;n++){var i=t[n];i.stillUnsubscribed?this.add(i.subscribe(i,n)):this.active--}},ZipSubscriber.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},ZipSubscriber.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,i=0;i<e;i++){var r=t[i];if("function"==typeof r.hasValue&&!r.hasValue())return}for(var o=!1,s=[],i=0;i<e;i++){var r=t[i],a=r.next();if(r.hasCompleted()&&(o=!0),a.done)return void n.complete();s.push(a.value)}this.project?this._tryProject(s):n.next(s),o&&n.complete()},ZipSubscriber.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)},ZipSubscriber}(s.Subscriber);e.ZipSubscriber=h;var p=function(){function StaticIterator(t){this.iterator=t,this.nextResult=t.next()}return StaticIterator.prototype.hasValue=function(){return!0},StaticIterator.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},StaticIterator.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},StaticIterator}(),f=function(){function StaticArrayIterator(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return StaticArrayIterator.prototype[u.$$iterator]=function(){return this},StaticArrayIterator.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},StaticArrayIterator.prototype.hasValue=function(){return this.array.length>this.index},StaticArrayIterator.prototype.hasCompleted=function(){return this.array.length===this.index},StaticArrayIterator}(),d=function(t){function ZipBufferIterator(e,n,i,r){t.call(this,e),this.parent=n,this.observable=i,this.index=r,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}return i(ZipBufferIterator,t),ZipBufferIterator.prototype[u.$$iterator]=function(){return this},ZipBufferIterator.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},ZipBufferIterator.prototype.hasValue=function(){return this.buffer.length>0},ZipBufferIterator.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},ZipBufferIterator.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},ZipBufferIterator.prototype.notifyNext=function(t,e,n,i,r){this.buffer.push(e),this.parent.checkIterators()},ZipBufferIterator.prototype.subscribe=function(t,e){return c.subscribeToResult(this,this.observable,this,e)},ZipBufferIterator}(a.OuterSubscriber)},,,function(t,e,n){"use strict";function isNumeric(t){return!i.isArray(t)&&t-parseFloat(t)+1>=0}var i=n(58);e.isNumeric=isNumeric},function(t,e,n){function Triangle(t,e,n){this.a=t,this.b=e,this.c=n;var i,r,o,s,a=e.x-t.x,c=e.y-t.y,u=n.x-t.x,l=n.y-t.y,h=a*(t.x+e.x)+c*(t.y+e.y),p=u*(t.x+n.x)+l*(t.y+n.y),f=2*(a*(n.y-e.y)-c*(n.x-e.x));Math.abs(f)<1e-6?(i=Math.min(t.x,e.x,n.x),r=Math.min(t.y,e.y,n.y),o=.5*(Math.max(t.x,e.x,n.x)-i),s=.5*(Math.max(t.y,e.y,n.y)-r),this.x=i+o,this.y=r+s,this.r=o*o+s*s):(this.x=(l*h-c*p)/f,this.y=(a*p-u*h)/f,o=this.x-t.x,s=this.y-t.y,this.r=o*o+s*s)}function byX(t,e){return e.x-t.x}function dedup(t){var e,n,i,r,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],i=s;i;)if(o=t[--i],r=t[--i],e===r&&n===o||e===o&&n===r){t.splice(s,2),t.splice(i,2),s-=2;continue t}}function triangulate(t){if(t.length<3)return[];t.sort(byX);for(var e=t.length-1,n=t[e].x,i=t[0].x,r=t[e].y,o=r;e--;)t[e].y<r&&(r=t[e].y),t[e].y>o&&(o=t[e].y);var s,a,c,u=i-n,l=o-r,h=u>l?u:l,p=.5*(i+n),f=.5*(o+r),d=[new Triangle({x:p-20*h,y:f-h,__sentinel:!0},{x:p,y:f+20*h,__sentinel:!0},{x:p+20*h,y:f-h,__sentinel:!0})],g=[],y=[];for(e=t.length;e--;){for(y.length=0,s=d.length;s--;)u=t[e].x-d[s].x,u>0&&u*u>d[s].r?(g.push(d[s]),d.splice(s,1)):(l=t[e].y-d[s].y,u*u+l*l>d[s].r||(y.push(d[s].a,d[s].b,d[s].b,d[s].c,d[s].c,d[s].a),d.splice(s,1)));for(dedup(y),s=y.length;s;)c=y[--s],a=y[--s],d.push(new Triangle(a,c,t[e]))}for(Array.prototype.push.apply(g,d),e=g.length;e--;)(g[e].a.__sentinel||g[e].b.__sentinel||g[e].c.__sentinel)&&g.splice(e,1);return g}var i=n(10).polygon,r=n(10).featureCollection;t.exports=function(t,e){return r(triangulate(t.features.map(function(t){var n={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e&&(n.z=t.properties[e]),n})).map(function(t){return i([[[t.a.x,t.a.y],[t.b.x,t.b.y],[t.c.x,t.c.y],[t.a.x,t.a.y]]],{a:t.a.z,b:t.b.z,c:t.c.z})}))}},function(t,e,n){"use strict";var i=n(73),r=n(1),o=[],s=function(t){return t};i.disableDebugTools(),r.enableProdMode(),o=o.slice(),e.decorateModuleRef=s,e.ENV_PROVIDERS=o.slice()},,,function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}__export(n(643))},function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}__export(n(651)),__export(n(650))},function(t,e,n){"use strict";var i=n(1),r=function(){function ActivityTooltipTemplateComponent(){}return ActivityTooltipTemplateComponent.prototype.setModel=function(t){this.prototyp=t},ActivityTooltipTemplateComponent.prototype.setStyle=function(t){this.prototypeStyle=t},ActivityTooltipTemplateComponent=__decorate([i.Component({selector:"map-activity-tooltip-template",template:n(768),styles:[n(741)]}),__metadata("design:paramtypes",[])],ActivityTooltipTemplateComponent)}();e.ActivityTooltipTemplateComponent=r},function(t,e,n){"use strict";var i=n(1),r=function(){function BuildingTooltipTemplateComponent(){}return BuildingTooltipTemplateComponent.prototype.setModel=function(t){this.prototyp=t},BuildingTooltipTemplateComponent.prototype.setStyle=function(t){this.prototypeStyle=t},BuildingTooltipTemplateComponent=__decorate([i.Component({selector:"map-building-tooltip-template",template:n(769),styles:[n(742)]}),__metadata("design:paramtypes",[])],BuildingTooltipTemplateComponent)}();e.BuildingTooltipTemplateComponent=r},function(t,e,n){"use strict";var i=n(1),r=function(){function DefaultTooltipComponent(){}return DefaultTooltipComponent.prototype.setModel=function(t){this.prototyp=t},DefaultTooltipComponent.prototype.setStyle=function(t){this.prototypeStyle=t},DefaultTooltipComponent=__decorate([i.Component({selector:"map-default-tooltip-template",styles:[n(743)],template:n(770)}),__metadata("design:paramtypes",[])],DefaultTooltipComponent)}();e.DefaultTooltipComponent=r},function(t,e,n){"use strict";var i=n(1),r=function(){function DepartureBoardTooltipTemplateComponent(){this.prototyp={isLoadingDepatures:!0,lastDeparturesUpdate:new Date,title:"",distanceInKmFromBusStop:0,distanceInMFromBusStop:0,departures:[]}}return DepartureBoardTooltipTemplateComponent.prototype.setModel=function(t){this.prototyp=t},DepartureBoardTooltipTemplateComponent.prototype.setStyle=function(t){this.prototypeStyle=t},DepartureBoardTooltipTemplateComponent=__decorate([i.Component({selector:"map-departure-board-tooltip-template",template:n(771),styles:[n(744)]}),__metadata("design:paramtypes",[])],DepartureBoardTooltipTemplateComponent)}();e.DepartureBoardTooltipTemplateComponent=r},function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}__export(n(663))},function(t,e,n){"use strict";var i=n(1),r=n(437),o=function(){function ActivityConverter(){}return ActivityConverter.prototype.convertToBase=function(t){var e=_.map(t,function(t){return _.create(r.Activity.prototype,t)});return _.each(e,function(t){t.rebuild()}),e},ActivityConverter.prototype.convertToModel=function(t){return t},ActivityConverter=__decorate([i.Injectable(),__metadata("design:paramtypes",[])],ActivityConverter)}();e.ActivityConverter=o},function(t,e,n){"use strict";var i=n(1),r=n(438),o=function(){function BuildingConverter(){}return BuildingConverter.prototype.convertToBase=function(t){var e=_.map(t,function(t){return _.create(r.Building.prototype,t)});return _.each(e,function(t){t.rebuild()}),e},BuildingConverter.prototype.convertToModel=function(t){return t},BuildingConverter=__decorate([i.Injectable(),__metadata("design:paramtypes",[])],BuildingConverter)}();e.BuildingConverter=o},function(t,e,n){"use strict";var i=n(1),r=n(439),o=n(443),s=n(87),a=function(){function BusStopConverter(){}return BusStopConverter.prototype.convertToBase=function(t){var e=_.map(t,function(t){var e=t.id,n=_.trim(t.name.split("(")[0]),i=t.dist,a=o.GeometryFactory.createGeometry({type:s.GeometryType.Point,coordinates:[t.lon,t.lat]});return new r.BusStop({id:e,name:n,distanceInMeter:i,location:a})});return _.each(e,function(t){t.rebuild()}),e},BusStopConverter.prototype.convertToModel=function(t){return t},BusStopConverter=__decorate([i.Injectable(),__metadata("design:paramtypes",[])],BusStopConverter)}();e.BusStopConverter=a;var c=function(){function DepartureConverter(){}return DepartureConverter.prototype.convertToBase=function(t){var e=this,n=_.map(t,function(t){var n=t.transportCategory;return new r.Departure({direction:t.direction,transportNumber:t.transportNumber,transportType:e.getTransportType(n),busstopId:t.stopid,dTime:t.rtTime||t.time})});return _.each(n,function(t){t.rebuild()}),n},DepartureConverter.prototype.convertToModel=function(t){return t},DepartureConverter.prototype.getTransportType=function(t){switch(t){case"BLT":case"BXB":return"Bus";case"ULT":return"Subway";case"SLT":return"Tram";case"JAX":case"JLT":case"JRE":case"JIC":case"JPT":case"JEX":return"Train";case"FLT":case"FUT":return"Ferry";default:return""}},DepartureConverter=__decorate([i.Injectable(),__metadata("design:paramtypes",[])],DepartureConverter)}();e.DepartureConverter=c},function(t,e,n){"use strict";var i=n(1),r=n(440),o=function(){function EntranceConverter(){}return EntranceConverter.prototype.convertToBase=function(t){var e=_.map(t,function(t){return _.create(r.Entrance.prototype,t)});return _.each(e,function(t){t.rebuild()}),e},EntranceConverter.prototype.convertToModel=function(t){return t},EntranceConverter=__decorate([i.Injectable(),__metadata("design:paramtypes",[])],EntranceConverter)}();e.EntranceConverter=o},function(t,e,n){"use strict";var i=n(1),r=n(441),o=n(443),s=n(87),a=function(){function EventConverter(){}return EventConverter.prototype.convertToBase=function(t){var e=_.map(t,function(t){var e,n=t.venue.address.address_1,i=t.venue.address.city,a=t.venue.address,c=o.GeometryFactory.createGeometry({type:s.GeometryType.Point,coordinates:[a.longitude,a.latitude]});return t.logo&&(e=t.logo.url),new r.Event({id:t.id,title:t.name.text,description:t.description.text,address:n,city:i,dateString:t.start.local,imgUrl:e,location:c})});return _.each(e,function(t){t.rebuild()}),e},EventConverter.prototype.convertToModel=function(t){return t},EventConverter=__decorate([i.Injectable(),__metadata("design:paramtypes",[])],EventConverter)}();e.EventConverter=a},function(t,e,n){"use strict";var i=n(1),r=n(442),o=function(){function FunctionConverter(){}return FunctionConverter.prototype.convertToBase=function(t){var e=_.map(t,function(t){return _.create(r.Function.prototype,t)});return _.each(e,function(t){t.rebuild()}),e},FunctionConverter.prototype.convertToModel=function(t){return t},FunctionConverter=__decorate([i.Injectable(),__metadata("design:paramtypes",[])],FunctionConverter)}();e.FunctionConverter=o},function(t,e,n){"use strict";var i=n(1),r=n(447),o=function(){function StairwellConverter(){}return StairwellConverter.prototype.convertToBase=function(t){var e=_.map(t,function(t){return _.create(r.Stairwell.prototype,t)});return _.each(e,function(t){t.rebuild()}),e},StairwellConverter.prototype.convertToModel=function(t){return t},StairwellConverter=__decorate([i.Injectable(),__metadata("design:paramtypes",[])],StairwellConverter)}();e.StairwellConverter=o},function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}__export(n(672)),__export(n(671)),__export(n(673)),__export(n(674))},function(t,e,n){"use strict";var i=n(1),r=n(676),o=n(675),s=n(677),a=n(680),c=n(679),u=n(681),l=n(678),h=function(){function LayerFactory(){this._layerCache={}}return LayerFactory.prototype.createComplementBuildingLayer=function(t,e){void 0===e&&(e=!1);var n="complementBuildingLayer";return _.isUndefined(this._layerCache[n])||e?this._layerCache[n]=new l.ComplementBuildingLayer(t):this._layerCache[n].setModels(t),this._layerCache[n]},LayerFactory.prototype.createBuildingLayer=function(t,e){void 0===e&&(e=!1);var n="buildingLayer";return _.isUndefined(this._layerCache[n])||e?this._layerCache[n]=new r.BuildingLayer(t):this._layerCache[n].setModels(t),this._layerCache[n]},LayerFactory.prototype.createActivityLayer=function(t,e){void 0===e&&(e=!1);var n="activityLayer";return _.isUndefined(this._layerCache[n])||e?this._layerCache[n]=new o.ActivityLayer(t):this._layerCache[n].setModels(t),this._layerCache[n]},LayerFactory.prototype.createBusStopLayer=function(t,e){void 0===e&&(e=!1);var n="busstopLayer";return _.isUndefined(this._layerCache[n])||e?this._layerCache[n]=new s.BusStopLayer(t):this._layerCache[n].setModels(t),this._layerCache[n]},LayerFactory.prototype.createFunctionLayer=function(t,e){void 0===e&&(e=!1);var n="functionLayer";return _.isUndefined(this._layerCache[n])||e?this._layerCache[n]=new a.FunctionLayer(t,"Intressepunkt"):this._layerCache[n].setModels(t),this._layerCache[n]},LayerFactory.prototype.createParkingLayer=function(t,e){void 0===e&&(e=!1);var n="parkingLayer";return _.isUndefined(this._layerCache[n])||e?this._layerCache[n]=new a.FunctionLayer(t,"Parkering"):this._layerCache[n].setModels(t),this._layerCache[n]},LayerFactory.prototype.createRestaurantLayer=function(t,e){void 0===e&&(e=!1);var n="restaurantLayer";return _.isUndefined(this._layerCache[n])||e?this._layerCache[n]=new a.FunctionLayer(t,"Restaurang"):this._layerCache[n].setModels(t),this._layerCache[n]},LayerFactory.prototype.createBikePumpLayer=function(t,e){void 0===e&&(e=!1);var n="bikePumpLayer";return _.isUndefined(this._layerCache[n])||e?this._layerCache[n]=new a.FunctionLayer(t,"Pumpstation"):this._layerCache[n].setModels(t),this._layerCache[n]},LayerFactory.prototype.createEntranceLayer=function(t,e){void 0===e&&(e=!1);var n="entranceLayer";return _.isUndefined(this._layerCache[n])||e?this._layerCache[n]=new c.EntranceLayer(t):this._layerCache[n].setModels(t),this._layerCache[n]},LayerFactory.prototype.createMockPronovaInteriorLayer=function(t,e){void 0===e&&(e=!1);var n="pronovaInterior";return _.isUndefined(this._layerCache[n])||e?this._layerCache[n]=new u.MockPronovaInteriorLayer(t):this._layerCache[n].setModels(t),this._layerCache[n]},LayerFactory.prototype.clearCache=function(){for(var t in this._layerCache)this._layerCache.hasOwnProperty(t)&&delete this._layerCache[t]},LayerFactory=__decorate([i.Injectable(),__metadata("design:paramtypes",[])],LayerFactory)}();e.LayerFactory=h},function(t,e,n){"use strict";var i=n(59),r=n(20),o=function(t){function CMSActivity(){t.apply(this,arguments)}return __extends(CMSActivity,t),CMSActivity}(i.CMSBase);e.CMSActivity=o;var s=function(t){function Activity(){t.apply(this,arguments),this.type=r.ModelType.Activity}return __extends(Activity,t),Activity.prototype.rebuild=function(){this.cms=_.create(o.prototype,this.cms),this.geo=_.create(i.GeoBase.prototype,this.geo)},Activity.prototype.getTitle=function(){return this.cms.category},Activity.prototype.getFirstOrDefaultPhoneNumber=function(){if(this.cms.contacts&&0!==this.cms.contacts.length&&this.cms.contacts[0].phone&&this.cms.contacts[0].phone[0]){var t=this.cms.contacts[0],e=t.phone[0].value;return e}},Activity.prototype.getFirstOrDefaultBuildingName=function(){var t=this.combineTags(),e=_.find(t,function(t){return"Building"===t.type});return e?e.name:void 0},Activity.prototype.getFirstOrDefaultBuildingId=function(){var t=this.combineTags(),e=_.find(t,function(t){return"Building"===t.type});return e?e.id:void 0},Activity}(i.BaseModel);e.Activity=s},function(t,e,n){"use strict";var i=n(59),r=n(20),o=function(t){function CMSBuilding(){t.apply(this,arguments)}return __extends(CMSBuilding,t),CMSBuilding}(i.CMSBase);e.CMSBuilding=o;var s=function(t){function Building(){t.apply(this,arguments),this.type=r.ModelType.Building}return __extends(Building,t),Building.prototype.rebuild=function(){this.cms=_.create(o.prototype,this.cms),this.geo=_.create(i.GeoBase.prototype,this.geo)},Building}(i.BaseModel);e.Building=s},function(t,e,n){"use strict";var i=n(2),r=n(20),o=n(59),s=5/3.6,a=50,c=function(t){function CMSBusStop(){t.apply(this,arguments),this.isDepartureInitialized=!1,this.description="",this.departureBoard=[]}return __extends(CMSBusStop,t),Object.defineProperty(CMSBusStop.prototype,"setWalkTimeInMinutes",{set:function(t){this.walkTimeInMinutes=0===t?1:t},enumerable:!0,configurable:!0}),CMSBusStop}(o.CMSBase);e.CMSBusStop=c;var u=function(t){function BusStop(e){t.call(this),this.type=r.ModelType.BusStop,this.name=e.name||"",this.id=e.id||"",this.cms.isDepartureInitialized=!1,this.cms.walkDistanceInMeter=Math.floor(e.distanceInMeter/a)*a||0,this.cms.walkDistanceInKm=.001*e.distanceInMeter,this.cms.walkTimeInSeconds=this.cms.walkDistanceInMeter/s,this.cms.setWalkTimeInMinutes=Math.round(this.cms.walkTimeInSeconds/60),this.cms.departureBoard=new Array,this.geo.location=e.location||null,this.geo.geometry=e.location||null}return __extends(BusStop,t),Object.defineProperty(BusStop.prototype,"setDepatureBoard",{set:function(t){this.cms.departureBoard=t,this.cms.isDepartureInitialized=!0},enumerable:!0,configurable:!0}),BusStop.prototype.rebuild=function(){this.cms=_.create(c.prototype,this.cms),this.geo=_.create(o.GeoBase.prototype,this.geo)},BusStop}(o.BaseModel);e.BusStop=u;var l=function(t){function CMSDeparture(){t.apply(this,arguments)}return __extends(CMSDeparture,t),CMSDeparture}(o.CMSBase);e.CMSDeparture=l;var h=function(t){function Departure(e){t.call(this),this.type=r.ModelType.Departure,this.cms.direction=e.direction||"",this.cms.transportNumber=e.transportNumber||"",this.cms.dTime=e.dTime||"",this.cms.busstopId=e.busstopId||"",this.cms.transportType=e.transportType||"",this.id=e.busstopId||"",this.cms.timeToDeparture=this.convertTimeToDeparture(e.dTime)}return __extends(Departure,t),Departure.prototype.rebuild=function(){this.cms=_.create(l.prototype,this.cms),this.geo=_.create(o.GeoBase.prototype,this.geo)},Departure.prototype.convertTimeToDeparture=function(t){var e=t.split(":"),n=Number(e[0]),r=Number(e[1]),o=i(),s=i().set({hour:n,minute:r}),a=s.diff(o),c=Math.floor(a/6e4);return c},Departure}(o.BaseModel);e.Departure=h},function(t,e,n){"use strict";var i=n(59),r=n(20),o=function(t){function CMSEntrance(){t.apply(this,arguments)}return __extends(CMSEntrance,t),CMSEntrance}(i.CMSBase);e.CMSEntrance=o;var s=function(t){function Entrance(){t.apply(this,arguments),this.type=r.ModelType.Entrance}return __extends(Entrance,t),Entrance.prototype.rebuild=function(){this.cms=_.create(o.prototype,this.cms),this.geo=_.create(i.GeoBase.prototype,this.geo)},Entrance}(i.BaseModel);e.Entrance=s},function(t,e,n){"use strict";var i=n(20),r=n(59),o=function(t){function CMSEvent(){t.apply(this,arguments)}return __extends(CMSEvent,t),CMSEvent}(r.CMSBase);e.CMSEvent=o;var s=function(t){function Event(e){t.call(this),this.type=i.ModelType.Event,this.cms.title=e.title||"",this.name=e.title||"",this.id=e.id||"",this.cms.description=e.description||"",this.cms.date=new Date(e.dateString),this.cms.address=e.address||"",this.cms.city=e.city||"",this.cms.imgUrl=e.imgUrl||"",this.geo.location=e.location||null,this.geo.geometry=e.location||null}return __extends(Event,t),Event.prototype.rebuild=function(){this.cms=_.create(o.prototype,this.cms),this.geo=_.create(r.GeoBase.prototype,this.geo)},Event}(r.BaseModel);e.Event=s},function(t,e,n){"use strict";var i=n(59),r=n(20),o=function(){function FunctionType(){this.type=r.ModelType.FunctionType}return FunctionType}();e.FunctionType=o;var s=function(t){function CMSFunction(){t.apply(this,arguments)}return __extends(CMSFunction,t),CMSFunction}(i.CMSBase);e.CMSFunction=s;var a=function(t){function Function(){t.apply(this,arguments),this.type=r.ModelType.Function}return __extends(Function,t),Object.defineProperty(Function.prototype,"isValid",{get:function(){return!_.isUndefined(this.cms)&&!_.isUndefined(this.cms.functionType)},enumerable:!0,configurable:!0}),Function.prototype.rebuild=function(){this.cms=_.create(s.prototype,this.cms),this.geo=_.create(i.GeoBase.prototype,this.geo)},Function}(i.BaseModel);e.Function=a},function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}__export(n(685)),__export(n(87)),__export(n(149)),__export(n(444)),__export(n(445)),__export(n(446)),__export(n(686))},function(t,e,n){"use strict";var i=n(149),r=n(87),o=function(t){function LineString(e){t.call(this,r.GeometryType.LineString,e?e.coordinates:null)}return __extends(LineString,t),LineString}(i.Geometry);e.LineString=o},function(t,e,n){"use strict";var i=n(149),r=n(87),o=function(t){function Point(e){t.call(this,r.GeometryType.Point,e?e.coordinates:null)}return __extends(Point,t),Point}(i.Geometry);e.Point=o},function(t,e,n){"use strict";var i=n(149),r=n(87),o=function(t){function Polygon(e){t.call(this,r.GeometryType.Polygon,e?e.coordinates:null)}return __extends(Polygon,t),Polygon}(i.Geometry);e.Polygon=o},function(t,e,n){"use strict";var i=n(59),r=n(20),o=function(t){function CMSStairwell(){t.apply(this,arguments)}return __extends(CMSStairwell,t),CMSStairwell}(i.CMSBase);e.CMSStairwell=o;var s=function(t){function Stairwell(){t.apply(this,arguments),this.type=r.ModelType.Stairwell}return __extends(Stairwell,t),Stairwell.prototype.rebuild=function(){this.cms=_.create(o.prototype,this.cms),this.geo=_.create(i.GeoBase.prototype,this.geo)},Stairwell}(i.BaseModel);e.Stairwell=s},function(t,e,n){"use strict";var i=n(1),r=n(100),o=n(42),s=n(20),a=n(431),c=function(){function EntranceService(t,e){this._converter=e,this.type=s.ModelType.Entrance,this._entranceRepository=t.createEntranceRepository()}return EntranceService.prototype.get=function(t){var e=this,n=btoa(encodeURIComponent(JSON.stringify(t.filter)));return this._entranceRepository.get(o.MAX_INT_VALUE,0,"",n).then(function(t){return e._converter.convertToBase(t)})},EntranceService.prototype.getOne=function(t){},EntranceService.prototype.add=function(t){var e=this;return this._entranceRepository.post(t).then(function(t){return e._converter.convertToBase([t])},function(t){return e.logError(t)})},EntranceService.prototype.update=function(t){var e=this;return this._entranceRepository.put(t).then(function(t){return e._converter.convertToBase([t])},function(t){return e.logError(t)})},EntranceService.prototype.remove=function(t){var e=this;return this._entranceRepository.delete(t.id).then(function(t){return t},function(t){return e.logError(t)})},EntranceService.prototype.logError=function(t){console.log("entrance.service::Error :",t)},EntranceService=__decorate([i.Injectable(),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof r.RepositoryFactory&&r.RepositoryFactory)&&t||Object,"function"==typeof(e="undefined"!=typeof a.EntranceConverter&&a.EntranceConverter)&&e||Object])],EntranceService);var t,e}();e.EntranceService=c},function(t,e,n){"use strict";var i=n(1),r=n(100),o=n(42),s=n(20),a=n(433),c=function(){function FunctionService(t,e){this._converter=e,this.type=s.ModelType.Function,this._functionRepository=t.createFunctionRepository()}return FunctionService.prototype.get=function(t){var e=this,n=btoa(encodeURIComponent(JSON.stringify(t.filter)));return this._functionRepository.get(o.MAX_INT_VALUE,0,"",n).then(function(t){return e._converter.convertToBase(t)})},FunctionService.prototype.getOne=function(t){},FunctionService.prototype.add=function(t){var e=this;return this._functionRepository.post(t).then(function(t){return e._converter.convertToBase([t])},function(t){return e.logError(t)})},FunctionService.prototype.update=function(t){var e=this;return this._functionRepository.put(t).then(function(t){return e._converter.convertToBase([t])},function(t){return e.logError(t)})},FunctionService.prototype.remove=function(t){var e=this;return this._functionRepository.delete(t.id).then(function(t){return t},function(t){return e.logError(t)})},FunctionService.prototype.logError=function(t){console.log("building.service::Error :",t)},FunctionService=__decorate([i.Injectable(),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof r.RepositoryFactory&&r.RepositoryFactory)&&t||Object,"function"==typeof(e="undefined"!=typeof a.FunctionConverter&&a.FunctionConverter)&&e||Object])],FunctionService);var t,e}();e.FunctionService=c},function(t,e,n){"use strict";var i=n(1),r=n(100),o=n(42),s=n(20),a=n(434),c=function(){function StairwellService(t,e){this._converter=e,this.type=s.ModelType.Stairwell,this._stairwellRepository=t.createStairwellRepository()}return StairwellService.prototype.get=function(t){var e=this,n=btoa(encodeURIComponent(JSON.stringify(t.filter)));return this._stairwellRepository.get(o.MAX_INT_VALUE,0,"",n).then(function(t){return e._converter.convertToBase(t)})},StairwellService.prototype.getOne=function(t){},StairwellService.prototype.add=function(t){var e=this;return this._stairwellRepository.post(t).then(function(t){return e._converter.convertToBase([t])},function(t){return e.logError(t)})},StairwellService.prototype.update=function(t){var e=this;return this._stairwellRepository.put(t).then(function(t){return e._converter.convertToBase([t])},function(t){return e.logError(t)})},StairwellService.prototype.remove=function(t){var e=this;return this._stairwellRepository.delete(t.id).then(function(t){return t},function(t){return e.logError(t)})},StairwellService.prototype.logError=function(t){console.log("stairwell.service::Error :",t)},StairwellService=__decorate([i.Injectable(),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof r.RepositoryFactory&&r.RepositoryFactory)&&t||Object,"function"==typeof(e="undefined"!=typeof a.StairwellConverter&&a.StairwellConverter)&&e||Object])],StairwellService);var t,e}();e.StairwellService=c},function(t,e,n){"use strict";var i=n(1),r=n(72),o=n(99),s=n(119),a=n(42),c=n(118),u=n(2),l="http://opendata-download-metfcst.smhi.se/api/",h=function(){function WeatherService(t,e,n){var i=this;this.http=t,this._timeService=e,this._geoProfileService=n,this._weatherDataStore=new Array,this.setGeoProfile(),this._geoProfileService.onNewProfile.subscribe(function(t){i.setGeoProfile()})}return Object.defineProperty(WeatherService.prototype,"weatherForecast",{get:function(){return this._weatherDataStore},set:function(t){this._weatherDataStore=t},enumerable:!0,configurable:!0}),Object.defineProperty(WeatherService.prototype,"setLocation",{set:function(t){this._location={lat:t.lat.toFixed(6),lng:t.lng.toFixed(6)}},enumerable:!0,configurable:!0}),WeatherService.prototype.getWeather=function(t){var e=this,n=this.createRequestUrl();return this.getForecast(n).then(function(n){return e.weatherForecast=n,e.getWeatherFromStore(t)},function(n){return e.getWeatherFromStore(t)})},WeatherService.prototype.getWeatherFromStore=function(t){var e=_.isUndefined(t)?{}:{hour:t},n=this._timeService.dateOnFormat(e,"YYYY-MM-DDTHH:00:00"),i=this.findWeather(n);if(_.isUndefined(i)){var r=this.findWeatherWitchIsAfter(n);_.isUndefined(r)&&0!==r.length&&(i=r[0])}return i},WeatherService.prototype.getForecast=function(t){var e=this;return this.http.get(t).map(this.extractData).map(function(t){return _.map(t.timeSeries,function(t){return new o.Weather({temp:e.convertToTemperature(t),cloud:e.getParameter(t,"tcc_mean"),wind:e.getParameter(t,"ws"),precipitationAmount:e.getParameter(t,"pmean"),precipitation:a.PRECIPITATION_TYPE[e.getParameter(t,"pcat")],wSymbol:e.getParameter(t,"Wsymb"),time:e._timeService.toFormat(t.validTime,u.ISO_8601)})})}).toPromise()},WeatherService.prototype.findWeather=function(t){return _.find(this._weatherDataStore,function(e){return e.time.isSame(t)})},WeatherService.prototype.findWeatherWitchIsAfter=function(t){return _.filter(this._weatherDataStore,function(e){return e.time.isAfter(t)})},WeatherService.prototype.createRequestUrl=function(){return l+"category/pmp2g/version/2/geotype/point/lon/"+this._location.lng+"/lat/"+this._location.lat+"/data.json"},WeatherService.prototype.getParameter=function(t,e){return t.parameters.find(function(t){return t.name===e}).values[0]},WeatherService.prototype.convertToTemperature=function(t){var e=t.parameters.find(function(t){return"t"===t.name}).values[0],n=Math.round(e);return n===-0?0:n},WeatherService.prototype.extractData=function(t){var e=t.json();return e||{}},WeatherService.prototype.setGeoProfile=function(){if(this._geoProfileService.isGeoProfileSet){var t=this._geoProfileService.geoProfile.toPoint();this.setLocation={lat:t.lat,lng:t.lng}}else this.setLocation={lat:a.NORRKOPING_POINT[1],lng:a.NORRKOPING_POINT[0]}},WeatherService=__decorate([i.Injectable(),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof r.Http&&r.Http)&&t||Object,"function"==typeof(e="undefined"!=typeof s.TimeService&&s.TimeService)&&e||Object,"function"==typeof(n="undefined"!=typeof c.GeoProfileService&&c.GeoProfileService)&&n||Object])],WeatherService);var t,e,n}();e.WeatherService=h},function(t,e){"use strict";!function(t){t[t.MapBoxGL=0]="MapBoxGL",t[t.MapBoxJS=1]="MapBoxJS"}(e.MapCoreObjectType||(e.MapCoreObjectType={}));e.MapCoreObjectType},function(t,e,n){"use strict";var i=n(1),r=n(224),o=n(456),s=n(222),a=function(t){function MapManagerService(e,n){t.call(this,e),this._componentFactoryResolver=n,this._ready=!1,this._bridgeService.globalService=this}return __extends(MapManagerService,t),Object.defineProperty(MapManagerService.prototype,"ready",{get:function(){return this._ready},enumerable:!0,configurable:!0}),Object.defineProperty(MapManagerService.prototype,"isLocalReady",{get:function(){return this._bridgeService.isLocalReady},enumerable:!0,configurable:!0}),Object.defineProperty(MapManagerService.prototype,"local",{get:function(){return this._bridgeService.localService},enumerable:!0,configurable:!0}),MapManagerService.prototype.setMapConfig=function(t){var e=this;return this.isLocalReady?this._bridgeService.localService.setMapConfig(t):new Promise(function(n,i){
var r=setInterval(function(){e.isLocalReady&&(clearInterval(r),e._bridgeService.localService.setMapConfig(t).then(function(t){n(t)},function(t){i(t)}))},50)})},MapManagerService.prototype.addLayer=function(t){this.isLocalReady&&this.local.addLayer(t)},MapManagerService.prototype.clearLayers=function(){this.isLocalReady&&this.local.clearLayers()},MapManagerService.prototype.addVectorLayer=function(t,e){this.isLocalReady&&this.local.addVectorLayer(t,e)},MapManagerService.prototype.select=function(t,e){this.isLocalReady&&(this.newEvent({type:s.MapEventType.mapSelect,data:{type:t,id:e}}),this.local.select(t,e))},MapManagerService.prototype.selectLayer=function(t){this.isLocalReady&&(this.newEvent({type:s.MapEventType.mapSelect,data:{type:t}}),this.local.selectLayer(t))},MapManagerService.prototype.unSelect=function(t,e){this.isLocalReady&&(this.newEvent({type:s.MapEventType.mapUnSelect,data:{type:t,id:e}}),this.local.unSelect(t,e))},MapManagerService.prototype.unSelectLayer=function(t){this.isLocalReady&&(this.newEvent({type:s.MapEventType.mapUnSelect,data:{type:t}}),this.local.unSelectLayer(t))},MapManagerService.prototype.centerPosition=function(t,e){this.isLocalReady&&this.local.centerPosition(t,e)},MapManagerService.prototype.getCenterPosition=function(){if(this.isLocalReady)return this.local.getCenterPosition()},MapManagerService.prototype.resetPosition=function(){this.isLocalReady&&this.local.resetPosition()},MapManagerService.prototype.zoomIn=function(){this.isLocalReady&&this.local.zoomIn()},MapManagerService.prototype.zoomOut=function(){this.isLocalReady&&this.local.zoomOut()},MapManagerService.prototype.getZoom=function(){if(this.isLocalReady)return this.local.getZoom()},MapManagerService.prototype.animateSelection=function(t,e){this.isLocalReady&&this.local.animateSelection(t,e)},MapManagerService.prototype.setLayerVisibility=function(t,e){this.isLocalReady&&this.local.setLayerVisibility(t,e)},MapManagerService.prototype.createFeature=function(t){if(this.isLocalReady)return this.local.createFeature(t)},MapManagerService.prototype.editFeature=function(t,e,n){if(this.isLocalReady)return this.local.editFeature(t,e,n)},MapManagerService.prototype.stopEditFeature=function(t,e){if(this.isLocalReady)return this.local.stopEditFeature(t,e)},MapManagerService.prototype.replaceSourceLayer=function(t,e){this.isLocalReady&&this.local.replaceSourceLayer(t,e)},MapManagerService.prototype.setTooltipVisibility=function(t){this.isLocalReady&&this.local.setTooltipVisibility(t)},MapManagerService.prototype.setTooltipFixedPosition=function(t,e,n){this.isLocalReady&&this.local.setTooltipFixedPosition(t,e,n)},MapManagerService.prototype.setTooltipModel=function(t){this.isLocalReady&&this.local.setTooltipModel(t)},MapManagerService.prototype.setTooltip=function(t){if(this.isLocalReady)return this.local.setTooltip(t)},MapManagerService.prototype.setTooltipTemplate=function(t){var e=this._componentFactoryResolver.resolveComponentFactory(t);this.setTooltip(e)},MapManagerService.prototype.clearToolTip=function(){this.isLocalReady&&this.local.clearToolTip()},MapManagerService.prototype.setLoadingText=function(t){this.isLocalReady&&this.local.setLoadingText(t)},MapManagerService=__decorate([i.Injectable(),__metadata("design:paramtypes",["function"==typeof(e="undefined"!=typeof r.BridgeService&&r.BridgeService)&&e||Object,"function"==typeof(n="undefined"!=typeof i.ComponentFactoryResolver&&i.ComponentFactoryResolver)&&n||Object])],MapManagerService);var e,n}(o.BridgeMediator);e.MapManagerService=a},function(t,e,n){"use strict";var i=n(1),r=n(122),o=function(){function GaiaPlacesMap(t,e){this._localService=t,this._element=e,this.state=t.currentState;var n=this.createRenderElement();this._element.nativeElement.appendChild(n),this._localService.renderElement=n}return GaiaPlacesMap.prototype.ngOnInit=function(){var t=this;this._sub=this._localService.onNewState.subscribe(function(e){return t.state=e.newState})},GaiaPlacesMap.prototype.ngOnDestroy=function(){this._sub.unsubscribe()},GaiaPlacesMap.prototype.onNewEventLayer=function(t){this._localService.sendTouchEvent(t.type,t)},GaiaPlacesMap.prototype.createRenderElement=function(){var t=document.createElement("div");return t.className="map-container",t.style.cssText="position: inherit;width: 100%;height: 100%;overflow: hidden;",t},GaiaPlacesMap=__decorate([i.Component({selector:"map-gaiaplaces",styles:[n(749)],template:n(775)}),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof r.LocalService&&r.LocalService)&&t||Object,"function"==typeof(e="undefined"!=typeof i.ElementRef&&i.ElementRef)&&e||Object])],GaiaPlacesMap);var t,e}();e.GaiaPlacesMap=o},function(t,e){"use strict";e.InertiaLinearity=.15,e.InertiaDeceleration=12,e.InertiaMaxSpeed=2.5,e.SignificantScaleThreshold=.15,e.SignificantRotateThreshold=4},function(t,e){"use strict";var n=function(){function BridgeMediator(t){this._bridgeService=t}return Object.defineProperty(BridgeMediator.prototype,"currentState",{get:function(){return this._bridgeService.currentState},enumerable:!0,configurable:!0}),Object.defineProperty(BridgeMediator.prototype,"onNewState",{get:function(){return this._bridgeService.onNewState},enumerable:!0,configurable:!0}),Object.defineProperty(BridgeMediator.prototype,"onNewEvent",{get:function(){return this._bridgeService.onNewEvent},enumerable:!0,configurable:!0}),BridgeMediator.prototype.newEvent=function(t){this._bridgeService.newEvent(t)},BridgeMediator.prototype.setState=function(t){this._bridgeService.setState(t)},BridgeMediator}();e.BridgeMediator=n},function(t,e,n){"use strict";var i=n(1),r=n(404),o=n(154),s=n(221),a=function(){function StateService(){this._newStateSource=new r.Subject,this._currentState=o.MapState.Loading,this._onMapStateChange=this._newStateSource.asObservable()}return Object.defineProperty(StateService.prototype,"state",{get:function(){return this._currentState},enumerable:!0,configurable:!0}),Object.defineProperty(StateService.prototype,"onStateChange",{get:function(){return this._onMapStateChange},enumerable:!0,configurable:!0}),StateService.prototype.setState=function(t){if(this._currentState!==t){var e=s.MapEventState.create(this._currentState,t);this._currentState=e.newState,this._newStateSource.next(e)}},StateService=__decorate([i.Injectable(),__metadata("design:paramtypes",[])],StateService)}();e.StateService=a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(0),o=n(405),s=function(t){function MulticastObservable(e,n,i){t.call(this),this.source=e,this.subjectFactory=n,this.selector=i}return i(MulticastObservable,t),MulticastObservable.prototype._subscribe=function(t){var e=this,n=e.selector,i=e.source,r=new o.ConnectableObservable(i,this.subjectFactory),s=n(r).subscribe(t);return s.add(r.connect()),s},MulticastObservable}(r.Observable);e.MulticastObservable=s},,function(t,e,n){"use strict";function getCORSRequest(){if(r.root.XMLHttpRequest){var t=new r.root.XMLHttpRequest;return"withCredentials"in t&&(t.withCredentials=!!this.withCredentials),t}if(r.root.XDomainRequest)return new r.root.XDomainRequest;throw new Error("CORS is not supported by your browser")}function getXMLHttpRequest(){if(r.root.XMLHttpRequest)return new r.root.XMLHttpRequest;var t=void 0;try{for(var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=0;n<3;n++)try{if(t=e[n],new r.root.ActiveXObject(t))break}catch(i){}return new r.root.ActiveXObject(t)}catch(i){throw new Error("XMLHttpRequest is not supported by your browser")}}function ajaxGet(t,e){return void 0===e&&(e=null),new l({method:"GET",url:t,headers:e})}function ajaxPost(t,e,n){return new l({method:"POST",url:t,body:e,headers:n})}function ajaxDelete(t,e){return new l({method:"DELETE",url:t,headers:e})}function ajaxPut(t,e,n){return new l({method:"PUT",url:t,body:e,headers:n})}function ajaxGetJSON(t,e){return new l({method:"GET",url:t,responseType:"json",headers:e}).lift(new u.MapOperator(function(t,e){return t.response},null))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(32),o=n(28),s=n(27),a=n(0),c=n(4),u=n(97);e.ajaxGet=ajaxGet,e.ajaxPost=ajaxPost,e.ajaxDelete=ajaxDelete,e.ajaxPut=ajaxPut,e.ajaxGetJSON=ajaxGetJSON;var l=function(t){function AjaxObservable(e){t.call(this);var n={async:!0,createXHR:function(){return this.crossDomain?getCORSRequest.call(this):getXMLHttpRequest()},crossDomain:!1,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof e)n.url=e;else for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);this.request=n}return i(AjaxObservable,t),AjaxObservable.prototype._subscribe=function(t){return new h(t,this.request)},AjaxObservable.create=function(){var t=function(t){return new AjaxObservable(t)};return t.get=ajaxGet,t.post=ajaxPost,t.delete=ajaxDelete,t.put=ajaxPut,t.getJSON=ajaxGetJSON,t}(),AjaxObservable}(a.Observable);e.AjaxObservable=l;var h=function(t){function AjaxSubscriber(e,n){t.call(this,e),this.request=n,this.done=!1;var i=n.headers=n.headers||{};n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),"Content-Type"in i||r.root.FormData&&n.body instanceof r.root.FormData||"undefined"==typeof n.body||(i["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),n.body=this.serializeBody(n.body,n.headers["Content-Type"]),this.send()}return i(AjaxSubscriber,t),AjaxSubscriber.prototype.next=function(t){this.done=!0;var e=this,n=e.xhr,i=e.request,r=e.destination,o=new p(t,n,i);r.next(o)},AjaxSubscriber.prototype.send=function(){var t=this,e=t.request,n=t.request,i=n.user,r=n.method,a=n.url,c=n.async,u=n.password,l=n.headers,h=n.body,p=e.createXHR,f=o.tryCatch(p).call(e);if(f===s.errorObject)this.error(s.errorObject.e);else{this.xhr=f;var d=void 0;if(d=i?o.tryCatch(f.open).call(f,r,a,c,i,u):o.tryCatch(f.open).call(f,r,a,c),d===s.errorObject)return this.error(s.errorObject.e),null;f.timeout=e.timeout,f.responseType=e.responseType,this.setHeaders(f,l),this.setupEvents(f,e),h?f.send(h):f.send()}return f},AjaxSubscriber.prototype.serializeBody=function(t,e){if(!t||"string"==typeof t)return t;if(r.root.FormData&&t instanceof r.root.FormData)return t;if(e){var n=e.indexOf(";");n!==-1&&(e=e.substring(0,n))}switch(e){case"application/x-www-form-urlencoded":return Object.keys(t).map(function(e){return encodeURI(e)+"="+encodeURI(t[e])}).join("&");case"application/json":return JSON.stringify(t);default:return t}},AjaxSubscriber.prototype.setHeaders=function(t,e){for(var n in e)e.hasOwnProperty(n)&&t.setRequestHeader(n,e[n])},AjaxSubscriber.prototype.setupEvents=function(t,e){var n=e.progressSubscriber;t.ontimeout=function xhrTimeout(t){var e=xhrTimeout,n=e.subscriber,i=e.progressSubscriber,r=e.request;i&&i.error(t),n.error(new d(this,r))},t.ontimeout.request=e,t.ontimeout.subscriber=this,t.ontimeout.progressSubscriber=n,t.upload&&"withCredentials"in t&&r.root.XDomainRequest&&(n&&(t.onprogress=function xhrProgress(t){var e=xhrProgress.progressSubscriber;e.next(t)},t.onprogress.progressSubscriber=n),t.onerror=function xhrError(t){var e=xhrError,n=e.progressSubscriber,i=e.subscriber,r=e.request;n&&n.error(t),i.error(new f("ajax error",this,r))},t.onerror.request=e,t.onerror.subscriber=this,t.onerror.progressSubscriber=n),t.onreadystatechange=function xhrReadyStateChange(t){var e=xhrReadyStateChange,n=e.subscriber,i=e.progressSubscriber,r=e.request;if(4===this.readyState){var o=1223===this.status?204:this.status,s="text"===this.responseType?this.response||this.responseText:this.response;0===o&&(o=s?200:0),200<=o&&o<300?(i&&i.complete(),n.next(t),n.complete()):(i&&i.error(t),n.error(new f("ajax error "+o,this,r)))}},t.onreadystatechange.subscriber=this,t.onreadystatechange.progressSubscriber=n,t.onreadystatechange.request=e},AjaxSubscriber.prototype.unsubscribe=function(){var e=this,n=e.done,i=e.xhr;!n&&i&&4!==i.readyState&&i.abort(),t.prototype.unsubscribe.call(this)},AjaxSubscriber}(c.Subscriber);e.AjaxSubscriber=h;var p=function(){function AjaxResponse(t,e,n){switch(this.originalEvent=t,this.xhr=e,this.request=n,this.status=e.status,this.responseType=e.responseType||n.responseType,this.responseType){case"json":"response"in e?this.response=e.responseType?e.response:JSON.parse(e.response||e.responseText||"null"):this.response=JSON.parse(e.responseText||"null");break;case"xml":this.response=e.responseXML;break;case"text":default:this.response="response"in e?e.response:e.responseText}}return AjaxResponse}();e.AjaxResponse=p;var f=function(t){function AjaxError(e,n,i){t.call(this,e),this.message=e,this.xhr=n,this.request=i,this.status=n.status}return i(AjaxError,t),AjaxError}(Error);e.AjaxError=f;var d=function(t){function AjaxTimeoutError(e,n){t.call(this,"ajax timeout",e,n)}return i(AjaxTimeoutError,t),AjaxTimeoutError}(f);e.AjaxTimeoutError=d},,function(t,e,n){"use strict";function distinct(t,e){return this.lift(new s(t,e))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(7),o=n(8);e.distinct=distinct;var s=function(){function DistinctOperator(t,e){this.compare=t,this.flushes=e}return DistinctOperator.prototype.call=function(t,e){return e._subscribe(new a(t,this.compare,this.flushes))},DistinctOperator}(),a=function(t){function DistinctSubscriber(e,n,i){t.call(this,e),this.values=[],"function"==typeof n&&(this.compare=n),i&&this.add(o.subscribeToResult(this,i))}return i(DistinctSubscriber,t),DistinctSubscriber.prototype.notifyNext=function(t,e,n,i,r){this.values.length=0},DistinctSubscriber.prototype.notifyError=function(t,e){this._error(t)},DistinctSubscriber.prototype._next=function(t){var e=!1,n=this.values,i=n.length;try{for(var r=0;r<i;r++)if(this.compare(n[r],t))return void(e=!0)}catch(o){return void this.destination.error(o)}this.values.push(t),this.destination.next(t)},DistinctSubscriber.prototype.compare=function(t,e){return t===e},DistinctSubscriber}(r.OuterSubscriber);e.DistinctSubscriber=a},function(t,e,n){"use strict";function distinctUntilChanged(t,e){return this.lift(new a(t,e))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4),o=n(28),s=n(27);e.distinctUntilChanged=distinctUntilChanged;var a=function(){function DistinctUntilChangedOperator(t,e){this.compare=t,this.keySelector=e}return DistinctUntilChangedOperator.prototype.call=function(t,e){return e._subscribe(new c(t,this.compare,this.keySelector))},DistinctUntilChangedOperator}(),c=function(t){function DistinctUntilChangedSubscriber(e,n,i){t.call(this,e),this.keySelector=i,this.hasKey=!1,"function"==typeof n&&(this.compare=n)}return i(DistinctUntilChangedSubscriber,t),DistinctUntilChangedSubscriber.prototype.compare=function(t,e){return t===e},DistinctUntilChangedSubscriber.prototype._next=function(t){var e=this.keySelector,n=t;if(e&&(n=o.tryCatch(this.keySelector)(t),n===s.errorObject))return this.destination.error(s.errorObject.e);var i=!1;if(this.hasKey){if(i=o.tryCatch(this.compare)(this.key,n),i===s.errorObject)return this.destination.error(s.errorObject.e)}else this.hasKey=!0;Boolean(i)===!1&&(this.key=n,this.destination.next(t))},DistinctUntilChangedSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function filter(t,e){return this.lift(new o(t,e))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4);e.filter=filter;var o=function(){function FilterOperator(t,e){this.predicate=t,this.thisArg=e}return FilterOperator.prototype.call=function(t,e){return e._subscribe(new s(t,this.predicate,this.thisArg))},FilterOperator}(),s=function(t){function FilterSubscriber(e,n,i){t.call(this,e),this.predicate=n,this.thisArg=i,this.count=0,this.predicate=n}return i(FilterSubscriber,t),FilterSubscriber.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)},FilterSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function find(t,e){if("function"!=typeof t)throw new TypeError("predicate is not a function");return this.lift(new o(t,this,(!1),e))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4);e.find=find;var o=function(){function FindValueOperator(t,e,n,i){this.predicate=t,this.source=e,this.yieldIndex=n,this.thisArg=i}return FindValueOperator.prototype.call=function(t,e){return e._subscribe(new s(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},FindValueOperator}();e.FindValueOperator=o;var s=function(t){function FindValueSubscriber(e,n,i,r,o){t.call(this,e),this.predicate=n,this.source=i,this.yieldIndex=r,this.thisArg=o,this.index=0}return i(FindValueSubscriber,t),FindValueSubscriber.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},FindValueSubscriber.prototype._next=function(t){var e=this,n=e.predicate,i=e.thisArg,r=this.index++;try{var o=n.call(i||this,t,r,this.source);o&&this.notifyComplete(this.yieldIndex?r:t)}catch(s){this.destination.error(s)}},FindValueSubscriber.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},FindValueSubscriber}(r.Subscriber);e.FindValueSubscriber=s},,,function(t,e,n){"use strict";function merge(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return t.unshift(this),mergeStatic.apply(this,t)}function mergeStatic(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=Number.POSITIVE_INFINITY,s=null,a=t[t.length-1];return o.isScheduler(a)?(s=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof a&&(n=t.pop()),1===t.length?t[0]:new i.ArrayObservable(t,s).lift(new r.MergeAllOperator(n))}var i=n(71),r=n(113),o=n(86);e.merge=merge,e.mergeStatic=mergeStatic},function(t,e,n){"use strict";function mergeMapTo(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"number"==typeof e&&(n=e,e=null),this.lift(new s(t,e,n))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(7),o=n(8);e.mergeMapTo=mergeMapTo;var s=function(){function MergeMapToOperator(t,e,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.ish=t,this.resultSelector=e,this.concurrent=n}return MergeMapToOperator.prototype.call=function(t,e){return e._subscribe(new a(t,this.ish,this.resultSelector,this.concurrent))},MergeMapToOperator}();e.MergeMapToOperator=s;var a=function(t){function MergeMapToSubscriber(e,n,i,r){void 0===r&&(r=Number.POSITIVE_INFINITY),t.call(this,e),this.ish=n,this.resultSelector=i,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return i(MergeMapToSubscriber,t),MergeMapToSubscriber.prototype._next=function(t){if(this.active<this.concurrent){var e=this.resultSelector,n=this.index++,i=this.ish,r=this.destination;this.active++,this._innerSub(i,r,e,t,n)}else this.buffer.push(t)},MergeMapToSubscriber.prototype._innerSub=function(t,e,n,i,r){this.add(o.subscribeToResult(this,t,i,r))},MergeMapToSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},MergeMapToSubscriber.prototype.notifyNext=function(t,e,n,i,r){var o=this,s=o.resultSelector,a=o.destination;s?this.trySelectResult(t,e,n,i):a.next(e)},MergeMapToSubscriber.prototype.trySelectResult=function(t,e,n,i){var r,o=this,s=o.resultSelector,a=o.destination;try{r=s(t,e,n,i)}catch(c){return void a.error(c)}a.next(r)},MergeMapToSubscriber.prototype.notifyError=function(t){this.destination.error(t)},MergeMapToSubscriber.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},MergeMapToSubscriber}(r.OuterSubscriber);e.MergeMapToSubscriber=a},function(t,e,n){"use strict";function onErrorResumeNext(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 1===t.length&&o.isArray(t[0])&&(t=t[0]),this.lift(new c(t))}function onErrorResumeNextStatic(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=null;return 1===t.length&&o.isArray(t[0])&&(t=t[0]),n=t.shift(),new r.FromObservable(n,null).lift(new c(t))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(578),o=n(58),s=n(7),a=n(8);e.onErrorResumeNext=onErrorResumeNext,e.onErrorResumeNextStatic=onErrorResumeNextStatic;var c=function(){function OnErrorResumeNextOperator(t){this.nextSources=t}return OnErrorResumeNextOperator.prototype.call=function(t,e){return e._subscribe(new u(t,this.nextSources))},OnErrorResumeNextOperator}(),u=function(t){function OnErrorResumeNextSubscriber(e,n){t.call(this,e),this.destination=e,this.nextSources=n}return i(OnErrorResumeNextSubscriber,t),OnErrorResumeNextSubscriber.prototype.notifyError=function(t,e){this.subscribeToNextSource()},OnErrorResumeNextSubscriber.prototype.notifyComplete=function(t){this.subscribeToNextSource()},OnErrorResumeNextSubscriber.prototype._error=function(t){this.subscribeToNextSource()},OnErrorResumeNextSubscriber.prototype._complete=function(){this.subscribeToNextSource()},OnErrorResumeNextSubscriber.prototype.subscribeToNextSource=function(){var t=this.nextSources.shift();t?this.add(a.subscribeToResult(this,t)):this.destination.complete()},OnErrorResumeNextSubscriber}(s.OuterSubscriber)},function(t,e,n){"use strict";function race(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 1===t.length&&r.isArray(t[0])&&(t=t[0]),t.unshift(this),raceStatic.apply(this,t)}function raceStatic(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];if(1===t.length){if(!r.isArray(t[0]))return t[0];t=t[0]}return new o.ArrayObservable(t).lift(new c)}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(58),o=n(71),s=n(7),a=n(8);e.race=race,e.raceStatic=raceStatic;var c=function(){function RaceOperator(){}return RaceOperator.prototype.call=function(t,e){return e._subscribe(new u(t))},RaceOperator}();e.RaceOperator=c;var u=function(t){function RaceSubscriber(e){t.call(this,e),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return i(RaceSubscriber,t),RaceSubscriber.prototype._next=function(t){this.observables.push(t)},RaceSubscriber.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e;n++){var i=t[n],r=a.subscribeToResult(this,i,i,n);this.subscriptions&&(this.subscriptions.push(r),this.add(r))}this.observables=null}},RaceSubscriber.prototype.notifyNext=function(t,e,n,i,r){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(e)},RaceSubscriber}(s.OuterSubscriber);e.RaceSubscriber=u},function(t,e,n){"use strict";function timeInterval(t){return void 0===t&&(t=o.async),this.lift(new a(t))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4),o=n(37);e.timeInterval=timeInterval;var s=function(){function TimeInterval(t,e){this.value=t,this.interval=e}return TimeInterval}();e.TimeInterval=s;var a=function(){function TimeIntervalOperator(t){this.scheduler=t}return TimeIntervalOperator.prototype.call=function(t,e){return e._subscribe(new c(t,this.scheduler))},TimeIntervalOperator}(),c=function(t){function TimeIntervalSubscriber(e,n){t.call(this,e),this.scheduler=n,this.lastTime=0,this.lastTime=n.now()}return i(TimeIntervalSubscriber,t),TimeIntervalSubscriber.prototype._next=function(t){var e=this.scheduler.now(),n=e-this.lastTime;this.lastTime=e,this.destination.next(new s(t,n))},TimeIntervalSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function timestamp(t){return void 0===t&&(t=o.async),this.lift(new a(t))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4),o=n(37);e.timestamp=timestamp;var s=function(){function Timestamp(t,e){this.value=t,this.timestamp=e}return Timestamp}();e.Timestamp=s;var a=function(){function TimestampOperator(t){this.scheduler=t}return TimestampOperator.prototype.call=function(t,e){return e._subscribe(new c(t,this.scheduler))},TimestampOperator}(),c=function(t){function TimestampSubscriber(e,n){t.call(this,e),this.scheduler=n}return i(TimestampSubscriber,t),TimestampSubscriber.prototype._next=function(t){var e=this.scheduler.now();this.destination.next(new s(t,e))},TimestampSubscriber}(r.Subscriber)},,function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(143),o=n(144),s=function(t){function VirtualTimeScheduler(e,n){var i=this;void 0===e&&(e=a),void 0===n&&(n=Number.POSITIVE_INFINITY),t.call(this,e,function(){return i.frame}),this.maxFrames=n,this.frame=0,this.index=-1}return i(VirtualTimeScheduler,t),VirtualTimeScheduler.prototype.flush=function(){for(var t,e,n=this,i=n.actions,r=n.maxFrames;(e=i.shift())&&(this.frame=e.delay)<=r&&!(t=e.execute(e.state,e.delay)););if(t){for(;e=i.shift();)e.unsubscribe();throw t}},VirtualTimeScheduler.frameTimeFactor=10,VirtualTimeScheduler}(o.AsyncScheduler);e.VirtualTimeScheduler=s;var a=function(t){function VirtualAction(e,n,i){void 0===i&&(i=e.index+=1),t.call(this,e,n),this.scheduler=e,this.work=n,this.index=i,this.index=e.index=i}return i(VirtualAction,t),VirtualAction.prototype.schedule=function(e,n){return void 0===n&&(n=0),this.id?this.add(new VirtualAction(this.scheduler,this.work)).schedule(e,n):t.prototype.schedule.call(this,e,n)},VirtualAction.prototype.requestAsyncId=function(t,e,n){void 0===n&&(n=0),this.delay=t.frame+n;var i=t.actions;return i.push(this),i.sort(VirtualAction.sortActions),!0},VirtualAction.prototype.recycleAsyncId=function(t,e,n){void 0===n&&(n=0)},VirtualAction.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},VirtualAction}(r.AsyncAction);e.VirtualAction=a},function(t,e,n){"use strict";var i=n(1292),r=n(1293);e.asap=new r.AsapScheduler(i.AsapAction)},function(t,e,n){"use strict";var i=n(1294),r=n(1295);e.queue=new r.QueueScheduler(i.QueueAction)},function(t,e){"use strict";var n=function(){function SubscriptionLog(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.subscribedFrame=t,this.unsubscribedFrame=e}return SubscriptionLog}();e.SubscriptionLog=n},function(t,e,n){"use strict";var i=n(599),r=function(){function SubscriptionLoggable(){this.subscriptions=[]}return SubscriptionLoggable.prototype.logSubscribedFrame=function(){return this.subscriptions.push(new i.SubscriptionLog(this.scheduler.now())),this.subscriptions.length-1},SubscriptionLoggable.prototype.logUnsubscribedFrame=function(t){var e=this.subscriptions,n=e[t];e[t]=new i.SubscriptionLog(n.subscribedFrame,this.scheduler.now())},SubscriptionLoggable}();e.SubscriptionLoggable=r},,function(t,e){"use strict";function applyMixins(t,e){for(var n=0,i=e.length;n<i;n++)for(var r=e[n],o=Object.getOwnPropertyNames(r.prototype),s=0,a=o.length;s<a;s++){var c=o[s];t.prototype[c]=r.prototype[c]}}e.applyMixins=applyMixins},,function(t,e){"use strict";function noop(){}e.noop=noop},function(t,e,n){var i=n(10).polygon;t.exports=function(t){var e=[t[0],t[1]],n=[t[0],t[3]],r=[t[2],t[3]],o=[t[2],t[1]];return i([[e,o,r,n,e]])}},function(t,e,n){var i=n(209),r=n(10).point;t.exports=function(t){var e=i(t),n=(e[0]+e[2])/2,o=(e[1]+e[3])/2;return r([n,o])}},function(t,e,n){var i=n(10).featureCollection,r=n(116).coordEach,o=n(10).point;t.exports=function(t){var e=[];return r(t,function(t){e.push(o(t))}),i(e)}},function(t,e){t.exports=function(t,e){var n=t.geometry.coordinates[0],i=t.geometry.coordinates[1],r=e.geometry.coordinates[0][0][0],o=e.geometry.coordinates[0][0][1],s=e.properties.a,a=e.geometry.coordinates[0][1][0],c=e.geometry.coordinates[0][1][1],u=e.properties.b,l=e.geometry.coordinates[0][2][0],h=e.geometry.coordinates[0][2][1],p=e.properties.c,f=(p*(n-r)*(i-c)+s*(n-a)*(i-h)+u*(n-l)*(i-o)-u*(n-r)*(i-h)-p*(n-a)*(i-o)-s*(n-l)*(i-c))/((n-r)*(i-c)+(n-a)*(i-h)+(n-l)*(i-o)-(n-r)*(i-h)-(n-a)*(i-o)-(n-l)*(i-c));return f}},function(t,e,n){function pointOnLine(t,e){for(var n="miles",a=r([1/0,1/0],{dist:1/0}),c=0;c<e.length-1;c++){var u=r(e[c]),l=r(e[c+1]);u.properties.dist=i(t,u,n),l.properties.dist=i(t,l,n);var h,p=Math.max(u.properties.dist,l.properties.dist),f=o(u,l),d=s(t,p,f+90,n),g=s(t,p,f-90,n),y=lineIntersects(d.geometry.coordinates[0],d.geometry.coordinates[1],g.geometry.coordinates[0],g.geometry.coordinates[1],u.geometry.coordinates[0],u.geometry.coordinates[1],l.geometry.coordinates[0],l.geometry.coordinates[1]);y&&(h=r(y),h.properties.dist=i(t,h,n)),u.properties.dist<a.properties.dist&&(a=u,a.properties.index=c),l.properties.dist<a.properties.dist&&(a=l,a.properties.index=c),h&&h.properties.dist<a.properties.dist&&(a=h,a.properties.index=c)}return a}function lineIntersects(t,e,n,i,r,o,s,a){var c,u,l,h,p,f={x:null,y:null,onLine1:!1,onLine2:!1};return c=(a-o)*(n-t)-(s-r)*(i-e),0===c?null!==f.x&&null!==f.y&&f:(u=e-o,l=t-r,h=(s-r)*u-(a-o)*l,p=(n-t)*u-(i-e)*l,u=h/c,l=p/c,f.x=t+u*(n-t),f.y=e+u*(i-e),u>0&&u<1&&(f.onLine1=!0),l>0&&l<1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}var i=n(41),r=n(10).point,o=n(210),s=n(211);t.exports=function(t,e){var n;if("Feature"===t.type)n=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");n=t.coordinates}return pointOnLine(e,n)}},function(t,e,n){var i=n(41);t.exports=function(t){var e=i(t.slice(0,2),[t[2],t[1]],"miles"),n=i(t.slice(0,2),[t[0],t[3]],"miles");if(e>=n){var r=(t[1]+t[3])/2;return[t[0],r-(t[2]-t[0])/2,t[2],r+(t[2]-t[0])/2]}var o=(t[0]+t[2])/2;return[o-(t[3]-t[1])/2,t[1],o+(t[3]-t[1])/2,t[3]]}},function(t,e,n){var i=n(199);t.exports=function(t,e){var n=new i.io.GeoJSONReader,r=n.read(JSON.stringify(t.geometry)),o=n.read(JSON.stringify(e.geometry)),s=r.union(o),a=new i.io.GeoJSONWriter;return s=a.write(s),{type:"Feature",geometry:s,properties:t.properties}}},function(t,e){"use strict";function twoProduct(t,e,i){var r=t*e,o=n*t,s=o-t,a=o-s,c=t-a,u=n*e,l=u-e,h=u-l,p=e-h,f=r-a*h,d=f-c*h,g=d-a*p,y=c*p-g;return i?(i[0]=y,i[1]=r,i):[y,r]}t.exports=twoProduct;var n=+(Math.pow(2,27)+1)},,,function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}__export(n(639))},,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(47),r=n(99),o=n(42),s=function(){function BootData(){}return BootData.getProfile=function(t,e){var n=i.GeometryUtility.createPoint([t,e]),s=i.GeometryUtility.createPoint(o.NORRKOPING_POINT),a=i.GeometryUtility.createPoint(o.MJARDEVI_POINT),c=i.GeometryUtility.distance(n,s),u=i.GeometryUtility.distance(n,a);
if(c<u){var l=1e3,h=1e3;return new r.GeoProfile(e,t,l,h,"Norrköping Science Park")}var p=4500,f=4e3;return new r.GeoProfile(e,t,p,f,"Mjärdevi Science Park")},BootData}();e.BootData=s},function(t,e,n){"use strict";var i=n(1),r=n(150),o=n(151),s=n(152),a=n(217),c=n(147),u=n(99),l=n(148),h=n(47),p=n(118),f=n(425),d=n(423),g=n(424),y=n(426),v=n(427),m=n(98),b=n(153),x=n(102),S=function(){function App(t,e,n,i,r,o,s,a,u,h,p){this._buildingService=t,this._activityService=e,this._mapManagerService=n,this._appstate=i,this._busStopService=r,this._eventService=o,this._layerService=s,this._geoProfileService=a,this._serviceProvider=u,this._componentFactoryResolver=h,this._selectedObjectService=p,this.title=c.AppConfiguration.defaultTitleConfiguration,this._selectedBusStopId=void 0,this._appstate.state!==l.State.Init&&(this.title=this._geoProfileService.geoProfile.name)}return App.prototype.mapClick=function(t){if(clearInterval(this._debSubInvNr),this._selectedObjectService.clearAllSelectedObjects(),_.isEmpty(t.data))return this._selectedBusStopId=void 0,void this._mapManagerService.setTooltipVisibility(!1);t.data.type!==u.ModelType.BusStop&&(this._selectedBusStopId=void 0);this._layerService.getOne(t.data.type,t.data.id);switch(t.data.type){case"Activity-cluster":this.onMapClickActivityCluster(t);break;case u.ModelType.Activity:this.onMapClickActivity(t);break;case u.ModelType.BusStop:this.onMapClickBusStop(t);break;case u.ModelType.Building:this.onMapClickBuilding(t);break;case u.ModelType.Event:this.onMapClickEvent(t);break;case u.ModelType.Function:this.onMapClickFunction(t);break;default:this._selectedObject=void 0,this._mapManagerService.setTooltipVisibility(!1)}},App.prototype.selectObject=function(t,e){this._mapManagerService.select(t,e)},App.prototype.onMapClickActivityCluster=function(t){this._selectedObject=void 0,this._mapManagerService.select("Building",""),this._mapManagerService.select("Activity",""),this._mapManagerService.select("Event",""),this._mapManagerService.centerPosition(t.data.location,18.5),this._mapManagerService.setTooltipVisibility(!1)},App.prototype.onMapClickFunction=function(t){if(!_.isUndefined(t)||!_.isUndefined(t.data)){var e=this._layerService.getOne(u.ModelType.Function,t.data.id,!0);if(!_.isUndefined(e)&&e.isValid){var n=e.cms.functionType,i=void 0;switch(n.name){case"Intressepunkt":case"Parkering":case"Pumpstation":i=this.createInterestPointTemplate(e)}i&&(this._selectedObject=u.ModelType.Function,this.selectObject(e.cms.functionType.name,t.data.id),this._mapManagerService.setTooltipFixedPosition(!0,t.data.position.x,t.data.position.y),this._mapManagerService.setTooltipModel(i))}}},App.prototype.createInterestPointTemplate=function(t){var e=t.cms,n=this._layerService.getFunctionLayer();return this._mapManagerService.setTooltipTemplate(v.InterestPointTooltipTemplateComponent),{title:e.name,description:e.description,icon:n.getIcon(t),subTitle:e.functionType.name}},App.prototype.onMapClickActivity=function(t){this._mapManagerService.setTooltipTemplate(d.ActivityTooltipTemplateComponent),this._selectedObject=u.ModelType.Activity;var e=this._layerService.getOne(t.data.type,t.data.id),n=this._layerService.getActivityLayer();"Food"===e.cms.category&&this.selectObject("Restaurang",t.data.id);var i={title:e.name,building:e.getFirstOrDefaultBuildingName(),address:e.cms.address,contactNr:e.getFirstOrDefaultPhoneNumber(),category:e.cms.category,icon:n.getIcon(e.cms.category),floor:e.cms.floor};this._mapManagerService.setTooltipFixedPosition(!0,t.data.position.x,t.data.position.y),this._mapManagerService.setTooltipModel(i)},App.prototype.onMapClickBusStop=function(t){var e=this;this._selectedObject=u.ModelType.BusStop,this.selectObject(t.data.type,t.data.id);var n=this._layerService.getOne(t.data.type,t.data.id);if(void 0!==this._selectedBusStopId&&t.data.id===this._selectedBusStopId)this._debSubInvNr=setInterval(function(){e.fetchandSetDepartures(n)},3e4);else{this._mapManagerService.setTooltipTemplate(y.DepartureBoardTooltipTemplateComponent),this._mapManagerService.setTooltipFixedPosition(!0,t.data.position.x,t.data.position.y),this._selectedBusStopId=n.id;var i={isLoadingDepatures:!0,lastDeparturesUpdate:new Date,title:n.name,distanceInMFromBusStop:n.cms.walkDistanceInMeter,distanceInKmFromBusStop:n.cms.walkDistanceInKm,departures:[]};this._mapManagerService.setTooltipModel(i),this.fetchandSetDepartures(n)}},App.prototype.fetchandSetDepartures=function(t){var e=this,n=this._serviceProvider.getOne(u.ModelType.Departure);n.get(t.id).then(function(n){if(void 0!==n){var i={isLoadingDepatures:!1,lastDeparturesUpdate:new Date,title:t.name,distanceInMFromBusStop:t.cms.walkDistanceInMeter,distanceInKmFromBusStop:t.cms.walkDistanceInKm,departures:_.map(n,function(t){return{transportType:t.cms.transportType,direction:t.cms.direction,transportNumber:t.cms.transportNumber,dTime:t.cms.dTime,timeToDeparture:t.cms.timeToDeparture}})};void 0!==e._selectedBusStopId&&e._mapManagerService.setTooltipModel(i)}})},App.prototype.onMapClickBuilding=function(t){this._selectedObject=u.ModelType.Building,this.selectObject(t.data.type,t.data.id),this._mapManagerService.setTooltipTemplate(g.BuildingTooltipTemplateComponent);var e=this._layerService.getOne(t.data.type,t.data.id),n={name:e.name,description:"",propertyOwner:e.cms.propertyOwner,propertyContacts:e.cms.propertyContact};this._mapManagerService.setTooltipFixedPosition(!0,t.data.position.x,t.data.position.y),this._mapManagerService.setTooltipModel(n)},App.prototype.onMapClickEvent=function(t){this._selectedObject=u.ModelType.Event,this._mapManagerService.setTooltipTemplate(f.DefaultTooltipComponent);var e=this._layerService.getOne(t.data.type,t.data.id),n={title:e.name+" ,"+e.cms.date,description:e.cms.description};this._mapManagerService.setTooltipFixedPosition(!0,t.data.position.x,t.data.position.y),this._mapManagerService.setTooltipModel(n)},App=__decorate([i.Component({selector:"app",styles:[n(748)],encapsulation:i.ViewEncapsulation.None,template:n(754)}),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof o.BuildingService&&o.BuildingService)&&t||Object,"function"==typeof(e="undefined"!=typeof r.ActivityService&&r.ActivityService)&&e||Object,"function"==typeof(S="undefined"!=typeof h.MapManagerService&&h.MapManagerService)&&S||Object,"function"==typeof(w="undefined"!=typeof l.AppState&&l.AppState)&&w||Object,"function"==typeof(C="undefined"!=typeof s.BusStopService&&s.BusStopService)&&C||Object,"function"==typeof(I="undefined"!=typeof a.EventService&&a.EventService)&&I||Object,"function"==typeof(E="undefined"!=typeof m.LayerService&&m.LayerService)&&E||Object,"function"==typeof(L="undefined"!=typeof p.GeoProfileService&&p.GeoProfileService)&&L||Object,"function"==typeof(T="undefined"!=typeof b.ServiceProvider&&b.ServiceProvider)&&T||Object,"function"==typeof(O="undefined"!=typeof i.ComponentFactoryResolver&&i.ComponentFactoryResolver)&&O||Object,"function"==typeof(N="undefined"!=typeof x.SelectedObjectService&&x.SelectedObjectService)&&N||Object])],App);var t,e,S,w,C,I,E,L,T,O,N}();e.App=S},function(t,e,n){"use strict";var i=n(1),r=n(73),o=n(73),s=n(213),a=n(72),c=n(214),u=n(638),l=n(644),h=n(696),p=n(640),f=n(47),d=n(707),g=n(418),y=n(637),v=n(148),m=n(150),b=n(151),x=n(449),S=n(448),_=n(450),w=n(218),C=n(119),I=n(152),E=n(217),L=n(435),T=n(98),O=n(153),N=n(118),P=n(102),M=function(t){function MyHammerConfig(){t.apply(this,arguments),this.overrides={pan:{threshold:2},press:{time:4e3}}}return __extends(MyHammerConfig,t),MyHammerConfig}(r.HammerGestureConfig);e.MyHammerConfig=M;var R=function(){function AppModule(t,e,n,i,r,o,s,a,c,u,l,h,p,f,d,g){var m=this;this._mapManagerService=t,this._appstate=e,this._buildingService=n,this._activityService=i,this._busStopService=r,this._eventService=o,this._loadingProgress=s,this._layerService=a,this._serviceProvider=c,this._departureService=u,this._timeService=l,this._geoProfileService=h,this._functionService=p,this._entranceService=f,this._stairwellService=d,this._selectedObjectService=g;var b=new Date;this._appstate.lastUpdateHour=b.getHours(),this._appstate.state=v.State.Init,this._mapManagerService.setLoadingText("Initialize Location.."),this._registerServices(),document.body.addEventListener("click",function(t){m._appstate.hasMovedLastMinute=!0}),this._timeService.everyMinute.filter(function(){return m._appstate.state!==v.State.Init}).subscribe(function(t){if(!m._appstate.hasMovedLastMinute){var e=t.getHours();m._appstate.resetMap(),m._appstate.lastUpdateHour!==e&&(m._appstate.updateData().then(function(){m._appstate.redrawLayers()}),m._appstate.lastUpdateHour=e)}m._appstate.hasMovedLastMinute=!1}),this._geoProfileService.geoProfile=y.BootData.getProfile(16.17756128,58.58895577),this._appstate.updateData().then(function(){m._appstate.redrawLayers()})}return AppModule.prototype._registerServices=function(){},AppModule.prototype.createGeoProfile=function(t){var e=Number(t.coordinates.longitude),n=Number(t.coordinates.latitude);return y.BootData.getProfile(e,n)},AppModule.prototype.createPromiseRetry=function(t,e,n){return void 0===n&&(n=null),new L.PromiseRetry(this._loadingProgress,t,e,n)},AppModule.prototype.createWinPromiseRetry=function(t,e){return new L.WinPromiseRetry(this._loadingProgress,t,e)},AppModule=__decorate([i.NgModule({bootstrap:[u.App],declarations:[u.App,l.APP_COMPONENTS_PIPES,l.APP_COMPONENTS],imports:[o.BrowserModule,s.FormsModule,a.HttpModule,a.JsonpModule,c.RouterModule.forRoot(p.ROUTES,{useHash:!0}),d.GaiaPlacesMapModule],providers:[g.ENV_PROVIDERS,v.APP_PROVIDERS,h.APP_RESOLVERS,{provide:r.HAMMER_GESTURE_CONFIG,useClass:M}],entryComponents:[l.APP_TOOLTIP_ENTRIES]}),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof f.MapManagerService&&f.MapManagerService)&&t||Object,"function"==typeof(e="undefined"!=typeof v.AppState&&v.AppState)&&e||Object,"function"==typeof(n="undefined"!=typeof b.BuildingService&&b.BuildingService)&&n||Object,"function"==typeof(R="undefined"!=typeof m.ActivityService&&m.ActivityService)&&R||Object,"function"==typeof(A="undefined"!=typeof I.BusStopService&&I.BusStopService)&&A||Object,"function"==typeof(F="undefined"!=typeof E.EventService&&E.EventService)&&F||Object,"function"==typeof(D="undefined"!=typeof w.LoadingProgress&&w.LoadingProgress)&&D||Object,"function"==typeof(k="undefined"!=typeof T.LayerService&&T.LayerService)&&k||Object,"function"==typeof(B="undefined"!=typeof O.ServiceProvider&&O.ServiceProvider)&&B||Object,"function"==typeof(j="undefined"!=typeof I.DepartureService&&I.DepartureService)&&j||Object,"function"==typeof(G="undefined"!=typeof C.TimeService&&C.TimeService)&&G||Object,"function"==typeof(z="undefined"!=typeof N.GeoProfileService&&N.GeoProfileService)&&z||Object,"function"==typeof(q="undefined"!=typeof x.FunctionService&&x.FunctionService)&&q||Object,"function"==typeof(V="undefined"!=typeof S.EntranceService&&S.EntranceService)&&V||Object,"function"==typeof(U="undefined"!=typeof _.StairwellService&&_.StairwellService)&&U||Object,"function"==typeof(W="undefined"!=typeof P.SelectedObjectService&&P.SelectedObjectService)&&W||Object])],AppModule);var t,e,n,R,A,F,D,k,B,j,G,z,q,V,U,W}();e.AppModule=R},function(t,e,n){"use strict";var i=n(421),r=n(422);e.ROUTES=[{path:"",component:i.HomeComponent},{path:"property/:id",component:r.PropertyViewComponent},{path:"home",component:i.HomeComponent},{path:"**",component:i.HomeComponent}]},function(t,e,n){"use strict";var i=n(1),r=n(119),o=function(){function DateTimeComponent(t){this._timeService=t,this.timeString=this.start()}return DateTimeComponent.prototype.start=function(){this.timeString=setInterval(this.getUpdate(),500)},DateTimeComponent.prototype.getUpdate=function(){var t=this,e=this;return function(){e.timeString=t._timeService.time(),e.dateString=t._timeService.day()}},DateTimeComponent=__decorate([i.Component({selector:"date-time",template:'<div class="time">{{timeString}}</div> <div class="day">{{dateString}}</div>',styles:[n(728)]}),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof r.TimeService&&r.TimeService)&&t||Object])],DateTimeComponent);var t}();e.DateTimeComponent=o},function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}__export(n(641))},function(t,e,n){"use strict";var i=n(1),r=function(){function HomeComponent(){this.localState={value:""}}return HomeComponent.prototype.ngOnInit=function(){},HomeComponent.prototype.submitState=function(t){},HomeComponent=__decorate([i.Component({selector:"home",styles:[n(729)],template:n(755)}),__metadata("design:paramtypes",[])],HomeComponent)}();e.HomeComponent=r},function(t,e,n){"use strict";var i=n(642),r=n(648),o=n(667),s=n(421),a=n(422),c=n(645),u=n(660),l=n(666),h=n(664),p=n(658);e.APP_COMPONENTS=[h.DefaultTooltipComponent,h.ActivityTooltipTemplateComponent,h.BuildingTooltipTemplateComponent,h.DepartureBoardTooltipTemplateComponent,h.ProjectTooltipTemplateComponent,h.InterestPointTooltipTemplateComponent,i.DateTimeComponent,c.LoaderComponent,c.LoadingProgressComponent,r.MainMenuComponent,o.TopMenuComponent,s.HomeComponent,a.PropertyViewComponent,a.PropertyEditComponent,p.DetailActivityComponent,u.RightMenuComponent,p.ActivityListComponent,p.FunctionListComponent,p.WeatherItemComponent,p.EventListComponent,p.DetailEventComponent],e.APP_COMPONENTS_PIPES=[u.BelongsToBuildingPipe,u.OrderByPipe,l.ReversePipe],e.APP_TOOLTIP_ENTRIES=[h.InterestPointTooltipTemplateComponent,h.DefaultTooltipComponent,h.ActivityTooltipTemplateComponent,h.BuildingTooltipTemplateComponent,h.DepartureBoardTooltipTemplateComponent,h.ProjectTooltipTemplateComponent]},function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}__export(n(646)),__export(n(647))},function(t,e,n){"use strict";var i=n(1),r=function(){function LoaderComponent(){this.localState={value:""}}return LoaderComponent.prototype.ngOnInit=function(){},LoaderComponent.prototype.submitState=function(t){},__decorate([i.Input(),__metadata("design:type",String)],LoaderComponent.prototype,"text",void 0),__decorate([i.Input(),__metadata("design:type",Boolean)],LoaderComponent.prototype,"loading",void 0),LoaderComponent=__decorate([i.Component({selector:"loader",styles:[n(730)],template:n(756)}),__metadata("design:paramtypes",[])],LoaderComponent)}();e.LoaderComponent=r},function(t,e,n){"use strict";var i=n(1),r=function(){function LoadingProgressComponent(){}return LoadingProgressComponent.prototype.ngOnInit=function(){},LoadingProgressComponent.prototype.submitState=function(t){},__decorate([i.Input(),__metadata("design:type",String)],LoadingProgressComponent.prototype,"text",void 0),__decorate([i.Input(),__metadata("design:type",Boolean)],LoadingProgressComponent.prototype,"loading",void 0),LoadingProgressComponent=__decorate([i.Component({selector:"loading-progress",styles:[n(731)],template:n(757)}),__metadata("design:paramtypes",[])],LoadingProgressComponent)}();e.LoadingProgressComponent=r},function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}__export(n(649))},function(t,e,n){"use strict";var i=n(1),r=function(){function MainMenuComponent(){}return MainMenuComponent=__decorate([i.Component({selector:"main-menu",template:n(758)}),__metadata("design:paramtypes",[])],MainMenuComponent)}();e.MainMenuComponent=r},function(t,e,n){"use strict";var i=n(1),r=n(219),o=function(){function PropertyEditComponent(t,e){this._propertyService=t,this._injector=e,this.localState={value:""}}return PropertyEditComponent.prototype.onSubmit=function(){},PropertyEditComponent.prototype.ngOnInit=function(){},PropertyEditComponent.prototype.submitState=function(t){},__decorate([i.Input(),__metadata("design:type",Object)],PropertyEditComponent.prototype,"property",void 0),PropertyEditComponent=__decorate([i.Component({selector:"property-edit",styles:[n(732)],template:n(759)}),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof r.PropertyService&&r.PropertyService)&&t||Object,"function"==typeof(e="undefined"!=typeof i.Injector&&i.Injector)&&e||Object])],PropertyEditComponent);var t,e}();e.PropertyEditComponent=o},function(t,e,n){"use strict";var i=n(1),r=n(214),o=n(219),s=function(){function PropertyViewComponent(t,e,n){this._propertyService=t,this.route=e,this._router=n,this.localState={value:""},this.isLoadingProperty=!0,this.showEditView=!1}return PropertyViewComponent.prototype.toggleShowEditView=function(){this.showEditView=!this.showEditView},PropertyViewComponent.prototype.ngOnInit=function(){this._sub=this.route.params.subscribe(function(t){t.id})},PropertyViewComponent.prototype.ngOnDestroy=function(){this._sub.unsubscribe()},PropertyViewComponent.prototype.submitState=function(t){},PropertyViewComponent.prototype.initView=function(){},PropertyViewComponent=__decorate([i.Component({selector:"property-view",styles:[n(733)],template:n(760)}),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof o.PropertyService&&o.PropertyService)&&t||Object,"function"==typeof(e="undefined"!=typeof r.ActivatedRoute&&r.ActivatedRoute)&&e||Object,"function"==typeof(s="undefined"!=typeof r.Router&&r.Router)&&s||Object])],PropertyViewComponent);var t,e,s}();e.PropertyViewComponent=s},function(t,e,n){"use strict";var i=n(1),r=function(){function BelongsToBuildingPipe(){}return BelongsToBuildingPipe.prototype.transform=function(t,e){return t.filter(function(t){if(""==e)return!0;var n=!1;return _.each(t.cms.tags,function(t){var i=t.type.toString();if("Building"==i&&t.id==e)return n=!0,!0}),n})},BelongsToBuildingPipe=__decorate([i.Pipe({name:"belongsToBuilding",pure:!1}),__metadata("design:paramtypes",[])],BelongsToBuildingPipe)}();e.BelongsToBuildingPipe=r},function(t,e,n){"use strict";var i=n(1),r=n(98),o=n(99),s=n(20),a=n(47),c=["-","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","å","ä","ö"],u=function(){function ActivityListComponent(t,e){this._mapManagerService=t,this._layerService=e,this.onNewScrollTop=new i.EventEmitter,this.activities=[],this.sortedDictionary={},this.isLoadingActivityList=!0,this.selectedActivityId=void 0,this.currentLetter="",this.activities=this._layerService.get(s.ModelType.Activity),this.createList()}return ActivityListComponent.prototype.ngOnInit=function(){var t=this;this._layerSub=this._layerService.onNewBaseContent.filter(function(t){return t.type===s.ModelType.Activity}).subscribe(function(e){t.activities=t._layerService.get(s.ModelType.Activity),t.createList()}),this._buildingSub=this._mapManagerService.onNewEvent.filter(function(t){return t.state===a.MapState.Normal}).filter(function(t){return t.type===a.MapEventType.mapClick}).subscribe(function(e){_.isEmpty(e.data)||"building"!==e.data.type.toLowerCase()?t.removeFilterOnBuilding(e):t.addFilterOnBuilding(e)})},ActivityListComponent.prototype.ngOnDestroy=function(){this._mapManagerService.setTooltipVisibility(!1),this._layerSub.unsubscribe(),this._layerSub=null,this._buildingSub.unsubscribe(),this._buildingSub=null},ActivityListComponent.prototype.getLetters=function(){return c},ActivityListComponent.prototype.showThis=function(t){},ActivityListComponent.prototype.letterClick=function(t){if(_.isUndefined(t))this.currentLetter="";else{var e=t.target;if(_.isUndefined(e))this.currentLetter="";else{this.currentLetter=_.trim(e.innerText.toLowerCase());var n=this.getDivLetterById(this.currentLetter);void 0!==n&&0!==n.length&&this.onNewScrollTop.next({isAnimation:!1,scrollTop:n[0].nativeElement.children[0].children[0].offsetTop-30})}}},ActivityListComponent.prototype.deSelectActivity=function(){this.selectedActivityId=void 0,this._mapManagerService.unSelectLayer("Building"),this._mapManagerService.unSelectLayer("Entrance"),this._mapManagerService.centerPosition(void 0),this._mapManagerService.setTooltipVisibility(!1)},ActivityListComponent.prototype.selectActivity=function(t){if(this.selectedActivityId===t.id)return void this.deSelectActivity();this.selectedActivityId=t.id,this._mapManagerService.setTooltipVisibility(!1);var e=t.getFirstOrDefaultTag(s.ModelType.Building),n=void 0,i=void 0;if(void 0!==e){n=this._layerService.getOne(s.ModelType.Building,e.id);var r=this._layerService.get(s.ModelType.Entrance);i=_.find(r,function(t){var e=t.getFirstOrDefaultTag(s.ModelType.Building);return void 0!==e&&e.id===n.id})}var o=void 0;o=void 0!==i?i.geo.location.coordinates:void 0!==n?n.geo.location.coordinates:t.geo.location.coordinates,this._mapManagerService.centerPosition(o,18),void 0!==i?this._mapManagerService.select("Entrance",i.id):this._mapManagerService.unSelectLayer("Entrance"),void 0!==n?this._mapManagerService.select("Building",n.id):this._mapManagerService.unSelectLayer("Building")},ActivityListComponent.prototype.getDivLetterById=function(t){var e=this;return void 0===this.activityScrollQuery?void 0:this.activityScrollQuery.filter(function(t){if(0===t.nativeElement.children.lenght)return!1;var n=t.nativeElement.children[0];return void 0!==n&&n.children[0].id===e.currentLetter})},ActivityListComponent.prototype.createList=function(){var t=this;_.each(c,function(e){t.sortedDictionary[e]?t.sortedDictionary[e].clear():t.sortedDictionary[e]=new o.AlphabeticItem(e)}),_.each(this.activities,function(e){var n=e.name[0].toLowerCase();_.indexOf(c,n)===-1&&(n="-"),t.sortedDictionary[n].addItem(e)}),this.isLoadingActivityList=!1},ActivityListComponent.prototype.onPanmove=function(t){var e=t.pointers[0],n=document.elementFromPoint(e.clientX,e.clientY);if(null!==n&&n.className.includes("letter")&&!n.className.includes("deselected")){var i=_.trim(n.innerText.toLowerCase()),r=this.getDivLetterById(i);void 0!==r&&0!==r.length&&this.onNewScrollTop.next({isAnimation:!1,scrollTop:r[0].nativeElement.children[0].children[0].offsetTop-30}),this.currentLetter=i}else this.currentLetter=""},ActivityListComponent.prototype.addFilterOnBuilding=function(t){var e=this;if(this.selectedBuilding=this._layerService.getOne(s.ModelType.Building,t.data.id),!_.isUndefined(this.selectedBuilding)){this.currentLetter="";var n=this._layerService.get(s.ModelType.Activity);this.activities=_.filter(n,function(t){return t.hasTag(e.selectedBuilding.id)}),this.createList(),this.onNewScrollTop.next({isAnimation:!1,scrollTop:0})}},ActivityListComponent.prototype.removeFilterOnBuilding=function(t){_.isUndefined(this.selectedBuilding)||(this.currentLetter="",this.selectedBuilding=null,this.activities=this._layerService.get(s.ModelType.Activity),this.createList(),this.onNewScrollTop.next({isAnimation:!1,scrollTop:0}))},__decorate([i.ViewChildren("activityScroll"),__metadata("design:type","function"==typeof(t="undefined"!=typeof i.QueryList&&i.QueryList)&&t||Object)],ActivityListComponent.prototype,"activityScrollQuery",void 0),__decorate([i.Output(),__metadata("design:type","function"==typeof(e="undefined"!=typeof i.EventEmitter&&i.EventEmitter)&&e||Object)],ActivityListComponent.prototype,"onNewScrollTop",void 0),ActivityListComponent=__decorate([i.Component({selector:"activity-list",template:n(761),styles:[n(734)]}),__metadata("design:paramtypes",["function"==typeof(u="undefined"!=typeof a.MapManagerService&&a.MapManagerService)&&u||Object,"function"==typeof(l="undefined"!=typeof r.LayerService&&r.LayerService)&&l||Object])],ActivityListComponent);var t,e,u,l}();e.ActivityListComponent=u},function(t,e,n){"use strict";var i=n(1),r=n(99),o=function(){function DetailActivityComponent(){}return DetailActivityComponent.prototype.ngOnInit=function(){this.building=this.activity.getFirstOrDefaultBuildingName(),this.contactNr=this.activity.getFirstOrDefaultPhoneNumber()},__decorate([i.Input(),__metadata("design:type","function"==typeof(t="undefined"!=typeof r.Activity&&r.Activity)&&t||Object)],DetailActivityComponent.prototype,"activity",void 0),__decorate([i.Input(),__metadata("design:type",Boolean)],DetailActivityComponent.prototype,"showDetailView",void 0),DetailActivityComponent=__decorate([i.Component({selector:"detail-activity",template:n(762),styles:[n(735)]}),__metadata("design:paramtypes",[])],DetailActivityComponent);var t}();e.DetailActivityComponent=o},function(t,e,n){"use strict";var i=n(1),r=n(99),o=25,s=350,a=function(){function DetailEventComponent(){}return DetailEventComponent.prototype.ngOnInit=function(){_.isUndefined(this.event)||(this.cms=this.event.cms,this.lessTitle=this.event.cms.title,this.lessDescription=this.event.cms.description)},Object.defineProperty(DetailEventComponent.prototype,"lessTitle",{get:function(){return this._lessTitle},set:function(t){t.length>o?this._lessTitle=t.substr(0,o).trim()+"...":this._lessTitle=t},enumerable:!0,configurable:!0}),Object.defineProperty(DetailEventComponent.prototype,"lessDescription",{get:function(){return this._lessDescription},set:function(t){t.length>s?this._lessDescription=t.substr(0,s).trim()+"...":this._lessDescription=t},enumerable:!0,configurable:!0}),__decorate([i.Input(),__metadata("design:type","function"==typeof(t="undefined"!=typeof r.Event&&r.Event)&&t||Object)],DetailEventComponent.prototype,"event",void 0),__decorate([i.Input(),__metadata("design:type",Boolean)],DetailEventComponent.prototype,"showDetailView",void 0),DetailEventComponent=__decorate([i.Component({selector:"detail-event",template:n(763),styles:[n(736)]}),__metadata("design:paramtypes",[])],DetailEventComponent);var t}();e.DetailEventComponent=a},function(t,e,n){"use strict";var i=n(1),r=n(98),o=n(20),s=function(){function EventListComponent(t){this._layerService=t,this.events=[],this.isLoadingEvents=!0,this._selectedEventId=void 0,this.events=_.sortBy(this._layerService.get(o.ModelType.Event),function(t){return t.cms.date})}return Object.defineProperty(EventListComponent.prototype,"selectedEventId",{get:function(){return this._selectedEventId},set:function(t){this._selectedEventId=t},enumerable:!0,configurable:!0}),EventListComponent.prototype.ngOnInit=function(){var t=this;this._layerSub=this._layerService.onNewBaseContent.filter(function(t){return t.type===o.ModelType.Event}).subscribe(function(e){t.events=_.sortBy(t._layerService.get(o.ModelType.Event),function(t){return t.cms.date})})},EventListComponent.prototype.ngOnDestroy=function(){this._layerSub.unsubscribe(),this._layerSub=null},EventListComponent.prototype.selectEvent=function(t){return _.isUndefined(t)||this._selectedEventId===t.id?void this.deSelect():void(this._selectedEventId=t.id)},EventListComponent.prototype.deSelect=function(){this._selectedEventId=""},EventListComponent=__decorate([i.Component({selector:"event-list",template:n(764),styles:[n(737)]}),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof r.LayerService&&r.LayerService)&&t||Object])],EventListComponent);var t}();e.EventListComponent=s},function(t,e,n){"use strict";var i=n(1),r=n(98),o=n(20),s=n(102),a=n(47),c=function(){function FunctionListComponent(t,e,n){var i=this;this._mapManagerService=t,this._layerService=e,this._selectedObjectService=n,this.poiCategories=[],this.selectedCategory=void 0,this.numberOfItems=[],this.icons=[{type:"Pumpstation",icon:"",font:"FontAwesome Regular"},{type:"Parkering",icon:"P",font:"Raleway Bold"},{type:"Intressepunkt",icon:"",font:"FontAwesome Regular"},{type:"ElStolpe",icon:"",font:"FontAwesome Regular"},{type:"Övrigt",icon:"",font:"FontAwesome Regular"},{type:"Restaurang",icon:"",font:"FontAwesome Regular"}];var r=this._layerService.get(o.ModelType.Function);this.poiCategories.push("Intressepunkt"),this.poiCategories.push("Parkering"),this.poiCategories.push("Pumpstation"),_.each(this.poiCategories,function(t){var e=_.filter(r,function(e){return e.cms.functionType.name===t});i.numberOfItems[t]=e.length||0}),this.poiCategories.push("Restaurang");var s=_.filter(this._layerService.get(o.ModelType.Activity),function(t){return"Food"===t.cms.category}).length;this.numberOfItems.Restaurang=s}return FunctionListComponent.prototype.ngOnInit=function(){var t=this;this._mapClickSub=this._mapManagerService.onNewEvent.filter(function(t){return t.state===a.MapState.Normal}).filter(function(t){return t.type===a.MapEventType.mapClick}).subscribe(function(e){t._mapManagerService.unSelectLayer(t.selectedCategory),t.selectedCategory=void 0})},FunctionListComponent.prototype.ngOnDestroy=function(){this._mapClickSub.unsubscribe()},FunctionListComponent.prototype.getIcon=function(t){var e=_.find(this.icons,function(e){return e.type===t});return _.isUndefined(e)?"":e.icon},FunctionListComponent.prototype.getIconClass=function(t){var e="icon ";switch(t){case"Parkering":return e+"icon-parking";case"Intressepunkt":return e+"icon-poi";case"Restaurang":return e+"icon-restaurant";case"Pumpstation":return e+"icon-pumpstation";case"ElStolpe":return e+"icon-elstolpe";case"Övrigt":return e+"icon-other";default:return""}},FunctionListComponent.prototype.onFunctionTypeClick=function(t){this._mapManagerService.setTooltipVisibility(!1),this._selectedObjectService.clearAllSelectedObjects(),void 0!==this.selectedCategory&&this._mapManagerService.unSelectLayer(this.selectedCategory),this.selectedCategory===t?this.selectedCategory=void 0:(this.selectedCategory=t,this._mapManagerService.selectLayer(t))},FunctionListComponent=__decorate([i.Component({selector:"function-list",template:n(765),styles:[n(738)]}),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.MapManagerService&&a.MapManagerService)&&t||Object,"function"==typeof(e="undefined"!=typeof r.LayerService&&r.LayerService)&&e||Object,"function"==typeof(c="undefined"!=typeof s.SelectedObjectService&&s.SelectedObjectService)&&c||Object])],FunctionListComponent);var t,e,c}();e.FunctionListComponent=c},function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}__export(n(659)),__export(n(653)),__export(n(657)),__export(n(654)),__export(n(656)),__export(n(655))},function(t,e,n){"use strict";var i=n(1),r=n(451),o=n(119),s=n(148),a=function(){function WeatherItemComponent(t,e,n){this._weatherService=t,this._timeService=e,this._appstate=n,this._hourCounter=0,this._hourMod=3,this.isLoadingWeather=!0}return WeatherItemComponent.prototype.ngOnInit=function(){var t=this;this.setWeather(this._timeService.now()),this._sub=this._timeService.everyHour.subscribe(function(e){var n=++t._hourCounter%t._hourMod===0;n&&(t.setWeather(e),t._hourCounter=0)})},WeatherItemComponent.prototype.ngOnDestroy=function(){this._sub&&!this._sub.closed&&this._sub.unsubscribe()},WeatherItemComponent.prototype.setWeather=function(t){var e=this;this._weatherService.getWeather(t.getHours()).then(function(t){e.weather=t,e.isLoadingWeather=!1})},WeatherItemComponent=__decorate([i.Component({selector:"weather-item",template:n(766),styles:[n(739)]}),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof r.WeatherService&&r.WeatherService)&&t||Object,"function"==typeof(e="undefined"!=typeof o.TimeService&&o.TimeService)&&e||Object,"function"==typeof(a="undefined"!=typeof s.AppState&&s.AppState)&&a||Object])],WeatherItemComponent);var t,e,a}();e.WeatherItemComponent=a},function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}__export(n(652)),__export(n(661)),__export(n(662))},function(t,e,n){"use strict";var i=n(1),r=function(){function OrderByPipe(){}return OrderByPipe.prototype.transform=function(t,e){return t&&e?_.sortBy(t,function(t){return t[e].toLowerCase()}):t},OrderByPipe=__decorate([i.Pipe({name:"orderby"}),__metadata("design:paramtypes",[])],OrderByPipe)}();e.OrderByPipe=r},function(t,e,n){"use strict";var i,r=n(1),o=n(150),s=n(151),a=n(152),c=n(47),u=n(102),l=n(148);!function(t){t[t.Activity="Activity"]="Activity",t[t.Function="Function"]="Function",t[t.Event="Event"]="Event",t[t.None="None"]="None"}(i||(i={}));var h=function(){function RightMenuComponent(t,e,n,r,o,s){this._activityService=t,this._buildingService=e,this._mapManagerService=n,this._busStopService=r,this._selectedObjectService=o,
this._appstate=s,this.isLoadingData=!1,this.currentViewState=i.Activity,this.isLoadingData=!1}return RightMenuComponent.prototype.setViewState=function(t){this.currentViewState=t,this._mapManagerService.setTooltipVisibility(!1),this._selectedObjectService.clearAllSelectedObjects()},RightMenuComponent.prototype.ngOnInit=function(){},RightMenuComponent.prototype.ngOnDestroy=function(){},RightMenuComponent.prototype.ngAfterViewInit=function(){},RightMenuComponent.prototype.setScrollTop=function(t){_.isUndefined(this.scrollAreaDiv)||(t.isAnimation?this.scrollTo(t.to,t.duration,t.currentTime):this.scrollAreaDiv.nativeElement.scrollTop=t.scrollTop)},RightMenuComponent.prototype.onPress=function(t){var e=this;this.isLoadingData=!0,this._appstate.resetMap(),this._appstate.updateData().then(function(){e._appstate.redrawLayers(),e.isLoadingData=!1})},RightMenuComponent.prototype.scrollTo=function(t,e,n){var i=this,r=this.scrollAreaDiv.nativeElement.scrollTop;if(r<=0&&(r=0),t<=0&&(t=0),!(n>=e)){var o=t-this.scrollAreaDiv.nativeElement.scrollTop,s=n/e*Math.PI/2,a=o*Math.sin(s);setTimeout(function(){i.scrollAreaDiv.nativeElement.scrollTop=r+a,i.scrollTo(t,e,n+20)},20)}},__decorate([r.ViewChild("scrollArea"),__metadata("design:type",Object)],RightMenuComponent.prototype,"scrollAreaDiv",void 0),RightMenuComponent=__decorate([r.Component({selector:"right-menu",template:n(767),styles:[n(740)]}),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof o.ActivityService&&o.ActivityService)&&t||Object,"function"==typeof(e="undefined"!=typeof s.BuildingService&&s.BuildingService)&&e||Object,"function"==typeof(h="undefined"!=typeof c.MapManagerService&&c.MapManagerService)&&h||Object,"function"==typeof(p="undefined"!=typeof a.BusStopService&&a.BusStopService)&&p||Object,"function"==typeof(f="undefined"!=typeof u.SelectedObjectService&&u.SelectedObjectService)&&f||Object,"function"==typeof(d="undefined"!=typeof l.AppState&&l.AppState)&&d||Object])],RightMenuComponent);var t,e,h,p,f,d}();e.RightMenuComponent=h},function(t,e,n){"use strict";var i=n(1),r=function(){function InterestPointTooltipTemplateComponent(){this.prototype={description:"",title:"",subTitle:"",icon:""}}return InterestPointTooltipTemplateComponent.prototype.ngOnInit=function(){},InterestPointTooltipTemplateComponent.prototype.ngOnDestroy=function(){},InterestPointTooltipTemplateComponent.prototype.setModel=function(t){this.prototype=t},InterestPointTooltipTemplateComponent.prototype.setStyle=function(t){this.prototypeStyle=t},InterestPointTooltipTemplateComponent=__decorate([i.Component({selector:"map-interest-point-tooltip-template",template:n(772),styles:[n(745)]}),__metadata("design:paramtypes",[])],InterestPointTooltipTemplateComponent)}();e.InterestPointTooltipTemplateComponent=r},function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}__export(n(425)),__export(n(423)),__export(n(424)),__export(n(426)),__export(n(427)),__export(n(665))},function(t,e,n){"use strict";var i=n(1),r=function(){function ProjectTooltipTemplateComponent(){}return ProjectTooltipTemplateComponent.prototype.setModel=function(t){this.prototyp=t},ProjectTooltipTemplateComponent.prototype.setStyle=function(t){this.prototypeStyle=t},ProjectTooltipTemplateComponent.prototype.bucketIsCompleted=function(t){var e=this,n=_.findIndex(this.prototyp.buckets,function(t){return t.id===e.prototyp.project.fromBucketId});return n<t},ProjectTooltipTemplateComponent=__decorate([i.Component({selector:"map-project-tooltip-template",styles:[n(746)],template:n(773)}),__metadata("design:paramtypes",[])],ProjectTooltipTemplateComponent)}();e.ProjectTooltipTemplateComponent=r},function(t,e,n){"use strict";var i=n(1),r=function(){function ReversePipe(){}return ReversePipe.prototype.transform=function(t){return t.reverse()},ReversePipe=__decorate([i.Pipe({name:"reverse"}),__metadata("design:paramtypes",[])],ReversePipe)}();e.ReversePipe=r},function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}__export(n(668))},function(t,e,n){"use strict";var i=n(1),r=function(){function TopMenuComponent(){this.welcomeTitle="Välkommen till",this.place=this.titleConfiguration}return TopMenuComponent.prototype.ngOnInit=function(){},TopMenuComponent.prototype.ngOnChanges=function(t){this.place=t.titleConfiguration.currentValue},__decorate([i.Input(),__metadata("design:type",String)],TopMenuComponent.prototype,"titleConfiguration",void 0),TopMenuComponent=__decorate([i.Component({selector:"top-menu",template:n(774),styles:[n(747)]}),__metadata("design:paramtypes",[])],TopMenuComponent)}();e.TopMenuComponent=r},function(t,e,n){"use strict";var i=n(1),r=n(59),o=function(){function BaseModelConverter(){}return BaseModelConverter.prototype.convertToBase=function(t){var e=_.map(t,function(t){return _.create(r.BaseModel.prototype,t)});return _.each(e,function(t){t.rebuild()}),e},BaseModelConverter.prototype.convertToModel=function(t){return t},BaseModelConverter=__decorate([i.Injectable(),__metadata("design:paramtypes",[])],BaseModelConverter)}();e.BaseModelConverter=o},function(t,e,n){"use strict";var i=n(428),r=n(429),o=n(430),s=n(432),a=n(433),c=n(669),u=n(431),l=n(434);e.APP_CONVERTERS=[i.ActivityConverter,c.BaseModelConverter,r.BuildingConverter,o.BusStopConverter,o.DepartureConverter,s.EventConverter,u.EntranceConverter,a.FunctionConverter,l.StairwellConverter]},function(t,e,n){"use strict";var i=n(72),r=function(){function HeaderFactory(){}return HeaderFactory.createJsonHeader=function(){var t=new i.Headers;return t.append("Content-Type","application/json"),t},HeaderFactory}();e.HeaderFactory=r},function(t,e){"use strict";var n=function(){function Path(){}return Path.join=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(t){return t.trim()}).join(t)},Path}();e.Path=n},function(t,e,n){"use strict";var i=n(42),r=function(){function PromiseRetry(t,e,n,i){this._loadingProgress=t,this._name=e,this._callback=n,this._arg=i}return PromiseRetry.prototype.execute=function(t){var e=this;void 0===t&&(t=100);var n=this._arg||null;return this._loadingProgress.progress("Loading "+this._name),new Promise(function(r,o){e._callback(n).then(function(t){return e._loadingProgress.incrementProgress(e._name+" loaded"),r(t)},function(s){e._loadingProgress.progress(e._name+" error, message: "+s);var a=s,c=setInterval(function(){if(t--,e._loadingProgress.progress("Fail to get "+e._name+", retrying.. "),e._callback(n).then(function(t){return e._loadingProgress.incrementProgress(e._name+" loaded"),clearInterval(c),r(t)},function(t){a=t}),t===-1)return e._loadingProgress.incrementProgress("Fail to get"+e._name+", conection lost. Please restart the application!"),clearInterval(c),o(a)},i.TEN_SECONDS_IN_MS)})})},PromiseRetry}();e.PromiseRetry=r},function(t,e,n){"use strict";var i=n(42),r=function(){function WinPromiseRetry(t,e,n){this._loadingProgress=t,this._callback=e,this._arg=n}return WinPromiseRetry.prototype.execute=function(t){var e=this;void 0===t&&(t=100);var n=this._arg||null;return this._loadingProgress.progress("Loading location "),new Promise(function(r,o){e._callback(n).then(function(t){return e._loadingProgress.incrementProgress("Location loaded"),r(t)},function(s){e._loadingProgress.progress("Location error, message: "+s);var a=s,c=setInterval(function(){if(t--,e._loadingProgress.progress("Fail to get location, retrying..  "),e._callback(n).then(function(t){return e._loadingProgress.incrementProgress("Location loaded"),clearInterval(c),r(t)},function(t){a=t}),t===-1)return e._loadingProgress.incrementProgress("Fail to get location, conection lost. Please restart the application!"),clearInterval(c),o(a)},i.TEN_SECONDS_IN_MS)})})},WinPromiseRetry}();e.WinPromiseRetry=r},function(t,e){"use strict";var n=[{type:"Health",title:""},{type:"Education",title:""},{type:"Food",title:""},{type:"Beauty",title:""},{type:"Institute",title:""},{type:"Transport",title:""},{type:"Family",title:""}],i=function(){function ActivityLayer(t){this.setStyle(),this.setModels(t)}return ActivityLayer.prototype.setModels=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.geoJson=this.createGeoJson(t[0])},ActivityLayer.prototype.getIcon=function(t){var e=_.find(n,function(e){return e.type===t});return _.isUndefined(e)?"":e.title},ActivityLayer.prototype.setStyle=function(){this.style={type:"Point",textFont:"FontAwesome Regular",color:{background:"rgba(84,172,210, 1.0)",opacity:1,text:"#FFFFFF"},offset:[0,.18],selected:{color:{background:"rgba(84,172,210, 1.0)",opacity:1,border:"#FFFFFF"},borderRadius:3},radius:{base:1.75,stops:[[12,12],[15,19],[17,24],[19,27],[22,32]]},zIndex:10,minZoom:15,cluster:{value:!0,maxZoom:20,color:"rgba(84,172,210, 1.0)",textFont:"Raleway Bold",styleRadius:{property:"point_count",stops:[[{zoom:12,value:2},13],[{zoom:12,value:4},15],[{zoom:12,value:8},19],[{zoom:22,value:2},27],[{zoom:22,value:4},29],[{zoom:22,value:8},32]]},clusterRadius:40}}},ActivityLayer.prototype.createGeoJson=function(t){var e=this;return{type:"FeatureCollection",crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84",style:this.style,type:"Activity"}},features:_.map(t,function(t){return e.itemToGeoJson(t)})}},ActivityLayer.prototype.itemToGeoJson=function(t){return{type:"Feature",properties:{id:t.id,type:t.type,title:this.getIcon(t.cms.category)},geometry:{type:t.geo.geometry.type,coordinates:t.geo.geometry.coordinates}}},ActivityLayer}();e.ActivityLayer=i},function(t,e){"use strict";var n=function(){function BuildingLayer(t){this.setStyle(),this.setModels(t)}return BuildingLayer.prototype.setModels=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.geoJson=this.createGeoJson(t[0])},BuildingLayer.prototype.setStyle=function(){this.style={type:"Polygon",color:{background:"rgba(84,172,210, 0.15)",border:"#54ACD2",opacity:1},selected:{color:{background:"rgba(84,172,210, 0.6)",border:"#54ACD2",opacity:1}},borderThickness:2,zIndex:0}},BuildingLayer.prototype.createGeoJson=function(t){var e=this;return{type:"FeatureCollection",crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84",style:this.style,type:"Building"}},features:_.map(t,function(t){return e.itemToGeoJson(t)})}},BuildingLayer.prototype.itemToGeoJson=function(t){return{type:"Feature",properties:{id:t.id,type:t.type},geometry:{type:t.geo.geometry.type,coordinates:t.geo.geometry.coordinates}}},BuildingLayer}();e.BuildingLayer=n},function(t,e){"use strict";var n=function(){function BusStopLayer(t){this.setStyle(),this.setModels(t)}return BusStopLayer.prototype.setModels=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.geoJson=this.createGeoJson(t[0])},BusStopLayer.prototype.setStyle=function(){this.style={type:"Point",textFont:"FontAwesome Regular",color:{background:"rgba(240, 97, 98, 1.0)",opacity:1,text:"#FFFFFF"},selected:{color:{background:"rgba(240, 97, 98, 1.0)",border:"rgba(240, 97, 98, 0.3)"},borderRadius:8},offset:[0,.18],radius:{base:1.75,stops:[[12,8],[15,11],[17,24],[19,29],[22,33]]},zIndex:4,minZoom:15}},BusStopLayer.prototype.createGeoJson=function(t){var e=this;return{type:"FeatureCollection",crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84",style:this.style,type:"Busstop"}},features:_.map(t,function(t){return e.itemToGeoJson(t)})}},BusStopLayer.prototype.itemToGeoJson=function(t){return{type:"Feature",properties:{id:t.id,type:t.type,name:t.name,title:""},geometry:{type:t.geo.geometry.type,coordinates:t.geo.geometry.coordinates}}},BusStopLayer}();e.BusStopLayer=n},function(t,e,n){"use strict";var i=n(74),r=function(){function ComplementBuildingLayer(t){this.setStyle(),this.setModels(t)}return ComplementBuildingLayer.prototype.setModels=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.geoJson=this.createGeoJson(t[0])},ComplementBuildingLayer.prototype.setStyle=function(){this.style={type:"Polygon","static":!0,color:{background:"rgba(192,192,192,0.15)",opacity:1},borderThickness:2,zIndex:0}},ComplementBuildingLayer.prototype.createGeoJson=function(t){var e=this;return{type:"FeatureCollection",crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84",style:this.style,type:"ComplementBuilding"}},features:i.map(t,function(t){return e.itemToGeoJson(t)})}},ComplementBuildingLayer.prototype.itemToGeoJson=function(t){return{type:"Feature",properties:{id:void 0,type:"Complement"},geometry:{type:t.geo.geometry.type,coordinates:t.geo.geometry.coordinates}}},ComplementBuildingLayer}();e.ComplementBuildingLayer=r},function(t,e){"use strict";var n=function(){function EntranceLayer(t){this.setStyle(),this.setModels(t)}return EntranceLayer.prototype.setModels=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.geoJson=this.createGeoJson(t[0])},EntranceLayer.prototype.setStyle=function(){this.style={type:"Point",textFont:"Raleway Bold",color:{background:"rgba(17,17,17, 1.0)",text:"#FFFFFF",border:"rgba(84,172,210, 1.0)"},borderThickness:2,selected:{color:{background:"rgba(84,172,210, 1.0)",border:"rgba(84,172,210, 0.5)"},borderRadius:8},radius:{base:1.75,stops:[[12,12],[22,24]]},textAnchor:"left",textjustify:"left",offset:[1.5,0],minZoom:17,zIndex:13}},EntranceLayer.prototype.createGeoJson=function(t){var e=this;return{type:"FeatureCollection",crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84",style:this.style,type:"Entrance"}},features:_.map(t,function(t){return e.itemToGeoJson(t)})}},EntranceLayer.prototype.itemToGeoJson=function(t){return{type:"Feature",properties:{id:t.id,type:t.type,title:t.cms.name},geometry:{type:t.geo.geometry.type,coordinates:t.geo.geometry.coordinates}}},EntranceLayer}();e.EntranceLayer=n},function(t,e){"use strict";var n=[{type:"Pumpstation",icon:"",font:"FontAwesome Regular"},{type:"Parkering",icon:"P",font:"Raleway Bold"},{type:"Intressepunkt",icon:"",font:"FontAwesome Regular"},{type:"ElStolpe",icon:"",font:"FontAwesome Regular"},{type:"Övrigt",icon:"",font:"FontAwesome Regular"},{type:"Restaurang",icon:"",font:"FontAwesome Regular"}],i=function(){function FunctionLayer(t,e){this._functionType=e||"Intressepunkt",this.setStyle(),this.setModels(t)}return FunctionLayer.prototype.setModels=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.geoJson=this.createGeoJson(t[0])},FunctionLayer.prototype.getIcon=function(t){var e="icon ",n=t.cms.functionType.name;switch(n){case"Parkering":return e+"icon-parking";case"Intressepunkt":return e+"icon-poi";case"Restaurang":return e+"icon-restaurant";case"Pumpstation":return e+"icon-pumpstation";case"ElStolpe":return e+"icon-elstolpe";case"Övrigt":return e+"icon-other";default:return""}},FunctionLayer.prototype.getMapIcon=function(t){var e=_.find(n,function(e){return e.type===t});return _.isUndefined(e)?"":e},FunctionLayer.prototype.setStyle=function(){var t=this.getMapIcon(this._functionType).font;this.style={type:"Point",textFont:t,color:{background:"#FFFFFF",opacity:1,text:"#000000"},offset:[0,.18],borderThickness:3,selected:{color:{background:"rgba(84,172,210, 0.5)",text:"#FFFFFF",border:"rgba(84,172,210, 0.3)"},borderRadius:10,radius:{base:1.75,stops:[[12,19],[22,35]]}},radius:{base:1.75,stops:[[12,13],[22,27]]},zIndex:12,minZoom:15}},FunctionLayer.prototype.createGeoJson=function(t){var e=this;return{type:"FeatureCollection",crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84",style:this.style,type:this._functionType}},features:_.map(t,function(t){return e.itemToGeoJson(t)})}},FunctionLayer.prototype.itemToGeoJson=function(t){return{type:"Feature",properties:{id:t.id,type:t.type,title:this.getMapIcon(this._functionType).icon},geometry:{type:t.geo.geometry.type,coordinates:t.geo.geometry.coordinates}}},FunctionLayer}();e.FunctionLayer=i},function(t,e){"use strict";var n=function(){function MockPronovaInteriorLayer(t){this.setStyle(),this.setModels(t)}return MockPronovaInteriorLayer.prototype.setModels=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.geoJson=this.createGeoJson(t[0])},MockPronovaInteriorLayer.prototype.setStyle=function(){this.style={type:"Polygon",color:{background:"rgba(255,255,255, 0.3)",border:"#ffffff",opacity:.5},borderThickness:2,dashedBorder:!0,zIndex:-1,minZoom:17}},MockPronovaInteriorLayer.prototype.createGeoJson=function(t){return{type:"FeatureCollection",crs:{type:"name",properties:{style:this.style,type:"PronovaInterior"}},features:[{type:"Feature",properties:{id:void 0,type:"Interior"},geometry:{type:"Polygon",coordinates:[[[16.17311686277395,58.58759140038106],[16.174267530441284,58.58775915428094],[16.17421388626104,58.58784862269865],[16.174122691154476,58.58796465171218],[16.173910796642303,58.58814079140696],[16.173830330371857,58.5882680028573],[16.17365598678589,58.588425968080465],[16.173414587974555,58.588356072051965],[16.173326075077057,58.588424570161266],[16.17370694875717,58.588533607691254],[16.173961758613586,58.588304348901005],[16.17405027151108,58.588178535511894],[16.174256801605228,58.58800658981516],[16.174404323101044,58.58779550085322],[16.174444556236267,58.58770743024756],[16.174058318138172,58.58764871638725],[16.174090504646365,58.587583012665],[16.17415755987173,58.58758021675914],[16.17421656847006,58.58756483927315],[16.174259483814293,58.587531288371224],[16.17426484823232,58.58748655378523],[16.174240708351185,58.587454400766276],[16.174192428588924,58.587436227307585],[16.174248754978233,58.5873034209777],[16.174117326736518,58.58728524744064],[16.174050271511142,58.587416655880176],[16.173972487449696,58.587416655880176],[16.173918843269398,58.58743482934897],[16.17387861013419,58.58746698238589],[16.173875927925163,58.58751031904121],[16.17389470338827,58.58754107405427],[16.173959076404635,58.58756204336592],[16.173926889896443,58.5876319409805],[16.173151731491142,58.587524298595945],[16.17311686277395,58.58759140038106]]]}}]}},MockPronovaInteriorLayer}();e.MockPronovaInteriorLayer=n},function(t,e){"use strict";var n=function(){function AlphabeticItem(t){this._items=[],this._hasItems=!1,this._letter=t.toLowerCase()}return Object.defineProperty(AlphabeticItem.prototype,"Items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(AlphabeticItem.prototype,"hasItems",{get:function(){return this._hasItems},enumerable:!0,configurable:!0}),AlphabeticItem.prototype.addItem=function(t){t&&(this.orderedInsert(t),this.updateList())},AlphabeticItem.prototype.clear=function(){this._items=[],this.updateList()},AlphabeticItem.prototype.updateList=function(){this._hasItems=0!==this._items.length},AlphabeticItem.prototype.orderedInsert=function(t,e,n){var i=this._items.length,r="undefined"!=typeof e?e:0,o="undefined"!=typeof n?n:i-1,s=r+Math.floor((o-r)/2);if(0===i)return void this._items.push(t);if(t>this._items[o].name)return void this._items.splice(o+1,0,t);if(t<this._items[r].name)return void this._items.splice(r,0,t);if(!(r>=o)){if(t<this._items[s].name)return void this.orderedInsert(t,r,s-1);if(t>this._items[s].name)return void this.orderedInsert(t,s+1,o);this._items.push(t),this._items.sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0})}},AlphabeticItem}();e.AlphabeticItem=n},function(t,e){"use strict";var n=function(){function Contact(t){t&&(this.name=t.name||this.name,this.phone=t.phone||this.phone,this.mail=t.mail||this.mail)}return Contact}();e.Contact=n},function(t,e,n){"use strict";var i=n(47),r=function(){function GeoProfile(t,e,n,i,r){this.lat=t,this.lng=e,this.width=n,this.height=i,this.name=r,this.boundingBox=this.calculateBoundingBox(),this.filter={boundary:this.boundingBox.geometry}}return GeoProfile.prototype.toGeoJsonPoint=function(){return{properties:{},type:"Feature",geometry:{type:"Point",coordinates:[this.lng,this.lat]}}},GeoProfile.prototype.toPoint=function(){return{lat:this.lat,lng:this.lng}},GeoProfile.prototype.getBoundingRadius=function(){var t=this.width>this.height?this.height:this.width;return t=(t-100)/2},GeoProfile.prototype.getLargestLength=function(){return this.width>this.height?this.width:this.height},GeoProfile.prototype.calculateBoundingBox=function(){return i.GeometryUtility.createBoundingBox({latitude:this.lat,longitude:this.lng},this.width,this.height)},GeoProfile}();e.GeoProfile=r},function(t,e){"use strict"},function(t,e,n){"use strict";var i=n(87),r=n(446),o=n(444),s=n(445),a=function(){function GeometryFactory(){}return GeometryFactory.createGeometry=function(t){var e=null;switch(t.type){case i.GeometryType.Polygon:e=new r.Polygon(t);break;case i.GeometryType.LineString:e=new o.LineString(t);break;case i.GeometryType.Point:e=new s.Point(t)}return e},GeometryFactory}();e.GeometryFactory=a},function(t,e){"use strict";var n=function(){function Tag(){}return Tag}();e.Tag=n},function(t,e){"use strict";var n=function(){function Weather(t){t&&(this.temp=void 0!==t.temp?t.temp:this.temp,this.wind=t.wind||this.wind,this.cloud=t.cloud||this.cloud,this.precipitation=t.precipitation||this.precipitation,this.precipitationAmount=t.precipitationAmount||this.precipitationAmount,this.time=t.time||this.time,this.wSymbol=t.wSymbol||this.wSymbol)}return Object.defineProperty(Weather.prototype,"iconName",{get:function(){var t;switch(this.wSymbol){case 1:t="wi-day-sunny";break;case 2:t="wi-day-cloudy";break;case 3:t="wi-day-cloudy";break;case 4:t="wi-cloud";break;case 5:t="wi-cloudy";break;case 6:t="wi-day-sunny-overcast";break;case 7:t="wi-fog";break;case 8:t="wi-showers";break;case 9:t="wi-thunderstorm";break;case 10:t="wi-sleet";break;case 11:t="wi-rain-mix";break;case 12:t="wi-rain";break;case 13:t="wi-thunderstorm";break;case 14:t="wi-showers";break;case 15:t="wi-snow";break;default:t="wi-na"}return"wi "+t},enumerable:!0,configurable:!0}),Object.defineProperty(Weather.prototype,"hour",{get:function(){return this.time.hour()},enumerable:!0,configurable:!0}),Weather}();e.Weather=n},function(t,e,n){"use strict";var i=n(101),r=function(t){function ActivityRepository(e,n){t.call(this,"Activity_v2",e,n),this.proxyArray=new Array}return __extends(ActivityRepository,t),ActivityRepository.prototype.initMockup=function(t){},ActivityRepository}(i.Repository);e.ActivityRepository=r},function(t,e,n){"use strict";var i=n(101),r=function(t){function BuildingRepository(e,n){t.call(this,"Building",e,n),this.proxyArray=new Array}return __extends(BuildingRepository,t),BuildingRepository.prototype.initMockup=function(t){},BuildingRepository}(i.Repository);e.BuildingRepository=r},function(t,e,n){"use strict";var i=n(101),r=function(t){function EntranceRepository(e,n){t.call(this,"Entrance",e,n),this.proxyArray=new Array}return __extends(EntranceRepository,t),EntranceRepository.prototype.initMockup=function(t){},EntranceRepository}(i.Repository);e.EntranceRepository=r},function(t,e,n){"use strict";var i=n(101),r=function(t){function FunctionRepository(e,n){t.call(this,"Function",e,n),this.proxyArray=new Array}return __extends(FunctionRepository,t),FunctionRepository.prototype.initMockup=function(t){},FunctionRepository}(i.Repository);e.FunctionRepository=r},function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}__export(n(690)),__export(n(689)),__export(n(694)),__export(n(692)),__export(n(691)),__export(n(695))},function(t,e,n){"use strict";var i=n(101),r=function(t){function PropertyRepository(e,n){t.call(this,"Property",e,n),this.proxyArray=new Array}return __extends(PropertyRepository,t),PropertyRepository.prototype.initMockup=function(t){},PropertyRepository}(i.Repository);e.PropertyRepository=r},function(t,e,n){"use strict";var i=n(101),r=function(t){function StairwellRepository(e,n){t.call(this,"Stairwell",e,n),this.proxyArray=new Array}return __extends(StairwellRepository,t),StairwellRepository.prototype.initMockup=function(t){},StairwellRepository}(i.Repository);e.StairwellRepository=r},function(t,e){"use strict";e.APP_RESOLVERS=[]},function(t,e){"use strict";var n=function(){function AnalyticsService(){}return AnalyticsService.trackEvent=function(t,e,n){window.ga("send","event",t,e,n)},AnalyticsService}();e.AnalyticsService=n},function(t,e,n){"use strict";var i=n(150),r=n(151),o=n(152),s=n(217),a=n(697),c=n(218),u=n(219),l=n(119),h=n(153),p=n(451),f=n(118),d=n(449),g=n(448),y=n(450),v=n(102);e.APP_SERVICES=[i.ActivityService,a.AnalyticsService,r.BuildingService,o.BusStopService,o.DepartureService,s.EventService,g.EntranceService,d.FunctionService,c.LoadingProgress,u.PropertyService,h.ServiceProvider,y.StairwellService,p.WeatherService,l.TimeService,f.GeoProfileService,v.SelectedObjectService]},function(t,e,n){"use strict";var i=n(1345),r=function(){function GeometryUtility(){}return GeometryUtility.distance=function(t,e){return i.distance(t,e)},GeometryUtility.center=function(t){return i.centroid(t)},GeometryUtility.createBoundingBox=function(t,e,n){var r=Number(t.latitude),o=Number(t.longitude),s=n/this.EarthRadius,a=e/(this.EarthRadius*Math.cos(Math.PI*r/180)),c=Number((o-90*a/Math.PI).toFixed(this.LatLngDecimals)),u=Number((o+90*a/Math.PI).toFixed(this.LatLngDecimals)),l=Number((r-90*s/Math.PI).toFixed(this.LatLngDecimals)),h=Number((r+90*s/Math.PI).toFixed(this.LatLngDecimals));return i.polygon([[[c,h],[c,l],[u,l],[u,h],[c,h]]])},GeometryUtility.createPoint=function(t,e){return i.point(t,e)},GeometryUtility.EarthRadius=6378137,GeometryUtility.LatLngDecimals=6,GeometryUtility}();e.GeometryUtility=r},function(t,e,n){"use strict";var i=n(74),r=function(){function LayerIdDictionary(){this._type=new Array,this._layerId=new Array}return LayerIdDictionary.prototype.add=function(t,e,n){var r=t.toLowerCase(),o=e.toLowerCase();if(i.has(this._type,r)){var s=this._type[r],a=i.findIndex(s,function(t){return t==o});a==-1?(this[r][o]=n,this._type[r].push(o),this._layerId.push(n)):console.log("WARNING! Added same layer type and subtype....")}else this[r]={},this[r][o]=n,this._type[r]=[o],this._layerId.push(n)},LayerIdDictionary.prototype.find=function(t,e){return t=t.toLowerCase(),e=e.toLowerCase(),this[t][e]},LayerIdDictionary}();e.LayerIdDictionary=r},function(t,e){"use strict";var n=function(){function MapClickObject(t,e,n){this.id=t,this.type=e,this.position=n}return MapClickObject}();e.MapClickObject=n},function(t,e){"use strict"},function(t,e){"use strict";var n=function(){function MapHoverObject(t,e,n){this.id=t,this.type=e,this.position=n}return MapHoverObject}();e.MapHoverObject=n},function(t,e){"use strict"},function(t,e,n){"use strict";var i=n(452),r=n(716),o=function(){function CoreFactory(){}return CoreFactory.createCore=function(t,e,n){var r;switch(t.type){case i.MapCoreObjectType.MapBoxGL:r=this.createMapBoxGL(t,e,n)}return r},CoreFactory.createMapBoxGL=function(t,e,n){return new r.MapBoxGL(t,e,n)},CoreFactory}();e.CoreFactory=o},function(t,e){"use strict";var n=function(){function CoreContract(t){var e=this;this._contractMediator=t,this._mapState=this.mediator.currentState,this._mapStateSubScription=this.mediator.onNewState.subscribe(function(t){return e._mapState=t.newState})}return Object.defineProperty(CoreContract.prototype,"mediator",{get:function(){return this._contractMediator},enumerable:!0,configurable:!0}),Object.defineProperty(CoreContract.prototype,"state",{get:function(){return this._mapState},enumerable:!0,configurable:!0}),CoreContract.prototype.onTap=function(t){},CoreContract.prototype.onPan=function(t){},CoreContract.prototype.onPinch=function(t){},CoreContract.prototype.onMouseWheel=function(t){},CoreContract.prototype.dispose=function(){void 0!==this._mapStateSubScription&&(this._mapStateSubScription.unsubscribe(),this._mapStateSubScription=void 0)},CoreContract.prototype.newEvent=function(t){this._contractMediator.newEvent(t)},CoreContract}();e.CoreContract=n},function(t,e,n){"use strict";var i=n(1),r=n(73),o=n(213),s=n(72),a=n(726),c=n(709),u=n(454),l=n(73),h=function(t){function MyHammerConfig(){t.apply(this,arguments),this.overrides={}}return __extends(MyHammerConfig,t),MyHammerConfig}(l.HammerGestureConfig);e.MyHammerConfig=h;var p=function(){function GaiaPlacesMapModule(){}return GaiaPlacesMapModule=__decorate([i.NgModule({declarations:[u.GaiaPlacesMap,c.MAP_LAYER_COMPONENTS,c.MAP_LAYER_PIPES],exports:[u.GaiaPlacesMap],imports:[r.BrowserModule,o.FormsModule,s.HttpModule],providers:[a.MAP_LOCAL_SERVICES,{provide:l.HAMMER_GESTURE_CONFIG,useClass:h}]}),__metadata("design:paramtypes",[])],GaiaPlacesMapModule)}();e.GaiaPlacesMapModule=p},function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}__export(n(454))},function(t,e,n){"use strict";var i=n(725),r=n(723),o=n(710);e.MAP_LAYER_COMPONENTS=[i.ZoomTooltipLayerComponent,o.LoadingLayerComponent,o.LoadingProgressComponent,r.TooltipLayerComponent],e.MAP_LAYER_PIPES=[]},function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}__export(n(712)),__export(n(711))},function(t,e,n){"use strict";var i=n(1),r=n(122),o=function(){function LoadingLayerComponent(t){this._localService=t,this.loadingText="Loading",t.loadingContract=this}return LoadingLayerComponent.prototype.onConfig=function(t){},LoadingLayerComponent.prototype.ngOnInit=function(){},LoadingLayerComponent.prototype.ngOnDestroy=function(){},LoadingLayerComponent.prototype.setLoadingText=function(t){this.loadingText=t},LoadingLayerComponent=__decorate([i.Component({selector:"map-loading-layer",styles:[n(750)],template:n(776)}),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof r.LocalService&&r.LocalService)&&t||Object])],LoadingLayerComponent);var t}();e.LoadingLayerComponent=o},function(t,e,n){"use strict";var i=n(1),r=function(){function LoadingProgressComponent(){}return LoadingProgressComponent.prototype.ngOnInit=function(){},LoadingProgressComponent.prototype.submitState=function(t){},__decorate([i.Input(),__metadata("design:type",String)],LoadingProgressComponent.prototype,"text",void 0),__decorate([i.Input(),__metadata("design:type",Boolean)],LoadingProgressComponent.prototype,"loading",void 0),LoadingProgressComponent=__decorate([i.Component({selector:"map-loading-progress",styles:[n(751)],template:n(777)}),__metadata("design:paramtypes",[])],LoadingProgressComponent)}();e.LoadingProgressComponent=r},function(t,e){"use strict";e.FeatureTypes=["Point","Polygon","LineString"],e.LayerTypes=["text","hover","selected","selected-border","border"]},function(t,e,n){"use strict";var i=n(74),r=function(){function Layer(t,e,n){this.id=t,this.type=e,this.zIndex=n,this.children=[]}return Layer.prototype.addChild=function(t){var e=this.generateChildId(t);return this.children.push(e),e},Layer.createDefaultLayer=function(t,e){return new Layer(this.generateLayerId(),t.toLowerCase(),e)},Layer.generateLayerId=function(){return Math.random().toString(36).substr(2,9)},Layer.prototype.generateChildId=function(t){return this.id+t},Layer}();e.Layer=r;var o=function(){function LayerManager(){this._layerStore=[]}return Object.defineProperty(LayerManager.prototype,"Layer",{get:function(){return this._layerStore},enumerable:!0,configurable:!0}),Object.defineProperty(LayerManager.prototype,"LayerIds",{get:function(){return this._layerStore.map(function(t){return t.id})},enumerable:!0,configurable:!0}),LayerManager.prototype.getLayersByType=function(t){var e,n=[];if(void 0===t)return[];e=t.toLowerCase();for(var i=0;i<this._layerStore.length;i++)this._layerStore[i].type===e&&n.push(this._layerStore[i]);return n},LayerManager.prototype.addLayer=function(t){if(t&&t.id){for(var e=0;e<this._layerStore.length&&this._layerStore[e].zIndex<t.zIndex;)e++;this._layerStore.splice(e,0,t)}},LayerManager.prototype.getLayerBefore=function(t){var e=i.find(this._layerStore,function(e){return e.zIndex>=t});return e},LayerManager.prototype.removeLayer=function(t){var e;if(t&&t.id){var n=this.indexOf(t.id);n>-1&&(e=this._layerStore.splice(n,1))}return e},LayerManager.prototype.indexOf=function(t){
var e=-1;if(t)for(var n=0;n<this._layerStore.length;n++)if(this._layerStore[n].id===t){e=n;break}return e},LayerManager.prototype.tryToGet=function(t){var e;return 0!==this._layerStore.length&&t>-1&&t<this._layerStore.length&&(e=this._layerStore[e]),e},LayerManager}();e.LayerManager=o},function(t,e,n){"use strict";var i=n(74),r=function(){function StyleProvider(t){this._configuration=t,this.styleConfig=t.style}return StyleProvider.prototype.getStyle=function(t,e){var n=void 0;if(this.exist(t)){var r=this.styleConfig[t.toLowerCase()];n=i.find(r,function(t){return t.type===e})}return n},StyleProvider.prototype.mergeStyles=function(t,e){i.forEach(e,function(e,n,i){t[n]=e})},StyleProvider.prototype.exist=function(t){return void 0!==this.styleConfig},StyleProvider}();e.StyleProvider=r},function(t,e,n){"use strict";var i=n(1349),r=n(74),o=n(717),s=n(715),a=n(713),c=n(220),u=n(714),l=n(706),h=n(120),p=function(t){function MapBoxGL(e,n,r,o,a,l){var h=this;void 0===o&&(o=void 0),void 0===a&&(a=void 0),void 0===l&&(l=void 0),t.call(this,r),this._configuration=e,this._nativeElement=n,this._currentSelectedLayer=o,this._currentHoveredLayer=a,this._currentObjectId=l,this._isLoaded=!1,i.accessToken=this._configuration.accessToken,this._styleProvider=new s.StyleProvider(this._configuration),this._layerManager=new u.LayerManager,this._map=this.createMap().on("load",function(t){return h.onLoaded(t)}).on("draw.create",function(t){return h.onDrawCreate(t)}).on("draw.update",function(t){return h.onDrawEdit(t)}).on("click",function(t){h.state===c.MapState.Edit&&h.onEditTapObject(t)}),this._navigateController=this.createNavigatorControll(),this._map.addControl(this._navigateController),this._map.doubleClickZoom.disable(),this._map.dragRotate.disable(),this._map.touchZoomRotate.disableRotation(),this._draw=i.Draw({keybindings:!1,displayControlsDefault:!1}),this._map.addControl(this._draw)}return __extends(MapBoxGL,t),MapBoxGL.prototype.onTap=function(t){switch(this.state){case c.MapState.Normal:this.onTapObject(t.data);break;case c.MapState.Edit:this.onEditTapObject(t.data)}},MapBoxGL.prototype.onPan=function(t){this._navigateController.handleEvent(t),t.type===h.HammerJsType.panstart&&this.newEvent({type:c.MapEventType.mapPanStart,data:{}})},MapBoxGL.prototype.onPinch=function(t){this._navigateController.handleEvent(t),t.type===h.HammerJsType.pinchstart&&this.newEvent({type:c.MapEventType.mapPinchStart,data:{}})},MapBoxGL.prototype.onMouseWheel=function(t){this._navigateController.handleEvent(t)},Object.defineProperty(MapBoxGL.prototype,"isLoaded",{get:function(){return this._isLoaded},enumerable:!0,configurable:!0}),MapBoxGL.prototype.init=function(t){var e=this;r.each(t,function(t){return e.addLayer(t)})},MapBoxGL.prototype.addLayer=function(t){var e=this,n=[],i=[];r.each(a.FeatureTypes,function(e,i){var o=r.filter(t.features,function(t){return t.geometry.type===e}),s={crs:t.crs,features:o,type:"FeatureCollection"};n[i]=s});var o=t.crs.properties.type;return r.each(n,function(t,n){if(0!==t.features.length){var r=t.crs.properties.style,s=e._styleProvider.getStyle(o,a.FeatureTypes[n]);void 0!==r&&(s=r);var c=a.FeatureTypes[n],u={type:"geojson",data:t},l=e._layerManager.getLayerBefore(s.zIndex);switch(c){case"Polygon":var h=e.createFillLayer(o,u,s,l);e._layerManager.addLayer(h),i.push(h.id);break;case"Point":var p=e.createCircleLayer(o,u,s,l);e._layerManager.addLayer(p),i.push(p.id);break;case"LineString":var f=e.createLineStringLayer(o,u,s,l);e._layerManager.addLayer(f),i.push(f.id)}}}),i},MapBoxGL.prototype.addVectorLayer=function(t,e){},MapBoxGL.prototype.clearLayers=function(){for(var t=this._layerManager.LayerIds,e=t.length;0!==e--;){var n=t.splice(0,1)[0];this.removeLayer(n)}},MapBoxGL.prototype.removeLayer=function(t){var e=this._layerManager.indexOf(t);if(e>-1){for(var n=this._layerManager.Layer[e],i=n.children.length;0!==i--;){var r=n.children.splice(0,1)[0];this._map.getLayer(r)&&this._map.removeLayer(r)}return this._map.getLayer(n.id)&&this._map.removeLayer(n.id),this._map.getSource(n.id)&&this._map.removeSource(n.id),this._layerManager.removeLayer(n),!0}return!1},MapBoxGL.prototype.dispose=function(){t.prototype.dispose.call(this),clearInterval(this._intervalLocationObj),this._nativeElement.innerhtml="",this._map.remove()},MapBoxGL.prototype.createFeature=function(t){"point"===t?this._draw.changeMode("draw_point"):"polygon"===t&&this._draw.changeMode("draw_polygon")},MapBoxGL.prototype.editFeature=function(t,e,n){var i=this._layerManager.getLayersByType(t)[0],r=void 0!==i?i.id:void 0,o=this._draw.add(n);return this._draw.changeMode("simple_select",{featureIds:o}),this._map.getLayer(r)&&(this._map.setFilter(r,["!=","id",e]),this._map.getLayer(r+"-selected")&&this._map.setFilter(r+"-selected",["==","id",""]),this._map.getLayer(r+"-text")&&this._map.setFilter(r+"-text",["!=","id",e]),this._map.getLayer(r+"-selected-text")&&this._map.setFilter(r+"-selected-text",["==","id",""]),this._map.getLayer(r+"-border")&&this._map.setFilter(r+"-border",["!=","id",e]),this._map.getLayer(r+"-selected-border")&&this._map.setFilter(r+"-selected-border",["==","id",""])),r},MapBoxGL.prototype.stopEditFeature=function(t,e){this._draw.deleteAll(),this._map.getLayer(t)&&this._map.setFilter(t,null),this._map.getLayer(t+"-border")&&this._map.setFilter(t+"-border",null),this._map.getLayer(t+"-text")&&this._map.setFilter(t+"-text",null),this._map.getLayer(t+"-selected")&&this._map.setFilter(t+"-selected",["==","id",e]),this._map.getLayer(t+"-selected-border")&&this._map.setFilter(t+"-selected-border",["==","id",e]),this._currentSelectedLayer=t},MapBoxGL.prototype.replaceSourceLayer=function(t,e){var n=this._layerManager.getLayersByType(t)[0],i=void 0!==n?n.id:void 0;this._map.getSource(i)&&this._map.getSource(i).setData(e)},MapBoxGL.prototype.animateSelection=function(t,e){var n=this,i=this._layerManager.getLayersByType(t);r.each(i,function(t){if(n._map.getLayer(t.id+"-selected")){var i=n._map.getPaintProperty(t.id+"-selected","circle-radius");n._map.setFilter(t.id+"-selected",["==","id",e]);var r=i.stops[1][1],o=0,s=0,a=10,c=setInterval(function(){o=s<5?o+1:9-s,n._map.setPaintProperty(t.id+"-selected","circle-radius",r+2.5*o),0===o&&n._map.setPaintProperty(t.id+"-selected","circle-radius",i),++s===a&&clearInterval(c)},80)}})},MapBoxGL.prototype.addYourLocation=function(){var t=6,e="yourLocation",n=this._layerManager.getLayerBefore(t),i=void 0===n?void 0:n.id;this._map.addSource(e,{type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:this._configuration.center}}});var r={stops:[[14,2],[16,4],[22,8]]},o="#000000",s="rgba(184, 49,47, 1.0)",a="rgba(225,73,56, 0.3)";this._map.addLayer({id:e,source:e,type:"circle",paint:{"circle-color":o,"circle-radius":r}},i);var c=e+"firstBorder";this._map.addLayer({id:c,source:e,type:"circle",paint:{"circle-color":s,"circle-radius":this.addRadiusSize(r,7)}},e);var u=e+"borderAnimation";this._map.addLayer({id:u,source:e,type:"circle",paint:{"circle-color":a,"circle-radius":this.addRadiusSize(r,11)}},c)},MapBoxGL.prototype.centerPosition=function(t,e){this._map.flyTo({center:t?t:this._configuration.center,zoom:e?e:this._configuration.zoom,speed:.7,curve:1.3})},MapBoxGL.prototype.getCenterPosition=function(){return this._map.getCenter().toArray()},MapBoxGL.prototype.select=function(t,e){var n=this,i=this._layerManager.getLayersByType(t);r.each(i,function(t){n.selectObject(e,t.id)})},MapBoxGL.prototype.unSelect=function(t,e){var n=this,i=this._layerManager.getLayersByType(t);r.each(i,function(e){n.resetSelectedLayer(e.id,t)})},MapBoxGL.prototype.selectLayer=function(t){var e=this,n=this._layerManager.getLayersByType(t);r.each(n,function(t){e._map.setFilter(t.id,["==","id",""]),e._map.setFilter(t.id+"-selected",["all"]),e._map.getLayer(t.id+"-selected-text")&&(e._map.setFilter(t.id+"-selected-text",["all"]),e._map.setFilter(t.id+"-text",["==","id",""]))})},MapBoxGL.prototype.unSelectLayer=function(t){var e=this,n=this._layerManager.getLayersByType(t);r.each(n,function(n){e.resetSelectedLayer(n.id,t)})},MapBoxGL.prototype.resetPosition=function(){this._map.flyTo({center:this._configuration.center,zoom:this._configuration.zoom,speed:1.5,curve:1.3})},MapBoxGL.prototype.setLayerVisibility=function(t,e){var n=this;this._map.getLayer(t)&&this._map.setLayoutProperty(t,"visibility",e?"visible":"none"),r.each(a.LayerTypes,function(i){n._map.getLayer(t+"-"+i)&&n._map.setLayoutProperty(t+"-"+i,"visibility",e?"visible":"none")})},MapBoxGL.prototype.zoomIn=function(){this._map.zoomIn()},MapBoxGL.prototype.zoomOut=function(){this._map.zoomOut()},MapBoxGL.prototype.getZoom=function(){return this._map.getZoom()},MapBoxGL.prototype.createFillLayer=function(t,e,n,i){var r=u.Layer.createDefaultLayer(t,n.zIndex||-1),o=r.id,s=void 0===i?void 0:i.id;if(this._map.addSource(o,e),this._map.addLayer({id:o,source:o,metadata:{"mapbox:type":t},interactive:!0,type:"fill",minzoom:n.minZoom||0,maxzoom:n.maxZoom||22,paint:{"fill-antialias":!0,"fill-color":n.color.background,"fill-opacity":n.color.opacity||1}},s),void 0!==n.color.border){var a=r.addChild("-border");n.dashedBorder?this._map.addLayer({id:a,source:o,metadata:{"mapbox:type":t},type:"line",minzoom:n.minZoom||0,maxzoom:n.maxZoom||22,paint:{"line-color":n.color.border,"line-width":n.borderThickness||1,"line-dasharray":[3,3]}},s):this._map.addLayer({id:a,source:o,metadata:{"mapbox:type":t},type:"line",minzoom:n.minZoom||0,maxzoom:n.maxZoom||22,paint:{"line-color":n.color.border,"line-width":n.borderThickness||1}},s)}if(void 0!==n.hover){var c=r.addChild("-hover");this._map.addLayer({id:c,source:o,type:"fill",minzoom:n.minZoom||0,maxzoom:n.maxZoom||22,paint:{"fill-antialias":!0,"fill-color":n.hover.color.background,"fill-opacity":n.hover.color.opacity||1,"fill-outline-color":n.hover.color.border},filter:["==","id",""]},s)}if(void 0!==n.selected){var l=r.addChild("-selected");this._map.addLayer({id:l,source:o,type:"fill",minzoom:n.minZoom||0,maxzoom:n.maxZoom||22,paint:{"fill-antialias":!0,"fill-color":n.selected.color.background,"fill-opacity":n.selected.color.opacity||1,"fill-outline-color":n.selected.color.border},filter:["==","id",""]},s)}return r},MapBoxGL.prototype.createLineStringLayer=function(t,e,n,i){var r=u.Layer.createDefaultLayer(t,n.zIndex||-1),o=r.id,s=void 0===i?void 0:i.id;return this._map.addSource(o,e),this._map.addLayer({id:o,source:o,metadata:{"mapbox:type":t},minzoom:n.minZoom||0,maxzoom:n.maxZoom||22,type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#888","line-width":2}},s),r},MapBoxGL.prototype.createCircleLayer=function(t,e,n,i){var r=u.Layer.createDefaultLayer(t,n.zIndex||-1),o=r.id,s=void 0===i?void 0:i.id;void 0!==n.cluster&&n.cluster.value===!0&&(e.cluster=!0,e.clusterMaxZoom=n.cluster.maxZoom||20,e.clusterRadius=n.cluster.clusterRadius||32),this._map.addSource(o,e);var a=r.addChild("-text");if(this._map.addLayer({id:a,source:o,type:"symbol",minzoom:n.minZoom||0,maxzoom:n.maxZoom||22,paint:{"text-color":n.color.text||"#000"},layout:{"text-ignore-placement":!0,"text-field":"{title}","text-font":[n.textFont||"Linearicons-Free Regular"],"text-anchor":n.textAnchor||"center","text-justify":n.textjustify||"center","text-size":n.radius,"text-offset":n.offset||[0,0]}},s),this._map.addLayer({id:o,source:o,metadata:{"mapbox:type":t},interactive:!0,type:"circle",minzoom:n.minZoom||0,maxzoom:n.maxZoom||22,paint:{"circle-opacity":n.color.opacity||1,"circle-color":n.iconCategorical||n.color.background||"#000","circle-radius":n.radius||20}},a),void 0!==n.color.border){var c=r.addChild("-border");this._map.addLayer({id:c,ref:o,paint:{"circle-color":n.color.border||n.color.background||"#000","circle-radius":this.addRadiusSize(n.radius,n.borderThickness||1)||2}},o)}if(void 0!==n.hover){var l=r.addChild("-hover");this._map.addLayer({id:l,source:o,type:"fill",minzoom:n.minZoom||0,maxzoom:n.maxZoom||22,paint:{"circle-color":n.hover.color.background,"circle-opacity":n.hover.color.opacity||1,"circle-radius":n.radius||20},filter:["==","id",""]},a)}if(void 0!==n.selected){var h=r.addChild("-selected");if(this._map.addLayer({id:h,source:o,type:"circle",minzoom:n.minZoom||0,maxzoom:n.maxZoom||22,paint:{"circle-opacity":n.selected.color.opacity||1,"circle-color":n.selected.color.background,"circle-radius":n.selected.radius||n.radius||20},filter:["==","id",""]},a),void 0!==n.selected.color.text){var p=r.addChild("-selected-text");this._map.addLayer({id:p,source:o,type:"symbol",minzoom:n.minZoom||0,maxzoom:n.maxZoom||22,paint:{"text-color":n.selected.color.text||"#000"},layout:{"text-ignore-placement":!0,"text-field":"{title}","text-font":[n.textFont||"Linearicons-Free Regular"],"text-size":n.selected.radius||n.radius,"text-offset":n.offset||[0,0]},filter:["==","id",""]})}if(void 0!==n.selected.color.border){var f=r.addChild("-selected-border");this._map.addLayer({id:f,ref:h,paint:{"circle-color":n.selected.color.border,"circle-radius":this.addRadiusSize(n.selected.radius||n.radius,n.selected.borderRadius)||n.selected.borderRadius||30}},h)}}if(void 0!==n.cluster&&n.cluster.value===!0){for(var d=[this.addRadiusSize(n.cluster.styleRadius,5),this.addRadiusSize(n.cluster.styleRadius,8)],g=[.3,.4],y=0;y<2;y++){var v=r.addChild("-cluster-back"+y);this._map.addLayer({id:v,type:"circle",source:o,paint:{"circle-color":n.cluster.color||n.iconCategorical||n.color.background||"#000","circle-radius":d[y]||20,"circle-opacity":g[y]},filter:[">=","point_count",2]},o)}var m=r.addChild("-cluster");this._map.addLayer({id:m,type:"circle",source:o,paint:{"circle-color":n.cluster.color||n.iconCategorical||n.color.background||"#000","circle-radius":n.cluster.styleRadius||20},filter:[">=","point_count",2]},o);var b=r.addChild("-cluster-text");this._map.addLayer({id:b,source:o,type:"symbol",paint:{"text-color":n.color.text||"#000"},layout:{"text-ignore-placement":!0,"text-field":"{point_count}","text-font":[n.cluster.textFont||"Linearicons-Free Regular"],"text-size":n.cluster.styleRadius||20},filter:[">=","point_count",2]},a)}return r},MapBoxGL.prototype.addRadiusSize=function(t,e){var n=r.cloneDeep(t);return n.stops?r.forEach(n.stops,function(t){t[1]+=e}):r.isNumber(n)&&(n+=e),n},MapBoxGL.prototype.onTapObject=function(t){var e,n=(t.pointerType,t.srcEvent,[]);if(!r.isUndefined(t.pointers)&&0!==t.pointers.lenght){n=[t.pointers[0].clientX,t.pointers[0].clientY];var i=25,o=25,s=[[n[0]-i/2,n[1]-o/2],[n[0]+i/2,n[1]+o/2]];e=this._map.queryRenderedFeatures(s,{layers:this._layerManager.LayerIds})}if(e&&0!==e.length)if(e=r.filter(e,function(t){return!r.isUndefined(t.properties.cluster)||!r.isUndefined(t.properties.id)}),e&&0!==e.length){var a=e[0],u=a.properties.type;if(void 0===a.properties.id&&a.properties.cluster)this.newEvent({type:c.MapEventType.mapClick,data:{type:a.layer.metadata["mapbox:type"]+"-cluster",location:a.geometry.coordinates}});else{var l=a.properties.id,h={id:l,type:u,position:{x:n[0],y:n[1]}};this.newEvent({type:c.MapEventType.mapClick,data:h})}}else this.newEvent({type:c.MapEventType.mapClick,data:{}});else this.newEvent({type:c.MapEventType.mapClick,data:{}})},MapBoxGL.prototype.onEditTapObject=function(t){var e=t.point,n=this._map.queryRenderedFeatures(e,{layers:this._layerManager.LayerIds});if(n&&0!==n.length){var i=n[0].properties.type,r=n[0].properties.id;this.newEvent({type:c.MapEventType.mapClick,data:this.createMapClickObject(r,i,{x:e[0],y:e[1]})})}else this.newEvent({type:c.MapEventType.mapClick,data:{}})},MapBoxGL.prototype.onDrawEdit=function(t){var e=t.features[0];this.newEvent({type:c.MapEventType.mapEdit,data:e})},MapBoxGL.prototype.onDrawCreate=function(t){var e=t.features[0];this.newEvent({type:c.MapEventType.mapCreate,data:e})},MapBoxGL.prototype.setCurrentSelectedLayers=function(t,e){this._currentSelectedLayer=e},MapBoxGL.prototype.resetCurrentHoveredLayer=function(){void 0!==this._currentHoveredLayer&&(this._map.setFilter(this._currentHoveredLayer,["==","id",""]),this._currentHoveredLayer=void 0)},MapBoxGL.prototype.createMapClickObject=function(t,e,n){return new c.MapClickObject(t,e,n)},MapBoxGL.prototype.createMapHoverObject=function(t,e,n){return new c.MapHoverObject(t,e,n)},MapBoxGL.prototype.onMouseMove=function(t){var e=[t.srcEvent.layerX,t.srcEvent.layerY],n=this._map.queryRenderedFeatures(e,{layers:this._layerManager.LayerIds});if(this._map.getCanvas().style.cursor=n.length?"pointer":"",console.log("onMouseMove",t),n&&0!==n.length){var i=n[0].properties.id,r=n[0].layer.id,o=n[0].properties.type,s=this.createMapHoverObject(i,o,{x:e[0],y:e[1]});this.setCurrentObjectDiff(i)&&this.newEvent({type:c.MapEventType.mapHoverChange,data:s}),console.log(s),this.newEvent({type:c.MapEventType.mapHoverChange,data:s}),this._map.getLayer(n[0].layer.id+"-hover")?this.hoverObject(i,r):this.resetCurrentHoveredLayer()}else this.resetCurrentHoveredLayer(),this.setCurrentObjectDiff("")&&this.newEvent({type:c.MapEventType.mapHoverChange,data:{}})},MapBoxGL.prototype.onTouchMove=function(t){this.newEvent({type:c.MapEventType.mapDrag,data:{}})},MapBoxGL.prototype.onDragStart=function(t){this.newEvent({type:c.MapEventType.mapDrag,data:{}})},MapBoxGL.prototype.setCurrentObjectDiff=function(t){return this._currentObjectId!==t&&(this._currentObjectId=t,!0)},MapBoxGL.prototype.selectObject=function(t,e){this._map.getLayer(e+"-selected")&&t&&(this._map.setFilter(e+"-selected",["==","id",t]),this._map.setFilter(e,["!=","id",t]),this._map.getLayer(e+"-selected-text")&&(this._map.setFilter(e+"-text",["!=","id",t]),this._map.setFilter(e+"-selected-text",["==","id",t])))},MapBoxGL.prototype.resetSelectedLayer=function(t,e){var n=t+"-selected";this._map.setFilter(n,["==","id",""]),this._map.setFilter(t,["all"]),this._map.getLayer(n+"-border")&&this._map.setFilter(n+"-border",["==","id",""]),this._map.getLayer(n+"-text")&&(this._map.setFilter(t+"-text",["all"]),this._map.setFilter(n+"-text",["==","id",""]))},MapBoxGL.prototype.hoverObject=function(t,e){this._currentHoveredLayer!==e+"-hover"&&this.resetCurrentHoveredLayer(),this._map.setFilter(e+"-hover",["==","id",t]),this._currentHoveredLayer=e+"-hover"},MapBoxGL.prototype.onLoaded=function(t){this._isLoaded=!0,this._configuration.defaultBuildings||this._map.setLayerZoomRange("building",0,15.5),this._configuration.showLocationIcon&&this.addYourLocation()},MapBoxGL.prototype.createNavigatorControll=function(){var t=new o.PanNavigatorComponent,e=new o.MouseWheelNavigatorComponent,n=new o.PinchNavigatorComponent;return new o.NavigatorController([t,e,n])},MapBoxGL.prototype.createMap=function(){return new i.Map({container:this._nativeElement,style:this._configuration.mapStyle||"mapbox://styles/bjorngotestrand/cil9k4t40004rc4lxto5k0apb",center:this._configuration.center||[16.191788,58.588813],zoom:this._configuration.zoom||13,maxBounds:this._configuration.boundary?new i.LngLatBounds(new i.LngLat(this._configuration.boundary[0][0],this._configuration.boundary[0][1]),new i.LngLat(this._configuration.boundary[1][0],this._configuration.boundary[1][1])):void 0,interactive:!1})},MapBoxGL}(l.CoreContract);e.MapBoxGL=p},function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}__export(n(121)),__export(n(719)),__export(n(718)),__export(n(720)),__export(n(721))},function(t,e,n){"use strict";var i=n(121),r=n(223),o=n(120),s="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",a=(s.indexOf("firefox")!==-1,s.indexOf("safari")!==-1&&s.indexOf("chrom")===-1),c=function(t){function MouseWheelNavigatorComponent(){t.call(this,[o.HammerJsType.mousewheel])}return __extends(MouseWheelNavigatorComponent,t),MouseWheelNavigatorComponent.prototype.execute=function(t){var e=t.type,n=t.data;switch(e){case o.HammerJsType.mousewheel:this.onMouseWheel(n)}},MouseWheelNavigatorComponent.prototype.onTimeout=function(){this._mouseWheelType="wheel",this.zoom(-this._mouseWheelLastValue)},MouseWheelNavigatorComponent.prototype.zoom=function(t,e){if(0!==t){var n=this._map,i=2/(1+Math.exp(-Math.abs(t/100)));t<0&&0!==i&&(i=1/i);var r=n.ease?n.ease.to:n.transform.scale,o=n.transform.scaleZoom(r*i);n.zoomTo(o,{duration:0,around:n.unproject(this._mouseWheelPos),delayEndEvents:200},{originalEvent:e})}},MouseWheelNavigatorComponent.prototype.onMouseWheel=function(t){var e;e=-t.wheelDeltaY,a&&(e/=3);var n=r.NavigatorDOMUtilities.now(),i=n-(this._mouseWheelTime||0);this._mouseWheelPos=r.NavigatorDOMUtilities.mousePos(this._el,t),this._mouseWheelTime=n,0!==e&&e%4.000244140625===0?(this._mouseWheelType="wheel",e=Math.floor(e/4)):0!==e&&Math.abs(e)<4?this._mouseWheelType="trackpad":i>400?(this._mouseWheelType=null,this._mouseWheelLastValue=e,this._mouseWheelTimeout=setTimeout(this.onTimeout,40)):this._mouseWheelType||(this._mouseWheelType=Math.abs(i*e)<200?"trackpad":"wheel",this._mouseWheelTimeout&&(clearTimeout(this._mouseWheelTimeout),this._mouseWheelTimeout=null,e+=this._mouseWheelLastValue)),t.shiftKey&&e&&(e/=4),this._mouseWheelType&&this.zoom(-e,t)},MouseWheelNavigatorComponent}(i.NavigatorComponent);e.MouseWheelNavigatorComponent=c},function(t,e,n){"use strict";var i=n(121),r=function(t){function NavigatorController(e){t.call(this),this._components=e,this._componentsDictionary={}}return __extends(NavigatorController,t),NavigatorController.prototype.addTo=function(e){this.isEnabled||(t.prototype.addTo.call(this,e),this.registerControllerComponents(e))},NavigatorController.prototype.remove=function(){t.prototype.remove.call(this),this.removeControllerComponents(),this._panEventSubscription.unsubscribe(),this._panEventSubscription=void 0,this._pinchEventSubscription.unsubscribe(),this._pinchEventSubscription=void 0,this._mouseWheelEventSubscription.unsubscribe(),this._mouseWheelEventSubscription=void 0},NavigatorController.prototype.handleEvent=function(t){var e=t.type,n=this._componentsDictionary[e];void 0!==n&&n.execute(t)},NavigatorController.prototype.registerControllerComponents=function(t){for(var e=0;e<this._components.length;e++){var n=this._components[e];n.addTo(t);for(var i=0;i<n.controllEvents.length;i++){var r=n.controllEvents[i];this._componentsDictionary[r]=n}}},NavigatorController.prototype.removeControllerComponents=function(){for(var t=0;t<this._components.length;t++){var e=this._components[t];e.remove();for(var n=0;n<e.controllEvents.length;n++){var i=e.controllEvents[n];delete this._componentsDictionary[i]}}this._componentsDictionary=void 0,this._components=void 0},NavigatorController}(i.Navigator);e.NavigatorController=r},function(t,e,n){"use strict";var i=n(121),r=n(223),o=n(120),s=n(455),a=function(t){function PanNavigatorComponent(){t.call(this,[o.HammerJsType.panstart,o.HammerJsType.panmove,o.HammerJsType.panend])}return __extends(PanNavigatorComponent,t),PanNavigatorComponent.prototype.execute=function(t){var e=t.type,n=t.data;switch(e){case o.HammerJsType.panstart:this.onPanStart(n);break;case o.HammerJsType.panmove:this.onPanMove(n);break;case o.HammerJsType.panend:this.onPanEnd(n)}},PanNavigatorComponent.prototype.onPanStart=function(t){this._panPos=r.NavigatorDOMUtilities.mousePos(this._el,t.pointers[0]),this._panInertia=[[Date.now(),this._panPos]]},PanNavigatorComponent.prototype.onPanMove=function(t){var e=r.NavigatorDOMUtilities.mousePos(this._el,t.pointers[0]),n=this._map;n.stop(),this.drainPanInertiaBuffer(),this._panInertia.push([Date.now(),e]),n.transform.setLocationAtPoint(n.transform.pointLocation(this._panPos),e),this.fireEvent("drag",t),this.fireEvent("move",t),this._panPos=e},PanNavigatorComponent.prototype.onPanEnd=function(t){var e=this;this.fireEvent("dragend",t),this.drainPanInertiaBuffer();var n=function(){return e.fireEvent("moveend",t)},i=this._panInertia;if(i.length<2)return void n();var r=i[i.length-1],o=i[0],a=r[1].sub(o[1]),c=(r[0]-o[0])/1e3;if(0===c||r[1].equals(o[1]))return void n();var u=a.mult(s.InertiaLinearity/c),l=u.mag();l>s.InertiaMaxSpeed&&(l=s.InertiaMaxSpeed,u._unit()._mult(l));var h=l/(s.InertiaDeceleration*s.InertiaLinearity),p=u.mult(-h/2);this._map.panBy(p,{duration:1e3*h,noMoveStart:!0},{originalEvent:t})},PanNavigatorComponent.prototype.fireEvent=function(t,e){return this._map.fire(t,{originalEvent:e})},PanNavigatorComponent.prototype.drainPanInertiaBuffer=function(){for(var t=this._panInertia,e=Date.now(),n=160;t.length>0&&e-t[0][0]>n;)t.shift()},PanNavigatorComponent}(i.NavigatorComponent);e.PanNavigatorComponent=a},function(t,e,n){"use strict";var i=n(121),r=n(223),o=n(120),s=n(455),a=function(t){function PinchNavigatorComponent(){t.call(this,[o.HammerJsType.pinchstart,o.HammerJsType.pinchmove,o.HammerJsType.pinchend]),this._rotationDisabled=!0}return __extends(PinchNavigatorComponent,t),PinchNavigatorComponent.prototype.execute=function(t){var e=t.type,n=t.data;switch(e){case o.HammerJsType.pinchstart:this.onPinchStart(n);break;case o.HammerJsType.pinchmove:this.onPinchMove(n);break;case o.HammerJsType.pinchend:this.onPinchEnd(n)}},PinchNavigatorComponent.prototype.onPinchStart=function(t){var e=r.NavigatorDOMUtilities.mousePos(this._el,t.pointers[0]),n=r.NavigatorDOMUtilities.mousePos(this._el,t.pointers[1]);this._pinchStartVec=e.sub(n),this._pinchStartScale=this._map.transform.scale,this._pinchStartBearing=this._map.transform.bearing,this._pinchGestureIntent=void 0,this._pinchInertia=[]},PinchNavigatorComponent.prototype.onPinchMove=function(t){var e=r.NavigatorDOMUtilities.mousePos(this._el,t.pointers[0]),n=r.NavigatorDOMUtilities.mousePos(this._el,t.pointers[1]),i=e.add(n).div(2),o=e.sub(n),a=o.mag()/this._pinchStartVec.mag(),c=this._rotationDisabled?0:180*o.angleWith(this._pinchStartVec)/Math.PI,u=this._map;if(this._pinchGestureIntent){var l={duration:0,around:u.unproject(i)};"rotate"===this._pinchGestureIntent&&(l.bearing=this._pinchStartBearing+c),"zoom"!==this._pinchGestureIntent&&"rotate"!==this._pinchGestureIntent||(l.zoom=u.transform.scaleZoom(this._pinchStartScale*a)),u.stop(),this.drainPinchInertiaBuffer(),this._pinchInertia.push([Date.now(),a,i]),u.easeTo(l,{originalEvent:t})}else{var h=Math.abs(1-a)>s.SignificantScaleThreshold,p=Math.abs(c)>s.SignificantRotateThreshold;p?this._pinchGestureIntent="rotate":h&&(this._pinchGestureIntent="zoom"),this._pinchGestureIntent&&(this._pinchStartVec=o,this._pinchStartScale=u.transform.scale,this._pinchStartBearing=u.transform.bearing)}},PinchNavigatorComponent.prototype.onPinchEnd=function(t){this.drainPinchInertiaBuffer();var e=this._pinchInertia,n=this._map;if(e.length<2)return void n.snapToNorth({},{originalEvent:t});var i=e[e.length-1],r=e[0],o=n.transform.scaleZoom(this._pinchStartScale*i[1]),a=n.transform.scaleZoom(this._pinchStartScale*r[1]),c=o-a,u=(i[0]-r[0])/1e3,l=i[2];if(0===u||o===a)return void n.snapToNorth({},{originalEvent:t});var h=c*s.InertiaLinearity/u;Math.abs(h)>s.InertiaMaxSpeed&&(h=h>0?s.InertiaMaxSpeed:-s.InertiaMaxSpeed);var p=1e3*Math.abs(h/(s.InertiaDeceleration*s.InertiaLinearity)),f=o+h*p/2e3;f<0&&(f=0),n.easeTo({zoom:f,duration:p,around:n.unproject(l)},{originalEvent:t})},PinchNavigatorComponent.prototype.drainPinchInertiaBuffer=function(){for(var t=this._pinchInertia,e=Date.now(),n=160;t.length>2&&e-t[0][0]>n;)t.shift()},PinchNavigatorComponent}(i.NavigatorComponent);e.PinchNavigatorComponent=a},function(t,e){"use strict";var n=function(){function Point(t,e){this.x=t,this.y=e}return Point.prototype.clone=function(){return new Point(this.x,this.y)},Point.prototype.add=function(t){return this.clone()._add(t)},Point.prototype.sub=function(t){return this.clone()._sub(t)},Point.prototype.mult=function(t){return this.clone()._mult(t)},Point.prototype.div=function(t){return this.clone()._div(t)},Point.prototype.rotate=function(t){return this.clone()._rotate(t)},Point.prototype.matMult=function(t){return this.clone()._matMult(t)},Point.prototype.unit=function(){return this.clone()._unit()},Point.prototype.perp=function(){return this.clone()._perp()},Point.prototype.round=function(){return this.clone()._round()},Point.prototype.convert=function(t){return t instanceof Point?t:Array.isArray(t)?new Point(t[0],t[1]):t},Point.prototype.mag=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},Point.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},Point.prototype.dist=function(t){return Math.sqrt(this.distSqr(t))},Point.prototype.distSqr=function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},Point.prototype.angle=function(){return Math.atan2(this.y,this.x)},Point.prototype.angleTo=function(t){return Math.atan2(this.y-t.y,this.x-t.x)},Point.prototype.angleWith=function(t){return this.angleWithSep(t.x,t.y)},Point.prototype.angleWithSep=function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},Point.prototype._matMult=function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},Point.prototype._add=function(t){return this.x+=t.x,this.y+=t.y,this},Point.prototype._sub=function(t){return this.x-=t.x,this.y-=t.y,this},Point.prototype._mult=function(t){return this.x*=t,this.y*=t,this},Point.prototype._div=function(t){return this.x/=t,this.y/=t,this},Point.prototype._unit=function(){return this._div(this.mag()),this},Point.prototype._perp=function(){var t=this.y;return this.y=this.x,this.x=-t,this},Point.prototype._rotate=function(t){var e=Math.cos(t),n=Math.sin(t),i=e*this.x-n*this.y,r=n*this.x+e*this.y;return this.x=i,this.y=r,this},Point.prototype._round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},Point}();e.Point=n},function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}__export(n(724))},function(t,e,n){"use strict";var i=n(1),r=n(1),o=n(220),s=n(122);!function(t){t[t.Show="block"]="Show",t[t.Hide="none"]="Hide"}(e.ToolTipStyle||(e.ToolTipStyle={}));var a=e.ToolTipStyle,c=function(){function TooltipLayerComponent(t,e){this._localService=t,this.viewContainer=e,this._show=a.Hide,this._posNr={top:0,left:0},this._isTooltipDisabled=!1,this._fixedPosition=!1,this._localService.tooltipContract=this,this.setPos(0,0),this.anchorPoint="top"}return TooltipLayerComponent.prototype.onConfig=function(t){var e=this;this._isTooltipDisabled=!t.tooltipEnabled,t.tooltipEnabled&&(this._subscription=this._localService.onNewEvent.filter(function(t){return t.state===o.MapState.Normal}).filter(function(t){return t.type===o.MapEventType.mapClick&&!_.isEmpty(t.data)&&!e._fixedPosition}).subscribe(function(t){e.setPos(t.data.position.x,t.data.position.y)}))},TooltipLayerComponent.prototype.ngOnInit=function(){},TooltipLayerComponent.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},TooltipLayerComponent.prototype.setToolTip=function(t){return this.clearToolTip(),this.setShow(a.Show),this._tooltipInstance=this.viewContainer.createComponent(t),this.updateTooltipInstance(),this._tooltipInstance},TooltipLayerComponent.prototype.clearToolTip=function(){this.setShow(a.Hide),this.viewContainer.clear(),this._tooltipInstance=void 0},TooltipLayerComponent.prototype.setModel=function(t){void 0===this._tooltipInstance||_.isEmpty(t)||void 0===t?this.setShow(a.Hide):(this.setShow(a.Show),this._tooltipInstance.instance.setModel(t))},TooltipLayerComponent.prototype.setFixedPosition=function(t,e,n){this._isTooltipDisabled||(this._fixedPosition=t,this._fixedPosition||this.setShow(a.Hide),void 0!==e&&void 0!==n&&this.setPos(e,n))},TooltipLayerComponent.prototype.getPositionStyle=function(){var t={display:this._show,top:this._posNr.top+"px",left:this._posNr.left+"px"},e={display:this._show,bottom:window.innerHeight-this._posNr.top+"px",left:this._posNr.left+"px"};return"top"===this.anchorPoint?t:e},TooltipLayerComponent.prototype.visible=function(t){this.setShow(t?a.Show:a.Hide)},TooltipLayerComponent.prototype.setPos=function(t,e){this._posNr.left=t,this._posNr.top=e,this.checkIfCloseToBorder(),this.updateTooltipInstance()},TooltipLayerComponent.prototype.updateTooltipInstance=function(){if(this._tooltipInstance){this.checkIfCloseToBorder();var t=this.getPositionStyle();this._tooltipInstance.instance.setStyle(t)}},TooltipLayerComponent.prototype.checkIfCloseToBorder=function(){
this.anchorPoint="top",this._posNr.top>window.innerHeight-470&&(this.anchorPoint="bottom")},TooltipLayerComponent.prototype.setShow=function(t){var e=this._show;this._show=this._isTooltipDisabled?a.Hide:t,this.updateTooltipInstance(),this._show===a.Hide&&e!==this._show&&this.onClose()},TooltipLayerComponent.prototype.onClose=function(){this._localService.newEvent({type:o.MapEventType.onClose,data:"tooltip"})},TooltipLayerComponent=__decorate([i.Component({selector:"map-tooltip-layer",styles:[n(752)],template:n(778)}),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof s.LocalService&&s.LocalService)&&t||Object,"function"==typeof(e="undefined"!=typeof r.ViewContainerRef&&r.ViewContainerRef)&&e||Object])],TooltipLayerComponent);var t,e}();e.TooltipLayerComponent=c},function(t,e,n){"use strict";var i=n(1),r=n(122),o=n(222),s=function(){function ZoomTooltipLayerComponent(t){this._localService=t,this._localService.zoomTooltipContract=this}return ZoomTooltipLayerComponent.prototype.onConfig=function(t){},ZoomTooltipLayerComponent.prototype.zoomIn=function(){this._localService.zoomIn(),this._localService.newEvent({type:o.MapEventType.mapZoomToolTipClick,data:"in"}),this.hideToolTip()},ZoomTooltipLayerComponent.prototype.zoomOut=function(){this._localService.zoomOut(),this._localService.newEvent({type:o.MapEventType.mapZoomToolTipClick,data:"out"}),this.hideToolTip()},ZoomTooltipLayerComponent.prototype.goHome=function(){this._localService.resetPosition(),this._localService.newEvent({type:o.MapEventType.mapZoomToolTipClick,data:"home"}),this.hideToolTip()},ZoomTooltipLayerComponent.prototype.hideToolTip=function(){this._localService.setTooltipVisibility(!1)},ZoomTooltipLayerComponent=__decorate([i.Component({selector:"map-zoom-tooltip-layer",template:n(779),styles:[n(753)]}),__metadata("design:paramtypes",["function"==typeof(t="undefined"!=typeof r.LocalService&&r.LocalService)&&t||Object])],ZoomTooltipLayerComponent);var t}();e.ZoomTooltipLayerComponent=s},function(t,e,n){"use strict";var i=n(224),r=n(122),o=n(457),s=n(1),a=n(453);e.MAP_LOCAL_SERVICES=[i.BridgeService,r.LocalService,o.StateService,a.MapManagerService,s.ViewContainerRef]},,function(t,e){t.exports=":host .time {\n  font-weight: 700;\n  font-size: 45px;\n  padding-bottom: 4px;\n}\n:host .day {\n  font-size: 25px;\n}\n:host div {\n  display: block;\n  text-align: right;\n}\n"},function(t,e){t.exports=""},function(t,e){t.exports=".loader {\n  font-size: 16px;\n  text-align: center;\n  color: #fff;\n  background: none;\n  -moz-transition: height .3s ease;\n  -o-transition: height .3s ease;\n  -webkit-transition: height .3s ease;\n  transition: height .3s ease;\n  height: 0;\n  overflow: hidden;\n}\n.loader.is-loading {\n  height: 100px;\n}\n.loader .text {\n  position: relative;\n  top: 40px;\n  font-size: 12px;\n}\n.loader .loader-symbol:before,\n.loader .loader-symbol:after,\n.loader .loader-symbol {\n  border-radius: 50%;\n  width: 2.5em;\n  height: 2.5em;\n  -webkit-animation-fill-mode: both;\n  animation-fill-mode: both;\n  -webkit-animation: load7 1.8s infinite ease-in-out;\n  animation: load7 1.8s infinite ease-in-out;\n}\n.loader .loader-symbol {\n  color: #ffffff;\n  font-size: 10px;\n  margin: 0 auto;\n  position: relative;\n  text-indent: -9999em;\n  -webkit-transform: translateZ(0);\n  -ms-transform: translateZ(0);\n  transform: translateZ(0);\n  -webkit-animation-delay: -0.16s;\n  animation-delay: -0.16s;\n}\n.loader .loader-symbol:before {\n  left: -3.5em;\n  -webkit-animation-delay: -0.32s;\n  animation-delay: -0.32s;\n}\n.loader .loader-symbol:after {\n  left: 3.5em;\n}\n.loader .loader-symbol:before,\n.loader .loader-symbol:after {\n  content: '';\n  position: absolute;\n  top: 0;\n}\n@-webkit-keyframes load7 {\n  0%,\n  80%,\n  100% {\n    box-shadow: 0 2.5em 0 -1.3em;\n  }\n  40% {\n    box-shadow: 0 2.5em 0 0;\n  }\n}\n@keyframes load7 {\n  0%,\n  80%,\n  100% {\n    box-shadow: 0 2.5em 0 -1.3em;\n  }\n  40% {\n    box-shadow: 0 2.5em 0 0;\n  }\n}\n"},function(t,e){t.exports=".loader {\n  font-size: 16px;\n  text-align: center;\n  color: #fff;\n  background: none;\n  -moz-transition: height .3s ease;\n  -o-transition: height .3s ease;\n  -webkit-transition: height .3s ease;\n  transition: height .3s ease;\n  height: 0;\n  overflow: hidden;\n}\n.loader.is-loading {\n  height: 100px;\n}\n.loader .text {\n  position: relative;\n  top: 40px;\n  font-size: 12px;\n}\n.loader .loader-symbol:before,\n.loader .loader-symbol:after,\n.loader .loader-symbol {\n  border-radius: 50%;\n  width: 2.5em;\n  height: 2.5em;\n  -webkit-animation-fill-mode: both;\n  animation-fill-mode: both;\n  -webkit-animation: load7 1.8s infinite ease-in-out;\n  animation: load7 1.8s infinite ease-in-out;\n}\n.loader .loader-symbol {\n  color: #ffffff;\n  font-size: 10px;\n  margin: 0 auto;\n  position: relative;\n  text-indent: -9999em;\n  -webkit-transform: translateZ(0);\n  -ms-transform: translateZ(0);\n  transform: translateZ(0);\n  -webkit-animation-delay: -0.16s;\n  animation-delay: -0.16s;\n}\n.loader .loader-symbol:before {\n  left: -3.5em;\n  -webkit-animation-delay: -0.32s;\n  animation-delay: -0.32s;\n}\n.loader .loader-symbol:after {\n  left: 3.5em;\n}\n.loader .loader-symbol:before,\n.loader .loader-symbol:after {\n  content: '';\n  position: absolute;\n  top: 0;\n}\n@-webkit-keyframes load7 {\n  0%,\n  80%,\n  100% {\n    box-shadow: 0 2.5em 0 -1.3em;\n  }\n  40% {\n    box-shadow: 0 2.5em 0 0;\n  }\n}\n@keyframes load7 {\n  0%,\n  80%,\n  100% {\n    box-shadow: 0 2.5em 0 -1.3em;\n  }\n  40% {\n    box-shadow: 0 2.5em 0 0;\n  }\n}\n"},function(t,e){t.exports="form {\n  color: #222;\n}\n"},function(t,e){t.exports=""},function(t,e){t.exports=":host .full-circle {\n  border: 1px solid #fff;\n  height: 42px;\n  width: 42px;\n  -webkit-border-radius: 21px;\n  -moz-border-radius: 21px;\n  border-radius: 21px;\n  line-height: 42px;\n  text-align: center;\n  margin-left: 30px;\n  margin-bottom: 20px;\n  display: inline-block;\n}\n:host .activityList {\n  margin: 20px 50px 30px 0;\n}\n:host .activityList .activity .detail {\n  background: #4A4A4A;\n  height: 0px;\n  padding: 0px 30px;\n  overflow: hidden;\n  width: 420px;\n  transition: 0.1s height, 0.4s padding;\n}\n:host .activityList .activity .detail.active {\n  width: inherit;\n  height: 100%;\n  padding: 30px;\n  transition: 0.7s height, 0.7s padding;\n}\n:host .activityList .activity .detail div {\n  padding-bottom: 15px;\n}\n:host .activityList .activity .detail div:last-child {\n  padding-bottom: 0px;\n}\n:host .activityList .activity .header {\n  padding: 10px 20px 10px 30px;\n  margin-top: 15px;\n  cursor: pointer;\n  overflow: hidden;\n  line-height: 150%;\n}\n:host .activityList .activity .header.active {\n  background: #54acd2;\n}\n:host .activityList .activity .header.active .close {\n  position: relative;\n  float: right;\n  font-size: 22px;\n}\n:host .selectedBuilding {\n  padding: 25px 80px 25px 30px;\n  background-color: #54acd2;\n}\n:host .selectedBuilding p {\n  font-size: 14px;\n}\n:host .selectedBuilding h2 {\n  font-size: 32px;\n  line-height: 120%;\n}\n:host .scrollbar {\n  width: 50px;\n  position: fixed;\n  top: 210px;\n  bottom: 0;\n  right: 0;\n  font-size: 14px;\n  background-color: rgba(34, 34, 34, 0.6);\n  color: #fff;\n  overflow: hidden;\n  display: -webkit-box;\n  display: -moz-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -moz-box-align: center;\n  -webkit-align-items: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-box-pack: center;\n  -moz-box-pack: center;\n  -ms-flex-pack: center;\n  -webkit-justify-content: center;\n  justify-content: center;\n}\n:host .scrollbar .scrollbar-content {\n  width: 100%;\n}\n:host .scrollbar .scrollbar-content .letter {\n  text-align: center;\n  display: -webkit-box;\n  display: -moz-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -moz-box-align: center;\n  -webkit-align-items: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-box-pack: center;\n  -moz-box-pack: center;\n  -ms-flex-pack: center;\n  -webkit-justify-content: center;\n  justify-content: center;\n  height: 26px;\n}\n:host .scrollbar .scrollbar-content .letter.deselected {\n  color: #616161;\n}\n:host .scrollbar .scrollbar-content .letter.selected {\n  border: 1px solid #fff;\n  height: 24px;\n  width: 24px;\n  -webkit-border-radius: 50%;\n  -webkit-background-clip: padding-box;\n  -moz-border-radius: 50%;\n  -moz-background-clip: padding;\n  border-radius: 50%;\n  background-clip: padding-box;\n  line-height: 24px;\n  margin-left: auto;\n  margin-right: auto;\n}\n"},function(t,e){t.exports=":host {\n  margin-bottom: 10px;\n}\n:host .detail {\n  background: #4A4A4A;\n  height: 0px;\n  padding: 0px 30px;\n  overflow: hidden;\n  width: 420px;\n  transition: 0.15s height, 0.4s padding;\n}\n:host .detail.active {\n  width: inherit;\n  height: 100%;\n  padding: 20px 30px;\n  transition: 0.7s height, 0.7s padding;\n}\n:host .detail .text {\n  margin-left: 15px;\n}\n:host .detail div {\n  padding-bottom: 10px;\n}\n:host .detail div:last-child {\n  padding-bottom: 0px;\n}\n:host .detail .empty {\n  width: 26px;\n  height: 26px;\n  display: inline-block;\n}\n:host .header {\n  padding: 10px 20px 10px 30px;\n  margin-top: 15px;\n  cursor: pointer;\n  overflow: hidden;\n  line-height: 150%;\n}\n:host .header.active {\n  background: #54acd2;\n}\n:host .header.active .close {\n  position: relative;\n  float: right;\n  font-size: 22px;\n}\n"},function(t,e){t.exports=":host {\n  margin-bottom: 10px;\n}\n:host .detail {\n  background: #4A4A4A;\n  height: 0px;\n  overflow: hidden;\n  width: 420px;\n}\n:host .detail.active {\n  width: inherit;\n  height: 100%;\n}\n:host .detail .text {\n  font-size: 16px;\n}\n:host .detail .detail-img-container {\n  background: #222222;\n  height: 200px;\n  vertical-align: middle;\n  text-align: center;\n}\n:host .detail .detail-img-container img {\n  width: 100%;\n  vertical-align: middle;\n}\n:host .detail .detail-description-container {\n  padding: 20px;\n}\n:host .header {\n  padding: 10px 20px 10px 30px;\n  margin-top: 15px;\n  cursor: pointer;\n  overflow: hidden;\n}\n:host .header.active {\n  background: #54acd2;\n  -webkit-transition: all ease-in 0.1s;\n  -moz-transition: all ease-in 0.1s;\n  -o-transition: all ease-in 0.1s;\n  transition: all ease-in 0.1s;\n}\n:host .header.active .close {\n  position: relative;\n  float: right;\n  font-size: 22px;\n}\n:host .header .header-title-description {\n  font-size: 16px;\n  padding-top: 10px;\n}\n"},function(t,e){t.exports=""},function(t,e){t.exports='/* http://astronautweb.co/snippet/font-awesome/ icons from font awesome and their content code */\n.icon {\n  font-style: normal;\n  font-weight: normal;\n  font-variant: normal;\n  text-transform: none;\n  line-height: 1;\n  /* Better Font Rendering =========== */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n.icon.icon-parking:before {\n  font-family: "Raleway", sans-serif;\n  font-weight: bold;\n  content: "P";\n}\n.icon.icon-poi:before {\n  font-family: \'Font Awesome\';\n  content: "\\f041";\n}\n.icon.icon-elstolpe:before {\n  font-family: \'Font Awesome\';\n  content: "\\f00d";\n}\n.icon.icon-other:before {\n  font-family: \'Font Awesome\';\n  content: "\\f00d";\n}\n.icon.icon-pumpstation:before {\n  font-family: \'Font Awesome\';\n  content: "\\f206";\n}\n.icon.icon-restaurant:before {\n  font-family: \'Font Awesome\';\n  content: "\\f0f5";\n}\n:host .wrapper {\n  padding-top: 30px;\n}\n:host .functionType {\n  font-size: 24px;\n  padding: 10px 20px 10px 30px;\n  display: -webkit-box;\n  display: -moz-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -moz-box-align: center;\n  -webkit-align-items: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-transition: all ease-in 0.1s;\n  -moz-transition: all ease-in 0.1s;\n  -o-transition: all ease-in 0.1s;\n  transition: all ease-in 0.1s;\n}\n:host .functionType.selected {\n  background: #54acd2;\n  -webkit-transition: all ease-in 0.3s;\n  -moz-transition: all ease-in 0.3s;\n  -o-transition: all ease-in 0.3s;\n  transition: all ease-in 0.3s;\n}\n:host .functionType .numberOfItems {\n  font-size: 18px;\n  margin-left: 10px;\n}\n:host .icon-circle {\n  border: 1px solid #fff;\n  height: 30px;\n  width: 30px;\n  -webkit-border-radius: 50%;\n  -webkit-background-clip: padding-box;\n  -moz-border-radius: 50%;\n  -moz-background-clip: padding;\n  border-radius: 50%;\n  background-clip: padding-box;\n  display: -webkit-box;\n  display: -moz-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -moz-box-align: center;\n  -webkit-align-items: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-box-pack: center;\n  -moz-box-pack: center;\n  -ms-flex-pack: center;\n  -webkit-justify-content: center;\n  justify-content: center;\n  margin-right: 15px;\n}\n:host .icon-wrapper {\n  font-size: 16px;\n}\n'},function(t,e){t.exports=":host .wi {\n  font-size: 55px;\n  line-height: 1.3;\n}\n:host .weatherItem {\n  font-family: 'Open Sans', sans-serif;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  font-size: 20px;\n  margin-left: 20px;\n}\n:host .weatherItem .weather {\n  padding-right: 20px;\n  display: flex;\n  align-items: center;\n}\n:host .weatherItem .weather .temp {\n  padding-left: 10px;\n  font-weight: bold;\n}\n:host .hour {\n  font-size: 16px;\n  color: #BFBFBF;\n  padding-right: 20px;\n  margin-bottom: 10px;\n}\n"},function(t,e){t.exports=":host {\n  background: #222222;\n  color: #E0E0E0;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  display: -webkit-box;\n  display: -moz-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-direction: normal;\n  -moz-box-direction: normal;\n  -webkit-box-orient: vertical;\n  -moz-box-orient: vertical;\n  -webkit-flex-direction: column;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  width: 420px;\n}\n:host .info {\n  padding: 20px;\n  height: 70px;\n}\n:host .info weather-item {\n  display: inline-block;\n  float: left;\n  padding-left: 20px;\n}\n:host .info date-time {\n  display: inline-block;\n  float: right;\n  padding-right: 20px;\n}\n:host .selection {\n  z-index: 200;\n  width: 420px;\n  display: -webkit-box;\n  display: -moz-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-direction: normal;\n  -moz-box-direction: normal;\n  -webkit-box-orient: horizontal;\n  -moz-box-orient: horizontal;\n  -webkit-flex-direction: row;\n  -ms-flex-direction: row;\n  flex-direction: row;\n  -webkit-box-align: center;\n  -moz-box-align: center;\n  -webkit-align-items: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-box-pack: center;\n  -moz-box-pack: center;\n  -ms-flex-pack: center;\n  -webkit-justify-content: center;\n  justify-content: center;\n  height: 100px;\n}\n:host .selection .selection-tab {\n  -webkit-box-flex: 1;\n  -moz-box-flex: 1;\n  -webkit-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  display: -webkit-box;\n  display: -moz-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-direction: normal;\n  -moz-box-direction: normal;\n  -webkit-box-orient: vertical;\n  -moz-box-orient: vertical;\n  -webkit-flex-direction: column;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  -webkit-box-align: center;\n  -moz-box-align: center;\n  -webkit-align-items: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-box-pack: center;\n  -moz-box-pack: center;\n  -ms-flex-pack: center;\n  -webkit-justify-content: center;\n  justify-content: center;\n  height: inherit;\n  text-align: center;\n  font-size: 12px;\n  color: #E0E0E0 !important;\n  background: #222222;\n}\n:host .selection .selection-tab .lnr {\n  font-size: 32px;\n  margin-bottom: 5px;\n}\n:host .selection .selection-tab.active {\n  background: #313131;\n}\n:host .content {\n  background: #313131;\n  overflow-x: hidden;\n  position: absolute;\n  top: 210px;\n  bottom: 0;\n  overflow: auto;\n  width: 420px;\n  font-weight: 100px;\n  font-size: 26px;\n  -ms-overflow-style: none;\n}\n:host .content::-webkit-scrollbar {\n  width: 0 !important;\n}\n"},function(t,e){t.exports=":host::content .template-container {\n  margin: 0px 18px 0px 28px;\n  position: absolute;\n  z-index: 1000;\n  box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);\n  line-height: 120%;\n  background-color: black;\n  width: 350px;\n}\n:host::content .template-container .content {\n  font-size: 15px;\n  padding: 15px;\n  min-height: 80px;\n  background: #222222;\n  color: white;\n  display: -webkit-box;\n  display: -moz-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n  -moz-box-pack: center;\n  -ms-flex-pack: center;\n  -webkit-justify-content: center;\n  justify-content: center;\n  -webkit-box-direction: normal;\n  -moz-box-direction: normal;\n  -webkit-box-orient: vertical;\n  -moz-box-orient: vertical;\n  -webkit-flex-direction: column;\n  -ms-flex-direction: column;\n  flex-direction: column;\n}\n:host::content .template-container .content .empty {\n  width: 16px;\n  height: 16px;\n  display: inline-block;\n}\n:host::content .template-container .content .content-row {\n  display: -webkit-box;\n  display: -moz-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -moz-box-align: center;\n  -webkit-align-items: center;\n  -ms-flex-align: center;\n  align-items: center;\n  padding-bottom: 10px;\n}\n:host::content .template-container .content .content-row:last-child {\n  padding-bottom: 0px;\n}\n:host::content .template-container .content .text {\n  margin-left: 10px;\n}\n:host::content .template-container .header {\n  background-color: white;\n  color: black;\n  padding: 15px;\n  font-size: 18px;\n  display: -webkit-box;\n  display: -moz-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-flex: 1;\n  -moz-box-flex: 1;\n  -webkit-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  -webkit-box-direction: normal;\n  -moz-box-direction: normal;\n  -webkit-box-orient: horizontal;\n  -moz-box-orient: horizontal;\n  -webkit-flex-direction: row;\n  -ms-flex-direction: row;\n  flex-direction: row;\n  -webkit-box-pack: center;\n  -moz-box-pack: center;\n  -ms-flex-pack: center;\n  -webkit-justify-content: center;\n  justify-content: center;\n  -webkit-box-align: center;\n  -moz-box-align: center;\n  -webkit-align-items: center;\n  -ms-flex-align: center;\n  align-items: center;\n}\n:host::content .template-container .header .name {\n  font-weight: bold;\n}\n:host::content .template-container .header .category {\n  font-size: 14px;\n}\n:host::content .template-container .header .info {\n  display: -webkit-box;\n  display: -moz-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-direction: normal;\n  -moz-box-direction: normal;\n  -webkit-box-orient: vertical;\n  -moz-box-orient: vertical;\n  -webkit-flex-direction: column;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  -webkit-box-pack: center;\n  -moz-box-pack: center;\n  -ms-flex-pack: center;\n  -webkit-justify-content: center;\n  justify-content: center;\n}\n:host::content .template-container .header .category-icon {\n  margin-left: auto;\n  font-size: 28px;\n  font-family: 'Font Awesome';\n}\n"},function(t,e){t.exports=":host::content .template-container {\n  margin: 0px 18px 0px 28px;\n  position: absolute;\n  z-index: 1000;\n  box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);\n  line-height: 120%;\n  background-color: black;\n  width: 350px;\n}\n:host::content .template-container .building-content {\n  font-size: 14px;\n  padding: 15px;\n  min-height: 80px;\n  background: #222222;\n  color: white;\n}\n:host::content .template-container .building-header {\n  background-color: white;\n  color: black;\n  padding: 15px;\n  font-size: 18px;\n  display: -webkit-box;\n  display: -moz-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-flex: 1;\n  -moz-box-flex: 1;\n  -webkit-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  -webkit-box-direction: normal;\n  -moz-box-direction: normal;\n  -webkit-box-orient: horizontal;\n  -moz-box-orient: horizontal;\n  -webkit-flex-direction: row;\n  -ms-flex-direction: row;\n  flex-direction: row;\n  -webkit-box-pack: center;\n  -moz-box-pack: center;\n  -ms-flex-pack: center;\n  -webkit-justify-content: center;\n  justify-content: center;\n  -webkit-box-align: center;\n  -moz-box-align: center;\n  -webkit-align-items: center;\n  -ms-flex-align: center;\n  align-items: center;\n}\n:host::content .template-container .building-header .building-name {\n  font-weight: bold;\n}\n:host::content .template-container .building-header .building-owner {\n  font-size: 14px;\n}\n:host::content .template-container .building-header .building-info {\n  display: -webkit-box;\n  display: -moz-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-direction: normal;\n  -moz-box-direction: normal;\n  -webkit-box-orient: vertical;\n  -moz-box-orient: vertical;\n  -webkit-flex-direction: column;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  -webkit-box-pack: center;\n  -moz-box-pack: center;\n  -ms-flex-pack: center;\n  -webkit-justify-content: center;\n  justify-content: center;\n}\n:host::content .template-container .building-header .building-icon {\n  margin-left: auto;\n  font-size: 28px;\n}\n"},function(t,e){t.exports=":host::content .template-container {\n  margin: 0px 18px 0px 28px;\n  position: absolute;\n  z-index: 1000;\n  box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);\n  line-height: 120%;\n  background-color: black;\n  width: 500px;\n}\n:host::content .template-container h2 {\n  font-size: 42px;\n}\n:host::content .template-container p {\n  margin-top: 10px;\n}\n:host::content .template-container .details {\n  background-color: #141414;\n  color: #F2F2F2;\n  padding: 20px;\n}\n:host::content .template-container .details h2 {\n  font-size: 32px;\n  line-height: 120%;\n}\n:host::content .template-container .info {\n  background-color: #F2F2F2;\n  color: #141414;\n  padding: 20px;\n}\n:host::content .template-container .info small {\n  font-size: 14px;\n}\n:host::content .template-container .info h4 {\n  font-weight: bold;\n  margin-bottom: 10px;\n}\n"},function(t,e){t.exports=":host::content .template-container {\n  margin: 0px 18px 0px 28px;\n  position: absolute;\n  z-index: 1000;\n  box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);\n  line-height: 120%;\n  background-color: black;\n  width: 400px;\n}\n:host::content .template-container .board-content {\n  font-size: 14px;\n  padding: 15px;\n  min-height: 80px;\n  background: #222222;\n  color: white;\n}\n:host::content .template-container .board-content .departureHeader {\n  font-weight: bolder !important;\n  padding: 10px 0;\n}\n:host::content .template-container .board-content .departureHeader .departureHeader-text-transportNumber {\n  margin-right: 1.7rem;\n  width: 3rem;\n}\n:host::content .template-container .board-content .departureHeader .departureHeader-text-direction {\n  width: 15rem;\n  margin-right: 14.2rem;\n}\n:host::content .template-container .board-content .departure {\n  display: inline-flex;\n  align-items: center;\n  padding: 5px 0;\n}\n:host::content .template-container .board-content .departure .departure-text-transportNumber {\n  margin-right: 1rem;\n  width: 3rem;\n}\n:host::content .template-container .board-content .departure .departure-text-transportNumber .icon-bus {\n  padding-right: 3px;\n}\n:host::content .template-container .board-content .departure .departure-text-direction {\n  width: 15rem;\n  margin-right: 1rem;\n}\n:host::content .template-container .board-header {\n  background-color: white;\n  color: black;\n  padding: 15px;\n  font-size: 18px;\n  display: -webkit-box;\n  display: -moz-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-flex: 1;\n  -moz-box-flex: 1;\n  -webkit-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  -webkit-box-direction: normal;\n  -moz-box-direction: normal;\n  -webkit-box-orient: horizontal;\n  -moz-box-orient: horizontal;\n  -webkit-flex-direction: row;\n  -ms-flex-direction: row;\n  flex-direction: row;\n  -webkit-box-pack: center;\n  -moz-box-pack: center;\n  -ms-flex-pack: center;\n  -webkit-justify-content: center;\n  justify-content: center;\n  -webkit-box-align: center;\n  -moz-box-align: center;\n  -webkit-align-items: center;\n  -ms-flex-align: center;\n  align-items: center;\n}\n:host::content .template-container .board-header .board-title {\n  font-weight: bold;\n}\n:host::content .template-container .board-header .board-sub-title {\n  font-size: 14px;\n}\n:host::content .template-container .board-header .board-info {\n  display: -webkit-box;\n  display: -moz-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-direction: normal;\n  -moz-box-direction: normal;\n  -webkit-box-orient: vertical;\n  -moz-box-orient: vertical;\n  -webkit-flex-direction: column;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  -webkit-box-pack: center;\n  -moz-box-pack: center;\n  -ms-flex-pack: center;\n  -webkit-justify-content: center;\n  justify-content: center;\n}\n:host::content .template-container .board-header .board-icon {\n  margin-left: auto;\n  font-size: 28px;\n}\n"},function(t,e){t.exports='/* http://astronautweb.co/snippet/font-awesome/ icons from font awesome and their content code */\n.icon {\n  font-style: normal;\n  font-weight: normal;\n  font-variant: normal;\n  text-transform: none;\n  line-height: 1;\n  /* Better Font Rendering =========== */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n.icon.icon-parking:before {\n  font-family: "Raleway", sans-serif;\n  font-weight: bold;\n  content: "P";\n}\n.icon.icon-poi:before {\n  font-family: \'Font Awesome\';\n  content: "\\f041";\n}\n.icon.icon-elstolpe:before {\n  font-family: \'Font Awesome\';\n  content: "\\f00d";\n}\n.icon.icon-other:before {\n  font-family: \'Font Awesome\';\n  content: "\\f00d";\n}\n.icon.icon-pumpstation:before {\n  font-family: \'Font Awesome\';\n  content: "\\f206";\n}\n.icon.icon-restaurant:before {\n  font-family: \'Font Awesome\';\n  content: "\\f0f5";\n}\n:host::content .template-container {\n  margin: 0px 18px 0px 28px;\n  position: absolute;\n  z-index: 1000;\n  box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);\n  line-height: 120%;\n  background-color: black;\n  width: 350px;\n}\n:host::content .template-container .interest-point-content {\n  font-size: 14px;\n  padding: 15px;\n  min-height: 80px;\n  background: #222222;\n  color: white;\n}\n:host::content .template-container .interest-point-header {\n  background-color: white;\n  color: black;\n  padding: 15px;\n  font-size: 18px;\n  display: -webkit-box;\n  display: -moz-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-flex: 1;\n  -moz-box-flex: 1;\n  -webkit-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  -webkit-box-direction: normal;\n  -moz-box-direction: normal;\n  -webkit-box-orient: horizontal;\n  -moz-box-orient: horizontal;\n  -webkit-flex-direction: row;\n  -ms-flex-direction: row;\n  flex-direction: row;\n  -webkit-box-pack: center;\n  -moz-box-pack: center;\n  -ms-flex-pack: center;\n  -webkit-justify-content: center;\n  justify-content: center;\n  -webkit-box-align: center;\n  -moz-box-align: center;\n  -webkit-align-items: center;\n  -ms-flex-align: center;\n  align-items: center;\n}\n:host::content .template-container .interest-point-header .interest-point-title {\n  font-weight: bold;\n}\n:host::content .template-container .interest-point-header .interest-point-sub-title {\n  font-size: 14px;\n}\n:host::content .template-container .interest-point-header .interest-point-info {\n  display: -webkit-box;\n  display: -moz-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-direction: normal;\n  -moz-box-direction: normal;\n  -webkit-box-orient: vertical;\n  -moz-box-orient: vertical;\n  -webkit-flex-direction: column;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  -webkit-box-pack: center;\n  -moz-box-pack: center;\n  -ms-flex-pack: center;\n  -webkit-justify-content: center;\n  justify-content: center;\n}\n:host::content .template-container .interest-point-header .interest-point-icon {\n  margin-left: auto;\n  font-size: 28px;\n}\n'},function(t,e){t.exports=":host::content .template-container {\n  margin: 0px 18px 0px 28px;\n  position: absolute;\n  z-index: 1000;\n  box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);\n  line-height: 120%;\n  background-color: black;\n  width: 500px;\n}\n:host::content .template-container h2 {\n  font-size: 30px;\n  line-height: 120%;\n}\n:host::content .template-container p {\n  margin-top: 10px;\n  line-height: 1.2;\n}\n:host::content .template-container h4 {\n  font-size: 25px;\n}\n:host::content .template-container .header {\n  background-color: #111111;\n  color: white;\n  padding: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n}\n:host::content .template-container .header .cols {\n  width: 50%;\n  padding: 0px 35px;\n  margin: 20px 0;\n}\n:host::content .template-container .header .border-right {\n  border-right: 1px solid white;\n}\n:host::content .template-container .header .align-left {\n  text-align: left;\n}\n:host::content .template-container .header .align-right {\n  text-align: right;\n}\n:host::content .template-container .header .emph {\n  padding-top: 10px;\n  font-weight: bold;\n  font-size: 24px;\n}\n:host::content .template-container .full-circle {\n  background-color: #BFBFBF;\n  border: 8px solid #878787;\n  height: 6px;\n  width: 6px;\n  -webkit-border-radius: 100%;\n  -moz-border-radius: 100%;\n  border-radius: 100%;\n  position: absolute;\n  left: 48.2%;\n}\n:host::content .template-container .details {\n  background-color: #222222;\n  color: #E0E0E0;\n  padding: 20px;\n}\n:host::content .template-container .details h2 {\n  font-size: 32px;\n}\n:host::content .template-container .details .cols {\n  width: 50%;\n}\n:host::content .template-container .details .buckets {\n  height: 60px;\n  font-size: 14px;\n}\n:host::content .template-container .details .buckets .checkmark {\n  display: none;\n}\n:host::content .template-container .details .buckets.current {\n  font-size: 16px;\n  font-weight: bold;\n  color: white;\n  border-color: #54ACD2 !important;\n  border-color: #54ACD2;\n}\n:host::content .template-container .details .buckets.current .full-circle {\n  background-color: white;\n  border: 6px solid #54ACD2;\n  height: 15px;\n  width: 15px;\n  -webkit-border-radius: 100%;\n  -moz-border-radius: 100%;\n  border-radius: 100%;\n  position: absolute;\n  left: 47.8%;\n}\n:host::content .template-container .details .buckets.completed {\n  border-color: #54ACD2 !important;\n}\n:host::content .template-container .details .buckets.completed .full-circle {\n  border-color: #54ACD2;\n  background-color: #000 !important;\n}\n:host::content .template-container .details .buckets.completed .checkmark {\n  display: inline-block;\n  position: absolute;\n  font-size: 26px;\n  top: -11px;\n  left: -7px;\n}\n:host::content .template-container .details .buckets.completed .checkmark:before {\n  font-family: \"FontAwesome\";\n  content: '\\f00c';\n}\n:host::content .template-container .details .buckets:last-child {\n  height: 20px;\n  border: none;\n}\n:host::content .template-container .details .buckets:nth-child(odd) {\n  text-align: left;\n  margin-left: 50%;\n  border-left: 5px solid #878787;\n}\n:host::content .template-container .details .buckets:nth-child(even) {\n  text-align: right;\n  border-right: 5px solid #878787;\n}\n:host::content .template-container .details .buckets .text {\n  padding: 0px 15px;\n}\n:host::content .template-container .info {\n  background-color: white;\n  color: #141414;\n  padding: 20px;\n}\n:host::content .template-container .info small {\n  font-size: 14px;\n}\n:host::content .template-container .info p {\n  font-size: 24px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n}\n:host::content .template-container .info h4,\n:host::content .template-container .info h2 {\n  font-weight: bold;\n  margin-bottom: 10px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n}\n";
},function(t,e){t.exports=":host {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 110px;\n  color: #E0E0E0;\n  font-size: 28px;\n}\n:host .bold {\n  font-weight: 900;\n  color: #fff;\n}\n:host .content {\n  padding: 30px 10px 0px 10px;\n}\n:host .content div {\n  display: inline-block;\n  margin-left: 20px;\n}\n:host .content .title {\n  font-size: 48px;\n}\n"},function(t,e){t.exports="/* http://meyerweb.com/eric/tools/css/reset/ \n   v2.0 | 20110126\n   License: none (public domain)\n*/\nhtml,\nbody,\ndiv,\nspan,\napplet,\nobject,\niframe,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\nblockquote,\npre,\na,\nabbr,\nacronym,\naddress,\nbig,\ncite,\ncode,\ndel,\ndfn,\nem,\nimg,\nins,\nkbd,\nq,\ns,\nsamp,\nsmall,\nstrike,\nstrong,\nsub,\nsup,\ntt,\nvar,\nb,\nu,\ni,\ncenter,\ndl,\ndt,\ndd,\nol,\nul,\nli,\nfieldset,\nform,\nlabel,\nlegend,\ntable,\ncaption,\ntbody,\ntfoot,\nthead,\ntr,\nth,\ntd,\narticle,\naside,\ncanvas,\ndetails,\nembed,\nfigure,\nfigcaption,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\noutput,\nruby,\nsection,\nsummary,\ntime,\nmark,\naudio,\nvideo {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-size: 100%;\n  font: inherit;\n  vertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle,\naside,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\nsection {\n  display: block;\n}\nbody {\n  line-height: 1;\n}\nol,\nul {\n  list-style: none;\n}\nblockquote,\nq {\n  quotes: none;\n}\nblockquote:before,\nblockquote:after,\nq:before,\nq:after {\n  content: '';\n  content: none;\n}\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\nmain {\n  display: block;\n}\nmain main-menu {\n  background: #222222;\n  width: 60px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n}\nmain main-menu .logotype-container {\n  height: 60px;\n}\nmain main-menu ul li a {\n  color: #fff;\n  text-decoration: none;\n  font-size: 22px;\n  text-align: center;\n  padding: 20px 0;\n  display: block;\n  width: 60px;\n}\nmain main-menu ul li a.router-link-active {\n  background: #54acd2;\n}\nmain .object-view-container {\n  background: #313131;\n  width: 320px;\n  position: absolute;\n  top: 0;\n  left: 60px;\n  bottom: 0;\n  color: #fff;\n}\nmain .object-view-container .object-view {\n  opacity: 0;\n  -moz-transition: opacity .3s ease;\n  -o-transition: opacity .3s ease;\n  -webkit-transition: opacity .3s ease;\n  transition: opacity .3s ease;\n}\nmain .object-view-container .object-view.ready {\n  opacity: 1;\n}\nmain .object-view-container .header .search {\n  position: relative;\n}\nmain .object-view-container .header .search input {\n  border: 0;\n  background: none;\n  height: 60px;\n  padding: 0 20px;\n  font-size: 16px;\n  width: 100%;\n  color: #fff;\n}\nmain .object-view-container .header .search .icon {\n  font-family: 'Linearicons-Free';\n  position: absolute;\n  top: 50%;\n  left: 15px;\n  transform: translateY(-50%);\n}\nmain .object-view-container .header .title {\n  height: 50px;\n  background: #54acd2;\n  padding: 0 20px;\n}\nmain .object-view-container .header .title .text {\n  height: 50px;\n  display: table-cell;\n  vertical-align: middle;\n  font-size: 20px;\n  font-weight: 500;\n}\nmain .object-view-container .preview .actions {\n  background: rgba(84, 172, 210, 0.5);\n}\nmain .object-view-container .preview .actions ul li {\n  padding: 10px 20px;\n  cursor: pointer;\n}\nmain .object-view-container .preview .actions ul li:after {\n  position: absolute;\n  right: 15px;\n  font-family: 'Linearicons-Free';\n  content: \"\";\n  height: 10px;\n  width: 10px;\n}\nmain .object-view-container .preview .content .header {\n  font-size: 10px;\n  padding: 20px 20px;\n}\nmain .object-view-container .preview .content .inner {\n  padding: 10px 20px 30px 20px;\n  font-size: 16px;\n  line-height: 20px;\n}\nmain .object-view-container .preview .list .header {\n  background: #222222;\n  font-size: 12px;\n  text-transform: uppercase;\n  padding: 5px 20px;\n}\nmain .object-view-container .preview .list ul li {\n  padding: 10px 20px;\n  border-bottom: 1px solid #444;\n}\nmain .object-view-container .preview .list ul li:last-child {\n  border: none;\n}\nmain .object-view-container .preview .list ul li:after {\n  position: absolute;\n  right: 15px;\n  font-family: 'Linearicons-Free';\n  content: \"\";\n  height: 10px;\n  width: 10px;\n}\nmain .object-edit-container {\n  background: #313131;\n  width: 320px;\n  position: absolute;\n  top: 0;\n  left: 60px;\n  bottom: 0;\n  color: #fff;\n  transition: left .3s ease;\n}\nmain .object-edit-container.show-edit {\n  left: 380px;\n}\nmain .object-edit-container .header {\n  margin-top: 60px;\n}\nmain .object-edit-container .header .title {\n  height: 50px;\n  background: #54acd2;\n  padding: 0 20px;\n  cursor: pointer;\n}\nmain .object-edit-container .header .title .text {\n  position: relative;\n  font-size: 20px;\n  font-weight: 500;\n  text-align: right;\n  top: 50%;\n  transform: translateY(-50%);\n}\nmain .object-edit-container .header .title .text .icon {\n  content: \"\";\n  font-family: 'Linearicons-Free';\n}\nmain .object-edit-container .content {\n  position: absolute;\n  top: 110px;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  width: 320px;\n  background: #fff;\n}\n.object-form {\n  padding: 10px 20px;\n}\n.form-group input,\n.form-group textarea {\n  outline: none;\n}\n.form-group label {\n  display: block;\n  padding: 10px 0;\n  font-size: 12px;\n}\n.form-group input[type=\"text\"] {\n  width: 100%;\n  font-size: 16px;\n  border: 0;\n  border-bottom: 1px solid #ddd;\n  padding: 1px 0 5px 0;\n}\n.form-group button {\n  border: none;\n  padding: 8px 16px;\n  margin-top: 10px;\n  outline: none;\n  cursor: pointer;\n}\n.form-group button:hover {\n  background: #000;\n  color: #fff;\n}\nbody {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  cursor: pointer;\n}\nhtml {\n  -ms-touch-action: pan-x pan-y;\n  -webkit-touch-action: pan-x pan-y;\n  -moz-touch-action: pan-x pan-y;\n  touch-action: pan-x pan-y;\n  -ms-content-zooming: none;\n}\n@font-face {\n  font-family: 'Raleway';\n  src: url('assets/fonts/raleway-regular-webfont.eot');\n  src: url('assets/fonts/raleway-regular-webfont.eot?#iefix') format('embedded-opentype'), url('assets/fonts/raleway-regular-webfont.woff') format('woff'), url('assets/fonts/raleway-regular-webfont.ttf') format('truetype'), url('assets/fonts/raleway-regular-webfont.svg#@raleway') format('svg');\n  font-weight: 500;\n  font-style: normal;\n}\n@font-face {\n  font-family: 'Raleway';\n  src: url('assets/fonts/raleway-bold-webfont.eot');\n  src: url('assets/fonts/raleway-bold-webfont.eot?#iefix') format('embedded-opentype'), url('assets/fonts/raleway-bold-webfont.woff') format('woff'), url('assets/fonts/raleway-bold-webfont.ttf') format('truetype'), url('assets/fonts/raleway-bold-webfont.svg#@raleway') format('svg');\n  font-weight: bold;\n  font-style: normal;\n}\n@font-face {\n  font-family: 'Font Awesome';\n  src: url('assets/fonts/fontawesome-webfont.eot');\n  src: url('assets/fonts/fontawesome-webfont.eot?#iefix') format('embedded-opentype'), url('assets/fonts/fontawesome-webfont.woff') format('woff'), url('assets/fonts/fontawesome-webfont.ttf') format('truetype'), url('assets/fonts/fontawesome-webfont.svg#@fontawesome') format('svg');\n  font-style: normal;\n}\n/* http://astronautweb.co/snippet/font-awesome/ icons from font awesome and their content code */\n.icon {\n  font-style: normal;\n  font-weight: normal;\n  font-variant: normal;\n  text-transform: none;\n  line-height: 1;\n  /* Better Font Rendering =========== */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n.icon.icon-parking:before {\n  font-family: \"Raleway\", sans-serif;\n  font-weight: bold;\n  content: \"P\";\n}\n.icon.icon-poi:before {\n  font-family: 'Font Awesome';\n  content: \"\\f041\";\n}\n.icon.icon-elstolpe:before {\n  font-family: 'Font Awesome';\n  content: \"\\f00d\";\n}\n.icon.icon-other:before {\n  font-family: 'Font Awesome';\n  content: \"\\f00d\";\n}\n.icon.icon-pumpstation:before {\n  font-family: 'Font Awesome';\n  content: \"\\f206\";\n}\n.icon.icon-restaurant:before {\n  font-family: 'Font Awesome';\n  content: \"\\f0f5\";\n}\nhtml,\nbody {\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n}\nbody {\n  font-family: 'Raleway', sans-serif;\n  background-color: #313131;\n}\n.mapboxgl-ctrl-bottom-right {\n  display: none;\n}\n"},function(t,e){t.exports=":host::content {\n  position: absolute;\n  height: 100%;\n  left: 0px;\n  top: 0;\n  right: 0;\n}\n:host::content .map-event-layer {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-color: transparent;\n}\n:host::content .mapbox-improve-map {\n  display: none;\n}\n:host::content .mapboxgl-ctrl-bottom-right {\n  display: none;\n}\n:host::content .map-container {\n  position: inherit;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n:host::content .mapboxgl-control-container {\n  display: none;\n}\n:host::content .mapboxgl-ctrl-attrib {\n  display: none;\n}\n"},function(t,e){t.exports=":host::content {\n  background-color: #222222;\n  text-align: center;\n}\n:host::content .loadingText {\n  color: white;\n}\n:host::content .map-loading-screen-text {\n  position: relative;\n  top: 50%;\n}\n"},function(t,e){t.exports=".loader {\n  font-size: 16px;\n  text-align: center;\n  color: #fff;\n  background: none;\n  -moz-transition: height .3s ease;\n  -o-transition: height .3s ease;\n  -webkit-transition: height .3s ease;\n  transition: height .3s ease;\n  height: 0;\n  overflow: hidden;\n}\n.loader.is-loading {\n  height: 100px;\n}\n.loader .text {\n  position: relative;\n  top: 40px;\n  font-size: 12px;\n}\n.loader .loader-symbol:before,\n.loader .loader-symbol:after,\n.loader .loader-symbol {\n  border-radius: 50%;\n  width: 2.5em;\n  height: 2.5em;\n  -webkit-animation-fill-mode: both;\n  animation-fill-mode: both;\n  -webkit-animation: load7 1.8s infinite ease-in-out;\n  animation: load7 1.8s infinite ease-in-out;\n}\n.loader .loader-symbol {\n  color: #ffffff;\n  font-size: 10px;\n  margin: 0 auto;\n  position: relative;\n  text-indent: -9999em;\n  -webkit-transform: translateZ(0);\n  -ms-transform: translateZ(0);\n  transform: translateZ(0);\n  -webkit-animation-delay: -0.16s;\n  animation-delay: -0.16s;\n}\n.loader .loader-symbol:before {\n  left: -3.5em;\n  -webkit-animation-delay: -0.32s;\n  animation-delay: -0.32s;\n}\n.loader .loader-symbol:after {\n  left: 3.5em;\n}\n.loader .loader-symbol:before,\n.loader .loader-symbol:after {\n  content: '';\n  position: absolute;\n  top: 0;\n}\n@-webkit-keyframes load7 {\n  0%,\n  80%,\n  100% {\n    box-shadow: 0 2.5em 0 -1.3em;\n  }\n  40% {\n    box-shadow: 0 2.5em 0 0;\n  }\n}\n@keyframes load7 {\n  0%,\n  80%,\n  100% {\n    box-shadow: 0 2.5em 0 -1.3em;\n  }\n  40% {\n    box-shadow: 0 2.5em 0 0;\n  }\n}\n"},function(t,e){t.exports=":host::content .tooltip {\n  display: none;\n  margin: 0px 18px 0px 28px;\n  position: absolute;\n  z-index: 1000;\n  box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);\n  line-height: 120%;\n  background-color: black;\n}\n:host::content .tooltip .tooltip-content {\n  position: absolute;\n  width: 500px;\n}\n"},function(t,e){t.exports=":host {\n  position: absolute;\n  bottom: 40px;\n  right: 40px;\n  box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);\n  /* make the first and last button in the group rounded*/\n}\n:host button {\n  display: block;\n  width: 50px;\n  height: 50px;\n  margin: 0;\n  text-align: center;\n  border: none;\n  text-decoration: none;\n  background-color: #313131;\n  font-size: 22px;\n  color: #FFF;\n  cursor: pointer;\n  border-left: 1px solid #222222;\n  border-right: 1px solid #222222;\n  border-top: 0.5px solid #222222;\n  border-bottom: 0.5px solid #222222;\n}\n:host button:hover {\n  background-color: #262626;\n}\n:host button:first-child {\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n}\n:host button:last-child {\n  border-bottom-left-radius: 4px;\n  border-bottom-right-radius: 4px;\n}\n"},function(t,e){t.exports="<main>\r\n    <map-gaiaplaces></map-gaiaplaces>\r\n    <router-outlet></router-outlet>\r\n    <!--<top-menu [titleConfiguration]='title'></top-menu>\r\n    <right-menu></right-menu>-->\r\n</main>"},function(t,e){t.exports=""},function(t,e){t.exports='<div class="loader" [ngClass]="{\'is-loading\': loading}">\r\n    <div class="loader-symbol"></div>\r\n    <div class="text">{{text}}</div>\r\n</div>'},function(t,e){t.exports='<div class="loader" [ngClass]="{\'is-loading\': loading}">\r\n    <div class="loader-symbol"></div>\r\n    <div class="text">{{text}}</div>\r\n</div>'},function(t,e){t.exports='<div class="logotype-container"></div>\r\n<ul>\r\n    <li router-active>\r\n        <a [routerLink]=" [\'Home\'] "><span class="lnr lnr-map"></span></a>\r\n    </li>\r\n    <li router-active>\r\n        <a [routerLink]=" [\'About\'] "><span class="lnr lnr-film-play"></span></a>\r\n    </li>\r\n    <li router-active>\r\n        <a [routerLink]=" [\'Reports\'] "><span class="lnr lnr-pie-chart"></span></a>\r\n    </li>\r\n    <li router-active>\r\n        <a [routerLink]=" [\'Notifications\'] "><span class="lnr lnr-alarm"></span></a>\r\n    </li>\r\n    <li router-active>\r\n        <a [routerLink]=" [\'User\'] "><span class="lnr lnr-user"></span></a>\r\n    </li>\r\n</ul>'},function(t,e){t.exports='\r\n<form class="object-form" (ngSubmit)="onSubmit()">\r\n    <div class="form-group">\r\n        <label for="name">Namn</label>\r\n        <input type="text" [ngModel]="property?.cms?.fastighet" (ngModelChange)="property.cms.fastighet=$event" />\r\n    </div>\r\n    <div class="form-group">\r\n        <label for="name">Kommunnamn</label>\r\n        <input type="text" [ngModel]="property?.cms?.kommunnamn" (ngModelChange)="property.cms.kommunnamn=$event" />\r\n    </div>\r\n    <div class="form-group">\r\n        <label for="name">Kommundkod</label>\r\n        <input type="text" [ngModel]="property?.cms?.kommunkod" (ngModelChange)="property.cms.kommunkod=$event" />\r\n    </div>\r\n    <div class="form-group">\r\n        <label for="name">Trakt</label>\r\n        <input type="text" [ngModel]="property?.cms?.trakt" (ngModelChange)="property.cms.trakt=$event" />\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="submit">Skicka</button>\r\n    </div>    \r\n</form>'},function(t,e){t.exports='<div class="object-edit-container" [ngClass]="{\'show-edit\': showEditView}">\r\n  <div class="header">\r\n    <div class="title">\r\n      <div class="text" (click)="toggleShowEditView()">\r\n        Stäng <span class="lnr lnr-cross"></span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="content">\r\n    <!--<router-outlet></router-outlet>-->\r\n    <property-edit [(property)]="property">      \r\n    </property-edit>\r\n  </div>\r\n</div>\r\n\r\n<div class="object-view-container">\r\n  <div class="loading-view">\r\n    <loader [text]="\'Hämtar fastighet\'" [(loading)]="isLoadingProperty"></loader>\r\n  </div>\r\n\r\n  <div class="object-view" [ngClass]="{\'ready\' : !isLoadingProperty}">\r\n    <div class="header">\r\n      <div class="search">\r\n        <div class="icon"><span class="lnr lnr-magnifier"></span></div>\r\n        <input type="text" placeholder="Sök objekt i fastighet" />\r\n      </div>\r\n      <div class="title">\r\n        <div class="text" [textContent]="property?.cms?.fastighet">\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n\r\n\r\n    <div class="preview">\r\n      <!--<div class="actions" [routerLink]="[\'./Edit\']">-->\r\n      <div class="actions" (click)="toggleShowEditView()">\r\n        <ul>\r\n          <li>\r\n            Redigera objekt\r\n          </li>\r\n        </ul>\r\n      </div>\r\n\r\n      <div class="content">\r\n        <div class="header">\r\n          Beskrivning\r\n        </div>\r\n        <div class="inner">\r\n          <p>Kommun: {{property?.cms?.kommunnamn}}</p>\r\n          <p>Kommunkod: {{property?.cms?.kommunkod}}</p>\r\n          <p>Trakt: {{property?.cms?.trakt}}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="list">\r\n        <div class="header">\r\n          Innehåll\r\n        </div>\r\n        <ul>\r\n          <li>\r\n            Dokument\r\n          </li>\r\n          <li>\r\n            Länkat innehåll\r\n          </li>\r\n          <li>\r\n            Närliggande objekt\r\n          </li>\r\n        </ul>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n\r\n\r\n</div>'},function(t,e){t.exports='<div *ngIf="!isLoadingActivityList">\r\n    <div class="selectedBuilding" *ngIf="selectedBuilding != null">\r\n        <h2><span class="lnr lnr-apartment"></span> {{selectedBuilding.name}}</h2>\r\n    </div>\r\n\r\n     <div #activityScroll class="activityList" *ngFor="let firstLetter of getLetters()">\r\n        <div *ngFor="let activity of sortedDictionary[firstLetter].Items; let i = index;">\r\n            <div *ngIf="i==0" [id]="firstLetter" class="full-circle">{{firstLetter | uppercase}}</div>\r\n            <detail-activity [activity]="activity" [showDetailView]="selectedActivityId == activity.id" (click)="selectActivity(activity)"></detail-activity>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="scrollbar" id="letterTouch" (panmove)="onPanmove($event)">\r\n    <div class="scrollbar-content" *ngIf="!isLoadingActivityList">\r\n            <div *ngFor="let letter of getLetters()" class="letter" [ngClass]="{disabled: !sortedDictionary[letter].hasItems, deselected : !sortedDictionary[letter].hasItems, selected: letter==currentLetter}"\r\n                (tap)="sortedDictionary[letter].hasItems && letterClick($event)">\r\n                {{letter | uppercase}} \r\n            </div>\r\n    </div>\r\n</div>'},function(t,e){t.exports='<div [ngClass]="{active: showDetailView}" class="header">\r\n    {{activity?.name || activity?.title }}\r\n    <span class="close" *ngIf="showDetailView"><span class="lnr lnr-cross"></span></span>\r\n</div>\r\n<div class="detail" [ngClass]="{active: showDetailView}">\r\n    <div *ngIf="building"><span class="lnr lnr-apartment"></span> <span class="text">{{building}}</span></div>\r\n    <div *ngIf="activity?.cms?.floor"><span class="empty"></span> <span class="text">Våning {{activity?.cms?.floor}}</span></div>\r\n    <div *ngIf="activity?.cms?.address"><span class="lnr lnr-location"></span> <span class="text">{{activity?.cms?.address}}</span></div>\r\n    <div *ngIf="contactNr"><span class="lnr lnr-phone"></span> <span class="text">{{contactNr}}</span></div>\r\n</div>'},function(t,e){t.exports='<div [ngClass]="{active: showDetailView}" class="header">\r\n\t<span class="close" *ngIf="showDetailView"><span class="lnr lnr-cross"></span></span>\r\n\t<div class="header-title">{{showDetailView ? cms?.title : lessTitle}}</div>\r\n\t<div class="header-title-description">{{ cms?.date | date:"dd MMMM" }} - {{cms?.city}}</div>\r\n\r\n</div>\r\n<div class="detail" [ngClass]="{active: showDetailView}">\r\n\t<div class="detail-img-container" *ngIf="cms?.imgUrl"> <img src="{{cms?.imgUrl}}"></div>\r\n\t<div class="detail-description-container" *ngIf="lessDescription"><span class="text">{{lessDescription}}</span></div>\r\n</div>'},function(t,e){t.exports='<div class="event-item" *ngFor="let event of events; let i = index;">\r\n\t<detail-event [event]="event" [showDetailView]="selectedEventId == event.id" (click)="selectEvent(event)"></detail-event>\r\n</div>\r\n'},function(t,e){t.exports='<div class="wrapper">\r\n    <span *ngFor="let category of poiCategories">\r\n    <div class="functionType"\r\n        (click)="onFunctionTypeClick(category)"  [ngClass]="{\'selected\': selectedCategory === category}" *ngIf="numberOfItems[category] != 0">\r\n        <div class="icon-circle icon-wrapper"><div [className]="getIconClass(category)"></div></div> \r\n        {{category}} <span class="numberOfItems">({{numberOfItems[category]}})</span>\r\n    </div>\r\n    </span>\r\n</div>'},function(t,e){t.exports='<div class="weatherItem" *ngIf="!isLoadingWeather" >\r\n    <div *ngIf="!isLoadingData" class="weather">\r\n        <i [class]="weather.iconName"></i>\r\n        <span class="temp">{{weather.temp}}°</span>\r\n    </div>\r\n</div>'},function(t,e){t.exports='<div *ngIf="!isLoadingData" class="info" (press)="onPress($event)">\r\n\t<weather-item></weather-item>\r\n\t<date-time></date-time>\r\n</div>\r\n<div *ngIf="isLoadingData" class="info">\r\n    <loading-progress [text]="\'Laddar om data\'" [loading]=isLoadingData></loading-progress>\r\n</div>\r\n<div class="selection">\r\n\t<div [ngClass]="{active: currentViewState==\'Activity\'}" class="selection-tab" (click)="setViewState(\'Activity\')">\r\n\t\t<span class="lnr lnr-briefcase"></span> Företag\r\n\t</div>\r\n\t<div [ngClass]="{active: currentViewState==\'Function\'}" class="selection-tab" (click)="setViewState(\'Function\')">\r\n\t\t<span class="lnr lnr-map-marker"></span> Platser\r\n\t</div>\r\n\t<div [ngClass]="{active: currentViewState==\'Event\'}" class="selection-tab" (click)="setViewState(\'Event\')">\r\n\t\t<span class="lnr lnr-calendar-full"></span> Händelser\r\n\t</div>\r\n</div>\r\n\r\n<div #scrollArea class="content" [ngSwitch]="currentViewState">\r\n\t<activity-list (onNewScrollTop)="setScrollTop($event)" *ngSwitchCase="\'Activity\'"></activity-list>\r\n\t<function-list *ngSwitchCase="\'Function\'"></function-list>\r\n\t<event-list *ngSwitchCase="\'Event\'"></event-list>\r\n\t<loader *ngSwitchCase="\'None\'" [text]="\'Hämtar ..\'" [(loading)]="isLoadingActivites"></loader>\r\n</div>'},function(t,e){t.exports='<div class="template-container" [ngStyle]="prototypeStyle">\r\n\t<div class="content">\r\n\t\t<!--{{prototyp.description}}-->\r\n\t\t<div class="content-row" *ngIf="prototyp.floor"><span class="empty"></span> <span class="text">Våning {{prototyp.floor}}</span></div>\r\n\t\t<div class="content-row" *ngIf="prototyp.address"><span class="lnr lnr-location"></span> <span class="text">{{prototyp.address}}</span></div>\r\n\t\t<div class="content-row" *ngIf="prototyp.contactNr"><span class="lnr lnr-phone"></span> <span class="text">{{prototyp.contactNr}}</span></div>\r\n\t</div>\r\n\t<div class="header">\r\n\t\t<div class="info">\r\n\t\t\t<div class="name">{{prototyp.title}} <span *ngIf="prototyp.building">({{prototyp.building}})</span></div>\r\n\t\t\t<div class="category">{{prototyp.category}}</div>\r\n\t\t\t<!-- göra om till svenska namn -->\r\n\t\t</div>\r\n\t\t<div class="category-icon">\r\n\t\t\t{{prototyp.icon}}\r\n\t\t</div>\r\n\t</div>\r\n</div>'},function(t,e){t.exports='<div class="template-container" [ngStyle]="prototypeStyle">\r\n\t<div class="building-content">\r\n\t\t{{prototyp.description}}\r\n\t</div>\r\n\t<div class="building-header">\r\n\t\t<div class="building-info">\r\n\t\t\t<div class="building-name">{{prototyp.name}}</div>\r\n\t\t\t<div class="building-owner">{{prototyp.propertyOwner}}</div>\r\n\t\t</div>\r\n\t\t<div class="building-icon">\r\n\t\t\t<span class="lnr lnr-apartment"></span>\r\n\t\t</div>\r\n\t</div>\r\n</div>'},function(t,e){t.exports='<div class="template-container" [ngStyle]="prototypeStyle">\r\n\t<div *ngIf="!prototyp?.description">\r\n\t\t<div class="details">\r\n\t\t\t<h2>{{prototyp?.title}}</h2>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div *ngIf="prototyp?.description">\r\n\t\t<div class="details">\r\n\t\t\t<p>{{prototyp?.description}}</p>\r\n\t\t</div>\r\n\t\t<div class="info">\r\n\t\t\t<h2>{{prototyp?.title}}</h2>\r\n\t\t</div>\r\n\t</div>\r\n</div>'},function(t,e){t.exports='<!--<div class="template-container" [ngStyle]="prototypeStyle">\r\n\t<div class="info">\r\n\t\t<div *ngIf="prototyp.isLoadingDepatures">\r\n\t\t\t<loading-progress [text]="laddar" [loading]=true></loading-progress>\r\n\t\t</div>\r\n\t\t<div *ngIf="!prototyp.isLoadingDepatures" class="departureHeader clearfix">\r\n\t\t\t<span class="departureHeader-text-transportNumber">Linje</span>\r\n\t\t\t<span class="departureHeader-text-direction">Mot</span>\r\n\t\t\t<span class="departureHeader-text-timeToDeparture">Avgår</span>\r\n\t\t</div>\r\n\t\t<div *ngIf="!prototyp.isLoadingDepatures && prototyp.departures.length>0">\r\n\t\t\t<div *ngFor="let item of prototyp.departures" class="departure clearfix">\r\n\t\t\t\t<div class="departure-circle"><i class="fa" [ngClass]="{\'fa-bus\' : item.transportType == \'Buss\', \'fa-subway\' : item.transportType == \'Tram\'}" aria-hidden="true"></i></div>\r\n\t\t\t\t<span class="departure-text-transportNumber">{{item.transportNumber}}</span>\r\n\t\t\t\t<span class="departure-text-direction">{{item.direction}}</span>\r\n\t\t\t\t<span class="departure-text-timeToDeparture">{{item.timeToDeparture}} min</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>-->\r\n<!--\r\n\t<div class="details ">\r\n\t\t<h2>{{prototyp.title}}</h2>\r\n\t\t<small>{{prototyp.distanceInMFromBusStop}} m</small>\r\n\t</div>-->\r\n<!--</div>-->\r\n\r\n<div class="template-container" [ngStyle]="prototypeStyle">\r\n\t<div class="board-content">\r\n\t\t<div *ngIf="prototyp.isLoadingDepatures">\r\n\t\t\t<loading-progress [text]="laddar" [loading]=true></loading-progress>\r\n\t\t</div>\r\n\t\t<div *ngIf="!prototyp.isLoadingDepatures" class="departureHeader">\r\n\t\t\t<span class="departureHeader-text-transportNumber">Linje</span>\r\n\t\t\t<span class="departureHeader-text-direction">Mot</span>\r\n\t\t\t<span class="departureHeader-text-timeToDeparture">Avgår</span>\r\n\t\t</div>\r\n\t\t<div *ngIf="!prototyp.isLoadingDepatures && prototyp.departures.length>0">\r\n\t\t\t<div *ngFor="let item of prototyp.departures" class="departure">\r\n\t\t\t\t<span class="departure-text-transportNumber">\r\n\t\t\t\t\t<i class="icon-bus fa" [ngClass]="{\'fa-bus\' : item.transportType == \'Bus\', \'fa-subway\' : item.transportType == \'Tram\'}" aria-hidden="true"></i> \r\n\t\t\t\t\t{{item.transportNumber}}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span class="departure-text-direction">{{item.direction}}</span>\r\n\t\t\t\t<span class="departure-text-timeToDeparture">{{item.timeToDeparture}} min</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="board-header">\r\n\t\t<div class="board-info">\r\n\t\t\t<div class="board-title">{{prototyp.title}}</div>\r\n\t\t\t<div class="board-sub-title">Gångavstånd {{prototyp.distanceInMFromBusStop}} m</div>\r\n\t\t</div>\r\n\t\t<div class="board-icon">\r\n\t\t\t<i class="fa fa-bus"></i>\r\n\t\t</div>\r\n\t</div>\r\n</div>'},function(t,e){t.exports='<div class="template-container" [ngStyle]="prototypeStyle">\r\n\t<div class="interest-point-content">\r\n\t\t{{prototype.description}}\r\n\t</div>\r\n\t<div class="interest-point-header">\r\n\t\t<div class="interest-point-info">\r\n\t\t\t<div class="interest-point-title">{{prototype.title}}</div>\r\n\t\t\t<div class="interest-point-sub-title">{{prototype.subTitle}}</div>\r\n\t\t</div>\r\n\t\t<div class="interest-point-icon">\r\n\t\t\t<span [className]="prototype.icon"></span>\r\n\t\t</div>\r\n\t</div>\r\n</div>'},function(t,e){t.exports='<div class="template-container" [ngStyle]="prototypeStyle">\r\n\t<div class="header">\r\n\t\t<div class="cols border-right align-right">\r\n\t\t\t<div class="title">Projekstart</div>\r\n\t\t\t<div class="emph">-</div>\r\n\t\t</div>\r\n\t\t<div class="cols align-left">\r\n\t\t\t<div class="title">Beräknas klart om</div>\r\n\t\t\t<div class="emph">x månader</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="details">\r\n\t\t<div class="cols buckets" *ngFor="let bucket of (prototyp.buckets | reverse); let i=index" [ngClass]="{\'current\': bucket.id == prototyp.project.fromBucketId, \'completed\': bucketIsCompleted(i)}">\r\n\t\t\t<div class="full-circle"><i class="checkmark"></i></div>\r\n\t\t\t<div class="text">{{bucket.name}}</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="info">\r\n\t\t<h2>{{prototyp?.title}}</h2>\r\n\t\t<p>{{prototyp?.project.realEstate}}</p>\r\n\t</div>\r\n</div>'},function(t,e){t.exports='<div class="content">\r\n    <div class="title">{{welcomeTitle}} <span class="bold">{{place}}</span></div>\r\n</div>'},function(t,e){t.exports='<!--<map-layer class="map-container"></map-layer>-->\r\n<div class="map-event-layer" \r\n    (panstart)="onNewEventLayer($event)"\r\n    (panmove)="onNewEventLayer($event)"\r\n    (panend)="onNewEventLayer($event)"\r\n    (pinchstart)="onNewEventLayer($event)"\r\n    (pinchmove)="onNewEventLayer($event)"\r\n    (pinchend)="onNewEventLayer($event)"\r\n    (tap)="onNewEventLayer($event)"\r\n    (mousewheel)="onNewEventLayer($event)"\r\n    *ngIf="state != \'Loading\' && state != \'Edit\'"></div>\r\n<map-tooltip-layer *ngIf="state != \'Loading\'"></map-tooltip-layer>\r\n<map-zoom-tooltip-layer *ngIf="state != \'Loading\'"></map-zoom-tooltip-layer>\r\n<map-loading-layer class="map-container" *ngIf="state == \'Loading\'"></map-loading-layer>'},function(t,e){t.exports='<div class="map-loading-screen-text">\r\n    <map-loading-progress [text]="Loading" [loading]=true></map-loading-progress>\r\n    <h2 class="loadingText">{{loadingText}}</h2>\r\n</div>'},function(t,e){t.exports='<div class="loader" [ngClass]="{\'is-loading\': loading}">\r\n    <div class="loader-symbol"></div>\r\n    <div class="text">{{text}}</div>\r\n</div>'},function(t,e){t.exports='<!--<div id="tooltipId" class="tooltip" [ngStyle]="setPositionStyle()">-->\r\n\t<!--\r\n        CODEREVIEW \r\n            By : ndr\r\n            Date : 2016-06-15\r\n        TODO \r\n            https://angular.io/docs/ts/latest/api/common/NgSwitch-directive.html \r\n            depending on the type, different component, i.e.\r\n            <div [ngSwitch]="protoModel.type">\r\n                <proto1 *ngSwitchCase="\'type1\'"></proto1>\r\n                <proto2 *ngSwitchCase="\'type1\'"></proto2>\r\n                <proto1 *ngSwitchDefault></proto1>\r\n            </div>\r\n    -->\r\n\t<!--<div class="tooltip-content" [ngSwitch]="protoModel?.type">\r\n\t\t<map-departure-board-tooltip-template *ngSwitchCase="\'DepartureBoardTemplate1\'" [prototyp]="protoModel"></map-departure-board-tooltip-template>\r\n\t\t<map-activity-tooltip-template *ngSwitchCase="\'ActivityTemplate1\'" [prototyp]="protoModel"></map-activity-tooltip-template>\r\n\t\t<map-building-tooltip-template *ngSwitchCase="\'BuildingTemplate1\'" [prototyp]="protoModel"></map-building-tooltip-template>\r\n\t\t<map-project-tooltip-template *ngSwitchCase="\'ProjectTemplate1\'" [prototyp]="protoModel"></map-project-tooltip-template>\r\n\t\t<map-default-tooltip-template *ngSwitchDefault [prototyp]="protoModel"></map-default-tooltip-template>\r\n\t</div>\r\n</div>-->'},function(t,e){t.exports='<button type="button" (click)="zoomIn();">+</button>\r\n<button type="button" (click)="zoomOut();">-</button>\r\n<button type="button" (click)="goHome();"><span class="lnr lnr-home"></span></button>'},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function linearlyIndependent(t,e){for(var n=new Array(e+1),r=0;r<t.length;++r)n[r]=t[r];for(var r=0;r<=t.length;++r){for(var o=t.length;o<=e;++o){for(var s=new Array(e),a=0;a<e;++a)s[a]=Math.pow(o+1-r,a);n[o]=s}var c=i.apply(void 0,n);if(c)return!0}return!1}function affineHull(t){var e=t.length;if(0===e)return[];if(1===e)return[0];for(var n=t[0].length,i=[t[0]],r=[0],o=1;o<e;++o)if(i.push(t[o]),linearlyIndependent(i,n)){if(r.push(o),r.length===n+1)return r}else i.pop();return r}t.exports=affineHull;var i=n(403)},function(t,e){"use strict";"use restrict";function countTrailingZeros(t){var e=32;return t&=-t,t&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}var n=32;e.INT_BITS=n,e.INT_MAX=2147483647,e.INT_MIN=-1<<n-1,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>n-1;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){
return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,n;return e=(t>65535)<<4,t>>>=e,n=(t>255)<<3,t>>>=n,e|=n,n=(t>15)<<2,t>>>=n,e|=n,n=(t>3)<<1,t>>>=n,e|=n,e|t>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return t-=t>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),16843009*(t+(t>>>4)&252645135)>>>24},e.countTrailingZeros=countTrailingZeros,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,t&=15,27030>>>t&1};var i=new Array(256);!function(t){for(var e=0;e<256;++e){var n=e,i=e,r=7;for(n>>>=1;n;n>>>=1)i<<=1,i|=1&n,--r;t[e]=i<<r&255}}(i),e.reverse=function(t){return i[255&t]<<24|i[t>>>8&255]<<16|i[t>>>16&255]<<8|i[t>>>24&255]},e.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},e.deinterleave2=function(t,e){return t=t>>>e&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),t=65535&(t|t>>>16),t<<16>>16},e.interleave3=function(t,e,n){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),t|n<<2},e.deinterleave3=function(t,e){return t=t>>>e&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),t=1023&(t|t>>>16),t<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>countTrailingZeros(t)+1}},function(t,e,n){"use strict";function convexHull(t){var e=t.length;if(0===e)return[];if(1===e)return[[0]];var n=t[0].length;return 0===n?[]:1===n?i(t):2===n?r(t):o(t,n)}var i=n(887),r=n(888),o=n(889);t.exports=convexHull},function(t,e){"use strict";function convexHull1d(t){for(var e=0,n=0,i=1;i<t.length;++i)t[i][0]<t[e][0]&&(e=i),t[i][0]>t[n][0]&&(n=i);return e<n?[[e],[n]]:e>n?[[n],[e]]:[[e]]}t.exports=convexHull1d},function(t,e,n){"use strict";function convexHull2D(t){var e=i(t),n=e.length;if(n<=2)return[];for(var r=new Array(n),o=e[n-1],s=0;s<n;++s){var a=e[s];r[s]=[o,a],o=a}return r}t.exports=convexHull2D;var i=n(1037)},function(t,e,n){"use strict";function permute(t,e){for(var n=t.length,i=new Array(n),r=0;r<e.length;++r)i[r]=t[e[r]];for(var o=e.length,r=0;r<n;++r)e.indexOf(r)<0&&(i[o++]=t[r]);return i}function invPermute(t,e){for(var n=t.length,i=e.length,r=0;r<n;++r)for(var o=t[r],s=0;s<o.length;++s){var a=o[s];if(a<i)o[s]=e[a];else{a-=i;for(var c=0;c<i;++c)a>=e[c]&&(a+=1);o[s]=a}}return t}function convexHullnD(t,e){try{return i(t,!0)}catch(n){var o=r(t);if(o.length<=e)return[];var s=permute(t,o),a=i(s,!0);return invPermute(a,o)}}t.exports=convexHullnD;var i=n(1036),r=n(884)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){"use strict";function earcut(t,e,n){n=n||2;var i=e&&e.length,r=i?e[0]*n:t.length,o=linkedList(t,0,r,n,!0),s=[];if(!o)return s;var a,c,u,l,h,p,f;if(i&&(o=eliminateHoles(t,e,o,n)),t.length>80*n){a=u=t[0],c=l=t[1];for(var d=n;d<r;d+=n)h=t[d],p=t[d+1],h<a&&(a=h),p<c&&(c=p),h>u&&(u=h),p>l&&(l=p);f=Math.max(u-a,l-c)}return earcutLinked(o,s,n,a,c,f),s}function linkedList(t,e,n,i,r){var o,s;if(r===signedArea(t,e,n,i)>0)for(o=e;o<n;o+=i)s=insertNode(o,t[o],t[o+1],s);else for(o=n-i;o>=e;o-=i)s=insertNode(o,t[o],t[o+1],s);return s&&equals(s,s.next)&&(removeNode(s),s=s.next),s}function filterPoints(t,e){if(!t)return t;e||(e=t);var n,i=t;do if(n=!1,i.steiner||!equals(i,i.next)&&0!==area(i.prev,i,i.next))i=i.next;else{if(removeNode(i),i=e=i.prev,i===i.next)return null;n=!0}while(n||i!==e);return e}function earcutLinked(t,e,n,i,r,o,s){if(t){!s&&o&&indexCurve(t,i,r,o);for(var a,c,u=t;t.prev!==t.next;)if(a=t.prev,c=t.next,o?isEarHashed(t,i,r,o):isEar(t))e.push(a.i/n),e.push(t.i/n),e.push(c.i/n),removeNode(t),t=c.next,u=c.next;else if(t=c,t===u){s?1===s?(t=cureLocalIntersections(t,e,n),earcutLinked(t,e,n,i,r,o,2)):2===s&&splitEarcut(t,e,n,i,r,o):earcutLinked(filterPoints(t),e,n,i,r,o,1);break}}}function isEar(t){var e=t.prev,n=t,i=t.next;if(area(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(pointInTriangle(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&area(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function isEarHashed(t,e,n,i){var r=t.prev,o=t,s=t.next;if(area(r,o,s)>=0)return!1;for(var a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,c=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,u=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,l=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,h=zOrder(a,c,e,n,i),p=zOrder(u,l,e,n,i),f=t.nextZ;f&&f.z<=p;){if(f!==t.prev&&f!==t.next&&pointInTriangle(r.x,r.y,o.x,o.y,s.x,s.y,f.x,f.y)&&area(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=t.prevZ;f&&f.z>=h;){if(f!==t.prev&&f!==t.next&&pointInTriangle(r.x,r.y,o.x,o.y,s.x,s.y,f.x,f.y)&&area(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}function cureLocalIntersections(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!equals(r,o)&&intersects(r,i,i.next,o)&&locallyInside(r,o)&&locallyInside(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),removeNode(i),removeNode(i.next),i=t=o),i=i.next}while(i!==t);return i}function splitEarcut(t,e,n,i,r,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&isValidDiagonal(s,a)){var c=splitPolygon(s,a);return s=filterPoints(s,s.next),c=filterPoints(c,c.next),earcutLinked(s,e,n,i,r,o),void earcutLinked(c,e,n,i,r,o)}a=a.next}s=s.next}while(s!==t)}function eliminateHoles(t,e,n,i){var r,o,s,a,c,u=[];for(r=0,o=e.length;r<o;r++)s=e[r]*i,a=r<o-1?e[r+1]*i:t.length,c=linkedList(t,s,a,i,!1),c===c.next&&(c.steiner=!0),u.push(getLeftmost(c));for(u.sort(compareX),r=0;r<u.length;r++)eliminateHole(u[r],n),n=filterPoints(n,n.next);return n}function compareX(t,e){return t.x-e.x}function eliminateHole(t,e){if(e=findHoleBridge(t,e)){var n=splitPolygon(e,t);filterPoints(n,n.next)}}function findHoleBridge(t,e){var n,i=e,r=t.x,o=t.y,s=-(1/0);do{if(o<=i.y&&o>=i.next.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>s){if(s=a,a===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===s)return n.prev;var c,u=n,l=n.x,h=n.y,p=1/0;for(i=n.next;i!==u;)r>=i.x&&i.x>=l&&pointInTriangle(o<h?r:s,o,l,h,o<h?s:r,o,i.x,i.y)&&(c=Math.abs(o-i.y)/(r-i.x),(c<p||c===p&&i.x>n.x)&&locallyInside(i,t)&&(n=i,p=c)),i=i.next;return n}function indexCurve(t,e,n,i){var r=t;do null===r.z&&(r.z=zOrder(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,sortLinked(r)}function sortLinked(t){var e,n,i,r,o,s,a,c,u=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,i=n,a=0,e=0;e<u&&(a++,i=i.nextZ,i);e++);for(c=u;a>0||c>0&&i;)0===a?(r=i,i=i.nextZ,c--):0!==c&&i?n.z<=i.z?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,c--):(r=n,n=n.nextZ,a--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,u*=2}while(s>1);return t}function zOrder(t,e,n,i,r){return t=32767*(t-n)/r,e=32767*(e-i)/r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function getLeftmost(t){var e=t,n=t;do e.x<n.x&&(n=e),e=e.next;while(e!==t);return n}function pointInTriangle(t,e,n,i,r,o,s,a){return(r-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(i-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(r-s)*(i-a)>=0}function isValidDiagonal(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!intersectsPolygon(t,e)&&locallyInside(t,e)&&locallyInside(e,t)&&middleInside(t,e)}function area(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function equals(t,e){return t.x===e.x&&t.y===e.y}function intersects(t,e,n,i){return!!(equals(t,e)&&equals(n,i)||equals(t,i)&&equals(n,e))||area(t,e,n)>0!=area(t,e,i)>0&&area(n,i,t)>0!=area(n,i,e)>0}function intersectsPolygon(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&intersects(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function locallyInside(t,e){return area(t.prev,t,t.next)<0?area(t,e,t.next)>=0&&area(t,t.prev,e)>=0:area(t,e,t.prev)<0||area(t,t.next,e)<0}function middleInside(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function splitPolygon(t,e){var n=new Node(t.i,t.x,t.y),i=new Node(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function insertNode(t,e,n,i){var r=new Node(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function removeNode(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Node(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(t,e,n,i){for(var r=0,o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}t.exports=earcut,earcut.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,s=Math.abs(signedArea(t,0,o,n));if(r)for(var a=0,c=e.length;a<c;a++){var u=e[a]*n,l=a<c-1?e[a+1]*n:t.length;s-=Math.abs(signedArea(t,u,l,n))}var h=0;for(a=0;a<i.length;a+=3){var p=i[a]*n,f=i[a+1]*n,d=i[a+2]*n;h+=Math.abs((t[p]-t[d])*(t[f+1]-t[p+1])-(t[p]-t[f])*(t[d+1]-t[p+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},earcut.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}},function(t,e,n){function geometry(t){var e,n=0;switch(t.type){case"Polygon":return polygonArea(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=polygonArea(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)n+=geometry(t.geometries[e]);return n}}function polygonArea(t){var e=0;if(t&&t.length>0){e+=Math.abs(ringArea(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(ringArea(t[n]))}return e}function ringArea(t){var e,n,o,s,a,c,u=0,l=t.length;if(l>2){for(i=0;i<l;i++)i===l-2?(s=l-2,a=l-1,c=0):i===l-1?(s=l-1,a=0,c=1):(s=i,a=i+1,c=i+2),e=t[s],n=t[a],o=t[c],u+=(rad(o[0])-rad(e[0]))*Math.sin(rad(n[1]));u=u*r.RADIUS*r.RADIUS/2}return u}function rad(t){return t*Math.PI/180}var r=n(1348);t.exports.geometry=geometry,t.exports.ring=ringArea},function(t,e){function normalize(t){if(!t||!t.type)return null;var e=n[t.type];return e?"geometry"===e?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}:"feature"===e?{type:"FeatureCollection",features:[t]}:"featurecollection"===e?t:void 0:null}t.exports=normalize;var n={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},function(t,e){function position(t){return t?coordInBBBOX(t):[lon(),lat()]}function vertexToCoordinate(t){return function(e,n){return[e[0]+t[0],e[1]+t[1]]}}function rnd(){return Math.random()-.5}function lon(){return 360*rnd()}function lat(){return 180*rnd()}function point(t){return{type:"Point",coordinates:t||[lon(),lat()]}}function coordInBBBOX(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}function polygon(t){return{type:"Polygon",coordinates:t}}function feature(t){return{type:"Feature",geometry:t,properties:{}}}function collection(t){return{type:"FeatureCollection",features:t}}t.exports=function(){throw new Error("call .point() or .polygon() instead")},t.exports.position=position,t.exports.point=function(t,e){var n=[];for(i=0;i<t;i++)n.push(feature(e?point(position(e)):point()));return collection(n)},t.exports.polygon=function(t,e,n,r){function sumOffsets(t,e,n){n[e]=e>0?t+n[e-1]:t}function scaleOffsets(t,e){t=2*t*Math.PI/a[a.length-1];var i=Math.random();s.push([i*n*Math.sin(t),i*n*Math.cos(t)])}"number"!=typeof e&&(e=10),"number"!=typeof n&&(n=10);var o=[];for(i=0;i<t;i++){var s=[],a=Array.apply(null,new Array(e+1)).map(Math.random);a.forEach(sumOffsets),a.forEach(scaleOffsets),s[s.length-1]=s[0],s=s.map(vertexToCoordinate(position(r))),o.push(feature(polygon([s])))}return collection(o)}},function(t,e,n){"use strict";function Simplex(t,e,n){this.vertices=t,this.adjacent=e,this.boundary=n,this.lastVisited=-1}function GlueFacet(t,e,n){this.vertices=t,this.cell=e,this.index=n}function compareGlue(t,e){return r(t.vertices,e.vertices)}function bakeOrient(t){for(var e=["function orient(){var tuple=this.tuple;return test("],n=0;n<=t;++n)n>0&&e.push(","),e.push("tuple[",n,"]");e.push(")}return orient");var r=new Function("test",e.join("")),o=i[t+1];return o||(o=i),r(o)}function Triangulation(t,e,n){this.dimension=t,this.vertices=e,this.simplices=n,this.interior=n.filter(function(t){return!t.boundary}),this.tuple=new Array(t+1);for(var i=0;i<=t;++i)this.tuple[i]=this.vertices[i];var r=o[t];r||(r=o[t]=bakeOrient(t)),this.orient=r}function incrementalConvexHull(t,e){var n=t.length;if(0===n)throw new Error("Must have at least d+1 points");var r=t[0].length;if(n<=r)throw new Error("Must input at least d+1 points");var o=t.slice(0,r+1),s=i.apply(void 0,o);if(0===s)throw new Error("Input not in general position");for(var a=new Array(r+1),c=0;c<=r;++c)a[c]=c;s<0&&(a[0]=1,a[1]=0);for(var u=new Simplex(a,new Array(r+1),(!1)),l=u.adjacent,h=new Array(r+2),c=0;c<=r;++c){for(var p=a.slice(),f=0;f<=r;++f)f===c&&(p[f]=-1);var d=p[0];p[0]=p[1],p[1]=d;var g=new Simplex(p,new Array(r+1),(!0));l[c]=g,h[c]=g}h[r+1]=u;for(var c=0;c<=r;++c)for(var p=l[c].vertices,y=l[c].adjacent,f=0;f<=r;++f){var v=p[f];if(v<0)y[f]=u;else for(var m=0;m<=r;++m)l[m].vertices.indexOf(v)<0&&(y[f]=l[m])}for(var b=new Triangulation(r,o,h),x=!!e,c=r+1;c<n;++c)b.insert(t[c],x);return b.boundary()}t.exports=incrementalConvexHull;var i=n(403),r=n(1309).compareCells;Simplex.prototype.flip=function(){var t=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=t;var e=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=e};var o=[],s=Triangulation.prototype;s.handleBoundaryDegeneracy=function(t,e){var n=this.dimension,i=this.vertices.length-1,r=this.tuple,o=this.vertices,s=[t];for(t.lastVisited=-i;s.length>0;){t=s.pop();for(var a=(t.vertices,t.adjacent),c=0;c<=n;++c){var u=a[c];if(u.boundary&&!(u.lastVisited<=-i)){for(var l=u.vertices,h=0;h<=n;++h){var p=l[h];p<0?r[h]=e:r[h]=o[p]}var f=this.orient();if(f>0)return u;u.lastVisited=-i,0===f&&s.push(u)}}}return null},s.walk=function(t,e){var n=this.vertices.length-1,i=this.dimension,r=this.vertices,o=this.tuple,s=e?this.interior.length*Math.random()|0:this.interior.length-1,a=this.interior[s];t:for(;!a.boundary;){for(var c=a.vertices,u=a.adjacent,l=0;l<=i;++l)o[l]=r[c[l]];a.lastVisited=n;for(var l=0;l<=i;++l){var h=u[l];if(!(h.lastVisited>=n)){var p=o[l];o[l]=t;var f=this.orient();if(o[l]=p,f<0){a=h;continue t}h.boundary?h.lastVisited=-n:h.lastVisited=n}}return}return a},s.addPeaks=function(t,e){var n=this.vertices.length-1,i=this.dimension,r=this.vertices,o=this.tuple,s=this.interior,a=this.simplices,c=[e];e.lastVisited=n,e.vertices[e.vertices.indexOf(-1)]=n,e.boundary=!1,s.push(e);for(var u=[];c.length>0;){var e=c.pop(),l=e.vertices,h=e.adjacent,p=l.indexOf(n);if(!(p<0))for(var f=0;f<=i;++f)if(f!==p){var d=h[f];if(d.boundary&&!(d.lastVisited>=n)){var g=d.vertices;if(d.lastVisited!==-n){for(var y=0,v=0;v<=i;++v)g[v]<0?(y=v,o[v]=t):o[v]=r[g[v]];var m=this.orient();if(m>0){g[y]=n,d.boundary=!1,s.push(d),c.push(d),d.lastVisited=n;continue}d.lastVisited=-n}var b=d.adjacent,x=l.slice(),S=h.slice(),_=new Simplex(x,S,(!0));a.push(_);var w=b.indexOf(e);if(!(w<0)){b[w]=_,S[p]=d,x[f]=-1,S[f]=e,h[f]=_,_.flip();for(var v=0;v<=i;++v){var C=x[v];if(!(C<0||C===n)){for(var I=new Array(i-1),E=0,L=0;L<=i;++L){var T=x[L];T<0||L===v||(I[E++]=T)}u.push(new GlueFacet(I,_,v))}}}}}}u.sort(compareGlue);for(var f=0;f+1<u.length;f+=2){var O=u[f],N=u[f+1],P=O.index,M=N.index;P<0||M<0||(O.cell.adjacent[O.index]=N.cell,N.cell.adjacent[N.index]=O.cell)}},s.insert=function(t,e){var n=this.vertices;n.push(t);var i=this.walk(t,e);if(i){for(var r=this.dimension,o=this.tuple,s=0;s<=r;++s){var a=i.vertices[s];a<0?o[s]=t:o[s]=n[a]}var c=this.orient(o);c<0||(0!==c||(i=this.handleBoundaryDegeneracy(i,t)))&&this.addPeaks(t,i)}},s.boundary=function(){for(var t=this.dimension,e=[],n=this.simplices,i=n.length,r=0;r<i;++r){var o=n[r];if(o.boundary){for(var s=new Array(t),a=o.vertices,c=0,u=0,l=0;l<=t;++l)a[l]>=0?s[c++]=a[l]:u=1&l;if(u===(1&t)){var h=s[0];s[0]=s[1],s[1]=h}e.push(s)}}return e}},function(t,e,n){"use strict";function monotoneConvexHull2D(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}for(var o=new Array(e),r=0;r<e;++r)o[r]=r;o.sort(function(e,n){var i=t[e][0]-t[n][0];return i?i:t[e][1]-t[n][1]});for(var s=[o[0],o[1]],a=[o[0],o[1]],r=2;r<e;++r){for(var c=o[r],u=t[c],l=s.length;l>1&&i(t[s[l-2]],t[s[l-1]],u)<=0;)l-=1,s.pop();for(s.push(c),l=a.length;l>1&&i(t[a[l-2]],t[a[l-1]],u)>=0;)l-=1,a.pop();a.push(c)}for(var n=new Array(a.length+s.length-2),h=0,r=0,p=s.length;r<p;++r)n[h++]=s[r];for(var f=a.length-2;f>0;--f)n[h++]=a[f];return n}t.exports=monotoneConvexHull2D;var i=n(403)[3]},function(t,e,n){"use strict";function scaleLinearExpansion(t,e){var n=t.length;if(1===n){var o=i(t[0],e);return o[0]?o:[o[1]]}var s=new Array(2*n),a=[.1,.1],c=[.1,.1],u=0;i(t[0],e,a),a[0]&&(s[u++]=a[0]);for(var l=1;l<n;++l){i(t[l],e,c);var h=a[1];r(h,c[0],a),a[0]&&(s[u++]=a[0]);var p=c[1],f=a[1],d=p+f,g=d-p,y=f-g;a[1]=d,y&&(s[u++]=y)}return a[1]&&(s[u++]=a[1]),0===u&&(s[u++]=0),s.length=u,s}var i=n(612),r=n(1346);t.exports=scaleLinearExpansion},function(t,e){"use strict";function scalarScalar(t,e){var n=t+e,i=n-t,r=n-i,o=e-i,s=t-r,a=s+o;return a?[a,n]:[n]}function robustSubtract(t,e){var n=0|t.length,i=0|e.length;if(1===n&&1===i)return scalarScalar(t[0],-e[0]);var r,o,s=n+i,a=new Array(s),c=0,u=0,l=0,h=Math.abs,p=t[u],f=h(p),d=-e[l],g=h(d);f<g?(o=p,u+=1,u<n&&(p=t[u],f=h(p))):(o=d,l+=1,l<i&&(d=-e[l],g=h(d))),u<n&&f<g||l>=i?(r=p,u+=1,u<n&&(p=t[u],f=h(p))):(r=d,l+=1,l<i&&(d=-e[l],g=h(d)));for(var y,v,m,b,x,S=r+o,_=S-r,w=o-_,C=w,I=S;u<n&&l<i;)f<g?(r=p,u+=1,u<n&&(p=t[u],f=h(p))):(r=d,l+=1,l<i&&(d=-e[l],g=h(d))),o=C,S=r+o,_=S-r,w=o-_,w&&(a[c++]=w),y=I+S,v=y-I,m=y-v,b=S-v,x=I-m,C=x+b,I=y;for(;u<n;)r=p,o=C,S=r+o,_=S-r,w=o-_,w&&(a[c++]=w),y=I+S,v=y-I,m=y-v,b=S-v,x=I-m,C=x+b,I=y,u+=1,u<n&&(p=t[u]);for(;l<i;)r=d,o=C,S=r+o,_=S-r,w=o-_,w&&(a[c++]=w),y=I+S,v=y-I,m=y-v,b=S-v,x=I-m,C=x+b,I=y,l+=1,l<i&&(d=-e[l]);return C&&(a[c++]=C),I&&(a[c++]=I),c||(a[c++]=0),a.length=c,a}t.exports=robustSubtract},function(t,e){"use strict";function scalarScalar(t,e){var n=t+e,i=n-t,r=n-i,o=e-i,s=t-r,a=s+o;return a?[a,n]:[n]}function linearExpansionSum(t,e){var n=0|t.length,i=0|e.length;if(1===n&&1===i)return scalarScalar(t[0],e[0]);var r,o,s=n+i,a=new Array(s),c=0,u=0,l=0,h=Math.abs,p=t[u],f=h(p),d=e[l],g=h(d);f<g?(o=p,u+=1,u<n&&(p=t[u],f=h(p))):(o=d,l+=1,l<i&&(d=e[l],g=h(d))),u<n&&f<g||l>=i?(r=p,u+=1,u<n&&(p=t[u],f=h(p))):(r=d,l+=1,l<i&&(d=e[l],g=h(d)));for(var y,v,m,b,x,S=r+o,_=S-r,w=o-_,C=w,I=S;u<n&&l<i;)f<g?(r=p,u+=1,u<n&&(p=t[u],f=h(p))):(r=d,l+=1,l<i&&(d=e[l],g=h(d))),o=C,S=r+o,_=S-r,w=o-_,w&&(a[c++]=w),y=I+S,v=y-I,m=y-v,b=S-v,x=I-m,C=x+b,I=y;for(;u<n;)r=p,o=C,S=r+o,_=S-r,w=o-_,w&&(a[c++]=w),y=I+S,v=y-I,m=y-v,b=S-v,x=I-m,C=x+b,I=y,u+=1,u<n&&(p=t[u]);for(;l<i;)r=d,o=C,S=r+o,_=S-r,w=o-_,w&&(a[c++]=w),y=I+S,v=y-I,m=y-v,b=S-v,x=I-m,C=x+b,I=y,l+=1,l<i&&(d=e[l]);return C&&(a[c++]=C),I&&(a[c++]=I),c||(a[c++]=0),a.length=c,a}t.exports=linearExpansionSum},,,function(t,e){"use strict";var n=function(){function Scheduler(t,e){void 0===e&&(e=Scheduler.now),this.SchedulerAction=t,this.now=e}return Scheduler.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},Scheduler.now=Date.now?Date.now:function(){return+new Date},Scheduler}();e.Scheduler=n},,function(t,e,n){"use strict";var i=n(0),r=n(1190);i.Observable.bindCallback=r.bindCallback},function(t,e,n){"use strict";var i=n(0),r=n(1191);i.Observable.bindNodeCallback=r.bindNodeCallback},function(t,e,n){"use strict";var i=n(0),r=n(1192);i.Observable.combineLatest=r.combineLatest},function(t,e,n){"use strict";var i=n(0),r=n(1193);i.Observable.concat=r.concat},function(t,e,n){"use strict";var i=n(0),r=n(1194);i.Observable.defer=r.defer},function(t,e,n){"use strict";var i=n(0),r=n(1196);i.Observable.ajax=r.ajax},function(t,e,n){"use strict";var i=n(0),r=n(1197);i.Observable.webSocket=r.webSocket},function(t,e,n){"use strict";var i=n(0),r=n(1198);i.Observable.empty=r.empty},function(t,e,n){"use strict";var i=n(0),r=n(1199);i.Observable.forkJoin=r.forkJoin},function(t,e,n){"use strict";var i=n(0),r=n(407);i.Observable.from=r.from},function(t,e,n){"use strict";var i=n(0),r=n(1200);i.Observable.fromEvent=r.fromEvent},function(t,e,n){"use strict";var i=n(0),r=n(1201);i.Observable.fromEventPattern=r.fromEventPattern},function(t,e,n){"use strict";var i=n(0),r=n(203);i.Observable.fromPromise=r.fromPromise},function(t,e,n){"use strict";var i=n(0),r=n(1180);i.Observable.generate=r.GenerateObservable.create},function(t,e,n){"use strict";var i=n(0),r=n(1202);i.Observable.if=r._if},function(t,e,n){"use strict";var i=n(0),r=n(1203);i.Observable.interval=r.interval},function(t,e,n){"use strict";var i=n(0),r=n(1204);i.Observable.merge=r.merge},function(t,e,n){"use strict";var i=n(0),r=n(1205);i.Observable.never=r.never},function(t,e,n){"use strict";var i=n(0),r=n(112);i.Observable.of=r.of},function(t,e,n){"use strict";var i=n(0),r=n(591);i.Observable.onErrorResumeNext=r.onErrorResumeNextStatic},function(t,e,n){"use strict";var i=n(0),r=n(1206);i.Observable.pairs=r.pairs},function(t,e,n){"use strict";var i=n(0),r=n(592);i.Observable.race=r.raceStatic},function(t,e,n){"use strict";var i=n(0),r=n(1207);i.Observable.range=r.range},function(t,e,n){"use strict";var i=n(0),r=n(1208);i.Observable.throw=r._throw},function(t,e,n){"use strict";var i=n(0),r=n(1209);i.Observable.timer=r.timer},function(t,e,n){"use strict";var i=n(0),r=n(1210);i.Observable.using=r.using},function(t,e,n){"use strict";var i=n(0),r=n(1211);i.Observable.zip=r.zip},function(t,e,n){"use strict";var i=n(0),r=n(1212);i.Observable.prototype.audit=r.audit},function(t,e,n){"use strict";var i=n(0),r=n(1213);i.Observable.prototype.auditTime=r.auditTime},function(t,e,n){"use strict";var i=n(0),r=n(1214);i.Observable.prototype.buffer=r.buffer},function(t,e,n){"use strict";var i=n(0),r=n(1215);i.Observable.prototype.bufferCount=r.bufferCount},function(t,e,n){"use strict";var i=n(0),r=n(1216);i.Observable.prototype.bufferTime=r.bufferTime},function(t,e,n){"use strict";var i=n(0),r=n(1217);i.Observable.prototype.bufferToggle=r.bufferToggle},function(t,e,n){"use strict";var i=n(0),r=n(1218);i.Observable.prototype.bufferWhen=r.bufferWhen},function(t,e,n){"use strict";var i=n(0),r=n(1219);i.Observable.prototype.cache=r.cache},function(t,e,n){"use strict";var i=n(0),r=n(582);i.Observable.prototype.catch=r._catch,i.Observable.prototype._catch=r._catch},function(t,e,n){"use strict";var i=n(0),r=n(1220);i.Observable.prototype.combineAll=r.combineAll},function(t,e,n){"use strict";var i=n(0),r=n(408);i.Observable.prototype.combineLatest=r.combineLatest},function(t,e,n){"use strict";var i=n(0),r=n(409);i.Observable.prototype.concat=r.concat},function(t,e,n){"use strict";var i=n(0),r=n(410);i.Observable.prototype.concatAll=r.concatAll},function(t,e,n){"use strict";var i=n(0),r=n(1221);i.Observable.prototype.concatMap=r.concatMap},function(t,e,n){"use strict";var i=n(0),r=n(1222);i.Observable.prototype.concatMapTo=r.concatMapTo},function(t,e,n){"use strict";var i=n(0),r=n(1223);i.Observable.prototype.count=r.count},function(t,e,n){"use strict";var i=n(0),r=n(1224);i.Observable.prototype.debounce=r.debounce},function(t,e,n){"use strict";var i=n(0),r=n(1225);i.Observable.prototype.debounceTime=r.debounceTime},function(t,e,n){"use strict";var i=n(0),r=n(1226);i.Observable.prototype.defaultIfEmpty=r.defaultIfEmpty},function(t,e,n){"use strict";var i=n(0),r=n(1227);i.Observable.prototype.delay=r.delay},function(t,e,n){"use strict";var i=n(0),r=n(1228);i.Observable.prototype.delayWhen=r.delayWhen},function(t,e,n){"use strict";var i=n(0),r=n(1229);i.Observable.prototype.dematerialize=r.dematerialize},function(t,e,n){"use strict";var i=n(0),r=n(583);i.Observable.prototype.distinct=r.distinct},function(t,e,n){"use strict";var i=n(0),r=n(1230);i.Observable.prototype.distinctKey=r.distinctKey},function(t,e,n){"use strict";var i=n(0),r=n(584);i.Observable.prototype.distinctUntilChanged=r.distinctUntilChanged},function(t,e,n){"use strict";var i=n(0),r=n(1231);i.Observable.prototype.distinctUntilKeyChanged=r.distinctUntilKeyChanged},function(t,e,n){"use strict";var i=n(0),r=n(1232);i.Observable.prototype.do=r._do,i.Observable.prototype._do=r._do},function(t,e,n){"use strict";var i=n(0),r=n(1233);i.Observable.prototype.elementAt=r.elementAt},function(t,e,n){"use strict";var i=n(0),r=n(411);i.Observable.prototype.every=r.every},function(t,e,n){"use strict";var i=n(0),r=n(1234);i.Observable.prototype.exhaust=r.exhaust},function(t,e,n){"use strict";var i=n(0),r=n(1235);i.Observable.prototype.exhaustMap=r.exhaustMap},function(t,e,n){"use strict";var i=n(0),r=n(1236);i.Observable.prototype.expand=r.expand},function(t,e,n){"use strict";var i=n(0),r=n(585);i.Observable.prototype.filter=r.filter},function(t,e,n){"use strict";var i=n(0),r=n(1237);i.Observable.prototype.finally=r._finally,i.Observable.prototype._finally=r._finally},function(t,e,n){"use strict";var i=n(0),r=n(586);i.Observable.prototype.find=r.find},function(t,e,n){"use strict";var i=n(0),r=n(1238);i.Observable.prototype.findIndex=r.findIndex},function(t,e,n){"use strict";var i=n(0),r=n(587);i.Observable.prototype.first=r.first},function(t,e,n){"use strict";var i=n(0),r=n(1239);i.Observable.prototype.groupBy=r.groupBy},function(t,e,n){"use strict";var i=n(0),r=n(1240);i.Observable.prototype.ignoreElements=r.ignoreElements},function(t,e,n){"use strict";var i=n(0),r=n(1241);i.Observable.prototype.isEmpty=r.isEmpty},function(t,e,n){"use strict";var i=n(0),r=n(588);i.Observable.prototype.last=r.last},function(t,e,n){"use strict";var i=n(0),r=n(1242);i.Observable.prototype.let=r.letProto,i.Observable.prototype.letBind=r.letProto},function(t,e,n){"use strict";var i=n(0),r=n(1243);i.Observable.prototype.mapTo=r.mapTo},function(t,e,n){"use strict";var i=n(0),r=n(1244);i.Observable.prototype.materialize=r.materialize},function(t,e,n){"use strict";var i=n(0),r=n(1245);i.Observable.prototype.max=r.max},function(t,e,n){"use strict";var i=n(0),r=n(589);i.Observable.prototype.merge=r.merge},function(t,e,n){"use strict";var i=n(0),r=n(113);i.Observable.prototype.mergeAll=r.mergeAll},function(t,e,n){"use strict";var i=n(0),r=n(590);i.Observable.prototype.flatMapTo=r.mergeMapTo,i.Observable.prototype.mergeMapTo=r.mergeMapTo},function(t,e,n){"use strict";var i=n(0),r=n(1246);i.Observable.prototype.mergeScan=r.mergeScan},function(t,e,n){"use strict";var i=n(0),r=n(1247);i.Observable.prototype.min=r.min},function(t,e,n){"use strict";var i=n(0),r=n(114);i.Observable.prototype.multicast=r.multicast},function(t,e,n){"use strict";var i=n(0),r=n(412);i.Observable.prototype.observeOn=r.observeOn},function(t,e,n){"use strict";var i=n(0),r=n(591);i.Observable.prototype.onErrorResumeNext=r.onErrorResumeNext},function(t,e,n){"use strict";var i=n(0),r=n(1248);i.Observable.prototype.pairwise=r.pairwise},function(t,e,n){"use strict";var i=n(0),r=n(1249);i.Observable.prototype.partition=r.partition},function(t,e,n){"use strict";var i=n(0),r=n(1250);i.Observable.prototype.pluck=r.pluck},function(t,e,n){"use strict";var i=n(0),r=n(1251);i.Observable.prototype.publish=r.publish},function(t,e,n){"use strict";var i=n(0),r=n(1252);i.Observable.prototype.publishBehavior=r.publishBehavior},function(t,e,n){"use strict";var i=n(0),r=n(1253);i.Observable.prototype.publishLast=r.publishLast},function(t,e,n){"use strict";var i=n(0),r=n(1254);i.Observable.prototype.publishReplay=r.publishReplay},function(t,e,n){"use strict";var i=n(0),r=n(592);i.Observable.prototype.race=r.race},function(t,e,n){"use strict";var i=n(0),r=n(204);i.Observable.prototype.reduce=r.reduce},function(t,e,n){"use strict";var i=n(0),r=n(1255);i.Observable.prototype.repeat=r.repeat},function(t,e,n){"use strict";var i=n(0),r=n(1256);i.Observable.prototype.repeatWhen=r.repeatWhen},function(t,e,n){"use strict";var i=n(0),r=n(1257);i.Observable.prototype.retry=r.retry},function(t,e,n){"use strict";var i=n(0),r=n(1258);i.Observable.prototype.retryWhen=r.retryWhen},function(t,e,n){"use strict";var i=n(0),r=n(1259);i.Observable.prototype.sample=r.sample},function(t,e,n){"use strict";var i=n(0),r=n(1260);i.Observable.prototype.sampleTime=r.sampleTime},function(t,e,n){"use strict";var i=n(0),r=n(1261);i.Observable.prototype.scan=r.scan},function(t,e,n){"use strict";var i=n(0),r=n(1262);i.Observable.prototype.sequenceEqual=r.sequenceEqual},function(t,e,n){"use strict";var i=n(0),r=n(1263);i.Observable.prototype.share=r.share},function(t,e,n){"use strict";var i=n(0),r=n(1264);i.Observable.prototype.single=r.single},function(t,e,n){"use strict";var i=n(0),r=n(1265);i.Observable.prototype.skip=r.skip},function(t,e,n){"use strict";var i=n(0),r=n(1266);i.Observable.prototype.skipUntil=r.skipUntil},function(t,e,n){"use strict";var i=n(0),r=n(1267);i.Observable.prototype.skipWhile=r.skipWhile},function(t,e,n){"use strict";var i=n(0),r=n(1268);i.Observable.prototype.startWith=r.startWith},function(t,e,n){"use strict";var i=n(0),r=n(1269);i.Observable.prototype.subscribeOn=r.subscribeOn},function(t,e,n){"use strict";var i=n(0),r=n(1270);i.Observable.prototype.switch=r._switch,i.Observable.prototype._switch=r._switch},function(t,e,n){"use strict";var i=n(0),r=n(1271);i.Observable.prototype.switchMap=r.switchMap},function(t,e,n){"use strict";var i=n(0),r=n(1272);i.Observable.prototype.switchMapTo=r.switchMapTo},function(t,e,n){"use strict";var i=n(0),r=n(1273);i.Observable.prototype.take=r.take},function(t,e,n){"use strict";var i=n(0),r=n(1274);i.Observable.prototype.takeLast=r.takeLast},function(t,e,n){"use strict";var i=n(0),r=n(1275);i.Observable.prototype.takeUntil=r.takeUntil},function(t,e,n){"use strict";var i=n(0),r=n(1276);i.Observable.prototype.takeWhile=r.takeWhile},function(t,e,n){"use strict";var i=n(0),r=n(1277);i.Observable.prototype.throttle=r.throttle},function(t,e,n){"use strict";var i=n(0),r=n(1278);i.Observable.prototype.throttleTime=r.throttleTime},function(t,e,n){"use strict";var i=n(0),r=n(593);i.Observable.prototype.timeInterval=r.timeInterval},function(t,e,n){"use strict";var i=n(0),r=n(1279);i.Observable.prototype.timeout=r.timeout},function(t,e,n){"use strict";var i=n(0),r=n(1280);i.Observable.prototype.timeoutWith=r.timeoutWith},function(t,e,n){"use strict";var i=n(0),r=n(594);i.Observable.prototype.timestamp=r.timestamp},function(t,e,n){"use strict";var i=n(0),r=n(1281);i.Observable.prototype.toArray=r.toArray},function(t,e,n){"use strict";var i=n(0),r=n(595);i.Observable.prototype.toPromise=r.toPromise},function(t,e,n){"use strict";var i=n(0),r=n(1282);i.Observable.prototype.window=r.window},function(t,e,n){"use strict";var i=n(0),r=n(1283);i.Observable.prototype.windowCount=r.windowCount},function(t,e,n){"use strict";var i=n(0),r=n(1284);i.Observable.prototype.windowTime=r.windowTime},function(t,e,n){"use strict";var i=n(0),r=n(1285);
i.Observable.prototype.windowToggle=r.windowToggle},function(t,e,n){"use strict";var i=n(0),r=n(1286);i.Observable.prototype.windowWhen=r.windowWhen},function(t,e,n){"use strict";var i=n(0),r=n(1287);i.Observable.prototype.withLatestFrom=r.withLatestFrom},function(t,e,n){"use strict";var i=n(0),r=n(413);i.Observable.prototype.zip=r.zipProto},function(t,e,n){"use strict";var i=n(0),r=n(1288);i.Observable.prototype.zipAll=r.zipAll},,function(t,e,n){"use strict";function dispatchNext(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function dispatchError(t){var e=t.err,n=t.subject;n.error(e)}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(0),o=n(28),s=n(27),a=n(200),c=function(t){function BoundCallbackObservable(e,n,i,r){t.call(this),this.callbackFunc=e,this.selector=n,this.args=i,this.scheduler=r}return i(BoundCallbackObservable,t),BoundCallbackObservable.create=function(t,e,n){return void 0===e&&(e=void 0),function(){for(var i=[],r=0;r<arguments.length;r++)i[r-0]=arguments[r];return new BoundCallbackObservable(t,e,i,n)}},BoundCallbackObservable.prototype._subscribe=function(t){var e=this.callbackFunc,n=this.args,i=this.scheduler,r=this.subject;if(i)return i.schedule(BoundCallbackObservable.dispatch,0,{source:this,subscriber:t});if(!r){r=this.subject=new a.AsyncSubject;var c=function handlerFn(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=handlerFn.source,i=n.selector,r=n.subject;if(i){var a=o.tryCatch(i).apply(this,t);a===s.errorObject?r.error(s.errorObject.e):(r.next(a),r.complete())}else r.next(1===t.length?t[0]:t),r.complete()};c.source=this;var u=o.tryCatch(e).apply(this,n.concat(c));u===s.errorObject&&r.error(s.errorObject.e)}return r.subscribe(t)},BoundCallbackObservable.dispatch=function(t){var e=this,n=t.source,i=t.subscriber,r=n.callbackFunc,c=n.args,u=n.scheduler,l=n.subject;if(!l){l=n.subject=new a.AsyncSubject;var h=function handlerFn(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var i=handlerFn.source,r=i.selector,a=i.subject;if(r){var c=o.tryCatch(r).apply(this,t);c===s.errorObject?e.add(u.schedule(dispatchError,0,{err:s.errorObject.e,subject:a})):e.add(u.schedule(dispatchNext,0,{value:c,subject:a}))}else{var l=1===t.length?t[0]:t;e.add(u.schedule(dispatchNext,0,{value:l,subject:a}))}};h.source=n;var p=o.tryCatch(r).apply(this,c.concat(h));p===s.errorObject&&l.error(s.errorObject.e)}e.add(l.subscribe(i))},BoundCallbackObservable}(r.Observable);e.BoundCallbackObservable=c},function(t,e,n){"use strict";function dispatch(t){var e=this,n=t.source,i=t.subscriber,r=n,c=r.callbackFunc,u=r.args,l=r.scheduler,h=n.subject;if(!h){h=n.subject=new a.AsyncSubject;var p=function handlerFn(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var i=handlerFn.source,r=i.selector,a=i.subject,c=t.shift();if(c)a.error(c);else if(r){var u=o.tryCatch(r).apply(this,t);u===s.errorObject?e.add(l.schedule(dispatchError,0,{err:s.errorObject.e,subject:a})):e.add(l.schedule(dispatchNext,0,{value:u,subject:a}))}else{var h=1===t.length?t[0]:t;e.add(l.schedule(dispatchNext,0,{value:h,subject:a}))}};p.source=n;var f=o.tryCatch(c).apply(this,u.concat(p));f===s.errorObject&&h.error(s.errorObject.e)}e.add(h.subscribe(i))}function dispatchNext(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function dispatchError(t){var e=t.err,n=t.subject;n.error(e)}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(0),o=n(28),s=n(27),a=n(200),c=function(t){function BoundNodeCallbackObservable(e,n,i,r){t.call(this),this.callbackFunc=e,this.selector=n,this.args=i,this.scheduler=r}return i(BoundNodeCallbackObservable,t),BoundNodeCallbackObservable.create=function(t,e,n){return void 0===e&&(e=void 0),function(){for(var i=[],r=0;r<arguments.length;r++)i[r-0]=arguments[r];return new BoundNodeCallbackObservable(t,e,i,n)}},BoundNodeCallbackObservable.prototype._subscribe=function(t){var e=this.callbackFunc,n=this.args,i=this.scheduler,r=this.subject;if(i)return i.schedule(dispatch,0,{source:this,subscriber:t});if(!r){r=this.subject=new a.AsyncSubject;var c=function handlerFn(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=handlerFn.source,i=n.selector,r=n.subject,a=t.shift();if(a)r.error(a);else if(i){var c=o.tryCatch(i).apply(this,t);c===s.errorObject?r.error(s.errorObject.e):(r.next(c),r.complete())}else r.next(1===t.length?t[0]:t),r.complete()};c.source=this;var u=o.tryCatch(e).apply(this,n.concat(c));u===s.errorObject&&r.error(s.errorObject.e)}return r.subscribe(t)},BoundNodeCallbackObservable}(r.Observable);e.BoundNodeCallbackObservable=c},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(0),o=n(8),s=n(7),a=function(t){function DeferObservable(e){t.call(this),this.observableFactory=e}return i(DeferObservable,t),DeferObservable.create=function(t){return new DeferObservable(t)},DeferObservable.prototype._subscribe=function(t){return new c(t,this.observableFactory)},DeferObservable}(r.Observable);e.DeferObservable=a;var c=function(t){function DeferSubscriber(e,n){t.call(this,e),this.factory=n,this.tryDefer()}return i(DeferSubscriber,t),DeferSubscriber.prototype.tryDefer=function(){try{this._callFactory()}catch(t){this._error(t)}},DeferSubscriber.prototype._callFactory=function(){var t=this.factory();t&&this.add(o.subscribeToResult(this,t))},DeferSubscriber}(s.OuterSubscriber)},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(0),o=function(t){function ErrorObservable(e,n){t.call(this),this.error=e,this.scheduler=n}return i(ErrorObservable,t),ErrorObservable.create=function(t,e){return new ErrorObservable(t,e)},ErrorObservable.dispatch=function(t){var e=t.error,n=t.subscriber;n.error(e)},ErrorObservable.prototype._subscribe=function(t){var e=this.error,n=this.scheduler;return n?n.schedule(ErrorObservable.dispatch,0,{error:e,subscriber:t}):void t.error(e)},ErrorObservable}(r.Observable);e.ErrorObservable=o},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(0),o=n(85),s=n(58),a=n(8),c=n(7),u=function(t){function ForkJoinObservable(e,n){t.call(this),this.sources=e,this.resultSelector=n}return i(ForkJoinObservable,t),ForkJoinObservable.create=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];if(null===t||0===arguments.length)return new o.EmptyObservable;var n=null;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&s.isArray(t[0])&&(t=t[0]),0===t.length?new o.EmptyObservable:new ForkJoinObservable(t,n)},ForkJoinObservable.prototype._subscribe=function(t){return new l(t,this.sources,this.resultSelector)},ForkJoinObservable}(r.Observable);e.ForkJoinObservable=u;var l=function(t){function ForkJoinSubscriber(e,n,i){t.call(this,e),this.sources=n,this.resultSelector=i,this.completed=0,this.haveValues=0;var r=n.length;this.total=r,this.values=new Array(r);for(var o=0;o<r;o++){var s=n[o],c=a.subscribeToResult(this,s,null,o);c&&(c.outerIndex=o,this.add(c))}}return i(ForkJoinSubscriber,t),ForkJoinSubscriber.prototype.notifyNext=function(t,e,n,i,r){this.values[n]=e,r._hasValue||(r._hasValue=!0,this.haveValues++)},ForkJoinSubscriber.prototype.notifyComplete=function(t){var e=this.destination,n=this,i=n.haveValues,r=n.resultSelector,o=n.values,s=o.length;if(!t._hasValue)return void e.complete();if(this.completed++,this.completed===s){if(i===s){var a=r?r.apply(this,o):o;e.next(a)}e.complete()}},ForkJoinSubscriber}(c.OuterSubscriber)},function(t,e,n){"use strict";function isNodeStyleEventEmmitter(t){return!!t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}function isJQueryStyleEventEmitter(t){return!!t&&"function"==typeof t.on&&"function"==typeof t.off}function isNodeList(t){return!!t&&"[object NodeList]"===t.toString()}function isHTMLCollection(t){return!!t&&"[object HTMLCollection]"===t.toString()}function isEventTarget(t){return!!t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(0),o=n(28),s=n(415),a=n(27),c=n(26),u=function(t){function FromEventObservable(e,n,i,r){t.call(this),this.sourceObj=e,this.eventName=n,this.selector=i,this.options=r}return i(FromEventObservable,t),FromEventObservable.create=function(t,e,n,i){return s.isFunction(n)&&(i=n,n=void 0),new FromEventObservable(t,e,i,n)},FromEventObservable.setupSubscription=function(t,e,n,i,r){var o;if(isNodeList(t)||isHTMLCollection(t))for(var s=0,a=t.length;s<a;s++)FromEventObservable.setupSubscription(t[s],e,n,i,r);else if(isEventTarget(t)){var u=t;t.addEventListener(e,n,r),o=function(){return u.removeEventListener(e,n)}}else if(isJQueryStyleEventEmitter(t)){var l=t;t.on(e,n),o=function(){return l.off(e,n)}}else if(isNodeStyleEventEmmitter(t)){var h=t;t.addListener(e,n),o=function(){return h.removeListener(e,n)}}i.add(new c.Subscription(o))},FromEventObservable.prototype._subscribe=function(t){var e=this.sourceObj,n=this.eventName,i=this.options,r=this.selector,s=r?function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var i=o.tryCatch(r).apply(void 0,e);i===a.errorObject?t.error(a.errorObject.e):t.next(i)}:function(e){return t.next(e)};FromEventObservable.setupSubscription(e,n,s,t,i)},FromEventObservable}(r.Observable);e.FromEventObservable=u},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(0),o=n(26),s=function(t){function FromEventPatternObservable(e,n,i){t.call(this),this.addHandler=e,this.removeHandler=n,this.selector=i}return i(FromEventPatternObservable,t),FromEventPatternObservable.create=function(t,e,n){return new FromEventPatternObservable(t,e,n)},FromEventPatternObservable.prototype._subscribe=function(t){var e=this,n=this.removeHandler,i=this.selector?function(){for(var n=[],i=0;i<arguments.length;i++)n[i-0]=arguments[i];e._callSelector(t,n)}:function(e){t.next(e)};this._callAddHandler(i,t),t.add(new o.Subscription(function(){n(i)}))},FromEventPatternObservable.prototype._callSelector=function(t,e){try{var n=this.selector.apply(this,e);t.next(n)}catch(i){t.error(i)}},FromEventPatternObservable.prototype._callAddHandler=function(t,e){try{this.addHandler(t)}catch(n){e.error(n)}},FromEventPatternObservable}(r.Observable);e.FromEventPatternObservable=s},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(0),o=n(86),s=function(t){return t},a=function(t){function GenerateObservable(e,n,i,r,o){t.call(this),this.initialState=e,this.condition=n,this.iterate=i,this.resultSelector=r,this.scheduler=o}return i(GenerateObservable,t),GenerateObservable.create=function(t,e,n,i,r){return 1==arguments.length?new GenerateObservable(t.initialState,t.condition,t.iterate,t.resultSelector||s,t.scheduler):void 0===i||o.isScheduler(i)?new GenerateObservable(t,e,n,s,i):new GenerateObservable(t,e,n,i,r)},GenerateObservable.prototype._subscribe=function(t){var e=this.initialState;if(this.scheduler)return this.scheduler.schedule(GenerateObservable.dispatch,0,{subscriber:t,iterate:this.iterate,condition:this.condition,resultSelector:this.resultSelector,state:e});for(var n=this,i=n.condition,r=n.resultSelector,o=n.iterate;;){if(i){var s=void 0;try{s=i(e)}catch(a){return void t.error(a)}if(!s){t.complete();break}}var c=void 0;try{c=r(e)}catch(a){return void t.error(a)}if(t.next(c),t.closed)break;try{e=o(e)}catch(a){return void t.error(a)}}},GenerateObservable.dispatch=function(t){var e=t.subscriber,n=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(i){return void e.error(i)}else t.needIterate=!0;if(n){var r=void 0;try{r=n(t.state)}catch(i){return void e.error(i)}if(!r)return void e.complete();if(e.closed)return}var o;try{o=t.resultSelector(t.state)}catch(i){return void e.error(i)}if(!e.closed&&(e.next(o),!e.closed))return this.schedule(t)}},GenerateObservable}(r.Observable);e.GenerateObservable=a},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(0),o=n(8),s=n(7),a=function(t){function IfObservable(e,n,i){t.call(this),this.condition=e,this.thenSource=n,this.elseSource=i}return i(IfObservable,t),IfObservable.create=function(t,e,n){return new IfObservable(t,e,n)},IfObservable.prototype._subscribe=function(t){var e=this,n=e.condition,i=e.thenSource,r=e.elseSource;return new c(t,n,i,r)},IfObservable}(r.Observable);e.IfObservable=a;var c=function(t){function IfSubscriber(e,n,i,r){t.call(this,e),this.condition=n,this.thenSource=i,this.elseSource=r,this.tryIf()}return i(IfSubscriber,t),IfSubscriber.prototype.tryIf=function(){var t,e=this,n=e.condition,i=e.thenSource,r=e.elseSource;try{t=n();var s=t?i:r;s?this.add(o.subscribeToResult(this,s)):this._complete()}catch(a){this._error(a)}},IfSubscriber}(s.OuterSubscriber)},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(416),o=n(0),s=n(37),a=function(t){function IntervalObservable(e,n){void 0===e&&(e=0),void 0===n&&(n=s.async),t.call(this),this.period=e,this.scheduler=n,(!r.isNumeric(e)||e<0)&&(this.period=0),n&&"function"==typeof n.schedule||(this.scheduler=s.async)}return i(IntervalObservable,t),IntervalObservable.create=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=s.async),new IntervalObservable(t,e)},IntervalObservable.dispatch=function(t){var e=t.index,n=t.subscriber,i=t.period;n.next(e),n.closed||(t.index+=1,this.schedule(t,i))},IntervalObservable.prototype._subscribe=function(t){var e=0,n=this.period,i=this.scheduler;t.add(i.schedule(IntervalObservable.dispatch,n,{index:e,subscriber:t,period:n}))},IntervalObservable}(o.Observable);e.IntervalObservable=a},,function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(0),o=n(604),s=function(t){function NeverObservable(){t.call(this)}return i(NeverObservable,t),NeverObservable.create=function(){return new NeverObservable},NeverObservable.prototype._subscribe=function(t){o.noop()},NeverObservable}(r.Observable);e.NeverObservable=s},function(t,e,n){"use strict";function dispatch(t){var e=t.obj,n=t.keys,i=t.length,r=t.index,o=t.subscriber;if(r===i)return void o.complete();var s=n[r];o.next([s,e[s]]),t.index=r+1,this.schedule(t)}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(0),o=function(t){function PairsObservable(e,n){t.call(this),this.obj=e,this.scheduler=n,this.keys=Object.keys(e)}return i(PairsObservable,t),PairsObservable.create=function(t,e){return new PairsObservable(t,e)},PairsObservable.prototype._subscribe=function(t){var e=this,n=e.keys,i=e.scheduler,r=n.length;if(i)return i.schedule(dispatch,0,{obj:this.obj,keys:n,length:r,index:0,subscriber:t});for(var o=0;o<r;o++){var s=n[o];t.next([s,this.obj[s]])}t.complete()},PairsObservable}(r.Observable);e.PairsObservable=o},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(0),o=function(t){function RangeObservable(e,n,i){t.call(this),this.start=e,this._count=n,this.scheduler=i}return i(RangeObservable,t),RangeObservable.create=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),new RangeObservable(t,e,n)},RangeObservable.dispatch=function(t){var e=t.start,n=t.index,i=t.count,r=t.subscriber;return n>=i?void r.complete():(r.next(e),void(r.closed||(t.index=n+1,t.start=e+1,this.schedule(t))))},RangeObservable.prototype._subscribe=function(t){var e=0,n=this.start,i=this._count,r=this.scheduler;if(r)return r.schedule(RangeObservable.dispatch,0,{index:e,count:i,start:n,subscriber:t});for(;;){if(e++>=i){t.complete();break}if(t.next(n++),t.closed)break}},RangeObservable}(r.Observable);e.RangeObservable=o},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(0),o=n(597),s=n(416),a=function(t){function SubscribeOnObservable(e,n,i){void 0===n&&(n=0),void 0===i&&(i=o.asap),t.call(this),this.source=e,this.delayTime=n,this.scheduler=i,(!s.isNumeric(n)||n<0)&&(this.delayTime=0),i&&"function"==typeof i.schedule||(this.scheduler=o.asap)}return i(SubscribeOnObservable,t),SubscribeOnObservable.create=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=o.asap),new SubscribeOnObservable(t,e,n)},SubscribeOnObservable.dispatch=function(t){var e=t.source,n=t.subscriber;return e.subscribe(n)},SubscribeOnObservable.prototype._subscribe=function(t){var e=this.delayTime,n=this.source,i=this.scheduler;return i.schedule(SubscribeOnObservable.dispatch,e,{source:n,subscriber:t})},SubscribeOnObservable}(r.Observable);e.SubscribeOnObservable=a},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(416),o=n(0),s=n(37),a=n(86),c=n(208),u=function(t){function TimerObservable(e,n,i){void 0===e&&(e=0),t.call(this),this.period=-1,this.dueTime=0,r.isNumeric(n)?this.period=Number(n)<1&&1||Number(n):a.isScheduler(n)&&(i=n),a.isScheduler(i)||(i=s.async),this.scheduler=i,this.dueTime=c.isDate(e)?+e-this.scheduler.now():e}return i(TimerObservable,t),TimerObservable.create=function(t,e,n){return void 0===t&&(t=0),new TimerObservable(t,e,n)},TimerObservable.dispatch=function(t){var e=t.index,n=t.period,i=t.subscriber,r=this;if(i.next(e),!i.closed){if(n===-1)return i.complete();t.index=e+1,r.schedule(t,n)}},TimerObservable.prototype._subscribe=function(t){var e=0,n=this,i=n.period,r=n.dueTime,o=n.scheduler;return o.schedule(TimerObservable.dispatch,r,{index:e,period:i,subscriber:t})},TimerObservable}(o.Observable);e.TimerObservable=u},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(0),o=n(8),s=n(7),a=function(t){function UsingObservable(e,n){t.call(this),this.resourceFactory=e,this.observableFactory=n}return i(UsingObservable,t),UsingObservable.create=function(t,e){return new UsingObservable(t,e)},UsingObservable.prototype._subscribe=function(t){var e,n=this,i=n.resourceFactory,r=n.observableFactory;try{return e=i(),new c(t,e,r)}catch(o){t.error(o)}},UsingObservable}(r.Observable);e.UsingObservable=a;var c=function(t){function UsingSubscriber(e,n,i){t.call(this,e),this.resource=n,this.observableFactory=i,e.add(n),this.tryUse()}return i(UsingSubscriber,t),UsingSubscriber.prototype.tryUse=function(){try{var t=this.observableFactory.call(this,this.resource);t&&this.add(o.subscribeToResult(this,t))}catch(e){this._error(e)}},UsingSubscriber}(s.OuterSubscriber)},function(t,e,n){"use strict";var i=n(1173);e.bindCallback=i.BoundCallbackObservable.create},function(t,e,n){"use strict";var i=n(1174);e.bindNodeCallback=i.BoundNodeCallbackObservable.create},function(t,e,n){"use strict";function combineLatest(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=null,a=null;return i.isScheduler(t[t.length-1])&&(a=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&r.isArray(t[0])&&(t=t[0]),new o.ArrayObservable(t,a).lift(new s.CombineLatestOperator(n))}var i=n(86),r=n(58),o=n(71),s=n(408);e.combineLatest=combineLatest},function(t,e,n){"use strict";var i=n(409);e.concat=i.concatStatic},function(t,e,n){"use strict";var i=n(1175);e.defer=i.DeferObservable.create},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(18),o=n(4),s=n(0),a=n(26),c=n(32),u=n(202),l=n(28),h=n(27),p=n(1305),f=function(t){function WebSocketSubject(e,n){if(e instanceof s.Observable)t.call(this,n,e);else{if(t.call(this),this.WebSocketCtor=c.root.WebSocket,this._output=new r.Subject,"string"==typeof e?this.url=e:p.assign(this,e),!this.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new u.ReplaySubject}}return i(WebSocketSubject,t),WebSocketSubject.prototype.resultSelector=function(t){return JSON.parse(t.data)},WebSocketSubject.create=function(t){return new WebSocketSubject(t)},WebSocketSubject.prototype.lift=function(t){var e=new WebSocketSubject(this,this.destination);return e.operator=t,e},WebSocketSubject.prototype.multiplex=function(t,e,n){var i=this;return new s.Observable(function(r){var o=l.tryCatch(t)();o===h.errorObject?r.error(h.errorObject.e):i.next(o);var s=i.subscribe(function(t){var e=l.tryCatch(n)(t);e===h.errorObject?r.error(h.errorObject.e):e&&r.next(t)},function(t){return r.error(t)},function(){return r.complete()});return function(){var t=l.tryCatch(e)();t===h.errorObject?r.error(h.errorObject.e):i.next(t),s.unsubscribe()}})},WebSocketSubject.prototype._connectSocket=function(){var t=this,e=this.WebSocketCtor,n=this._output,i=null;try{i=this.protocol?new e(this.url,this.protocol):new e(this.url),this.socket=i}catch(r){return void n.error(r)}var s=new a.Subscription(function(){t.socket=null,i&&1===i.readyState&&i.close()});i.onopen=function(e){var r=t.openObserver;r&&r.next(e);var a=t.destination;t.destination=o.Subscriber.create(function(t){return 1===i.readyState&&i.send(t)},function(e){var r=t.closingObserver;r&&r.next(void 0),e&&e.code?i.close(e.code,e.reason):n.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),t.destination=new u.ReplaySubject,t.socket=null},function(){var e=t.closingObserver;e&&e.next(void 0),i.close(),t.destination=new u.ReplaySubject,t.socket=null}),a&&a instanceof u.ReplaySubject&&s.add(a.subscribe(t.destination))},i.onerror=function(t){return n.error(t)},i.onclose=function(e){var i=t.closeObserver;i&&i.next(e),e.wasClean?n.complete():n.error(e)},i.onmessage=function(e){var i=l.tryCatch(t.resultSelector)(e);i===h.errorObject?n.error(h.errorObject.e):n.next(i)}},WebSocketSubject.prototype._subscribe=function(t){var e=this,n=this.source;if(n)return n.subscribe(t);this.socket||this._connectSocket();var i=new a.Subscription;return i.add(this._output.subscribe(t)),i.add(function(){var t=e.socket;0===e._output.observers.length&&t&&1===t.readyState&&(t.close(),e.socket=null)}),i},WebSocketSubject.prototype.unsubscribe=function(){var e=this,n=e.source,i=e.socket;i&&1===i.readyState&&(i.close(),this.socket=null),t.prototype.unsubscribe.call(this),n||(this.destination=new u.ReplaySubject)},WebSocketSubject}(r.AnonymousSubject);e.WebSocketSubject=f},function(t,e,n){"use strict";var i=n(581);e.ajax=i.AjaxObservable.create},function(t,e,n){"use strict";var i=n(1195);e.webSocket=i.WebSocketSubject.create},function(t,e,n){"use strict";var i=n(85);e.empty=i.EmptyObservable.create},function(t,e,n){"use strict";var i=n(1177);e.forkJoin=i.ForkJoinObservable.create},function(t,e,n){"use strict";var i=n(1178);e.fromEvent=i.FromEventObservable.create},function(t,e,n){"use strict";var i=n(1179);e.fromEventPattern=i.FromEventPatternObservable.create},function(t,e,n){"use strict";var i=n(1181);e._if=i.IfObservable.create},function(t,e,n){"use strict";var i=n(1182);e.interval=i.IntervalObservable.create},function(t,e,n){"use strict";var i=n(589);e.merge=i.mergeStatic},function(t,e,n){"use strict";var i=n(1184);e.never=i.NeverObservable.create},function(t,e,n){"use strict";var i=n(1185);e.pairs=i.PairsObservable.create},function(t,e,n){"use strict";var i=n(1186);e.range=i.RangeObservable.create},function(t,e,n){"use strict";var i=n(1176);e._throw=i.ErrorObservable.create},function(t,e,n){"use strict";var i=n(1188);e.timer=i.TimerObservable.create},function(t,e,n){"use strict";var i=n(1189);e.using=i.UsingObservable.create},function(t,e,n){"use strict";var i=n(413);e.zip=i.zipStatic},function(t,e,n){"use strict";function audit(t){return this.lift(new c(t))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(28),o=n(27),s=n(7),a=n(8);e.audit=audit;var c=function(){function AuditOperator(t){this.durationSelector=t}return AuditOperator.prototype.call=function(t,e){return e._subscribe(new u(t,this.durationSelector))},AuditOperator}(),u=function(t){function AuditSubscriber(e,n){t.call(this,e),this.durationSelector=n,this.hasValue=!1}return i(AuditSubscriber,t),AuditSubscriber.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=r.tryCatch(this.durationSelector)(t);e===o.errorObject?this.destination.error(o.errorObject.e):this.add(this.throttled=a.subscribeToResult(this,e))}},AuditSubscriber.prototype.clearThrottle=function(){var t=this,e=t.value,n=t.hasValue,i=t.throttled;i&&(this.remove(i),this.throttled=null,i.unsubscribe()),n&&(this.value=null,this.hasValue=!1,this.destination.next(e))},AuditSubscriber.prototype.notifyNext=function(t,e,n,i){this.clearThrottle()},AuditSubscriber.prototype.notifyComplete=function(){this.clearThrottle()},AuditSubscriber}(s.OuterSubscriber)},function(t,e,n){"use strict";function auditTime(t,e){return void 0===e&&(e=r.async),this.lift(new s(t,e))}function dispatchNext(t){t.clearThrottle()}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(37),o=n(4);e.auditTime=auditTime;var s=function(){function AuditTimeOperator(t,e){this.duration=t,this.scheduler=e}return AuditTimeOperator.prototype.call=function(t,e){return e._subscribe(new a(t,this.duration,this.scheduler))},AuditTimeOperator}(),a=function(t){function AuditTimeSubscriber(e,n,i){t.call(this,e),this.duration=n,this.scheduler=i,this.hasValue=!1}return i(AuditTimeSubscriber,t),AuditTimeSubscriber.prototype._next=function(t){this.value=t,this.hasValue=!0,this.throttled||this.add(this.throttled=this.scheduler.schedule(dispatchNext,this.duration,this))},AuditTimeSubscriber.prototype.clearThrottle=function(){var t=this,e=t.value,n=t.hasValue,i=t.throttled;i&&(this.remove(i),this.throttled=null,i.unsubscribe()),n&&(this.value=null,this.hasValue=!1,this.destination.next(e))},AuditTimeSubscriber}(o.Subscriber)},function(t,e,n){"use strict";function buffer(t){return this.lift(new s(t))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(7),o=n(8);e.buffer=buffer;var s=function(){function BufferOperator(t){this.closingNotifier=t}return BufferOperator.prototype.call=function(t,e){return e._subscribe(new a(t,this.closingNotifier))},BufferOperator}(),a=function(t){function BufferSubscriber(e,n){t.call(this,e),this.buffer=[],this.add(o.subscribeToResult(this,n))}return i(BufferSubscriber,t),BufferSubscriber.prototype._next=function(t){this.buffer.push(t)},BufferSubscriber.prototype.notifyNext=function(t,e,n,i,r){var o=this.buffer;this.buffer=[],this.destination.next(o)},BufferSubscriber}(r.OuterSubscriber)},function(t,e,n){"use strict";function bufferCount(t,e){return void 0===e&&(e=null),this.lift(new o(t,e))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4);e.bufferCount=bufferCount;var o=function(){function BufferCountOperator(t,e){this.bufferSize=t,this.startBufferEvery=e}return BufferCountOperator.prototype.call=function(t,e){return e._subscribe(new s(t,this.bufferSize,this.startBufferEvery))},BufferCountOperator}(),s=function(t){function BufferCountSubscriber(e,n,i){t.call(this,e),this.bufferSize=n,this.startBufferEvery=i,this.buffers=[[]],this.count=0}return i(BufferCountSubscriber,t),BufferCountSubscriber.prototype._next=function(t){var e=this.count+=1,n=this.destination,i=this.bufferSize,r=null==this.startBufferEvery?i:this.startBufferEvery,o=this.buffers,s=o.length,a=-1;e%r===0&&o.push([]);for(var c=0;c<s;c++){var u=o[c];u.push(t),u.length===i&&(a=c,n.next(u))}a!==-1&&o.splice(a,1)},BufferCountSubscriber.prototype._complete=function(){for(var e=this.destination,n=this.buffers;n.length>0;){var i=n.shift();i.length>0&&e.next(i)}t.prototype._complete.call(this)},BufferCountSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function bufferTime(t){var e=arguments.length,n=r.async;s.isScheduler(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);var i=null;e>=2&&(i=arguments[1]);var o=Number.POSITIVE_INFINITY;return e>=3&&(o=arguments[2]),this.lift(new a(t,i,o,n))}function dispatchBufferTimeSpanOnly(t){var e=t.subscriber,n=t.context;n&&e.closeContext(n),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function dispatchBufferCreation(t){var e=t.bufferCreationInterval,n=t.bufferTimeSpan,i=t.subscriber,r=t.scheduler,o=i.openContext(),s=this;i.closed||(i.add(o.closeAction=r.schedule(dispatchBufferClose,n,{subscriber:i,context:o})),s.schedule(t,e))}function dispatchBufferClose(t){var e=t.subscriber,n=t.context;e.closeContext(n)}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(37),o=n(4),s=n(86);e.bufferTime=bufferTime;var a=function(){function BufferTimeOperator(t,e,n,i){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=n,this.scheduler=i}return BufferTimeOperator.prototype.call=function(t,e){return e._subscribe(new u(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},BufferTimeOperator}(),c=function(){function Context(){this.buffer=[]}return Context}(),u=function(t){function BufferTimeSubscriber(e,n,i,r,o){t.call(this,e),this.bufferTimeSpan=n,this.bufferCreationInterval=i,this.maxBufferSize=r,this.scheduler=o,this.contexts=[];var s=this.openContext();if(this.timespanOnly=null==i||i<0,this.timespanOnly){var a={subscriber:this,context:s,bufferTimeSpan:n};this.add(s.closeAction=o.schedule(dispatchBufferTimeSpanOnly,n,a));
}else{var c={subscriber:this,context:s},u={bufferTimeSpan:n,bufferCreationInterval:i,subscriber:this,scheduler:o};this.add(s.closeAction=o.schedule(dispatchBufferClose,n,c)),this.add(o.schedule(dispatchBufferCreation,i,u))}}return i(BufferTimeSubscriber,t),BufferTimeSubscriber.prototype._next=function(t){for(var e,n=this.contexts,i=n.length,r=0;r<i;r++){var o=n[r],s=o.buffer;s.push(t),s.length==this.maxBufferSize&&(e=o)}e&&this.onBufferFull(e)},BufferTimeSubscriber.prototype._error=function(e){this.contexts.length=0,t.prototype._error.call(this,e)},BufferTimeSubscriber.prototype._complete=function(){for(var e=this,n=e.contexts,i=e.destination;n.length>0;){var r=n.shift();i.next(r.buffer)}t.prototype._complete.call(this)},BufferTimeSubscriber.prototype._unsubscribe=function(){this.contexts=null},BufferTimeSubscriber.prototype.onBufferFull=function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),this.timespanOnly){t=this.openContext();var n=this.bufferTimeSpan,i={subscriber:this,context:t,bufferTimeSpan:n};this.add(t.closeAction=this.scheduler.schedule(dispatchBufferTimeSpanOnly,n,i))}},BufferTimeSubscriber.prototype.openContext=function(){var t=new c;return this.contexts.push(t),t},BufferTimeSubscriber.prototype.closeContext=function(t){this.destination.next(t.buffer);var e=this.contexts,n=e?e.indexOf(t):-1;n>=0&&e.splice(e.indexOf(t),1)},BufferTimeSubscriber}(o.Subscriber)},function(t,e,n){"use strict";function bufferToggle(t,e){return this.lift(new a(t,e))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(26),o=n(8),s=n(7);e.bufferToggle=bufferToggle;var a=function(){function BufferToggleOperator(t,e){this.openings=t,this.closingSelector=e}return BufferToggleOperator.prototype.call=function(t,e){return e._subscribe(new c(t,this.openings,this.closingSelector))},BufferToggleOperator}(),c=function(t){function BufferToggleSubscriber(e,n,i){t.call(this,e),this.openings=n,this.closingSelector=i,this.contexts=[],this.add(o.subscribeToResult(this,n))}return i(BufferToggleSubscriber,t),BufferToggleSubscriber.prototype._next=function(t){for(var e=this.contexts,n=e.length,i=0;i<n;i++)e[i].buffer.push(t)},BufferToggleSubscriber.prototype._error=function(e){for(var n=this.contexts;n.length>0;){var i=n.shift();i.subscription.unsubscribe(),i.buffer=null,i.subscription=null}this.contexts=null,t.prototype._error.call(this,e)},BufferToggleSubscriber.prototype._complete=function(){for(var e=this.contexts;e.length>0;){var n=e.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,t.prototype._complete.call(this)},BufferToggleSubscriber.prototype.notifyNext=function(t,e,n,i,r){t?this.closeBuffer(t):this.openBuffer(e)},BufferToggleSubscriber.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},BufferToggleSubscriber.prototype.openBuffer=function(t){try{var e=this.closingSelector,n=e.call(this,t);n&&this.trySubscribe(n)}catch(i){this._error(i)}},BufferToggleSubscriber.prototype.closeBuffer=function(t){var e=this.contexts;if(e&&t){var n=t.buffer,i=t.subscription;this.destination.next(n),e.splice(e.indexOf(t),1),this.remove(i),i.unsubscribe()}},BufferToggleSubscriber.prototype.trySubscribe=function(t){var e=this.contexts,n=[],i=new r.Subscription,s={buffer:n,subscription:i};e.push(s);var a=o.subscribeToResult(this,t,s);!a||a.closed?this.closeBuffer(s):(a.context=s,this.add(a),i.add(a))},BufferToggleSubscriber}(s.OuterSubscriber)},function(t,e,n){"use strict";function bufferWhen(t){return this.lift(new u(t))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(26),o=n(28),s=n(27),a=n(7),c=n(8);e.bufferWhen=bufferWhen;var u=function(){function BufferWhenOperator(t){this.closingSelector=t}return BufferWhenOperator.prototype.call=function(t,e){return e._subscribe(new l(t,this.closingSelector))},BufferWhenOperator}(),l=function(t){function BufferWhenSubscriber(e,n){t.call(this,e),this.closingSelector=n,this.subscribing=!1,this.openBuffer()}return i(BufferWhenSubscriber,t),BufferWhenSubscriber.prototype._next=function(t){this.buffer.push(t)},BufferWhenSubscriber.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),t.prototype._complete.call(this)},BufferWhenSubscriber.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},BufferWhenSubscriber.prototype.notifyNext=function(t,e,n,i,r){this.openBuffer()},BufferWhenSubscriber.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},BufferWhenSubscriber.prototype.openBuffer=function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe());var e=this.buffer;this.buffer&&this.destination.next(e),this.buffer=[];var n=o.tryCatch(this.closingSelector)();n===s.errorObject?this.error(s.errorObject.e):(t=new r.Subscription,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(c.subscribeToResult(this,n)),this.subscribing=!1)},BufferWhenSubscriber}(a.OuterSubscriber)},function(t,e,n){"use strict";function cache(t,e,n){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===e&&(e=Number.POSITIVE_INFINITY);var o,s,a=this,c=0,u=function(){return o=new r.ReplaySubject(t,e,n)};return new i.Observable(function(t){o||(o=u(),s=a.subscribe(function(t){return o.next(t)},function(t){var e=o;o=null,e.error(t)},function(){return o.complete()})),c++,o||(o=u());var e=o.subscribe(t);return function(){c--,e&&e.unsubscribe(),0===c&&s.unsubscribe()}})}var i=n(0),r=n(202);e.cache=cache},function(t,e,n){"use strict";function combineAll(t){return this.lift(new i.CombineLatestOperator(t))}var i=n(408);e.combineAll=combineAll},function(t,e,n){"use strict";function concatMap(t,e){return this.lift(new i.MergeMapOperator(t,e,1))}var i=n(142);e.concatMap=concatMap},function(t,e,n){"use strict";function concatMapTo(t,e){return this.lift(new i.MergeMapToOperator(t,e,1))}var i=n(590);e.concatMapTo=concatMapTo},function(t,e,n){"use strict";function count(t){return this.lift(new o(t,this))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4);e.count=count;var o=function(){function CountOperator(t,e){this.predicate=t,this.source=e}return CountOperator.prototype.call=function(t,e){return e._subscribe(new s(t,this.predicate,this.source))},CountOperator}(),s=function(t){function CountSubscriber(e,n,i){t.call(this,e),this.predicate=n,this.source=i,this.count=0,this.index=0}return i(CountSubscriber,t),CountSubscriber.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},CountSubscriber.prototype._tryPredicate=function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e&&this.count++},CountSubscriber.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},CountSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function debounce(t){return this.lift(new s(t))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(7),o=n(8);e.debounce=debounce;var s=function(){function DebounceOperator(t){this.durationSelector=t}return DebounceOperator.prototype.call=function(t,e){return e._subscribe(new a(t,this.durationSelector))},DebounceOperator}(),a=function(t){function DebounceSubscriber(e,n){t.call(this,e),this.durationSelector=n,this.hasValue=!1,this.durationSubscription=null}return i(DebounceSubscriber,t),DebounceSubscriber.prototype._next=function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(n){this.destination.error(n)}},DebounceSubscriber.prototype._complete=function(){this.emitValue(),this.destination.complete()},DebounceSubscriber.prototype._tryNext=function(t,e){var n=this.durationSubscription;this.value=t,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),n=o.subscribeToResult(this,e),n.closed||this.add(this.durationSubscription=n)},DebounceSubscriber.prototype.notifyNext=function(t,e,n,i,r){this.emitValue()},DebounceSubscriber.prototype.notifyComplete=function(){this.emitValue()},DebounceSubscriber.prototype.emitValue=function(){if(this.hasValue){var e=this.value,n=this.durationSubscription;n&&(this.durationSubscription=null,n.unsubscribe(),this.remove(n)),this.value=null,this.hasValue=!1,t.prototype._next.call(this,e)}},DebounceSubscriber}(r.OuterSubscriber)},function(t,e,n){"use strict";function debounceTime(t,e){return void 0===e&&(e=o.async),this.lift(new s(t,e))}function dispatchNext(t){t.debouncedNext()}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4),o=n(37);e.debounceTime=debounceTime;var s=function(){function DebounceTimeOperator(t,e){this.dueTime=t,this.scheduler=e}return DebounceTimeOperator.prototype.call=function(t,e){return e._subscribe(new a(t,this.dueTime,this.scheduler))},DebounceTimeOperator}(),a=function(t){function DebounceTimeSubscriber(e,n,i){t.call(this,e),this.dueTime=n,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return i(DebounceTimeSubscriber,t),DebounceTimeSubscriber.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(dispatchNext,this.dueTime,this))},DebounceTimeSubscriber.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},DebounceTimeSubscriber.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},DebounceTimeSubscriber.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},DebounceTimeSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function defaultIfEmpty(t){return void 0===t&&(t=null),this.lift(new o(t))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4);e.defaultIfEmpty=defaultIfEmpty;var o=function(){function DefaultIfEmptyOperator(t){this.defaultValue=t}return DefaultIfEmptyOperator.prototype.call=function(t,e){return e._subscribe(new s(t,this.defaultValue))},DefaultIfEmptyOperator}(),s=function(t){function DefaultIfEmptySubscriber(e,n){t.call(this,e),this.defaultValue=n,this.isEmpty=!0}return i(DefaultIfEmptySubscriber,t),DefaultIfEmptySubscriber.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},DefaultIfEmptySubscriber.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},DefaultIfEmptySubscriber}(r.Subscriber)},function(t,e,n){"use strict";function delay(t,e){void 0===e&&(e=r.async);var n=o.isDate(t),i=n?+t-e.now():Math.abs(t);return this.lift(new c(i,e))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(37),o=n(208),s=n(4),a=n(141);e.delay=delay;var c=function(){function DelayOperator(t,e){this.delay=t,this.scheduler=e}return DelayOperator.prototype.call=function(t,e){return e._subscribe(new u(t,this.delay,this.scheduler))},DelayOperator}(),u=function(t){function DelaySubscriber(e,n,i){t.call(this,e),this.delay=n,this.scheduler=i,this.queue=[],this.active=!1,this.errored=!1}return i(DelaySubscriber,t),DelaySubscriber.dispatch=function(t){for(var e=t.source,n=e.queue,i=t.scheduler,r=t.destination;n.length>0&&n[0].time-i.now()<=0;)n.shift().notification.observe(r);if(n.length>0){var o=Math.max(0,n[0].time-i.now());this.schedule(t,o)}else e.active=!1},DelaySubscriber.prototype._schedule=function(t){this.active=!0,this.add(t.schedule(DelaySubscriber.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},DelaySubscriber.prototype.scheduleNotification=function(t){if(this.errored!==!0){var e=this.scheduler,n=new l(e.now()+this.delay,t);this.queue.push(n),this.active===!1&&this._schedule(e)}},DelaySubscriber.prototype._next=function(t){this.scheduleNotification(a.Notification.createNext(t))},DelaySubscriber.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t)},DelaySubscriber.prototype._complete=function(){this.scheduleNotification(a.Notification.createComplete())},DelaySubscriber}(s.Subscriber),l=function(){function DelayMessage(t,e){this.time=t,this.notification=e}return DelayMessage}()},function(t,e,n){"use strict";function delayWhen(t,e){return e?new l(this,e).lift(new c(t)):this.lift(new c(t))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4),o=n(0),s=n(7),a=n(8);e.delayWhen=delayWhen;var c=function(){function DelayWhenOperator(t){this.delayDurationSelector=t}return DelayWhenOperator.prototype.call=function(t,e){return e._subscribe(new u(t,this.delayDurationSelector))},DelayWhenOperator}(),u=function(t){function DelayWhenSubscriber(e,n){t.call(this,e),this.delayDurationSelector=n,this.completed=!1,this.delayNotifierSubscriptions=[],this.values=[]}return i(DelayWhenSubscriber,t),DelayWhenSubscriber.prototype.notifyNext=function(t,e,n,i,r){this.destination.next(t),this.removeSubscription(r),this.tryComplete()},DelayWhenSubscriber.prototype.notifyError=function(t,e){this._error(t)},DelayWhenSubscriber.prototype.notifyComplete=function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()},DelayWhenSubscriber.prototype._next=function(t){try{var e=this.delayDurationSelector(t);e&&this.tryDelay(e,t)}catch(n){this.destination.error(n)}},DelayWhenSubscriber.prototype._complete=function(){this.completed=!0,this.tryComplete()},DelayWhenSubscriber.prototype.removeSubscription=function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t),n=null;return e!==-1&&(n=this.values[e],this.delayNotifierSubscriptions.splice(e,1),this.values.splice(e,1)),n},DelayWhenSubscriber.prototype.tryDelay=function(t,e){var n=a.subscribeToResult(this,t,e);this.add(n),this.delayNotifierSubscriptions.push(n),this.values.push(e)},DelayWhenSubscriber.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},DelayWhenSubscriber}(s.OuterSubscriber),l=function(t){function SubscriptionDelayObservable(e,n){t.call(this),this.source=e,this.subscriptionDelay=n}return i(SubscriptionDelayObservable,t),SubscriptionDelayObservable.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new h(t,this.source))},SubscriptionDelayObservable}(o.Observable),h=function(t){function SubscriptionDelaySubscriber(e,n){t.call(this),this.parent=e,this.source=n,this.sourceSubscribed=!1}return i(SubscriptionDelaySubscriber,t),SubscriptionDelaySubscriber.prototype._next=function(t){this.subscribeToSource()},SubscriptionDelaySubscriber.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},SubscriptionDelaySubscriber.prototype._complete=function(){this.subscribeToSource()},SubscriptionDelaySubscriber.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},SubscriptionDelaySubscriber}(r.Subscriber)},function(t,e,n){"use strict";function dematerialize(){return this.lift(new o)}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4);e.dematerialize=dematerialize;var o=function(){function DeMaterializeOperator(){}return DeMaterializeOperator.prototype.call=function(t,e){return e._subscribe(new s(t))},DeMaterializeOperator}(),s=function(t){function DeMaterializeSubscriber(e){t.call(this,e)}return i(DeMaterializeSubscriber,t),DeMaterializeSubscriber.prototype._next=function(t){t.observe(this.destination)},DeMaterializeSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function distinctKey(t,e,n){return i.distinct.call(this,function(n,i){return e?e(n[t],i[t]):n[t]===i[t]},n)}var i=n(583);e.distinctKey=distinctKey},function(t,e,n){"use strict";function distinctUntilKeyChanged(t,e){return i.distinctUntilChanged.call(this,function(n,i){return e?e(n[t],i[t]):n[t]===i[t]})}var i=n(584);e.distinctUntilKeyChanged=distinctUntilKeyChanged},function(t,e,n){"use strict";function _do(t,e,n){return this.lift(new o(t,e,n))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4);e._do=_do;var o=function(){function DoOperator(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return DoOperator.prototype.call=function(t,e){return e._subscribe(new s(t,this.nextOrObserver,this.error,this.complete))},DoOperator}(),s=function(t){function DoSubscriber(e,n,i,o){t.call(this,e);var s=new r.Subscriber(n,i,o);s.syncErrorThrowable=!0,this.add(s),this.safeSubscriber=s}return i(DoSubscriber,t),DoSubscriber.prototype._next=function(t){var e=this.safeSubscriber;e.next(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.next(t)},DoSubscriber.prototype._error=function(t){var e=this.safeSubscriber;e.error(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.error(t)},DoSubscriber.prototype._complete=function(){var t=this.safeSubscriber;t.complete(),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.complete()},DoSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function elementAt(t,e){return this.lift(new s(t,e))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4),o=n(207);e.elementAt=elementAt;var s=function(){function ElementAtOperator(t,e){if(this.index=t,this.defaultValue=e,t<0)throw new o.ArgumentOutOfRangeError}return ElementAtOperator.prototype.call=function(t,e){return e._subscribe(new a(t,this.index,this.defaultValue))},ElementAtOperator}(),a=function(t){function ElementAtSubscriber(e,n,i){t.call(this,e),this.index=n,this.defaultValue=i}return i(ElementAtSubscriber,t),ElementAtSubscriber.prototype._next=function(t){0===this.index--&&(this.destination.next(t),this.destination.complete())},ElementAtSubscriber.prototype._complete=function(){var t=this.destination;this.index>=0&&("undefined"!=typeof this.defaultValue?t.next(this.defaultValue):t.error(new o.ArgumentOutOfRangeError)),t.complete()},ElementAtSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function exhaust(){return this.lift(new s)}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(7),o=n(8);e.exhaust=exhaust;var s=function(){function SwitchFirstOperator(){}return SwitchFirstOperator.prototype.call=function(t,e){return e._subscribe(new a(t))},SwitchFirstOperator}(),a=function(t){function SwitchFirstSubscriber(e){t.call(this,e),this.hasCompleted=!1,this.hasSubscription=!1}return i(SwitchFirstSubscriber,t),SwitchFirstSubscriber.prototype._next=function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(o.subscribeToResult(this,t)))},SwitchFirstSubscriber.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},SwitchFirstSubscriber.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},SwitchFirstSubscriber}(r.OuterSubscriber)},function(t,e,n){"use strict";function exhaustMap(t,e){return this.lift(new s(t,e))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(7),o=n(8);e.exhaustMap=exhaustMap;var s=function(){function SwitchFirstMapOperator(t,e){this.project=t,this.resultSelector=e}return SwitchFirstMapOperator.prototype.call=function(t,e){return e._subscribe(new a(t,this.project,this.resultSelector))},SwitchFirstMapOperator}(),a=function(t){function SwitchFirstMapSubscriber(e,n,i){t.call(this,e),this.project=n,this.resultSelector=i,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}return i(SwitchFirstMapSubscriber,t),SwitchFirstMapSubscriber.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},SwitchFirstMapSubscriber.prototype.tryNext=function(t){var e=this.index++,n=this.destination;try{var i=this.project(t,e);this.hasSubscription=!0,this.add(o.subscribeToResult(this,i,t,e))}catch(r){n.error(r)}},SwitchFirstMapSubscriber.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},SwitchFirstMapSubscriber.prototype.notifyNext=function(t,e,n,i,r){var o=this,s=o.resultSelector,a=o.destination;s?this.trySelectResult(t,e,n,i):a.next(e)},SwitchFirstMapSubscriber.prototype.trySelectResult=function(t,e,n,i){var r=this,o=r.resultSelector,s=r.destination;try{var a=o(t,e,n,i);s.next(a)}catch(c){s.error(c)}},SwitchFirstMapSubscriber.prototype.notifyError=function(t){this.destination.error(t)},SwitchFirstMapSubscriber.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},SwitchFirstMapSubscriber}(r.OuterSubscriber)},function(t,e,n){"use strict";function expand(t,e,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),e=(e||0)<1?Number.POSITIVE_INFINITY:e,this.lift(new c(t,e,n))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(28),o=n(27),s=n(7),a=n(8);e.expand=expand;var c=function(){function ExpandOperator(t,e,n){this.project=t,this.concurrent=e,this.scheduler=n}return ExpandOperator.prototype.call=function(t,e){return e._subscribe(new u(t,this.project,this.concurrent,this.scheduler))},ExpandOperator}();e.ExpandOperator=c;var u=function(t){function ExpandSubscriber(e,n,i,r){t.call(this,e),this.project=n,this.concurrent=i,this.scheduler=r,this.index=0,this.active=0,this.hasCompleted=!1,i<Number.POSITIVE_INFINITY&&(this.buffer=[])}return i(ExpandSubscriber,t),ExpandSubscriber.dispatch=function(t){var e=t.subscriber,n=t.result,i=t.value,r=t.index;e.subscribeToProjection(n,i,r)},ExpandSubscriber.prototype._next=function(t){var e=this.destination;if(e.closed)return void this._complete();var n=this.index++;if(this.active<this.concurrent){e.next(t);var i=r.tryCatch(this.project)(t,n);if(i===o.errorObject)e.error(o.errorObject.e);else if(this.scheduler){var s={subscriber:this,result:i,value:t,index:n};this.add(this.scheduler.schedule(ExpandSubscriber.dispatch,0,s))}else this.subscribeToProjection(i,t,n)}else this.buffer.push(t)},ExpandSubscriber.prototype.subscribeToProjection=function(t,e,n){this.active++,this.add(a.subscribeToResult(this,t,e,n))},ExpandSubscriber.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},ExpandSubscriber.prototype.notifyNext=function(t,e,n,i,r){this._next(e)},ExpandSubscriber.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},ExpandSubscriber}(s.OuterSubscriber);e.ExpandSubscriber=u},function(t,e,n){"use strict";function _finally(t){return this.lift(new s(t))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4),o=n(26);e._finally=_finally;var s=function(){function FinallyOperator(t){this.callback=t}return FinallyOperator.prototype.call=function(t,e){return e._subscribe(new a(t,this.callback))},FinallyOperator}(),a=function(t){function FinallySubscriber(e,n){t.call(this,e),this.add(new o.Subscription(n))}return i(FinallySubscriber,t),FinallySubscriber}(r.Subscriber)},function(t,e,n){"use strict";function findIndex(t,e){return this.lift(new i.FindValueOperator(t,this,(!0),e))}var i=n(586);e.findIndex=findIndex},function(t,e,n){"use strict";function groupBy(t,e,n){return this.lift(new l(this,t,e,n))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4),o=n(26),s=n(0),a=n(18),c=n(1303),u=n(1301);e.groupBy=groupBy;var l=function(){function GroupByOperator(t,e,n,i){this.source=t,this.keySelector=e,this.elementSelector=n,this.durationSelector=i}return GroupByOperator.prototype.call=function(t,e){return e._subscribe(new h(t,this.keySelector,this.elementSelector,this.durationSelector))},GroupByOperator}(),h=function(t){function GroupBySubscriber(e,n,i,r){t.call(this,e),this.keySelector=n,this.elementSelector=i,this.durationSelector=r,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}return i(GroupBySubscriber,t),GroupBySubscriber.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(n){return void this.error(n)}this._group(t,e)},GroupBySubscriber.prototype._group=function(t,e){var n=this.groups;n||(n=this.groups="string"==typeof e?new u.FastMap:new c.Map);var i,r=n.get(e);if(this.elementSelector)try{i=this.elementSelector(t)}catch(o){this.error(o)}else i=t;if(!r){n.set(e,r=new a.Subject);var s=new f(e,r,this);if(this.destination.next(s),this.durationSelector){var l=void 0;try{l=this.durationSelector(new f(e,r))}catch(o){return void this.error(o)}this.add(l.subscribe(new p(e,r,this)))}}r.closed||r.next(i)},GroupBySubscriber.prototype._error=function(t){var e=this.groups;e&&(e.forEach(function(e,n){e.error(t)}),e.clear()),this.destination.error(t)},GroupBySubscriber.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(t,e){t.complete()}),t.clear()),this.destination.complete()},GroupBySubscriber.prototype.removeGroup=function(t){this.groups.delete(t)},GroupBySubscriber.prototype.unsubscribe=function(){this.closed||this.attemptedToUnsubscribe||(this.attemptedToUnsubscribe=!0,0===this.count&&t.prototype.unsubscribe.call(this))},GroupBySubscriber}(r.Subscriber),p=function(t){function GroupDurationSubscriber(e,n,i){t.call(this),this.key=e,this.group=n,this.parent=i}return i(GroupDurationSubscriber,t),GroupDurationSubscriber.prototype._next=function(t){this._complete()},GroupDurationSubscriber.prototype._error=function(t){var e=this.group;e.closed||e.error(t),this.parent.removeGroup(this.key)},GroupDurationSubscriber.prototype._complete=function(){var t=this.group;t.closed||t.complete(),this.parent.removeGroup(this.key)},GroupDurationSubscriber}(r.Subscriber),f=function(t){function GroupedObservable(e,n,i){t.call(this),this.key=e,this.groupSubject=n,this.refCountSubscription=i}return i(GroupedObservable,t),GroupedObservable.prototype._subscribe=function(t){var e=new o.Subscription,n=this,i=n.refCountSubscription,r=n.groupSubject;return i&&!i.closed&&e.add(new d(i)),e.add(r.subscribe(t)),e},GroupedObservable}(s.Observable);e.GroupedObservable=f;var d=function(t){function InnerRefCountSubscription(e){t.call(this),this.parent=e,e.count++}return i(InnerRefCountSubscription,t),InnerRefCountSubscription.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},InnerRefCountSubscription}(o.Subscription)},function(t,e,n){"use strict";function ignoreElements(){return this.lift(new s)}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4),o=n(604);e.ignoreElements=ignoreElements;var s=function(){function IgnoreElementsOperator(){}return IgnoreElementsOperator.prototype.call=function(t,e){return e._subscribe(new a(t))},IgnoreElementsOperator}(),a=function(t){function IgnoreElementsSubscriber(){t.apply(this,arguments)}return i(IgnoreElementsSubscriber,t),IgnoreElementsSubscriber.prototype._next=function(t){o.noop()},IgnoreElementsSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function isEmpty(){return this.lift(new o)}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4);e.isEmpty=isEmpty;var o=function(){function IsEmptyOperator(){}return IsEmptyOperator.prototype.call=function(t,e){return e._subscribe(new s(t))},IsEmptyOperator}(),s=function(t){function IsEmptySubscriber(e){t.call(this,e)}return i(IsEmptySubscriber,t),IsEmptySubscriber.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},IsEmptySubscriber.prototype._next=function(t){this.notifyComplete(!1)},IsEmptySubscriber.prototype._complete=function(){this.notifyComplete(!0)},IsEmptySubscriber}(r.Subscriber)},function(t,e){"use strict";function letProto(t){return t(this)}e.letProto=letProto},function(t,e,n){"use strict";function mapTo(t){return this.lift(new o(t))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4);e.mapTo=mapTo;var o=function(){function MapToOperator(t){this.value=t}return MapToOperator.prototype.call=function(t,e){return e._subscribe(new s(t,this.value))},MapToOperator}(),s=function(t){function MapToSubscriber(e,n){t.call(this,e),this.value=n}return i(MapToSubscriber,t),MapToSubscriber.prototype._next=function(t){this.destination.next(this.value)},MapToSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function materialize(){return this.lift(new s)}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4),o=n(141);e.materialize=materialize;var s=function(){function MaterializeOperator(){}return MaterializeOperator.prototype.call=function(t,e){return e._subscribe(new a(t))},MaterializeOperator}(),a=function(t){function MaterializeSubscriber(e){t.call(this,e)}return i(MaterializeSubscriber,t),MaterializeSubscriber.prototype._next=function(t){this.destination.next(o.Notification.createNext(t))},MaterializeSubscriber.prototype._error=function(t){var e=this.destination;e.next(o.Notification.createError(t)),e.complete()},MaterializeSubscriber.prototype._complete=function(){var t=this.destination;t.next(o.Notification.createComplete()),t.complete()},MaterializeSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function max(t){var e="function"==typeof t?function(e,n){return t(e,n)>0?e:n}:function(t,e){return t>e?t:e};return this.lift(new i.ReduceOperator(e))}var i=n(204);e.max=max},function(t,e,n){"use strict";function mergeScan(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),this.lift(new c(t,e,n))}var i=this&&this.__extends||function(t,e){
function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(28),o=n(27),s=n(8),a=n(7);e.mergeScan=mergeScan;var c=function(){function MergeScanOperator(t,e,n){this.project=t,this.seed=e,this.concurrent=n}return MergeScanOperator.prototype.call=function(t,e){return e._subscribe(new u(t,this.project,this.seed,this.concurrent))},MergeScanOperator}();e.MergeScanOperator=c;var u=function(t){function MergeScanSubscriber(e,n,i,r){t.call(this,e),this.project=n,this.acc=i,this.concurrent=r,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return i(MergeScanSubscriber,t),MergeScanSubscriber.prototype._next=function(t){if(this.active<this.concurrent){var e=this.index++,n=r.tryCatch(this.project)(this.acc,t),i=this.destination;n===o.errorObject?i.error(o.errorObject.e):(this.active++,this._innerSub(n,t,e))}else this.buffer.push(t)},MergeScanSubscriber.prototype._innerSub=function(t,e,n){this.add(s.subscribeToResult(this,t,e,n))},MergeScanSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},MergeScanSubscriber.prototype.notifyNext=function(t,e,n,i,r){var o=this.destination;this.acc=e,this.hasValue=!0,o.next(e)},MergeScanSubscriber.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},MergeScanSubscriber}(a.OuterSubscriber);e.MergeScanSubscriber=u},function(t,e,n){"use strict";function min(t){var e="function"==typeof t?function(e,n){return t(e,n)<0?e:n}:function(t,e){return t<e?t:e};return this.lift(new i.ReduceOperator(e))}var i=n(204);e.min=min},function(t,e,n){"use strict";function pairwise(){return this.lift(new o)}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4);e.pairwise=pairwise;var o=function(){function PairwiseOperator(){}return PairwiseOperator.prototype.call=function(t,e){return e._subscribe(new s(t))},PairwiseOperator}(),s=function(t){function PairwiseSubscriber(e){t.call(this,e),this.hasPrev=!1}return i(PairwiseSubscriber,t),PairwiseSubscriber.prototype._next=function(t){this.hasPrev?this.destination.next([this.prev,t]):this.hasPrev=!0,this.prev=t},PairwiseSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function partition(t,e){return[r.filter.call(this,t),r.filter.call(this,i.not(t,e))]}var i=n(1307),r=n(585);e.partition=partition},function(t,e,n){"use strict";function pluck(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=t.length;if(0===n)throw new Error("list of properties cannot be empty.");return i.map.call(this,plucker(t,n))}function plucker(t,e){var n=function(n){for(var i=n,r=0;r<e;r++){var o=i[t[r]];if("undefined"==typeof o)return;i=o}return i};return n}var i=n(97);e.pluck=pluck},function(t,e,n){"use strict";function publish(t){return t?r.multicast.call(this,function(){return new i.Subject},t):r.multicast.call(this,new i.Subject)}var i=n(18),r=n(114);e.publish=publish},function(t,e,n){"use strict";function publishBehavior(t){return r.multicast.call(this,new i.BehaviorSubject(t))}var i=n(201),r=n(114);e.publishBehavior=publishBehavior},function(t,e,n){"use strict";function publishLast(){return r.multicast.call(this,new i.AsyncSubject)}var i=n(200),r=n(114);e.publishLast=publishLast},function(t,e,n){"use strict";function publishReplay(t,e,n){return void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===e&&(e=Number.POSITIVE_INFINITY),r.multicast.call(this,new i.ReplaySubject(t,e,n))}var i=n(202),r=n(114);e.publishReplay=publishReplay},function(t,e,n){"use strict";function repeat(t){return void 0===t&&(t=-1),0===t?new o.EmptyObservable:t<0?this.lift(new s((-1),this)):this.lift(new s(t-1,this))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4),o=n(85);e.repeat=repeat;var s=function(){function RepeatOperator(t,e){this.count=t,this.source=e}return RepeatOperator.prototype.call=function(t,e){return e._subscribe(new a(t,this.count,this.source))},RepeatOperator}(),a=function(t){function RepeatSubscriber(e,n,i){t.call(this,e),this.count=n,this.source=i}return i(RepeatSubscriber,t),RepeatSubscriber.prototype.complete=function(){if(!this.isStopped){var e=this,n=e.source,i=e.count;if(0===i)return t.prototype.complete.call(this);i>-1&&(this.count=i-1),this.unsubscribe(),this.isStopped=!1,this.closed=!1,n.subscribe(this)}},RepeatSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function repeatWhen(t){return this.lift(new u(t,this))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(18),o=n(28),s=n(27),a=n(7),c=n(8);e.repeatWhen=repeatWhen;var u=function(){function RepeatWhenOperator(t,e){this.notifier=t,this.source=e}return RepeatWhenOperator.prototype.call=function(t,e){return e._subscribe(new l(t,this.notifier,this.source))},RepeatWhenOperator}(),l=function(t){function RepeatWhenSubscriber(e,n,i){t.call(this,e),this.notifier=n,this.source=i}return i(RepeatWhenSubscriber,t),RepeatWhenSubscriber.prototype.complete=function(){if(!this.isStopped){var e=this.notifications,n=this.retries,i=this.retriesSubscription;if(n)this.notifications=null,this.retriesSubscription=null;else{if(e=new r.Subject,n=o.tryCatch(this.notifier)(e),n===s.errorObject)return t.prototype.complete.call(this);i=c.subscribeToResult(this,n)}this.unsubscribe(),this.closed=!1,this.notifications=e,this.retries=n,this.retriesSubscription=i,e.next()}},RepeatWhenSubscriber.prototype._unsubscribe=function(){var t=this,e=t.notifications,n=t.retriesSubscription;e&&(e.unsubscribe(),this.notifications=null),n&&(n.unsubscribe(),this.retriesSubscription=null),this.retries=null},RepeatWhenSubscriber.prototype.notifyNext=function(t,e,n,i,r){var o=this,s=o.notifications,a=o.retries,c=o.retriesSubscription;this.notifications=null,this.retries=null,this.retriesSubscription=null,this.unsubscribe(),this.isStopped=!1,this.closed=!1,this.notifications=s,this.retries=a,this.retriesSubscription=c,this.source.subscribe(this)},RepeatWhenSubscriber}(a.OuterSubscriber)},function(t,e,n){"use strict";function retry(t){return void 0===t&&(t=-1),this.lift(new o(t,this))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4);e.retry=retry;var o=function(){function RetryOperator(t,e){this.count=t,this.source=e}return RetryOperator.prototype.call=function(t,e){return e._subscribe(new s(t,this.count,this.source))},RetryOperator}(),s=function(t){function RetrySubscriber(e,n,i){t.call(this,e),this.count=n,this.source=i}return i(RetrySubscriber,t),RetrySubscriber.prototype.error=function(e){if(!this.isStopped){var n=this,i=n.source,r=n.count;if(0===r)return t.prototype.error.call(this,e);r>-1&&(this.count=r-1),this.unsubscribe(),this.isStopped=!1,this.closed=!1,i.subscribe(this)}},RetrySubscriber}(r.Subscriber)},function(t,e,n){"use strict";function retryWhen(t){return this.lift(new u(t,this))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(18),o=n(28),s=n(27),a=n(7),c=n(8);e.retryWhen=retryWhen;var u=function(){function RetryWhenOperator(t,e){this.notifier=t,this.source=e}return RetryWhenOperator.prototype.call=function(t,e){return e._subscribe(new l(t,this.notifier,this.source))},RetryWhenOperator}(),l=function(t){function RetryWhenSubscriber(e,n,i){t.call(this,e),this.notifier=n,this.source=i}return i(RetryWhenSubscriber,t),RetryWhenSubscriber.prototype.error=function(e){if(!this.isStopped){var n=this.errors,i=this.retries,a=this.retriesSubscription;if(i)this.errors=null,this.retriesSubscription=null;else{if(n=new r.Subject,i=o.tryCatch(this.notifier)(n),i===s.errorObject)return t.prototype.error.call(this,s.errorObject.e);a=c.subscribeToResult(this,i)}this.unsubscribe(),this.closed=!1,this.errors=n,this.retries=i,this.retriesSubscription=a,n.next(e)}},RetryWhenSubscriber.prototype._unsubscribe=function(){var t=this,e=t.errors,n=t.retriesSubscription;e&&(e.unsubscribe(),this.errors=null),n&&(n.unsubscribe(),this.retriesSubscription=null),this.retries=null},RetryWhenSubscriber.prototype.notifyNext=function(t,e,n,i,r){var o=this,s=o.errors,a=o.retries,c=o.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this.unsubscribe(),this.isStopped=!1,this.closed=!1,this.errors=s,this.retries=a,this.retriesSubscription=c,this.source.subscribe(this)},RetryWhenSubscriber}(a.OuterSubscriber)},function(t,e,n){"use strict";function sample(t){return this.lift(new s(t))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(7),o=n(8);e.sample=sample;var s=function(){function SampleOperator(t){this.notifier=t}return SampleOperator.prototype.call=function(t,e){return e._subscribe(new a(t,this.notifier))},SampleOperator}(),a=function(t){function SampleSubscriber(e,n){t.call(this,e),this.hasValue=!1,this.add(o.subscribeToResult(this,n))}return i(SampleSubscriber,t),SampleSubscriber.prototype._next=function(t){this.value=t,this.hasValue=!0},SampleSubscriber.prototype.notifyNext=function(t,e,n,i,r){this.emitValue()},SampleSubscriber.prototype.notifyComplete=function(){this.emitValue()},SampleSubscriber.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},SampleSubscriber}(r.OuterSubscriber)},function(t,e,n){"use strict";function sampleTime(t,e){return void 0===e&&(e=o.async),this.lift(new s(t,e))}function dispatchNotification(t){var e=t.subscriber,n=t.period;e.notifyNext(),this.schedule(t,n)}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4),o=n(37);e.sampleTime=sampleTime;var s=function(){function SampleTimeOperator(t,e){this.period=t,this.scheduler=e}return SampleTimeOperator.prototype.call=function(t,e){return e._subscribe(new a(t,this.period,this.scheduler))},SampleTimeOperator}(),a=function(t){function SampleTimeSubscriber(e,n,i){t.call(this,e),this.period=n,this.scheduler=i,this.hasValue=!1,this.add(i.schedule(dispatchNotification,n,{subscriber:this,period:n}))}return i(SampleTimeSubscriber,t),SampleTimeSubscriber.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},SampleTimeSubscriber.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},SampleTimeSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function scan(t,e){return this.lift(new o(t,e))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4);e.scan=scan;var o=function(){function ScanOperator(t,e){this.accumulator=t,this.seed=e}return ScanOperator.prototype.call=function(t,e){return e._subscribe(new s(t,this.accumulator,this.seed))},ScanOperator}(),s=function(t){function ScanSubscriber(e,n,i){t.call(this,e),this.accumulator=n,this.index=0,this.accumulatorSet=!1,this.seed=i,this.accumulatorSet="undefined"!=typeof i}return i(ScanSubscriber,t),Object.defineProperty(ScanSubscriber.prototype,"seed",{get:function(){return this._seed},set:function(t){this.accumulatorSet=!0,this._seed=t},enumerable:!0,configurable:!0}),ScanSubscriber.prototype._next=function(t){return this.accumulatorSet?this._tryNext(t):(this.seed=t,void this.destination.next(t))},ScanSubscriber.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(i){this.destination.error(i)}this.seed=e,this.destination.next(e)},ScanSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function sequenceEqual(t,e){return this.lift(new a(t,e))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4),o=n(28),s=n(27);e.sequenceEqual=sequenceEqual;var a=function(){function SequenceEqualOperator(t,e){this.compareTo=t,this.comparor=e}return SequenceEqualOperator.prototype.call=function(t,e){return e._subscribe(new c(t,this.compareTo,this.comparor))},SequenceEqualOperator}();e.SequenceEqualOperator=a;var c=function(t){function SequenceEqualSubscriber(e,n,i){t.call(this,e),this.compareTo=n,this.comparor=i,this._a=[],this._b=[],this._oneComplete=!1,this.add(n.subscribe(new u(e,this)))}return i(SequenceEqualSubscriber,t),SequenceEqualSubscriber.prototype._next=function(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())},SequenceEqualSubscriber.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},SequenceEqualSubscriber.prototype.checkValues=function(){for(var t=this,e=t._a,n=t._b,i=t.comparor;e.length>0&&n.length>0;){var r=e.shift(),a=n.shift(),c=!1;i?(c=o.tryCatch(i)(r,a),c===s.errorObject&&this.destination.error(s.errorObject.e)):c=r===a,c||this.emit(!1)}},SequenceEqualSubscriber.prototype.emit=function(t){var e=this.destination;e.next(t),e.complete()},SequenceEqualSubscriber.prototype.nextB=function(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())},SequenceEqualSubscriber}(r.Subscriber);e.SequenceEqualSubscriber=c;var u=function(t){function SequenceEqualCompareToSubscriber(e,n){t.call(this,e),this.parent=n}return i(SequenceEqualCompareToSubscriber,t),SequenceEqualCompareToSubscriber.prototype._next=function(t){this.parent.nextB(t)},SequenceEqualCompareToSubscriber.prototype._error=function(t){this.parent.error(t)},SequenceEqualCompareToSubscriber.prototype._complete=function(){this.parent._complete()},SequenceEqualCompareToSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function shareSubjectFactory(){return new r.Subject}function share(){return i.multicast.call(this,shareSubjectFactory).refCount()}var i=n(114),r=n(18);e.share=share},function(t,e,n){"use strict";function single(t){return this.lift(new s(t,this))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4),o=n(146);e.single=single;var s=function(){function SingleOperator(t,e){this.predicate=t,this.source=e}return SingleOperator.prototype.call=function(t,e){return e._subscribe(new a(t,this.predicate,this.source))},SingleOperator}(),a=function(t){function SingleSubscriber(e,n,i){t.call(this,e),this.predicate=n,this.source=i,this.seenValue=!1,this.index=0}return i(SingleSubscriber,t),SingleSubscriber.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},SingleSubscriber.prototype._next=function(t){var e=this.predicate;this.index++,e?this.tryNext(t):this.applySingleValue(t)},SingleSubscriber.prototype.tryNext=function(t){try{var e=this.predicate(t,this.index,this.source);e&&this.applySingleValue(t)}catch(n){this.destination.error(n)}},SingleSubscriber.prototype._complete=function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new o.EmptyError)},SingleSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function skip(t){return this.lift(new o(t))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4);e.skip=skip;var o=function(){function SkipOperator(t){this.total=t}return SkipOperator.prototype.call=function(t,e){return e._subscribe(new s(t,this.total))},SkipOperator}(),s=function(t){function SkipSubscriber(e,n){t.call(this,e),this.total=n,this.count=0}return i(SkipSubscriber,t),SkipSubscriber.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},SkipSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function skipUntil(t){return this.lift(new s(t))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(7),o=n(8);e.skipUntil=skipUntil;var s=function(){function SkipUntilOperator(t){this.notifier=t}return SkipUntilOperator.prototype.call=function(t,e){return e._subscribe(new a(t,this.notifier))},SkipUntilOperator}(),a=function(t){function SkipUntilSubscriber(e,n){t.call(this,e),this.hasValue=!1,this.isInnerStopped=!1,this.add(o.subscribeToResult(this,n))}return i(SkipUntilSubscriber,t),SkipUntilSubscriber.prototype._next=function(e){this.hasValue&&t.prototype._next.call(this,e)},SkipUntilSubscriber.prototype._complete=function(){this.isInnerStopped?t.prototype._complete.call(this):this.unsubscribe()},SkipUntilSubscriber.prototype.notifyNext=function(t,e,n,i,r){this.hasValue=!0},SkipUntilSubscriber.prototype.notifyComplete=function(){this.isInnerStopped=!0,this.isStopped&&t.prototype._complete.call(this)},SkipUntilSubscriber}(r.OuterSubscriber)},function(t,e,n){"use strict";function skipWhile(t){return this.lift(new o(t))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4);e.skipWhile=skipWhile;var o=function(){function SkipWhileOperator(t){this.predicate=t}return SkipWhileOperator.prototype.call=function(t,e){return e._subscribe(new s(t,this.predicate))},SkipWhileOperator}(),s=function(t){function SkipWhileSubscriber(e,n){t.call(this,e),this.predicate=n,this.skipping=!0,this.index=0}return i(SkipWhileSubscriber,t),SkipWhileSubscriber.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},SkipWhileSubscriber.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(n){this.destination.error(n)}},SkipWhileSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function startWith(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=t[t.length-1];a.isScheduler(n)?t.pop():n=null;var c=t.length;return 1===c?s.concatStatic(new r.ScalarObservable(t[0],n),this):c>1?s.concatStatic(new i.ArrayObservable(t,n),this):s.concatStatic(new o.EmptyObservable(n),this)}var i=n(71),r=n(406),o=n(85),s=n(409),a=n(86);e.startWith=startWith},function(t,e,n){"use strict";function subscribeOn(t,e){return void 0===e&&(e=0),new i.SubscribeOnObservable(this,e,t)}var i=n(1187);e.subscribeOn=subscribeOn},function(t,e,n){"use strict";function _switch(){return this.lift(new s)}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(7),o=n(8);e._switch=_switch;var s=function(){function SwitchOperator(){}return SwitchOperator.prototype.call=function(t,e){return e._subscribe(new a(t))},SwitchOperator}(),a=function(t){function SwitchSubscriber(e){t.call(this,e),this.active=0,this.hasCompleted=!1}return i(SwitchSubscriber,t),SwitchSubscriber.prototype._next=function(t){this.unsubscribeInner(),this.active++,this.add(this.innerSubscription=o.subscribeToResult(this,t))},SwitchSubscriber.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&this.destination.complete()},SwitchSubscriber.prototype.unsubscribeInner=function(){this.active=this.active>0?this.active-1:0;var t=this.innerSubscription;t&&(t.unsubscribe(),this.remove(t))},SwitchSubscriber.prototype.notifyNext=function(t,e,n,i,r){this.destination.next(e)},SwitchSubscriber.prototype.notifyError=function(t){this.destination.error(t)},SwitchSubscriber.prototype.notifyComplete=function(){this.unsubscribeInner(),this.hasCompleted&&0===this.active&&this.destination.complete()},SwitchSubscriber}(r.OuterSubscriber)},function(t,e,n){"use strict";function switchMap(t,e){return this.lift(new s(t,e))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(7),o=n(8);e.switchMap=switchMap;var s=function(){function SwitchMapOperator(t,e){this.project=t,this.resultSelector=e}return SwitchMapOperator.prototype.call=function(t,e){return e._subscribe(new a(t,this.project,this.resultSelector))},SwitchMapOperator}(),a=function(t){function SwitchMapSubscriber(e,n,i){t.call(this,e),this.project=n,this.resultSelector=i,this.index=0}return i(SwitchMapSubscriber,t),SwitchMapSubscriber.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this._innerSub(e,t,n)},SwitchMapSubscriber.prototype._innerSub=function(t,e,n){var i=this.innerSubscription;i&&i.unsubscribe(),this.add(this.innerSubscription=o.subscribeToResult(this,t,e,n))},SwitchMapSubscriber.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},SwitchMapSubscriber.prototype._unsubscribe=function(){this.innerSubscription=null},SwitchMapSubscriber.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},SwitchMapSubscriber.prototype.notifyNext=function(t,e,n,i,r){this.resultSelector?this._tryNotifyNext(t,e,n,i):this.destination.next(e)},SwitchMapSubscriber.prototype._tryNotifyNext=function(t,e,n,i){var r;try{r=this.resultSelector(t,e,n,i)}catch(o){return void this.destination.error(o)}this.destination.next(r)},SwitchMapSubscriber}(r.OuterSubscriber)},function(t,e,n){"use strict";function switchMapTo(t,e){return this.lift(new s(t,e))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(7),o=n(8);e.switchMapTo=switchMapTo;var s=function(){function SwitchMapToOperator(t,e){this.observable=t,this.resultSelector=e}return SwitchMapToOperator.prototype.call=function(t,e){return e._subscribe(new a(t,this.observable,this.resultSelector))},SwitchMapToOperator}(),a=function(t){function SwitchMapToSubscriber(e,n,i){t.call(this,e),this.inner=n,this.resultSelector=i,this.index=0}return i(SwitchMapToSubscriber,t),SwitchMapToSubscriber.prototype._next=function(t){var e=this.innerSubscription;e&&e.unsubscribe(),this.add(this.innerSubscription=o.subscribeToResult(this,this.inner,t,this.index++))},SwitchMapToSubscriber.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},SwitchMapToSubscriber.prototype._unsubscribe=function(){this.innerSubscription=null},SwitchMapToSubscriber.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},SwitchMapToSubscriber.prototype.notifyNext=function(t,e,n,i,r){var o=this,s=o.resultSelector,a=o.destination;s?this.tryResultSelector(t,e,n,i):a.next(e)},SwitchMapToSubscriber.prototype.tryResultSelector=function(t,e,n,i){var r,o=this,s=o.resultSelector,a=o.destination;try{r=s(t,e,n,i)}catch(c){return void a.error(c)}a.next(r)},SwitchMapToSubscriber}(r.OuterSubscriber)},function(t,e,n){"use strict";function take(t){return 0===t?new s.EmptyObservable:this.lift(new a(t))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4),o=n(207),s=n(85);e.take=take;var a=function(){function TakeOperator(t){if(this.total=t,this.total<0)throw new o.ArgumentOutOfRangeError}return TakeOperator.prototype.call=function(t,e){return e._subscribe(new c(t,this.total))},TakeOperator}(),c=function(t){function TakeSubscriber(e,n){t.call(this,e),this.total=n,this.count=0}return i(TakeSubscriber,t),TakeSubscriber.prototype._next=function(t){var e=this.total;++this.count<=e&&(this.destination.next(t),this.count===e&&(this.destination.complete(),this.unsubscribe()))},TakeSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function takeLast(t){return 0===t?new s.EmptyObservable:this.lift(new a(t))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4),o=n(207),s=n(85);e.takeLast=takeLast;var a=function(){function TakeLastOperator(t){if(this.total=t,this.total<0)throw new o.ArgumentOutOfRangeError}return TakeLastOperator.prototype.call=function(t,e){return e._subscribe(new c(t,this.total))},TakeLastOperator}(),c=function(t){function TakeLastSubscriber(e,n){t.call(this,e),this.total=n,this.ring=new Array,this.count=0}return i(TakeLastSubscriber,t),TakeLastSubscriber.prototype._next=function(t){var e=this.ring,n=this.total,i=this.count++;if(e.length<n)e.push(t);else{var r=i%n;e[r]=t}},TakeLastSubscriber.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,i=this.ring,r=0;r<n;r++){var o=e++%n;t.next(i[o])}t.complete()},TakeLastSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function takeUntil(t){return this.lift(new s(t))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(7),o=n(8);e.takeUntil=takeUntil;var s=function(){function TakeUntilOperator(t){this.notifier=t}return TakeUntilOperator.prototype.call=function(t,e){return e._subscribe(new a(t,this.notifier))},TakeUntilOperator}(),a=function(t){function TakeUntilSubscriber(e,n){t.call(this,e),this.notifier=n,this.add(o.subscribeToResult(this,n))}return i(TakeUntilSubscriber,t),TakeUntilSubscriber.prototype.notifyNext=function(t,e,n,i,r){this.complete()},TakeUntilSubscriber.prototype.notifyComplete=function(){},TakeUntilSubscriber}(r.OuterSubscriber)},function(t,e,n){"use strict";function takeWhile(t){return this.lift(new o(t))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4);e.takeWhile=takeWhile;var o=function(){function TakeWhileOperator(t){this.predicate=t}return TakeWhileOperator.prototype.call=function(t,e){return e._subscribe(new s(t,this.predicate))},TakeWhileOperator}(),s=function(t){function TakeWhileSubscriber(e,n){t.call(this,e),this.predicate=n,this.index=0}return i(TakeWhileSubscriber,t),TakeWhileSubscriber.prototype._next=function(t){var e,n=this.destination;try{e=this.predicate(t,this.index++)}catch(i){return void n.error(i)}this.nextOrComplete(t,e)},TakeWhileSubscriber.prototype.nextOrComplete=function(t,e){var n=this.destination;Boolean(e)?n.next(t):n.complete()},TakeWhileSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function throttle(t){return this.lift(new s(t))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(7),o=n(8);e.throttle=throttle;var s=function(){function ThrottleOperator(t){this.durationSelector=t}return ThrottleOperator.prototype.call=function(t,e){return e._subscribe(new a(t,this.durationSelector))},ThrottleOperator}(),a=function(t){function ThrottleSubscriber(e,n){t.call(this,e),this.destination=e,this.durationSelector=n}return i(ThrottleSubscriber,t),ThrottleSubscriber.prototype._next=function(t){this.throttled||this.tryDurationSelector(t)},ThrottleSubscriber.prototype.tryDurationSelector=function(t){var e=null;try{e=this.durationSelector(t)}catch(n){return void this.destination.error(n)}this.emitAndThrottle(t,e)},ThrottleSubscriber.prototype.emitAndThrottle=function(t,e){this.add(this.throttled=o.subscribeToResult(this,e)),this.destination.next(t)},ThrottleSubscriber.prototype._unsubscribe=function(){var t=this.throttled;t&&(this.remove(t),this.throttled=null,t.unsubscribe())},ThrottleSubscriber.prototype.notifyNext=function(t,e,n,i,r){this._unsubscribe()},ThrottleSubscriber.prototype.notifyComplete=function(){this._unsubscribe()},ThrottleSubscriber}(r.OuterSubscriber)},function(t,e,n){"use strict";function throttleTime(t,e){return void 0===e&&(e=o.async),this.lift(new s(t,e))}function dispatchNext(t){var e=t.subscriber;e.clearThrottle()}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4),o=n(37);e.throttleTime=throttleTime;var s=function(){function ThrottleTimeOperator(t,e){this.duration=t,this.scheduler=e}return ThrottleTimeOperator.prototype.call=function(t,e){return e._subscribe(new a(t,this.duration,this.scheduler))},ThrottleTimeOperator}(),a=function(t){function ThrottleTimeSubscriber(e,n,i){t.call(this,e),this.duration=n,this.scheduler=i}return i(ThrottleTimeSubscriber,t),ThrottleTimeSubscriber.prototype._next=function(t){this.throttled||(this.add(this.throttled=this.scheduler.schedule(dispatchNext,this.duration,{subscriber:this})),this.destination.next(t))},ThrottleTimeSubscriber.prototype.clearThrottle=function(){var t=this.throttled;t&&(t.unsubscribe(),this.remove(t),this.throttled=null)},ThrottleTimeSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function timeout(t,e,n){void 0===e&&(e=null),void 0===n&&(n=r.async);var i=o.isDate(t),s=i?+t-n.now():Math.abs(t);return this.lift(new a(s,i,e,n))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(37),o=n(208),s=n(4);e.timeout=timeout;var a=function(){function TimeoutOperator(t,e,n,i){this.waitFor=t,this.absoluteTimeout=e,this.errorToSend=n,this.scheduler=i}return TimeoutOperator.prototype.call=function(t,e){return e._subscribe(new c(t,this.absoluteTimeout,this.waitFor,this.errorToSend,this.scheduler))},TimeoutOperator}(),c=function(t){function TimeoutSubscriber(e,n,i,r,o){t.call(this,e),this.absoluteTimeout=n,this.waitFor=i,this.errorToSend=r,this.scheduler=o,this.index=0,this._previousIndex=0,this._hasCompleted=!1,this.scheduleTimeout()}return i(TimeoutSubscriber,t),Object.defineProperty(TimeoutSubscriber.prototype,"previousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0}),Object.defineProperty(TimeoutSubscriber.prototype,"hasCompleted",{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0}),TimeoutSubscriber.dispatchTimeout=function(t){var e=t.subscriber,n=t.index;e.hasCompleted||e.previousIndex!==n||e.notifyTimeout()},TimeoutSubscriber.prototype.scheduleTimeout=function(){var t=this.index;this.scheduler.schedule(TimeoutSubscriber.dispatchTimeout,this.waitFor,{subscriber:this,index:t}),this.index++,
this._previousIndex=t},TimeoutSubscriber.prototype._next=function(t){this.destination.next(t),this.absoluteTimeout||this.scheduleTimeout()},TimeoutSubscriber.prototype._error=function(t){this.destination.error(t),this._hasCompleted=!0},TimeoutSubscriber.prototype._complete=function(){this.destination.complete(),this._hasCompleted=!0},TimeoutSubscriber.prototype.notifyTimeout=function(){this.error(this.errorToSend||new Error("timeout"))},TimeoutSubscriber}(s.Subscriber)},function(t,e,n){"use strict";function timeoutWith(t,e,n){void 0===n&&(n=r.async);var i=o.isDate(t),s=i?+t-n.now():Math.abs(t);return this.lift(new c(s,i,e,n))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(37),o=n(208),s=n(7),a=n(8);e.timeoutWith=timeoutWith;var c=function(){function TimeoutWithOperator(t,e,n,i){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=i}return TimeoutWithOperator.prototype.call=function(t,e){return e._subscribe(new u(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},TimeoutWithOperator}(),u=function(t){function TimeoutWithSubscriber(e,n,i,r,o){t.call(this),this.destination=e,this.absoluteTimeout=n,this.waitFor=i,this.withObservable=r,this.scheduler=o,this.timeoutSubscription=void 0,this.index=0,this._previousIndex=0,this._hasCompleted=!1,e.add(this),this.scheduleTimeout()}return i(TimeoutWithSubscriber,t),Object.defineProperty(TimeoutWithSubscriber.prototype,"previousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0}),Object.defineProperty(TimeoutWithSubscriber.prototype,"hasCompleted",{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0}),TimeoutWithSubscriber.dispatchTimeout=function(t){var e=t.subscriber,n=t.index;e.hasCompleted||e.previousIndex!==n||e.handleTimeout()},TimeoutWithSubscriber.prototype.scheduleTimeout=function(){var t=this.index,e={subscriber:this,index:t};this.scheduler.schedule(TimeoutWithSubscriber.dispatchTimeout,this.waitFor,e),this.index++,this._previousIndex=t},TimeoutWithSubscriber.prototype._next=function(t){this.destination.next(t),this.absoluteTimeout||this.scheduleTimeout()},TimeoutWithSubscriber.prototype._error=function(t){this.destination.error(t),this._hasCompleted=!0},TimeoutWithSubscriber.prototype._complete=function(){this.destination.complete(),this._hasCompleted=!0},TimeoutWithSubscriber.prototype.handleTimeout=function(){if(!this.closed){var t=this.withObservable;this.unsubscribe(),this.destination.add(this.timeoutSubscription=a.subscribeToResult(this,t))}},TimeoutWithSubscriber}(s.OuterSubscriber)},function(t,e,n){"use strict";function toArray(){return this.lift(new o)}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4);e.toArray=toArray;var o=function(){function ToArrayOperator(){}return ToArrayOperator.prototype.call=function(t,e){return e._subscribe(new s(t))},ToArrayOperator}(),s=function(t){function ToArraySubscriber(e){t.call(this,e),this.array=[]}return i(ToArraySubscriber,t),ToArraySubscriber.prototype._next=function(t){this.array.push(t)},ToArraySubscriber.prototype._complete=function(){this.destination.next(this.array),this.destination.complete()},ToArraySubscriber}(r.Subscriber)},function(t,e,n){"use strict";function window(t){return this.lift(new a(t))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(18),o=n(7),s=n(8);e.window=window;var a=function(){function WindowOperator(t){this.windowBoundaries=t}return WindowOperator.prototype.call=function(t,e){var n=new c(t),i=e._subscribe(n);return i.closed||n.add(s.subscribeToResult(n,this.windowBoundaries)),i},WindowOperator}(),c=function(t){function WindowSubscriber(e){t.call(this,e),this.window=new r.Subject,e.next(this.window)}return i(WindowSubscriber,t),WindowSubscriber.prototype.notifyNext=function(t,e,n,i,r){this.openWindow()},WindowSubscriber.prototype.notifyError=function(t,e){this._error(t)},WindowSubscriber.prototype.notifyComplete=function(t){this._complete()},WindowSubscriber.prototype._next=function(t){this.window.next(t)},WindowSubscriber.prototype._error=function(t){this.window.error(t),this.destination.error(t)},WindowSubscriber.prototype._complete=function(){this.window.complete(),this.destination.complete()},WindowSubscriber.prototype._unsubscribe=function(){this.window=null},WindowSubscriber.prototype.openWindow=function(){var t=this.window;t&&t.complete();var e=this.destination,n=this.window=new r.Subject;e.next(n)},WindowSubscriber}(o.OuterSubscriber)},function(t,e,n){"use strict";function windowCount(t,e){return void 0===e&&(e=0),this.lift(new s(t,e))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(4),o=n(18);e.windowCount=windowCount;var s=function(){function WindowCountOperator(t,e){this.windowSize=t,this.startWindowEvery=e}return WindowCountOperator.prototype.call=function(t,e){return e._subscribe(new a(t,this.windowSize,this.startWindowEvery))},WindowCountOperator}(),a=function(t){function WindowCountSubscriber(e,n,i){t.call(this,e),this.destination=e,this.windowSize=n,this.startWindowEvery=i,this.windows=[new o.Subject],this.count=0,e.next(this.windows[0])}return i(WindowCountSubscriber,t),WindowCountSubscriber.prototype._next=function(t){for(var e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,i=this.windowSize,r=this.windows,s=r.length,a=0;a<s&&!this.closed;a++)r[a].next(t);var c=this.count-i+1;if(c>=0&&c%e===0&&!this.closed&&r.shift().complete(),++this.count%e===0&&!this.closed){var u=new o.Subject;r.push(u),n.next(u)}},WindowCountSubscriber.prototype._error=function(t){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)},WindowCountSubscriber.prototype._complete=function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()},WindowCountSubscriber.prototype._unsubscribe=function(){this.count=0,this.windows=null},WindowCountSubscriber}(r.Subscriber)},function(t,e,n){"use strict";function windowTime(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=o.async),this.lift(new a(t,e,n))}function dispatchWindowTimeSpanOnly(t){var e=t.subscriber,n=t.windowTimeSpan,i=t.window;i&&i.complete(),t.window=e.openWindow(),this.schedule(t,n)}function dispatchWindowCreation(t){var e=t.windowTimeSpan,n=t.subscriber,i=t.scheduler,r=t.windowCreationInterval,o=n.openWindow(),s=this,a={action:s,subscription:null},c={subscriber:n,window:o,context:a};a.subscription=i.schedule(dispatchWindowClose,e,c),s.add(a.subscription),s.schedule(t,r)}function dispatchWindowClose(t){var e=t.subscriber,n=t.window,i=t.context;i&&i.action&&i.subscription&&i.action.remove(i.subscription),e.closeWindow(n)}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(18),o=n(37),s=n(4);e.windowTime=windowTime;var a=function(){function WindowTimeOperator(t,e,n){this.windowTimeSpan=t,this.windowCreationInterval=e,this.scheduler=n}return WindowTimeOperator.prototype.call=function(t,e){return e._subscribe(new c(t,this.windowTimeSpan,this.windowCreationInterval,this.scheduler))},WindowTimeOperator}(),c=function(t){function WindowTimeSubscriber(e,n,i,r){if(t.call(this,e),this.destination=e,this.windowTimeSpan=n,this.windowCreationInterval=i,this.scheduler=r,this.windows=[],null!==i&&i>=0){var o=this.openWindow(),s={subscriber:this,window:o,context:null},a={windowTimeSpan:n,windowCreationInterval:i,subscriber:this,scheduler:r};this.add(r.schedule(dispatchWindowClose,n,s)),this.add(r.schedule(dispatchWindowCreation,i,a))}else{var c=this.openWindow(),u={subscriber:this,window:c,windowTimeSpan:n};this.add(r.schedule(dispatchWindowTimeSpanOnly,n,u))}}return i(WindowTimeSubscriber,t),WindowTimeSubscriber.prototype._next=function(t){for(var e=this.windows,n=e.length,i=0;i<n;i++){var r=e[i];r.closed||r.next(t)}},WindowTimeSubscriber.prototype._error=function(t){for(var e=this.windows;e.length>0;)e.shift().error(t);this.destination.error(t)},WindowTimeSubscriber.prototype._complete=function(){for(var t=this.windows;t.length>0;){var e=t.shift();e.closed||e.complete()}this.destination.complete()},WindowTimeSubscriber.prototype.openWindow=function(){var t=new r.Subject;this.windows.push(t);var e=this.destination;return e.next(t),t},WindowTimeSubscriber.prototype.closeWindow=function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)},WindowTimeSubscriber}(s.Subscriber)},function(t,e,n){"use strict";function windowToggle(t,e){return this.lift(new l(t,e))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(18),o=n(26),s=n(28),a=n(27),c=n(7),u=n(8);e.windowToggle=windowToggle;var l=function(){function WindowToggleOperator(t,e){this.openings=t,this.closingSelector=e}return WindowToggleOperator.prototype.call=function(t,e){return e._subscribe(new h(t,this.openings,this.closingSelector))},WindowToggleOperator}(),h=function(t){function WindowToggleSubscriber(e,n,i){t.call(this,e),this.openings=n,this.closingSelector=i,this.contexts=[],this.add(this.openSubscription=u.subscribeToResult(this,n,n))}return i(WindowToggleSubscriber,t),WindowToggleSubscriber.prototype._next=function(t){var e=this.contexts;if(e)for(var n=e.length,i=0;i<n;i++)e[i].window.next(t)},WindowToggleSubscriber.prototype._error=function(e){var n=this.contexts;if(this.contexts=null,n)for(var i=n.length,r=-1;++r<i;){var o=n[r];o.window.error(e),o.subscription.unsubscribe()}t.prototype._error.call(this,e)},WindowToggleSubscriber.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var n=e.length,i=-1;++i<n;){var r=e[i];r.window.complete(),r.subscription.unsubscribe()}t.prototype._complete.call(this)},WindowToggleSubscriber.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,n=-1;++n<e;){var i=t[n];i.window.unsubscribe(),i.subscription.unsubscribe()}},WindowToggleSubscriber.prototype.notifyNext=function(t,e,n,i,c){if(t===this.openings){var l=this.closingSelector,h=s.tryCatch(l)(e);if(h===a.errorObject)return this.error(a.errorObject.e);var p=new r.Subject,f=new o.Subscription,d={window:p,subscription:f};this.contexts.push(d);var g=u.subscribeToResult(this,h,d);g.closed?this.closeWindow(this.contexts.length-1):(g.context=d,f.add(g)),this.destination.next(p)}else this.closeWindow(this.contexts.indexOf(t))},WindowToggleSubscriber.prototype.notifyError=function(t){this.error(t)},WindowToggleSubscriber.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},WindowToggleSubscriber.prototype.closeWindow=function(t){if(t!==-1){var e=this.contexts,n=e[t],i=n.window,r=n.subscription;e.splice(t,1),i.complete(),r.unsubscribe()}},WindowToggleSubscriber}(c.OuterSubscriber)},function(t,e,n){"use strict";function windowWhen(t){return this.lift(new u(t))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(18),o=n(28),s=n(27),a=n(7),c=n(8);e.windowWhen=windowWhen;var u=function(){function WindowOperator(t){this.closingSelector=t}return WindowOperator.prototype.call=function(t,e){return e._subscribe(new l(t,this.closingSelector))},WindowOperator}(),l=function(t){function WindowSubscriber(e,n){t.call(this,e),this.destination=e,this.closingSelector=n,this.openWindow()}return i(WindowSubscriber,t),WindowSubscriber.prototype.notifyNext=function(t,e,n,i,r){this.openWindow(r)},WindowSubscriber.prototype.notifyError=function(t,e){this._error(t)},WindowSubscriber.prototype.notifyComplete=function(t){this.openWindow(t)},WindowSubscriber.prototype._next=function(t){this.window.next(t)},WindowSubscriber.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},WindowSubscriber.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},WindowSubscriber.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},WindowSubscriber.prototype.openWindow=function(t){void 0===t&&(t=null),t&&(this.remove(t),t.unsubscribe());var e=this.window;e&&e.complete();var n=this.window=new r.Subject;this.destination.next(n);var i=o.tryCatch(this.closingSelector)();if(i===s.errorObject){var a=s.errorObject.e;this.destination.error(a),this.window.error(a)}else this.add(this.closingNotification=c.subscribeToResult(this,i))},WindowSubscriber}(a.OuterSubscriber)},function(t,e,n){"use strict";function withLatestFrom(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n;"function"==typeof t[t.length-1]&&(n=t.pop());var i=t;return this.lift(new s(i,n))}var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(7),o=n(8);e.withLatestFrom=withLatestFrom;var s=function(){function WithLatestFromOperator(t,e){this.observables=t,this.project=e}return WithLatestFromOperator.prototype.call=function(t,e){return e._subscribe(new a(t,this.observables,this.project))},WithLatestFromOperator}(),a=function(t){function WithLatestFromSubscriber(e,n,i){t.call(this,e),this.observables=n,this.project=i,this.toRespond=[];var r=n.length;this.values=new Array(r);for(var s=0;s<r;s++)this.toRespond.push(s);for(var s=0;s<r;s++){var a=n[s];this.add(o.subscribeToResult(this,a,a,s))}}return i(WithLatestFromSubscriber,t),WithLatestFromSubscriber.prototype.notifyNext=function(t,e,n,i,r){this.values[n]=e;var o=this.toRespond;if(o.length>0){var s=o.indexOf(n);s!==-1&&o.splice(s,1)}},WithLatestFromSubscriber.prototype.notifyComplete=function(){},WithLatestFromSubscriber.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},WithLatestFromSubscriber.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)},WithLatestFromSubscriber}(r.OuterSubscriber)},function(t,e,n){"use strict";function zipAll(t){return this.lift(new i.ZipOperator(t))}var i=n(413);e.zipAll=zipAll},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(26),o=function(t){function Action(e,n){t.call(this)}return i(Action,t),Action.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},Action}(r.Subscription);e.Action=o},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(143),o=n(1300),s=function(t){function AnimationFrameAction(e,n){t.call(this,e,n),this.scheduler=e,this.work=n}return i(AnimationFrameAction,t),AnimationFrameAction.prototype.requestAsyncId=function(e,n,i){return void 0===i&&(i=0),null!==i&&i>0?t.prototype.requestAsyncId.call(this,e,n,i):(e.actions.push(this),e.scheduled||(e.scheduled=o.AnimationFrame.requestAnimationFrame(e.flush.bind(e,null))))},AnimationFrameAction.prototype.recycleAsyncId=function(e,n,i){return void 0===i&&(i=0),null!==i&&i>0?t.prototype.recycleAsyncId.call(this,e,n,i):void(0===e.actions.length&&(o.AnimationFrame.cancelAnimationFrame(n),e.scheduled=void 0))},AnimationFrameAction}(r.AsyncAction);e.AnimationFrameAction=s},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(144),o=function(t){function AnimationFrameScheduler(){t.apply(this,arguments)}return i(AnimationFrameScheduler,t),AnimationFrameScheduler.prototype.flush=function(){this.active=!0,this.scheduled=void 0;var t,e=this.actions,n=-1,i=e.length,r=e.shift();do if(t=r.execute(r.state,r.delay))break;while(++n<i&&(r=e.shift()));if(this.active=!1,t){for(;++n<i&&(r=e.shift());)r.unsubscribe();throw t}},AnimationFrameScheduler}(r.AsyncScheduler);e.AnimationFrameScheduler=o},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(1302),o=n(143),s=function(t){function AsapAction(e,n){t.call(this,e,n),this.scheduler=e,this.work=n}return i(AsapAction,t),AsapAction.prototype.requestAsyncId=function(e,n,i){return void 0===i&&(i=0),null!==i&&i>0?t.prototype.requestAsyncId.call(this,e,n,i):(e.actions.push(this),e.scheduled||(e.scheduled=r.Immediate.setImmediate(e.flush.bind(e,null))))},AsapAction.prototype.recycleAsyncId=function(e,n,i){return void 0===i&&(i=0),null!==i&&i>0?t.prototype.recycleAsyncId.call(this,e,n,i):void(0===e.actions.length&&(r.Immediate.clearImmediate(n),e.scheduled=void 0))},AsapAction}(o.AsyncAction);e.AsapAction=s},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(144),o=function(t){function AsapScheduler(){t.apply(this,arguments)}return i(AsapScheduler,t),AsapScheduler.prototype.flush=function(){this.active=!0,this.scheduled=void 0;var t,e=this.actions,n=-1,i=e.length,r=e.shift();do if(t=r.execute(r.state,r.delay))break;while(++n<i&&(r=e.shift()));if(this.active=!1,t){for(;++n<i&&(r=e.shift());)r.unsubscribe();throw t}},AsapScheduler}(r.AsyncScheduler);e.AsapScheduler=o},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(143),o=function(t){function QueueAction(e,n){t.call(this,e,n),this.scheduler=e,this.work=n}return i(QueueAction,t),QueueAction.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},QueueAction.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},QueueAction.prototype.requestAsyncId=function(e,n,i){return void 0===i&&(i=0),null!==i&&i>0?t.prototype.requestAsyncId.call(this,e,n,i):e.flush(this)},QueueAction}(r.AsyncAction);e.QueueAction=o},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(144),o=function(t){function QueueScheduler(){t.apply(this,arguments)}return i(QueueScheduler,t),QueueScheduler}(r.AsyncScheduler);e.QueueScheduler=o},function(t,e,n){"use strict";var i=n(1290),r=n(1291);e.animationFrame=new r.AnimationFrameScheduler(i.AnimationFrameAction)},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(0),o=n(26),s=n(600),a=n(602),c=function(t){function ColdObservable(e,n){t.call(this,function(t){var e=this,n=e.logSubscribedFrame();return t.add(new o.Subscription(function(){e.logUnsubscribedFrame(n)})),e.scheduleMessages(t),t}),this.messages=e,this.subscriptions=[],this.scheduler=n}return i(ColdObservable,t),ColdObservable.prototype.scheduleMessages=function(t){for(var e=this.messages.length,n=0;n<e;n++){var i=this.messages[n];t.add(this.scheduler.schedule(function(t){var e=t.message,n=t.subscriber;e.notification.observe(n)},i.frame,{message:i,subscriber:t}))}},ColdObservable}(r.Observable);e.ColdObservable=c,a.applyMixins(c,[s.SubscriptionLoggable])},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(18),o=n(26),s=n(600),a=n(602),c=function(t){function HotObservable(e,n){t.call(this),this.messages=e,this.subscriptions=[],this.scheduler=n}return i(HotObservable,t),HotObservable.prototype._subscribe=function(e){var n=this,i=n.logSubscribedFrame();return e.add(new o.Subscription(function(){n.logUnsubscribedFrame(i)})),t.prototype._subscribe.call(this,e)},HotObservable.prototype.setup=function(){for(var t=this,e=t.messages.length,n=0;n<e;n++)!function(){var e=t.messages[n];t.scheduler.schedule(function(){e.notification.observe(t)},e.frame)}()},HotObservable}(r.Subject);e.HotObservable=c,a.applyMixins(c,[s.SubscriptionLoggable])},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=n(0),o=n(141),s=n(1297),a=n(1298),c=n(599),u=n(596),l=750,h=function(t){function TestScheduler(e){t.call(this,u.VirtualAction,l),this.assertDeepEqual=e,this.hotObservables=[],this.coldObservables=[],this.flushTests=[]}return i(TestScheduler,t),TestScheduler.prototype.createTime=function(t){var e=t.indexOf("|");if(e===-1)throw new Error('marble diagram for time should have a completion marker "|"');return e*TestScheduler.frameTimeFactor},TestScheduler.prototype.createColdObservable=function(t,e,n){if(t.indexOf("^")!==-1)throw new Error('cold observable cannot have subscription offset "^"');if(t.indexOf("!")!==-1)throw new Error('cold observable cannot have unsubscription marker "!"');var i=TestScheduler.parseMarbles(t,e,n),r=new s.ColdObservable(i,this);return this.coldObservables.push(r),r},TestScheduler.prototype.createHotObservable=function(t,e,n){if(t.indexOf("!")!==-1)throw new Error('hot observable cannot have unsubscription marker "!"');var i=TestScheduler.parseMarbles(t,e,n),r=new a.HotObservable(i,this);return this.hotObservables.push(r),r},TestScheduler.prototype.materializeInnerObservable=function(t,e){var n=this,i=[];return t.subscribe(function(t){i.push({frame:n.frame-e,notification:o.Notification.createNext(t)})},function(t){i.push({frame:n.frame-e,notification:o.Notification.createError(t)})},function(){i.push({frame:n.frame-e,notification:o.Notification.createComplete()})}),i},TestScheduler.prototype.expectObservable=function(t,e){var n=this;void 0===e&&(e=null);var i,s=[],a={actual:s,ready:!1},c=TestScheduler.parseMarblesAsSubscriptions(e).unsubscribedFrame;return this.schedule(function(){i=t.subscribe(function(t){var e=t;t instanceof r.Observable&&(e=n.materializeInnerObservable(e,n.frame)),s.push({frame:n.frame,notification:o.Notification.createNext(e)})},function(t){s.push({frame:n.frame,notification:o.Notification.createError(t)})},function(){s.push({frame:n.frame,notification:o.Notification.createComplete()})})},0),c!==Number.POSITIVE_INFINITY&&this.schedule(function(){return i.unsubscribe()},c),this.flushTests.push(a),{toBe:function(t,e,n){a.ready=!0,a.expected=TestScheduler.parseMarbles(t,e,n,!0)}}},TestScheduler.prototype.expectSubscriptions=function(t){var e={actual:t,ready:!1};return this.flushTests.push(e),{toBe:function(t){var n="string"==typeof t?[t]:t;e.ready=!0,e.expected=n.map(function(t){return TestScheduler.parseMarblesAsSubscriptions(t)})}}},TestScheduler.prototype.flush=function(){for(var e=this.hotObservables;e.length>0;)e.shift().setup();t.prototype.flush.call(this);for(var n=this.flushTests.filter(function(t){return t.ready});n.length>0;){var i=n.shift();this.assertDeepEqual(i.actual,i.expected)}},TestScheduler.parseMarblesAsSubscriptions=function(t){if("string"!=typeof t)return new c.SubscriptionLog(Number.POSITIVE_INFINITY);for(var e=t.length,n=-1,i=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,o=0;o<e;o++){var s=o*this.frameTimeFactor,a=t[o];switch(a){case"-":case" ":break;case"(":n=s;break;case")":n=-1;break;case"^":if(i!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");i=n>-1?n:s;break;case"!":if(r!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");r=n>-1?n:s;break;default:throw new Error("there can only be '^' and '!' markers in a subscription marble diagram. Found instead '"+a+"'.")}}return r<0?new c.SubscriptionLog(i):new c.SubscriptionLog(i,r)},TestScheduler.parseMarbles=function(t,e,n,i){if(void 0===i&&(i=!1),t.indexOf("!")!==-1)throw new Error('conventional marble diagrams cannot have the unsubscription marker "!"');for(var r=t.length,a=[],c=t.indexOf("^"),u=c===-1?0:c*-this.frameTimeFactor,l="object"!=typeof e?function(t){return t}:function(t){return i&&e[t]instanceof s.ColdObservable?e[t].messages:e[t]},h=-1,p=0;p<r;p++){var f=p*this.frameTimeFactor+u,d=void 0,g=t[p];switch(g){case"-":case" ":break;case"(":h=f;break;case")":h=-1;break;case"|":d=o.Notification.createComplete();break;case"^":break;case"#":d=o.Notification.createError(n||"error");break;default:d=o.Notification.createNext(l(g))}d&&a.push({frame:h>-1?h:f,notification:d})}return a},TestScheduler}(u.VirtualTimeScheduler);e.TestScheduler=h},function(t,e,n){"use strict";var i=n(32),r=function(){function RequestAnimationFrameDefinition(t){t.requestAnimationFrame?(this.cancelAnimationFrame=t.cancelAnimationFrame.bind(t),this.requestAnimationFrame=t.requestAnimationFrame.bind(t)):t.mozRequestAnimationFrame?(this.cancelAnimationFrame=t.mozCancelAnimationFrame.bind(t),this.requestAnimationFrame=t.mozRequestAnimationFrame.bind(t)):t.webkitRequestAnimationFrame?(this.cancelAnimationFrame=t.webkitCancelAnimationFrame.bind(t),this.requestAnimationFrame=t.webkitRequestAnimationFrame.bind(t)):t.msRequestAnimationFrame?(this.cancelAnimationFrame=t.msCancelAnimationFrame.bind(t),this.requestAnimationFrame=t.msRequestAnimationFrame.bind(t)):t.oRequestAnimationFrame?(this.cancelAnimationFrame=t.oCancelAnimationFrame.bind(t),this.requestAnimationFrame=t.oRequestAnimationFrame.bind(t)):(this.cancelAnimationFrame=t.clearTimeout.bind(t),this.requestAnimationFrame=function(e){return t.setTimeout(e,1e3/60)})}return RequestAnimationFrameDefinition}();e.RequestAnimationFrameDefinition=r,e.AnimationFrame=new r(i.root)},function(t,e){"use strict";var n=function(){function FastMap(){this.values={}}return FastMap.prototype.delete=function(t){return this.values[t]=null,!0},FastMap.prototype.set=function(t,e){return this.values[t]=e,this},FastMap.prototype.get=function(t){return this.values[t]},FastMap.prototype.forEach=function(t,e){var n=this.values;for(var i in n)n.hasOwnProperty(i)&&null!==n[i]&&t.call(e,n[i],i)},FastMap.prototype.clear=function(){this.values={}},FastMap}();e.FastMap=n},function(t,e,n){"use strict";var i=n(32),r=function(){function ImmediateDefinition(t){if(this.root=t,t.setImmediate&&"function"==typeof t.setImmediate)this.setImmediate=t.setImmediate.bind(t),this.clearImmediate=t.clearImmediate.bind(t);else{this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.canUseProcessNextTick()?this.setImmediate=this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.setImmediate=this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.setImmediate=this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.setImmediate=this.createReadyStateChangeSetImmediate():this.setImmediate=this.createSetTimeoutSetImmediate();var e=function clearImmediate(t){delete clearImmediate.instance.tasksByHandle[t]};e.instance=this,this.clearImmediate=e}}return ImmediateDefinition.prototype.identify=function(t){return this.root.Object.prototype.toString.call(t)},ImmediateDefinition.prototype.canUseProcessNextTick=function(){return"[object process]"===this.identify(this.root.process)},ImmediateDefinition.prototype.canUseMessageChannel=function(){return Boolean(this.root.MessageChannel)},ImmediateDefinition.prototype.canUseReadyStateChange=function(){var t=this.root.document;return Boolean(t&&"onreadystatechange"in t.createElement("script"))},ImmediateDefinition.prototype.canUsePostMessage=function(){var t=this.root;if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}return!1},ImmediateDefinition.prototype.partiallyApplied=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=function result(){var t=result,e=t.handler,n=t.args;"function"==typeof e?e.apply(void 0,n):new Function(""+e)()};return i.handler=t,i.args=e,i},ImmediateDefinition.prototype.addFromSetImmediateArguments=function(t){return this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,t),this.nextHandle++},ImmediateDefinition.prototype.createProcessNextTickSetImmediate=function(){var t=function setImmediate(){var t=setImmediate.instance,e=t.addFromSetImmediateArguments(arguments);return t.root.process.nextTick(t.partiallyApplied(t.runIfPresent,e)),e};return t.instance=this,t},ImmediateDefinition.prototype.createPostMessageSetImmediate=function(){var t=this.root,e="setImmediate$"+t.Math.random()+"$",n=function globalMessageHandler(n){var i=globalMessageHandler.instance;n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&i.runIfPresent(+n.data.slice(e.length))};n.instance=this,t.addEventListener("message",n,!1);var i=function setImmediate(){var t=setImmediate,e=t.messagePrefix,n=t.instance,i=n.addFromSetImmediateArguments(arguments);return n.root.postMessage(e+i,"*"),i};return i.instance=this,i.messagePrefix=e,i},ImmediateDefinition.prototype.runIfPresent=function(t){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,t),0);else{var e=this.tasksByHandle[t];if(e){this.currentlyRunningATask=!0;try{e()}finally{this.clearImmediate(t),this.currentlyRunningATask=!1}}}},ImmediateDefinition.prototype.createMessageChannelSetImmediate=function(){var t=this,e=new this.root.MessageChannel;e.port1.onmessage=function(e){var n=e.data;t.runIfPresent(n)};var n=function setImmediate(){var t=setImmediate,e=t.channel,n=t.instance,i=n.addFromSetImmediateArguments(arguments);return e.port2.postMessage(i),i};return n.channel=e,n.instance=this,n},ImmediateDefinition.prototype.createReadyStateChangeSetImmediate=function(){var t=function setImmediate(){var t=setImmediate.instance,e=t.root,n=e.document,i=n.documentElement,r=t.addFromSetImmediateArguments(arguments),o=n.createElement("script");return o.onreadystatechange=function(){t.runIfPresent(r),o.onreadystatechange=null,i.removeChild(o),o=null},i.appendChild(o),r};return t.instance=this,t},ImmediateDefinition.prototype.createSetTimeoutSetImmediate=function(){var t=function setImmediate(){var t=setImmediate.instance,e=t.addFromSetImmediateArguments(arguments);return t.root.setTimeout(t.partiallyApplied(t.runIfPresent,e),0),e};return t.instance=this,t},ImmediateDefinition}();e.ImmediateDefinition=r,e.Immediate=new r(i.root)},function(t,e,n){
"use strict";var i=n(32),r=n(1304);e.Map=i.root.Map||function(){return r.MapPolyfill}()},function(t,e){"use strict";var n=function(){function MapPolyfill(){this.size=0,this._values=[],this._keys=[]}return MapPolyfill.prototype.get=function(t){var e=this._keys.indexOf(t);return e===-1?void 0:this._values[e]},MapPolyfill.prototype.set=function(t,e){var n=this._keys.indexOf(t);return n===-1?(this._keys.push(t),this._values.push(e),this.size++):this._values[n]=e,this},MapPolyfill.prototype.delete=function(t){var e=this._keys.indexOf(t);return e!==-1&&(this._values.splice(e,1),this._keys.splice(e,1),this.size--,!0)},MapPolyfill.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},MapPolyfill.prototype.forEach=function(t,e){for(var n=0;n<this.size;n++)t.call(e,this._values[n],this._keys[n])},MapPolyfill}();e.MapPolyfill=n},function(t,e,n){"use strict";var i=n(32),r=i.root.Object;"function"!=typeof r.assign&&!function(){r.assign=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(void 0===t||null===t)throw new TypeError("cannot convert undefined or null to object");for(var i=r(t),o=e.length,s=0;s<o;s++){var a=e[s];if(void 0!==a&&null!==a)for(var c in a)a.hasOwnProperty(c)&&(i[c]=a[c])}return i}}(),e.assign=r.assign},,function(t,e){"use strict";function not(t,e){function notPred(){return!notPred.pred.apply(notPred.thisArg,arguments)}return notPred.pred=t,notPred.thisArg=e,notPred}e.not=not},,function(t,e,n){"use strict";"use restrict";function dimension(t){for(var e=0,n=Math.max,i=0,r=t.length;i<r;++i)e=n(e,t[i].length);return e-1}function countVertices(t){for(var e=-1,n=Math.max,i=0,r=t.length;i<r;++i)for(var o=t[i],s=0,a=o.length;s<a;++s)e=n(e,o[s]);return e+1}function cloneCells(t){for(var e=new Array(t.length),n=0,i=t.length;n<i;++n)e[n]=t[n].slice(0);return e}function compareCells(t,e){var n=t.length,i=t.length-e.length,r=Math.min;if(i)return i;switch(n){case 0:return 0;case 1:return t[0]-e[0];case 2:var o=t[0]+t[1]-e[0]-e[1];return o?o:r(t[0],t[1])-r(e[0],e[1]);case 3:var s=t[0]+t[1],a=e[0]+e[1];if(o=s+t[2]-(a+e[2]))return o;var c=r(t[0],t[1]),u=r(e[0],e[1]),o=r(c,t[2])-r(u,e[2]);return o?o:r(c+t[2],s)-r(u+e[2],a);default:var l=t.slice(0);l.sort();var h=e.slice(0);h.sort();for(var p=0;p<n;++p)if(i=l[p]-h[p])return i;return 0}}function compareZipped(t,e){return compareCells(t[0],e[0])}function normalize(t,e){if(e){for(var n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=[t[r],e[r]];i.sort(compareZipped);for(var r=0;r<n;++r)t[r]=i[r][0],e[r]=i[r][1];return t}return t.sort(compareCells),t}function unique(t){if(0===t.length)return[];for(var e=1,n=t.length,i=1;i<n;++i){var r=t[i];if(compareCells(r,t[i-1])){if(i===e){e++;continue}t[e++]=r}}return t.length=e,t}function findCell(t,e){for(var n=0,i=t.length-1,r=-1;n<=i;){var o=n+i>>1,s=compareCells(t[o],e);s<=0?(0===s&&(r=o),n=o+1):s>0&&(i=o-1)}return r}function incidence(t,e){for(var n=new Array(t.length),r=0,o=n.length;r<o;++r)n[r]=[];for(var s=[],r=0,a=e.length;r<a;++r)for(var c=e[r],u=c.length,l=1,h=1<<u;l<h;++l){s.length=i.popCount(l);for(var p=0,f=0;f<u;++f)l&1<<f&&(s[p++]=c[f]);var d=findCell(t,s);if(!(d<0))for(;;)if(n[d++].push(r),d>=t.length||0!==compareCells(t[d],s))break}return n}function dual(t,e){if(!e)return incidence(unique(skeleton(t,0)),t,0);for(var n=new Array(e),i=0;i<e;++i)n[i]=[];for(var i=0,r=t.length;i<r;++i)for(var o=t[i],s=0,a=o.length;s<a;++s)n[o[s]].push(i);return n}function explode(t){for(var e=[],n=0,i=t.length;n<i;++n)for(var r=t[n],o=0|r.length,s=1,a=1<<o;s<a;++s){for(var c=[],u=0;u<o;++u)s>>>u&1&&c.push(r[u]);e.push(c)}return normalize(e)}function skeleton(t,e){if(e<0)return[];for(var n=[],r=(1<<e+1)-1,o=0;o<t.length;++o)for(var s=t[o],a=r;a<1<<s.length;a=i.nextCombination(a)){for(var c=new Array(e+1),u=0,l=0;l<s.length;++l)a&1<<l&&(c[u++]=s[l]);n.push(c)}return normalize(n)}function boundary(t){for(var e=[],n=0,i=t.length;n<i;++n)for(var r=t[n],o=0,s=r.length;o<s;++o){for(var a=new Array(r.length-1),c=0,u=0;c<s;++c)c!==o&&(a[u++]=r[c]);e.push(a)}return normalize(e)}function connectedComponents_dense(t,e){for(var n=new r(e),i=0;i<t.length;++i)for(var o=t[i],s=0;s<o.length;++s)for(var a=s+1;a<o.length;++a)n.link(o[s],o[a]);for(var c=[],u=n.ranks,i=0;i<u.length;++i)u[i]=-1;for(var i=0;i<t.length;++i){var l=n.find(t[i][0]);u[l]<0?(u[l]=c.length,c.push([t[i].slice(0)])):c[u[l]].push(t[i].slice(0))}return c}function connectedComponents_sparse(t){for(var e=unique(normalize(skeleton(t,0))),n=new r(e.length),i=0;i<t.length;++i)for(var o=t[i],s=0;s<o.length;++s)for(var a=findCell(e,[o[s]]),c=s+1;c<o.length;++c)n.link(a,findCell(e,[o[c]]));for(var u=[],l=n.ranks,i=0;i<l.length;++i)l[i]=-1;for(var i=0;i<t.length;++i){var h=n.find(findCell(e,[t[i][0]]));l[h]<0?(l[h]=u.length,u.push([t[i].slice(0)])):u[l[h]].push(t[i].slice(0))}return u}function connectedComponents(t,e){return e?connectedComponents_dense(t,e):connectedComponents_sparse(t)}var i=n(885),r=n(1347);e.dimension=dimension,e.countVertices=countVertices,e.cloneCells=cloneCells,e.compareCells=compareCells,e.normalize=normalize,e.unique=unique,e.findCell=findCell,e.incidence=incidence,e.dual=dual,e.explode=explode,e.skeleton=skeleton,e.boundary=boundary,e.connectedComponents=connectedComponents},function(t,e,n){var i;!function(){"use strict";function getSqDist(t,e){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}function getSqSegDist(t,e,n){var i=e.x,r=e.y,o=n.x-i,s=n.y-r;if(0!==o||0!==s){var a=((t.x-i)*o+(t.y-r)*s)/(o*o+s*s);a>1?(i=n.x,r=n.y):a>0&&(i+=o*a,r+=s*a)}return o=t.x-i,s=t.y-r,o*o+s*s}function simplifyRadialDist(t,e){for(var n,i=t[0],r=[i],o=1,s=t.length;o<s;o++)n=t[o],getSqDist(n,i)>e&&(r.push(n),i=n);return i!==n&&r.push(n),r}function simplifyDouglasPeucker(t,e){var n,i,r,o,s=t.length,a="undefined"!=typeof Uint8Array?Uint8Array:Array,c=new a(s),u=0,l=s-1,h=[],p=[];for(c[u]=c[l]=1;l;){for(i=0,n=u+1;n<l;n++)r=getSqSegDist(t[n],t[u],t[l]),r>i&&(o=n,i=r);i>e&&(c[o]=1,h.push(u,o,o,l)),l=h.pop(),u=h.pop()}for(n=0;n<s;n++)c[n]&&p.push(t[n]);return p}function simplify(t,e,n){var i=void 0!==e?e*e:1;return t=n?t:simplifyRadialDist(t,i),t=simplifyDouglasPeucker(t,i)}i=function(){return simplify}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))}()},function(t,e,n){var i=n(41),r=n(10).point,o=n(210),s=n(211);t.exports=function(t,e,n){var a;if("Feature"===t.type)a=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");a=t.coordinates}for(var c=0,u=0;u<a.length&&!(e>=c&&u===a.length-1);u++){if(c>=e){var l=e-c;if(l){var h=o(a[u],a[u-1])-180,p=s(a[u],l,h,n);return p}return r(a[u])}c+=i(a[u],a[u+1],n)}return r(a[a.length-1])}},function(t,e,n){function area(t){if("FeatureCollection"===t.type){for(var e=0,n=0;e<t.features.length;e++)t.features[e].geometry&&(n+=i(t.features[e].geometry));return n}return i("Feature"===t.type?t.geometry:t)}var i=n(1033).geometry;t.exports=area},function(t,e,n){var i=n(10).lineString,r=n(1314);t.exports=function(t,e,n){var o=i([]);o.properties=t.properties;for(var s=new r({points:t.geometry.coordinates.map(function(t){return{x:t[0],y:t[1]}}),duration:e,sharpness:n}),a=0;a<s.duration;a+=10){var c=s.pos(a);Math.floor(a/100)%2===0&&o.geometry.coordinates.push([c.x,c.y])}return o}},function(t,e){var n=function(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(var e=0;e<this.length-1;e++){var n=this.points[e],i=this.points[e+1];this.centers.push({x:(n.x+i.x)/2,y:(n.y+i.y)/2,z:(n.z+i.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var e=0;e<this.centers.length-1;e++){var n=this.centers[e],i=this.centers[e+1],r=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};n.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var i=0;i<this.duration;i+=10){var r=this.pos(i),o=Math.sqrt((r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y)+(r.z-n.z)*(r.z-n.z));o>t&&(e.push(i),n=r)}return e},n.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},n.prototype.pos=function(t){function bezier(t,e,n,i,r){var o=function(t){var e=t*t,n=e*t;return[n,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]},s=o(t),a={x:r.x*s[0]+i.x*s[1]+n.x*s[2]+e.x*s[3],y:r.y*s[0]+i.y*s[1]+n.y*s[2]+e.y*s[3],z:r.z*s[0]+i.z*s[1]+n.z*s[2]+e.z*s[3]};return a}var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var i=Math.floor((this.points.length-1)*n),r=(this.length-1)*n-i;return bezier(r,this.points[i],this.controls[i][1],this.controls[i+1][0],this.points[i+1])},t.exports=n},function(t,e,n){function bufferOp(t,e){var n=new o.io.GeoJSONReader,i=n.read(t.geometry),r=i.buffer(e),s=new o.io.GeoJSONWriter;return r=s.write(r),{type:"Feature",geometry:r,properties:{}}}var i=n(10),r=i.featureCollection,o=n(199),s=n(1034);t.exports=function(t,e,n){var o=i.distanceToDegrees(e,n),a=s(t),c=s(r(a.features.map(function(t){return bufferOp(t,o)})));return c.features.length>1?c:1===c.features.length?c.features[0]:void 0}},function(t,e,n){var i=n(116).coordEach,r=n(10).point;t.exports=function(t){var e=0,n=0,o=0;return i(t,function(t){e+=t[0],n+=t[1],o++},!0),r([e/o,n/o])}},function(t,e,n){var i=n(115);t.exports=function(t,e,n,r){return t.features.forEach(function(t){var o=e.features.filter(function(e){return i(e,t)}).map(function(t){return t.properties[n]});t.properties||(t.properties={}),t.properties[r]=o}),t}},function(t,e,n){var i=n(116);t.exports=function(t){function addToGroup(t,n,i){i?e[n].coordinates=e[n].coordinates.concat(t.geometry.coordinates):e[n].coordinates.push(t.geometry.coordinates),e[n].properties.push(t.properties)}var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},n=Object.keys(e).reduce(function(t,e){return t[e.replace("Multi","")]=e,t},{});return i.featureEach(t,function(t){t.geometry&&(e[t.geometry.type]?addToGroup(t,t.geometry.type,!0):n[t.geometry.type]&&addToGroup(t,n[t.geometry.type],!1))}),{type:"FeatureCollection",features:Object.keys(e).filter(function(t){return e[t].coordinates.length}).sort().map(function(t){return{type:"Feature",properties:{collectedProperties:e[t].properties},geometry:{type:t,coordinates:e[t].coordinates}}})}}},function(t,e,n){function concave(t,e,n){function filterTriangles(t){var i=t.geometry.coordinates[0][0],r=t.geometry.coordinates[0][1],s=t.geometry.coordinates[0][2],a=o(i,r,n),c=o(r,s,n),u=o(i,s,n);return a<=e&&c<=e&&u<=e}if("number"!=typeof e)throw new Error("maxEdge parameter is required");if("string"!=typeof n)throw new Error("units parameter is required");var r=i(t),s=r.features.filter(filterTriangles);return r.features=s,merge(r)}function merge(t){for(var e=JSON.parse(JSON.stringify(t.features[0])),n=t.features,i=0,o=n.length;i<o;i++){var s=n[i];s.geometry&&(e=r(e,s))}return e}var i=n(417),r=n(611),o=n(41);t.exports=concave},function(t,e,n){var i=n(116).coordEach,r=n(886),o=n(10).polygon;t.exports=function(t){var e=[];i(t,function(t){e.push(t)});var n=r(e);if(n.length>0){for(var s=[],a=0;a<n.length;a++)s.push(e[n[a][0]]);return s.push(e[n[n.length-1][1]]),o([s])}}},function(t,e,n){var i=n(199);t.exports=function(t,e){var n=JSON.parse(JSON.stringify(t)),r=JSON.parse(JSON.stringify(e));"Feature"!==n.type&&(n={type:"Feature",properties:{},geometry:n}),"Feature"!==r.type&&(r={type:"Feature",properties:{},geometry:r});var o=new i.io.GeoJSONReader,s=o.read(JSON.stringify(n.geometry)),a=o.read(JSON.stringify(r.geometry)),c=s.difference(a);if(!c.isEmpty()){var u=new i.io.GeoJSONWriter,l=u.write(c);return n.geometry=c,{type:"Feature",properties:n.properties,geometry:l}}}},function(t,e,n){var i=n(209),r=n(605);t.exports=function(t){return r(i(t))}},function(t,e,n){var i=n(116).coordEach;t.exports=function(t){return t=JSON.parse(JSON.stringify(t)),i(t,function(t){t.reverse()}),t}},function(t,e,n){var i=n(1336);t.exports=function(t,e){for(var n=t[0],r=t[1],o=t[2],s=(t[3],(o-n)/e),a={type:"FeatureCollection",features:[]},c=0;c<=e;c++)for(var u=0;u<=e;u++)a.features.push(i([c*s+n,u*s+r]));return a}},function(t,e,n){function hexagon(t,e,n){for(var i=[],o=0;o<6;o++){var s=t[0]+e*a[o],u=t[1]+n*c[o];i.push([s,u])}return i.push(i[0]),r([i])}function hexTriangles(t,e,n){for(var i=[],o=0;o<6;o++){var s=[];s.push(t),s.push([t[0]+e*a[o],t[1]+n*c[o]]),s.push([t[0]+e*a[(o+1)%6],t[1]+n*c[(o+1)%6]]),s.push(t),i.push(r([s]))}return i}for(var i=n(10).point,r=n(10).polygon,o=n(41),s=n(10).featureCollection,a=[],c=[],u=0;u<6;u++){var l=2*Math.PI/6*u;a.push(Math.cos(l)),c.push(Math.sin(l))}t.exports=function(t,e,n,r){var a=e/o(i([t[0],t[1]]),i([t[2],t[1]]),n),c=a*(t[2]-t[0]),u=e/o(i([t[0],t[1]]),i([t[0],t[3]]),n),l=u*(t[3]-t[1]),h=c/2,p=2*h,f=Math.sqrt(3)/2*l,d=t[2]-t[0],g=t[3]-t[1],y=.75*p,v=f,m=d/(p-h/2),b=Math.ceil(m);Math.round(m)===b&&b++;var x=(b*y-h/2-d)/2-h/2,S=Math.ceil(g/f),_=(g-S*f)/2,w=S*f-g>f/2;w&&(_-=f/4);for(var C=s([]),I=0;I<b;I++)for(var E=0;E<=S;E++){var L=I%2===1;if(!(0===E&&L||0===E&&w)){var T=I*y+t[0]-x,O=E*v+t[1]+_;L&&(O-=f/2),r?C.features.push.apply(C.features,hexTriangles([T,O],c/2,l/2)):C.features.push(hexagon([T,O],c/2,l/2))}}return C}},function(t,e,n){var i=n(199);t.exports=function(t,e){var n,r;n="Feature"===t.type?t.geometry:t,r="Feature"===e.type?e.geometry:e;var o=new i.io.GeoJSONReader,s=o.read(JSON.stringify(n)),a=o.read(JSON.stringify(r)),c=s.intersection(a);if(!c.isEmpty()){var u=new i.io.GeoJSONWriter,l=u.write(c);return{type:"Feature",properties:{},geometry:l}}}},function(t,e){function pointsEqual(t,e){var i=t.x-e.x,r=t.y-e.y;return i*i+r*r<n}function reverseList(t){for(var e=t.head;e;){var n=e.next;e.next=e.prev,e.prev=n,e=n}var n=t.head;t.head=t.tail,t.tail=n}function ContourBuilder(t){this.level=t,this.s=null,this.count=0}function Conrec(t){if(t)this.drawContour=t;else{var e=this;e.contours={},this.drawContour=function(t,n,i,r,o,s){var a=e.contours[s];a||(a=e.contours[s]=new ContourBuilder(o)),a.addSegment({x:t,y:n},{x:i,y:r})},this.contourList=function(){var t=[],n=e.contours;for(var i in n)for(var r=n[i].s,o=n[i].level;r;){var s=r.head,a=[];for(a.level=o,a.k=i;s&&s.p;)a.push(s.p),s=s.next;t.push(a),r=r.next}return t.sort(function(t,e){return t.k-e.k}),t}}this.h=new Array(5),this.sh=new Array(5),this.xh=new Array(5),this.yh=new Array(5)}t.exports=Conrec;var n=1e-10;ContourBuilder.prototype.remove_seq=function(t){t.prev?t.prev.next=t.next:this.s=t.next,t.next&&(t.next.prev=t.prev),--this.count},ContourBuilder.prototype.addSegment=function(t,e){for(var n=this.s,i=null,r=null,o=!1,s=!1;n&&(null==i&&(pointsEqual(t,n.head.p)?(i=n,o=!0):pointsEqual(t,n.tail.p)&&(i=n)),null==r&&(pointsEqual(e,n.head.p)?(r=n,s=!0):pointsEqual(e,n.tail.p)&&(r=n)),null==r||null==i);)n=n.next;var a=(null!=i?1:0)|(null!=r?2:0);switch(a){case 0:var c={p:t,prev:null},u={p:e,next:null};c.next=u,u.prev=c,i={head:c,tail:u,next:this.s,prev:null,closed:!1},this.s&&(this.s.prev=i),this.s=i,++this.count;break;case 1:var l={p:e};o?(l.next=i.head,l.prev=null,i.head.prev=l,i.head=l):(l.next=null,l.prev=i.tail,i.tail.next=l,i.tail=l);break;case 2:var l={p:t};s?(l.next=r.head,l.prev=null,r.head.prev=l,r.head=l):(l.next=null,l.prev=r.tail,r.tail.next=l,r.tail=l);break;case 3:if(i===r){var l={p:i.tail.p,next:i.head,prev:null};i.head.prev=l,i.head=l,i.closed=!0;break}switch((o?1:0)|(s?2:0)){case 0:reverseList(i);case 1:r.tail.next=i.head,i.head.prev=r.tail,r.tail=i.tail,this.remove_seq(i);break;case 3:reverseList(i);case 2:i.tail.next=r.head,r.head.prev=i.tail,i.tail=r.tail,this.remove_seq(r)}}},Conrec.prototype.contour=function(t,e,i,r,o,s,a,c,u){var l=this.h,h=this.sh,p=this.xh,f=this.yh,d=this.drawContour;this.contours={};for(var g,y,v,m,b,x,S=function(t,e){return(l[e]*p[t]-l[t]*p[e])/(l[e]-l[t])},_=function(t,e){return(l[e]*f[t]-l[t]*f[e])/(l[e]-l[t])},w=0,C=0,I=0,E=0,L=[0,1,1,0],T=[0,0,1,1],O=[[[0,0,8],[0,2,5],[7,6,9]],[[0,3,4],[1,3,1],[4,3,0]],[[9,6,7],[5,2,0],[8,0,0]]],N=o-1;N>=r;N--)for(var P=e;P<=i-1;P++){var M,R;if(M=Math.min(t[P][N],t[P][N+1]),R=Math.min(t[P+1][N],t[P+1][N+1]),b=Math.min(M,R),M=Math.max(t[P][N],t[P][N+1]),R=Math.max(t[P+1][N],t[P+1][N+1]),x=Math.max(M,R),x>=u[0]&&b<=u[c-1])for(var A=0;A<c;A++)if(u[A]>=b&&u[A]<=x){for(var F=4;F>=0;F--)F>0?(l[F]=t[P+L[F-1]][N+T[F-1]]-u[A],p[F]=s[P+L[F-1]],f[F]=a[N+T[F-1]]):(l[0]=.25*(l[1]+l[2]+l[3]+l[4]),p[0]=.5*(s[P]+s[P+1]),f[0]=.5*(a[N]+a[N+1])),l[F]>n?h[F]=1:l[F]<-n?h[F]=-1:h[F]=0;for(F=1;F<=4;F++)if(g=F,y=0,v=4!=F?F+1:1,m=O[h[g]+1][h[y]+1][h[v]+1],0!=m){switch(m){case 1:w=p[g],I=f[g],C=p[y],E=f[y];break;case 2:w=p[y],I=f[y],C=p[v],E=f[v];break;case 3:w=p[v],I=f[v],C=p[g],E=f[g];break;case 4:w=p[g],I=f[g],C=S(y,v),E=_(y,v);break;case 5:w=p[y],I=f[y],C=S(v,g),E=_(v,g);break;case 6:w=p[v],I=f[v],C=S(g,y),E=_(g,y);break;case 7:w=S(g,y),I=_(g,y),C=S(y,v),E=_(y,v);break;case 8:w=S(y,v),I=_(y,v),C=S(v,g),E=_(v,g);break;case 9:w=S(v,g),I=_(v,g),C=S(g,y),E=_(g,y)}d(w,I,C,E,u[A],A)}}}}},function(t,e,n){var i=n(417),r=n(115),o=n(1324),s=n(209),a=n(608),c=n(10).featureCollection,u=n(10).lineString,l=n(610),h=n(1327);t.exports=function(t,e,n,p){for(var f=i(t,e),d=s(t),g=l(d),y=o(g,n),v=[],m=0;m<y.features.length;m++)for(var b=y.features[m],x=0;x<f.features.length;x++){var S=f.features[x];r(b,S)&&(b.properties={},b.properties[e]=a(b,S))}for(var _=Math.sqrt(y.features.length),w=0;w<_;w++){for(var C=y.features.slice(w*_,(w+1)*_),I=[],E=0;E<C.length;E++)C[E].properties?I.push(C[E].properties[e]):I.push(0);v.push(I)}for(var L=(g[2]-g[0])/_,T=[],O=[],N=0;N<_;N++)T.push(N*L+g[0]),O.push(N*L+g[1]);var P=new h;P.contour(v,0,n,0,n,T,O,p.length,p);var M=P.contourList(),R=c([]);return M.forEach(function(t){if(t.length>2){var n=[];t.forEach(function(t){n.push([t.x,t.y])});var i=u(n);i.properties={},i.properties[e]=t.level,R.features.push(i)}}),R}},function(t,e,n){function lineIntersects(t,e,n,i,r,o,s,a){var c,u,l,h,p,f={x:null,y:null,onLine1:!1,onLine2:!1};return c=(a-o)*(n-t)-(s-r)*(i-e),0===c?null!==f.x&&null!==f.y&&f:(u=e-o,l=t-r,h=(s-r)*u-(a-o)*l,p=(n-t)*u-(i-e)*l,u=h/c,l=p/c,f.x=t+u*(n-t),f.y=e+u*(i-e),u>=0&&u<=1&&(f.onLine1=!0),l>=0&&l<=1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}var i=n(10).point;t.exports=function(t){var e,n={type:"FeatureCollection",features:[]};return e="Feature"===t.type?t.geometry:t,e.coordinates.forEach(function(t){e.coordinates.forEach(function(e){for(var r=0;r<t.length-1;r++)for(var o=0;o<e.length-1;o++)if(t!==e||1!==Math.abs(r-o)&&Math.abs(r-o)!==t.length-2){var s=lineIntersects(t[r][0],t[r][1],t[r+1][0],t[r+1][1],e[o][0],e[o][1],e[o+1][0],e[o+1][1]);s&&n.features.push(i([s[0],s[1]]))}})}),n}},function(t,e,n){function length(t,e){for(var n,o=0,s=r(t[0]),a=r(t[0]),c=1;c<t.length;c++)a.geometry.coordinates=t[c],o+=i(s,a,e),n=s,s=a,a=n;return o}var i=n(41),r=n(10).point;t.exports=function lineDistance(t,e){if("FeatureCollection"===t.type)return t.features.reduce(function(t,n){return t+lineDistance(n,e)},0);var n,i,r="Feature"===t.type?t.geometry:t;if("LineString"===r.type)return length(r.coordinates,e);if("Polygon"===r.type||"MultiLineString"===r.type){for(n=0,i=0;i<r.coordinates.length;i++)n+=length(r.coordinates[i],e);return n}if("MultiPolygon"===t.type){for(n=0,i=0;i<r.coordinates.length;i++)for(var o=0;o<r.coordinates[i].length;o++)n+=length(r.coordinates[i][o],e);return n}throw new Error("input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry (or a FeatureCollection containing only those types)")}},function(t,e,n){var i=n(10).lineString,r=n(609);t.exports=function(t,e,n){var o;if("Feature"===n.type)o=n.geometry.coordinates;else{if("LineString"!==n.type)throw new Error("input must be a LineString Feature or Geometry");o=n.coordinates}var s,a=r(n,t),c=r(n,e);s=a.properties.index<=c.properties.index?[a,c]:[c,a];for(var u=i([s[0].geometry.coordinates],{}),l=s[0].properties.index+1;l<s[1].properties.index+1;l++)u.geometry.coordinates.push(o[l]);return u.geometry.coordinates.push(s[1].geometry.coordinates),u}},function(t,e,n){var i=n(210),r=n(211),o=n(41);t.exports=function(t,e){var n=o(t,e,"miles"),s=i(t,e),a=r(t,n/2,s,"miles");return a}},function(t,e,n){var i=n(41);t.exports=function(t,e){for(var n,r=1/0,o=0;o<e.features.length;o++){var s=i(t,e.features[o],"miles");s<r&&(n=e.features[o],r=s)}return n}},function(t,e,n){var i=n(10).point,r=n(10).featureCollection,o=n(41);t.exports=function(t,e,n){for(var s=r([]),a=e/o(i([t[0],t[1]]),i([t[2],t[1]]),n),c=a*(t[2]-t[0]),u=e/o(i([t[0],t[1]]),i([t[0],t[3]]),n),l=u*(t[3]-t[1]),h=t[0];h<=t[2];){for(var p=t[1];p<=t[3];)s.features.push(i([h,p])),p+=l;h+=c}return s}},function(t,e,n){function pointOnSurface(t){"FeatureCollection"!==t.type&&("Feature"!==t.type&&(t={type:"Feature",geometry:t,properties:{}}),t=i([t]));for(var e=r(t),n=!1,c=0;!n&&c<t.features.length;){var u,l,h,p,f,d,g,y=t.features[c].geometry,v=!1;if("Point"===y.type)e.geometry.coordinates[0]===y.coordinates[0]&&e.geometry.coordinates[1]===y.coordinates[1]&&(n=!0);else if("MultiPoint"===y.type){var m=!1;for(g=0;!m&&g<y.coordinates.length;)e.geometry.coordinates[0]===y.coordinates[g][0]&&e.geometry.coordinates[1]===y.coordinates[g][1]&&(n=!0,m=!0),g++}else if("LineString"===y.type)for(g=0;!v&&g<y.coordinates.length-1;)u=e.geometry.coordinates[0],l=e.geometry.coordinates[1],h=y.coordinates[g][0],p=y.coordinates[g][1],f=y.coordinates[g+1][0],d=y.coordinates[g+1][1],pointOnSegment(u,l,h,p,f,d)&&(v=!0,n=!0),g++;else if("MultiLineString"===y.type)for(var b=0;b<y.coordinates.length;){v=!1,g=0;for(var x=y.coordinates[b];!v&&g<x.length-1;)u=e.geometry.coordinates[0],l=e.geometry.coordinates[1],h=x[g][0],p=x[g][1],f=x[g+1][0],d=x[g+1][1],pointOnSegment(u,l,h,p,f,d)&&(v=!0,n=!0),g++;b++}else if("Polygon"===y.type||"MultiPolygon"===y.type){var S={type:"Feature",geometry:y,properties:{}};s(e,S)&&(n=!0)}c++}if(n)return e;var _=i([]);for(c=0;c<t.features.length;c++)_.features=_.features.concat(a(t.features[c]).features);var w,C=1/0;for(c=0;c<_.features.length;c++){var I=o(e,_.features[c],"miles");I<C&&(C=I,w=_.features[c])}return w}function pointOnSegment(t,e,n,i,r,o){var s=Math.sqrt((r-n)*(r-n)+(o-i)*(o-i)),a=Math.sqrt((t-n)*(t-n)+(e-i)*(e-i)),c=Math.sqrt((r-t)*(r-t)+(o-e)*(o-e));if(s===a+c)return!0}var i=n(10).featureCollection,r=n(606),o=n(41),s=n(115),a=n(607);t.exports=pointOnSurface},function(t,e){var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};t.exports=function(t,e){if(!n(t))throw new Error("Coordinates must be an array");if(t.length<2)throw new Error("Coordinates must be at least 2 numbers long");return{type:"Feature",geometry:{type:"Point",coordinates:t},properties:e||{}}}},function(t,e,n){var i=n(1035);t.exports=function(t,e,n){switch(n=n||{},e=e||1,t){case"point":case"points":case void 0:return i.point(e,n.bbox);case"polygon":case"polygons":return i.polygon(e,n.num_vertices,n.max_radial_length,n.bbox);default:throw new Error("Unknown type given: valid options are points and polygons")}}},function(t,e,n){function getRandomSubarray(t,e){for(var n,i,r=t.slice(0),o=t.length,s=o-e;o-- >s;)i=Math.floor((o+1)*Math.random()),n=r[i],r[i]=r[o],r[o]=n;return r.slice(s)}var i=n(10).featureCollection;t.exports=function(t,e){var n=i(getRandomSubarray(t.features,e));return n}},function(t,e,n){function simplifyHelper(t,e,n){return"LineString"===t.geometry.type?{type:"LineString",coordinates:simplifyLine(t.geometry.coordinates,e,n)}:"MultiLineString"===t.geometry.type?{type:"MultiLineString",coordinates:t.geometry.coordinates.map(function(t){return simplifyLine(t,e,n)})}:"Polygon"===t.geometry.type?{type:"Polygon",coordinates:simplifyPolygon(t.geometry.coordinates,e,n)}:"MultiPolygon"===t.geometry.type?{type:"MultiPolygon",coordinates:t.geometry.coordinates.map(function(t){return simplifyPolygon(t,e,n)})}:t}function checkValidity(t){return!(t.length<3)&&(3!==t.length||t[2][0]!==t[0][0]||t[2][1]!==t[0][1])}function simpleFeature(t,e){return{type:"Feature",geometry:t,properties:e}}function simplifyLine(t,e,n){return i(t.map(function(t){return{x:t[0],y:t[1]}}),e,n).map(function(t){return[t.x,t.y]})}function simplifyPolygon(t,e,n){return t.map(function(t){var r=t.map(function(t){return{x:t[0],y:t[1]}});if(r.length<4)throw new Error("Invalid polygon");for(var o=i(r,e,n).map(function(t){return[t.x,t.y]});!checkValidity(o);)e-=.01*e,o=i(r,e,n).map(function(t){return[t.x,t.y]});return o[o.length-1][0]===o[0][0]&&o[o.length-1][1]===o[0][1]||o.push(o[0]),o})}var i=n(1310),r=["LineString","MultiLineString","Polygon","MultiPolygon"];t.exports=function(t,e,n){return"Feature"===t.type?simpleFeature(simplifyHelper(t,e,n),t.properties):"FeatureCollection"===t.type?{type:"FeatureCollection",features:t.features.map(function(t){var i=simplifyHelper(t,e,n);return r.indexOf(i.type)>-1?simpleFeature(i,t.properties):i})}:"GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(function(t){return r.indexOf(t.type)>-1?simplifyHelper({type:"Feature",geometry:t},e,n):t})}:t}},function(t,e,n){var i=n(10).featureCollection,r=n(10).point,o=n(10).polygon,s=n(41);t.exports=function(t,e,n){for(var a=i([]),c=e/s(r([t[0],t[1]]),r([t[2],t[1]]),n),u=c*(t[2]-t[0]),l=e/s(r([t[0],t[1]]),r([t[0],t[3]]),n),h=l*(t[3]-t[1]),p=t[0];p<=t[2];){for(var f=t[1];f<=t[3];){var d=o([[[p,f],[p,f+h],[p+u,f+h],[p+u,f],[p,f]]]);a.features.push(d),f+=h}p+=u}return a}},function(t,e,n){var i=n(115);t.exports=function(t,e,n,r){return t=JSON.parse(JSON.stringify(t)),e=JSON.parse(JSON.stringify(e)),t.features.forEach(function(t){t.properties||(t.properties={}),e.features.forEach(function(e){if(void 0===t.properties[r]){var o=i(t,e);o&&(t.properties[r]=e.properties[n])}})}),t}},function(t,e,n){function processPolygon(t){var e=flattenCoords(t),n=2,o=r(e.vertices,e.holes,n),s=[],a=[];o.forEach(function(t,i){var r=o[i];a.push([e.vertices[r*n],e.vertices[r*n+1]])});for(var c=0;c<a.length;c+=3){var u=a.slice(c,c+3);u.push(a[c]),s.push(i([u]))}return s}function flattenCoords(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}var i=n(10).polygon,r=n(1032);t.exports=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=processPolygon(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(processPolygon(t))}),e}},function(t,e,n){var i=n(10).featureCollection,r=n(10).polygon,o=n(41);t.exports=function(t,e,n){for(var s=i([]),a=e/o([t[0],t[1]],[t[2],t[1]],n),c=a*(t[2]-t[0]),u=e/o([t[0],t[1]],[t[0],t[3]],n),l=u*(t[3]-t[1]),h=0,p=t[0];p<=t[2];){for(var f=0,d=t[1];d<=t[3];)h%2===0&&f%2===0?s.features.push(r([[[p,d],[p,d+l],[p+c,d],[p,d]]]),r([[[p,d+l],[p+c,d+l],[p+c,d],[p,d+l]]])):h%2===0&&f%2===1?s.features.push(r([[[p,d],[p+c,d+l],[p+c,d],[p,d]]]),r([[[p,d],[p,d+l],[p+c,d+l],[p,d]]])):f%2===0&&h%2===1?s.features.push(r([[[p,d],[p,d+l],[p+c,d+l],[p,d]]]),r([[[p,d],[p+c,d+l],[p+c,d],[p,d]]])):f%2===1&&h%2===1&&s.features.push(r([[[p,d],[p,d+l],[p+c,d],[p,d]]]),r([[[p,d+l],[p+c,d+l],[p+c,d],[p,d+l]]])),d+=l,f++;h++,p+=c}return s}},function(t,e,n){var i=n(115),r=n(10).featureCollection;t.exports=function(t,e){for(var n=r([]),o=0;o<e.features.length;o++)for(var s=0;s<t.features.length;s++){var a=i(t.features[s],e.features[o]);a&&n.features.push(t.features[s])}return n}},function(t,e,n){t.exports={isolines:n(1328),convex:n(1320),within:n(1344),concave:n(1319),difference:n(1321),collect:n(1317),flip:n(1323),simplify:n(1339),bezier:n(1313),tag:n(1341),sample:n(1338),envelope:n(1322),square:n(610),midpoint:n(1332),buffer:n(1315),center:n(606),centroid:n(1316),combine:n(1318),distance:n(41),explode:n(607),bbox:n(209),tesselate:n(1342),bboxPolygon:n(605),inside:n(115),intersect:n(1326),nearest:n(1333),planepoint:n(608),random:n(1337),tin:n(417),union:n(611),bearing:n(210),destination:n(211),kinks:n(1329),pointOnSurface:n(1335),area:n(1312),along:n(1311),lineDistance:n(1330),lineSlice:n(1331),pointOnLine:n(609),pointGrid:n(1334),squareGrid:n(1340),triangleGrid:n(1343),hexGrid:n(1325)};var i=n(10);t.exports.point=i.point,t.exports.polygon=i.polygon,t.exports.lineString=i.lineString,t.exports.multiPoint=i.multiPoint,t.exports.multiPolygon=i.multiPolygon,t.exports.multiLineString=i.multiLineString,t.exports.feature=i.feature,t.exports.featureCollection=i.featureCollection,t.exports.geometryCollection=i.geometryCollection},function(t,e){"use strict";function fastTwoSum(t,e,n){var i=t+e,r=i-t,o=i-r,s=e-r,a=t-o;return n?(n[0]=a+s,n[1]=i,n):[a+s,i]}t.exports=fastTwoSum},function(t,e){"use strict";"use restrict";function UnionFind(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}t.exports=UnionFind;var n=UnionFind.prototype;Object.defineProperty(n,"length",{get:function(){return this.roots.length}}),n.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},n.find=function(t){for(var e=t,n=this.roots;n[t]!==t;)t=n[t];for(;n[e]!==t;){var i=n[e];n[e]=t,e=i}return t},n.link=function(t,e){var n=this.find(t),i=this.find(e);if(n!==i){var r=this.ranks,o=this.roots,s=r[n],a=r[i];s<a?o[n]=i:a<s?o[i]=n:(o[i]=n,++r[n])}}},function(t,e){t.exports.RADIUS=6378137,t.exports.FLATTENING=1/298.257223563,t.exports.POLAR_RADIUS=6356752.3142},function(t,e){t.exports=mapboxgl},function(t,e,n){"use strict";function main(){return i.platformBrowserDynamic().bootstrapModule(s.AppModule).then(function(t){return t}).then(r.decorateModuleRef).catch(function(t){return console.error(t)})}var i=n(215),r=n(418),o=n(216),s=n(615);e.main=main,o.bootloader(main)}],[1350]);